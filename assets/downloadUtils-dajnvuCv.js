import{T as s}from"./index-CrFC4Yab.js";const d=async(o,a="AI_Magic",n="jpg")=>{var c;if(!o)return s.fail("文件地址无效"),!1;try{const r=((c=o.split(".").pop())==null?void 0:c.toLowerCase())||n,e=`${a}_${Date.now()}.${r}`,t=await fetch(o,{method:"GET",headers:{"Cache-Control":"no-cache"}});if(!t.ok)throw new Error(`HTTP ${t.status}: ${t.statusText}`);const m=await t.blob(),l=window.URL.createObjectURL(m),i=document.createElement("a");return i.href=l,i.download=e,i.style.display="none",document.body.appendChild(i),i.click(),document.body.removeChild(i),setTimeout(()=>{window.URL.revokeObjectURL(l)},100),s.success("图片已保存到本地"),!0}catch(r){console.error("下载失败:",r);try{const e=document.createElement("a");return e.href=o,e.download=`${a}_${Date.now()}.${n}`,e.target="_blank",e.rel="noopener noreferrer",e.style.display="none",document.body.appendChild(e),e.click(),document.body.removeChild(e),s.success("图片下载已开始"),!0}catch(e){return console.error("备用下载方法也失败:",e),s.fail("下载失败，请重试或检查网络连接"),!1}}},p=async(o,a="AI_Magic",n="mp4")=>{var c;if(!o)return s.fail("文件地址无效"),!1;try{const r=((c=o.split(".").pop())==null?void 0:c.toLowerCase())||n,e=`${a}_${Date.now()}.${r}`,t=document.createElement("a");return t.href=o,t.download=e,t.target="_blank",t.rel="noopener noreferrer",t.style.display="none",document.body.appendChild(t),t.click(),document.body.removeChild(t),s.success("视频下载已开始"),!0}catch(r){return console.error("视频下载失败:",r),s.fail("下载失败，请重试"),!1}},f=async(o,a="AI_Magic")=>{var e;if(!o)return s.fail("文件地址无效"),!1;const n=(e=o.split(".").pop())==null?void 0:e.toLowerCase(),c=["mp4","webm","ogg","avi","mov","mkv"],r=["jpg","jpeg","png","gif","bmp","webp","svg"];return c.includes(n)?await p(o,a,n):r.includes(n)?await d(o,a,n):await d(o,a,n||"file")};export{f as downloadFile,d as downloadImage,p as downloadVideo};
