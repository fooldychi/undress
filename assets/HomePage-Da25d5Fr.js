import{a as O,A as U,_ as j,r as C,c as m,o as l,w as u,u as S,b as w,d as k,l as d,T as _,e as D,f as $,g as s,h as A,F,i as z,t as P,j as b,n as N,k as B,m as q,p as L}from"./index-BSQYSu5Q.js";import{M as V,a as W}from"./UnifiedImageProcessingTemplate.vue_vue_type_style_index_0_scoped_1007aace_lang-Db4BZ7XU.js";import{S as H}from"./SvgIcon-CAWj49Xd.js";const G=[{id:"clothes-swap",title:"一键褪衣",description:"智能识别人物轮廓，快速移除照片中的服装，体验前沿AI技术",route:"/clothes-swap",icon:{type:"svg",name:"undress-woman",size:28,color:"#667eea"},iconClass:"undress-icon",tags:[{text:"AI识别",type:"primary"},{text:"快速处理",type:"success"}],requireLogin:!0,enabled:!0,order:1,category:"image-processing",pointsCost:20,description_admin:"一键褪衣功能管理"},{id:"face-swap",title:"极速换脸",description:"精准面部识别技术，实现自然的人脸替换效果，创造有趣内容",route:"/face-swap",icon:{type:"svg",name:"face-swap",size:28,color:"#f093fb"},iconClass:"faceswap-icon",tags:[{text:"面部识别",type:"warning"},{text:"自然效果",type:"primary"}],requireLogin:!0,enabled:!0,order:2,category:"image-processing",pointsCost:20,description_admin:"极速换脸功能管理"}];function K(){return G.filter(o=>o.enabled).sort((o,t)=>o.order-t.order)}async function E(){try{console.log("🔄 从API获取功能配置...");const o=await O(U.WORKFLOW_CONFIG_FEATURES);if(!o.success)throw new Error(o.message||"获取功能配置失败");const t=o.data.map(r=>{const e={...r};return e.icon&&e.icon.type==="custom"&&(e.icon.component==="UndressWomanIcon"?e.icon={type:"svg",name:"undress-woman",size:e.icon.size||28,color:e.icon.color||"#667eea"}:e.icon.component==="FaceSwapIcon"&&(e.icon={type:"svg",name:"face-swap",size:e.icon.size||28,color:e.icon.color||"#f093fb"})),e});return console.log(`✅ 获取到 ${t.length} 个启用的功能`),t}catch(o){return console.warn("⚠️ 从API获取功能配置失败，使用默认配置:",o.message),K()}}function M(o,t=!1){const{color:r,opacity:e=.2}=o,a=t?e+.1:e,f=t?e+.2:e+.1,i=Z(r);return i?{background:`linear-gradient(135deg, rgba(${i.r}, ${i.g}, ${i.b}, ${a}), rgba(${i.r}, ${i.g}, ${i.b}, ${a-.1}))`,backdropFilter:"blur(10px)",WebkitBackdropFilter:"blur(10px)",border:`1px solid rgba(${i.r}, ${i.g}, ${i.b}, ${f})`}:(console.warn("Invalid color format:",r),{})}function Z(o){if(o=o.replace("#",""),o.length===3&&(o=o.split("").map(a=>a+a).join("")),o.length!==6)return null;const t=parseInt(o.substring(0,2),16),r=parseInt(o.substring(2,4),16),e=parseInt(o.substring(4,6),16);return{r:t,g:r,b:e}}function T(){return typeof window>"u"?!1:window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?!0:document.documentElement.getAttribute("data-theme")==="dark"}function R(o,t){const r=Object.keys(t).map(e=>`  ${e.replace(/([A-Z])/g,"-$1").toLowerCase()}: ${t[e]};`);return`${o} {
${r.join(`
`)}
}`}function x(o,t="dynamic-styles"){if(typeof document>"u")return;let r=document.getElementById(t);r||(r=document.createElement("style"),r.id=t,document.head.appendChild(r)),r.textContent=o}const J={__name:"HomePage",setup(o,{expose:t}){t();const r=S(),e=w(null),a=w([]),f=()=>{const c=T();let g=[];a.value.forEach(p=>{if(p.iconClass&&p.icon.color){const y=M({color:p.icon.color,opacity:.2},c),h=R(`.${p.iconClass}`,y);g.push(h)}}),g.length>0&&x(g.join(`

`),"feature-icon-styles")};k(async()=>{try{a.value=await E(),f()}catch(c){d.error("获取功能配置失败:",c),_.fail("加载功能列表失败")}});const n={router:r,mobilePageContainerRef:e,featureConfigs:a,generateDynamicStyles:f,navigateTo:c=>{const{route:g,requireLogin:p,title:y}=c;if(d.user(`点击功能: ${y}`),p&&!$.isLoggedIn()){d.debug("未登录，显示登录提示"),_.fail("请先登录后再使用此功能"),e.value&&e.value.showLoginModal();return}try{r.push(g),d.debug(`导航到: ${g}`)}catch(h){d.error("导航失败:",h),_.fail(`导航到 ${y} 失败，请刷新页面重试`)}},handleUserLogin:c=>{d.user("用户登录成功")},handleUserLogout:()=>{d.user("用户已登出")},ref:w,onMounted:k,computed:D,get useRouter(){return S},get Toast(){return _},get MobilePageContainer(){return W},get MobileCard(){return V},get SvgIcon(){return H},get authApi(){return $},get fetchFeaturesFromAPI(){return E},get generateIconStyle(){return M},get isDarkTheme(){return T},get injectCSS(){return x},get createCSSRule(){return R},get logger(){return d}};return Object.defineProperty(n,"__isScriptSetup",{enumerable:!1,value:!0}),n}},Q={class:"home-header"},X={class:"welcome-section"},Y={class:"app-title"},ee={class:"features-section"},oe={class:"feature-content"},te={class:"feature-description"},ne={class:"feature-tags"};function re(o,t,r,e,a,f){const i=C("van-notice-bar"),v=C("van-icon"),I=C("van-tag");return l(),m(e.MobilePageContainer,{ref:"mobilePageContainerRef",title:"AI Magic",onLogin:e.handleUserLogin,onLogout:e.handleUserLogout},{notice:u(()=>[L(i,{scrollable:!0,speed:"50",class:"beta-notice"},{default:u(()=>t[0]||(t[0]=[b(" ⚠️ 建议在 "),s("b",null,"22:00-24:00",-1),b(" 时间段使用，保证服务器空闲。 AI应用仅供个人娱乐，请勿在互联网传播 ❕︎ ")])),_:1,__:[0]})]),header:u(()=>[s("div",Q,[s("div",X,[s("h1",Y,[L(v,{name:"magic",size:"32",color:"#FFD700"}),t[1]||(t[1]=b(" AI Magic "))]),t[2]||(t[2]=s("p",{class:"app-subtitle"},"智能图像处理，释放创意无限可能",-1))])])]),footer:u(()=>t[3]||(t[3]=[s("div",{class:"home-footer"},[s("div",{class:"footer-content"},[s("p",{class:"copyright"},"© 2025 AI Magic 智能图像处理应用"),s("p",{class:"disclaimer"},"(仅供个人娱乐，请勿在互联网传播，否则后果自负)")])],-1)])),default:u(()=>[s("div",ee,[(l(!0),A(F,null,z(e.featureConfigs,n=>(l(),m(e.MobileCard,{key:n.id,title:n.title,clickable:!0,"show-arrow":!0,inset:"",onClick:c=>e.navigateTo(n),class:"feature-card"},{icon:u(()=>[s("div",{class:N(["feature-icon",n.iconClass])},[n.icon.type==="svg"?(l(),m(e.SvgIcon,{key:0,name:n.icon.name,size:n.icon.size,color:n.icon.color},null,8,["name","size","color"])):n.icon.type==="custom"?(l(),m(q(n.icon.component),{key:1,size:n.icon.size,color:n.icon.color},null,8,["size","color"])):n.icon.type==="vant"?(l(),m(v,{key:2,name:n.icon.name,size:n.icon.size,color:n.icon.color},null,8,["name","size","color"])):B("",!0)],2)]),default:u(()=>[s("div",oe,[s("div",te,P(n.description),1),s("div",ne,[(l(!0),A(F,null,z(n.tags,c=>(l(),m(I,{key:c.text,type:c.type,size:"small"},{default:u(()=>[b(P(c.text),1)]),_:2},1032,["type"]))),128))])])]),_:2},1032,["title","onClick"]))),128))])]),_:1},512)}const ce=j(J,[["render",re],["__scopeId","data-v-9b48b94e"],["__file","D:/workspace/AIMagic/client/src/views/HomePage.vue"]]);export{ce as default};
