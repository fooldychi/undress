{
    "sourceFile": "server/simple-package.bat",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 2,
            "patches": [
                {
                    "date": 1753709781313,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1753709802479,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -117,10 +117,9 @@\n echo # AIMagic Server Deployment Package > \"aimagic-server-production\\DEPLOYMENT_README.md\"\n echo. >> \"aimagic-server-production\\DEPLOYMENT_README.md\"\n echo ## Deployment Steps >> \"aimagic-server-production\\DEPLOYMENT_README.md\"\n echo 1. Upload this directory to server >> \"aimagic-server-production\\DEPLOYMENT_README.md\"\n-echo 2. Run: npm install --production >> \"aimagic-server-production\\DEPLOYMENT_README.md\"\n-echo 3. Run: deploy-en.bat >> \"aimagic-server-production\\DEPLOYMENT_README.md\"\n+echo 2. Run: deploy-simple.bat >> \"aimagic-server-production\\DEPLOYMENT_README.md\"\n echo. >> \"aimagic-server-production\\DEPLOYMENT_README.md\"\n echo ## Package Time >> \"aimagic-server-production\\DEPLOYMENT_README.md\"\n echo %date% %time% >> \"aimagic-server-production\\DEPLOYMENT_README.md\"\n \n"
                },
                {
                    "date": 1753709814599,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -154,8 +154,8 @@\n echo ========================================\n echo.\n echo [SUCCESS] All files verified!\n echo [INFO] Upload the 'aimagic-server-production' directory to server\n-echo [INFO] Run 'deploy-en.bat' on server after upload\n+echo [INFO] Run 'deploy-simple.bat' on server after upload\n echo.\n echo Press any key to exit...\n pause >nul\n"
                }
            ],
            "date": 1753709781313,
            "name": "Commit-0",
            "content": "@echo off\necho ========================================\necho    AIMagic Simple Package Script\necho ========================================\necho Start Time: %date% %time%\necho ========================================\necho.\n\nREM Clean old package\necho [INFO] Cleaning old package...\nif exist \"aimagic-server-production\" rmdir /s /q \"aimagic-server-production\"\n\nREM Create directories\necho [INFO] Creating directories...\nmkdir \"aimagic-server-production\"\nmkdir \"aimagic-server-production\\src\"\nmkdir \"aimagic-server-production\\src\\scripts\"\nmkdir \"aimagic-server-production\\logs\"\nmkdir \"aimagic-server-production\\uploads\"\nmkdir \"aimagic-server-production\\uploads\\images\"\nmkdir \"aimagic-server-production\\uploads\\temp\"\n\nREM Copy source code\necho [INFO] Copying source code...\nif exist \"src\" (\n    xcopy /E /I \"src\" \"aimagic-server-production\\src\"\n    echo [SUCCESS] Source code copied\n) else (\n    echo [ERROR] src directory not found!\n    pause\n    exit /b 1\n)\n\nREM Copy configuration files\necho [INFO] Copying configuration files...\n\nif exist \"production-package.json\" (\n    copy \"production-package.json\" \"aimagic-server-production\\package.json\"\n    echo [SUCCESS] package.json copied\n) else (\n    echo [ERROR] production-package.json not found!\n    pause\n    exit /b 1\n)\n\nif exist \".env.production\" (\n    copy \".env.production\" \"aimagic-server-production\\\"\n    echo [SUCCESS] .env.production copied\n) else (\n    echo [ERROR] .env.production not found!\n    pause\n    exit /b 1\n)\n\nif exist \"ecosystem.config.js\" (\n    copy \"ecosystem.config.js\" \"aimagic-server-production\\\"\n    echo [SUCCESS] ecosystem.config.js copied\n) else (\n    echo [ERROR] ecosystem.config.js not found!\n    pause\n    exit /b 1\n)\n\nREM Copy deployment scripts\necho [INFO] Copying deployment scripts...\nif exist \"deploy-simple.bat\" (\n    copy \"deploy-simple.bat\" \"aimagic-server-production\\\"\n    echo [SUCCESS] deploy-simple.bat copied\n) else (\n    echo [ERROR] deploy-simple.bat not found!\n    pause\n    exit /b 1\n)\n\nREM Create health check script\necho [INFO] Creating health check script...\necho const http = require('http'); > \"aimagic-server-production\\src\\scripts\\health-check.js\"\necho. >> \"aimagic-server-production\\src\\scripts\\health-check.js\"\necho console.log('Starting health check...'); >> \"aimagic-server-production\\src\\scripts\\health-check.js\"\necho. >> \"aimagic-server-production\\src\\scripts\\health-check.js\"\necho const options = { >> \"aimagic-server-production\\src\\scripts\\health-check.js\"\necho   hostname: 'localhost', >> \"aimagic-server-production\\src\\scripts\\health-check.js\"\necho   port: 3007, >> \"aimagic-server-production\\src\\scripts\\health-check.js\"\necho   path: '/api/health', >> \"aimagic-server-production\\src\\scripts\\health-check.js\"\necho   method: 'GET', >> \"aimagic-server-production\\src\\scripts\\health-check.js\"\necho   timeout: 5000 >> \"aimagic-server-production\\src\\scripts\\health-check.js\"\necho }; >> \"aimagic-server-production\\src\\scripts\\health-check.js\"\necho. >> \"aimagic-server-production\\src\\scripts\\health-check.js\"\necho const req = http.request(options, (res) =^> { >> \"aimagic-server-production\\src\\scripts\\health-check.js\"\necho   if (res.statusCode === 200) { >> \"aimagic-server-production\\src\\scripts\\health-check.js\"\necho     console.log('Health check passed'); >> \"aimagic-server-production\\src\\scripts\\health-check.js\"\necho     process.exit(0); >> \"aimagic-server-production\\src\\scripts\\health-check.js\"\necho   } else { >> \"aimagic-server-production\\src\\scripts\\health-check.js\"\necho     console.log('Health check failed:', res.statusCode); >> \"aimagic-server-production\\src\\scripts\\health-check.js\"\necho     process.exit(1); >> \"aimagic-server-production\\src\\scripts\\health-check.js\"\necho   } >> \"aimagic-server-production\\src\\scripts\\health-check.js\"\necho }); >> \"aimagic-server-production\\src\\scripts\\health-check.js\"\necho. >> \"aimagic-server-production\\src\\scripts\\health-check.js\"\necho req.on('error', (err) =^> { >> \"aimagic-server-production\\src\\scripts\\health-check.js\"\necho   console.error('Health check error:', err.message); >> \"aimagic-server-production\\src\\scripts\\health-check.js\"\necho   process.exit(1); >> \"aimagic-server-production\\src\\scripts\\health-check.js\"\necho }); >> \"aimagic-server-production\\src\\scripts\\health-check.js\"\necho. >> \"aimagic-server-production\\src\\scripts\\health-check.js\"\necho req.setTimeout(5000); >> \"aimagic-server-production\\src\\scripts\\health-check.js\"\necho req.end(); >> \"aimagic-server-production\\src\\scripts\\health-check.js\"\n\necho [SUCCESS] health-check.js created\n\nREM Create init script\necho [INFO] Creating init script...\necho console.log('Deployment initialization completed'); > \"aimagic-server-production\\src\\scripts\\init-deployment-config.js\"\necho process.exit(0); >> \"aimagic-server-production\\src\\scripts\\init-deployment-config.js\"\necho [SUCCESS] init-deployment-config.js created\n\nREM Create deployment readme\necho [INFO] Creating deployment readme...\necho # AIMagic Server Deployment Package > \"aimagic-server-production\\DEPLOYMENT_README.md\"\necho. >> \"aimagic-server-production\\DEPLOYMENT_README.md\"\necho ## Deployment Steps >> \"aimagic-server-production\\DEPLOYMENT_README.md\"\necho 1. Upload this directory to server >> \"aimagic-server-production\\DEPLOYMENT_README.md\"\necho 2. Run: npm install --production >> \"aimagic-server-production\\DEPLOYMENT_README.md\"\necho 3. Run: deploy-en.bat >> \"aimagic-server-production\\DEPLOYMENT_README.md\"\necho. >> \"aimagic-server-production\\DEPLOYMENT_README.md\"\necho ## Package Time >> \"aimagic-server-production\\DEPLOYMENT_README.md\"\necho %date% %time% >> \"aimagic-server-production\\DEPLOYMENT_README.md\"\n\necho [SUCCESS] Deployment readme created\n\nREM Verify key files\necho [INFO] Verifying key files...\nif not exist \"aimagic-server-production\\src\\app.js\" (\n    echo [ERROR] Missing: src\\app.js\n    pause\n    exit /b 1\n)\n\nif not exist \"aimagic-server-production\\package.json\" (\n    echo [ERROR] Missing: package.json\n    pause\n    exit /b 1\n)\n\nif not exist \"aimagic-server-production\\.env.production\" (\n    echo [ERROR] Missing: .env.production\n    pause\n    exit /b 1\n)\n\necho.\necho ========================================\necho          Package Complete!\necho ========================================\necho Package: aimagic-server-production\necho Location: %cd%\\aimagic-server-production\necho ========================================\necho.\necho [SUCCESS] All files verified!\necho [INFO] Upload the 'aimagic-server-production' directory to server\necho [INFO] Run 'deploy-en.bat' on server after upload\necho.\necho Press any key to exit...\npause >nul\n"
        }
    ]
}