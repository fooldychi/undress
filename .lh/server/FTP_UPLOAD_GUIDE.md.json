{
    "sourceFile": "server/FTP_UPLOAD_GUIDE.md",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 16,
            "patches": [
                {
                    "date": 1753705123968,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1753705329102,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,16 +1,18 @@\n # AIMagic åç«¯æœåŠ¡ FTP ä¸Šä¼ éƒ¨ç½²æŒ‡å—\n \n ## ğŸ“‹ æ¦‚è¿°\n \n-æœ¬æŒ‡å—è¯¦ç»†è¯´æ˜å¦‚ä½•é€šè¿‡FTPå°†AIMagicåç«¯æœåŠ¡éƒ¨ç½²åˆ°ç”Ÿäº§æœåŠ¡å™¨ `114.132.50.71`ã€‚\n+æœ¬æŒ‡å—è¯¦ç»†è¯´æ˜å¦‚ä½•é€šè¿‡FTPå°†AIMagicåç«¯æœåŠ¡éƒ¨ç½²åˆ°è…¾è®¯äº‘Windows Serverç”Ÿäº§æœåŠ¡å™¨ `114.132.50.71`ã€‚\n \n ## ğŸ¯ éƒ¨ç½²ç›®æ ‡\n \n+- **äº‘æœåŠ¡å•†**: è…¾è®¯äº‘\n+- **æ“ä½œç³»ç»Ÿ**: Windows Server\n - **æœåŠ¡å™¨**: 114.132.50.71\n - **ç«¯å£**: 3007\n - **æ•°æ®åº“**: å·²é…ç½® (aimagic@114.132.50.71:3306)\n-- **è¿è¡Œç¯å¢ƒ**: Node.js + PM2\n+- **è¿è¡Œç¯å¢ƒ**: Node.js + PM2 (Windowsç‰ˆæœ¬)\n \n ## ğŸ“ æ–‡ä»¶ä¸Šä¼ æ¸…å•\n \n ### ğŸ”´ å¿…éœ€æ–‡ä»¶ (REQUIRED)\n"
                },
                {
                    "date": 1753705354130,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -18,19 +18,19 @@\n ### ğŸ”´ å¿…éœ€æ–‡ä»¶ (REQUIRED)\n \n #### æ ¸å¿ƒåº”ç”¨æ–‡ä»¶\n ```\n-server/\n-â”œâ”€â”€ src/                          # æºä»£ç ç›®å½• [å¿…éœ€]\n+server\\\n+â”œâ”€â”€ src\\                          # æºä»£ç ç›®å½• [å¿…éœ€]\n â”‚   â”œâ”€â”€ app.js                   # åº”ç”¨å…¥å£ [å¿…éœ€]\n-â”‚   â”œâ”€â”€ config/                  # é…ç½®æ–‡ä»¶ [å¿…éœ€]\n+â”‚   â”œâ”€â”€ config\\                  # é…ç½®æ–‡ä»¶ [å¿…éœ€]\n â”‚   â”‚   â””â”€â”€ database.js          # æ•°æ®åº“é…ç½® [å¿…éœ€]\n-â”‚   â”œâ”€â”€ middleware/              # ä¸­é—´ä»¶ [å¿…éœ€]\n+â”‚   â”œâ”€â”€ middleware\\              # ä¸­é—´ä»¶ [å¿…éœ€]\n â”‚   â”‚   â”œâ”€â”€ auth.js             # è®¤è¯ä¸­é—´ä»¶ [å¿…éœ€]\n â”‚   â”‚   â”œâ”€â”€ adminAuth.js        # ç®¡ç†å‘˜è®¤è¯ [å¿…éœ€]\n â”‚   â”‚   â”œâ”€â”€ errorHandler.js     # é”™è¯¯å¤„ç† [å¿…éœ€]\n â”‚   â”‚   â””â”€â”€ rateLimiter.js      # é™æµä¸­é—´ä»¶ [å¿…éœ€]\n-â”‚   â”œâ”€â”€ routes/                  # è·¯ç”±æ–‡ä»¶ [å¿…éœ€]\n+â”‚   â”œâ”€â”€ routes\\                  # è·¯ç”±æ–‡ä»¶ [å¿…éœ€]\n â”‚   â”‚   â”œâ”€â”€ auth.js             # è®¤è¯è·¯ç”± [å¿…éœ€]\n â”‚   â”‚   â”œâ”€â”€ users.js            # ç”¨æˆ·è·¯ç”± [å¿…éœ€]\n â”‚   â”‚   â”œâ”€â”€ images.js           # å›¾åƒå¤„ç†è·¯ç”± [å¿…éœ€]\n â”‚   â”‚   â”œâ”€â”€ admin.js            # ç®¡ç†è·¯ç”± [å¿…éœ€]\n@@ -39,12 +39,12 @@\n â”‚   â”‚   â”œâ”€â”€ levelCards.js       # ç­‰çº§å¡è·¯ç”± [å¿…éœ€]\n â”‚   â”‚   â”œâ”€â”€ config.js           # é…ç½®è·¯ç”± [å¿…éœ€]\n â”‚   â”‚   â”œâ”€â”€ public-config.js    # å…¬å…±é…ç½®è·¯ç”± [å¿…éœ€]\n â”‚   â”‚   â””â”€â”€ workflow-config.js  # å·¥ä½œæµé…ç½®è·¯ç”± [å¿…éœ€]\n-â”‚   â”œâ”€â”€ scripts/                 # è„šæœ¬æ–‡ä»¶ [å¿…éœ€]\n+â”‚   â”œâ”€â”€ scripts\\                 # è„šæœ¬æ–‡ä»¶ [å¿…éœ€]\n â”‚   â”‚   â”œâ”€â”€ init-deployment-config.js  # éƒ¨ç½²åˆå§‹åŒ– [å¿…éœ€]\n â”‚   â”‚   â””â”€â”€ health-check.js     # å¥åº·æ£€æŸ¥ [å¿…éœ€]\n-â”‚   â””â”€â”€ utils/                   # å·¥å…·å‡½æ•° [å¯é€‰]\n+â”‚   â””â”€â”€ utils\\                   # å·¥å…·å‡½æ•° [å¯é€‰]\n â”‚       â”œâ”€â”€ memoryManager.js    # å†…å­˜ç®¡ç† [å¯é€‰]\n â”‚       â”œâ”€â”€ performanceMonitor.js # æ€§èƒ½ç›‘æ§ [å¯é€‰]\n â”‚       â””â”€â”€ pointsCalculator.js # ç§¯åˆ†è®¡ç®— [å¯é€‰]\n ```\n"
                },
                {
                    "date": 1753705380663,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -50,20 +50,20 @@\n ```\n \n #### é…ç½®æ–‡ä»¶\n ```\n-server/\n+server\\\n â”œâ”€â”€ package.json                 # ä¾èµ–é…ç½® [å¿…éœ€]\n â”œâ”€â”€ production-package.json      # ç”Ÿäº§ç¯å¢ƒä¾èµ– [å¿…éœ€]\n â”œâ”€â”€ .env.production             # ç”Ÿäº§ç¯å¢ƒå˜é‡ [å¿…éœ€]\n â”œâ”€â”€ ecosystem.config.js         # PM2é…ç½® [å¿…éœ€]\n-â””â”€â”€ deploy.sh                   # éƒ¨ç½²è„šæœ¬ [å¿…éœ€]\n+â””â”€â”€ deploy.bat                  # Windowséƒ¨ç½²è„šæœ¬ [å¿…éœ€]\n ```\n \n #### SQLè„šæœ¬\n ```\n-server/\n-â””â”€â”€ sql/                        # SQLè„šæœ¬ [å¯é€‰]\n+server\\\n+â””â”€â”€ sql\\                        # SQLè„šæœ¬ [å¯é€‰]\n     â”œâ”€â”€ create_config_table.sql # é…ç½®è¡¨åˆ›å»º [å¯é€‰]\n     â””â”€â”€ performance_optimization.sql # æ€§èƒ½ä¼˜åŒ– [å¯é€‰]\n ```\n \n"
                },
                {
                    "date": 1753705394729,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -69,13 +69,13 @@\n \n ### ğŸŸ¡ å¯é€‰æ–‡ä»¶ (OPTIONAL)\n \n ```\n-server/\n-â”œâ”€â”€ scripts/                    # é¢å¤–è„šæœ¬ [å¯é€‰]\n+server\\\n+â”œâ”€â”€ scripts\\                    # é¢å¤–è„šæœ¬ [å¯é€‰]\n â”‚   â”œâ”€â”€ optimize-database.js   # æ•°æ®åº“ä¼˜åŒ– [å¯é€‰]\n â”‚   â””â”€â”€ process-manager.js     # è¿›ç¨‹ç®¡ç† [å¯é€‰]\n-â””â”€â”€ docs/                      # æ–‡æ¡£ [å¯é€‰]\n+â””â”€â”€ docs\\                      # æ–‡æ¡£ [å¯é€‰]\n     â””â”€â”€ README.md              # é¡¹ç›®æ–‡æ¡£ [å¯é€‰]\n ```\n \n ### ğŸ”´ æ’é™¤æ–‡ä»¶ (EXCLUDE)\n"
                },
                {
                    "date": 1753705411458,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -81,19 +81,19 @@\n ### ğŸ”´ æ’é™¤æ–‡ä»¶ (EXCLUDE)\n \n **ç»å¯¹ä¸è¦ä¸Šä¼ çš„æ–‡ä»¶:**\n ```\n-âŒ node_modules/              # ä¾èµ–åŒ…ç›®å½•\n-âŒ .git/                     # Gitç‰ˆæœ¬æ§åˆ¶\n+âŒ node_modules\\              # ä¾èµ–åŒ…ç›®å½•\n+âŒ .git\\                     # Gitç‰ˆæœ¬æ§åˆ¶\n âŒ .env                      # å¼€å‘ç¯å¢ƒå˜é‡\n âŒ .env.local               # æœ¬åœ°ç¯å¢ƒå˜é‡\n âŒ .env.development         # å¼€å‘ç¯å¢ƒå˜é‡\n-âŒ logs/*.log               # æ—¥å¿—æ–‡ä»¶\n-âŒ uploads/images/*         # ä¸Šä¼ çš„å›¾ç‰‡\n-âŒ test/                    # æµ‹è¯•æ–‡ä»¶\n-âŒ coverage/                # æµ‹è¯•è¦†ç›–ç‡\n-âŒ .vscode/                 # IDEé…ç½®\n-âŒ .idea/                   # IDEé…ç½®\n+âŒ logs\\*.log               # æ—¥å¿—æ–‡ä»¶\n+âŒ uploads\\images\\*         # ä¸Šä¼ çš„å›¾ç‰‡\n+âŒ test\\                    # æµ‹è¯•æ–‡ä»¶\n+âŒ coverage\\                # æµ‹è¯•è¦†ç›–ç‡\n+âŒ .vscode\\                 # IDEé…ç½®\n+âŒ .idea\\                   # IDEé…ç½®\n âŒ *.test.js               # æµ‹è¯•æ–‡ä»¶\n âŒ *.spec.js               # æµ‹è¯•æ–‡ä»¶\n ```\n \n"
                },
                {
                    "date": 1753705437851,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -101,21 +101,21 @@\n \n ### 1. å‡†å¤‡ä¸Šä¼ æ–‡ä»¶\n \n åœ¨æœ¬åœ°åˆ›å»ºä¸Šä¼ ç›®å½•ç»“æ„ï¼š\n-```bash\n-# åˆ›å»ºä¸´æ—¶ä¸Šä¼ ç›®å½•\n+```powershell\n+# åœ¨PowerShellä¸­åˆ›å»ºä¸´æ—¶ä¸Šä¼ ç›®å½•\n mkdir aimagic-server-upload\n cd aimagic-server-upload\n \n # å¤åˆ¶å¿…éœ€æ–‡ä»¶\n-cp -r ../src ./\n-cp ../package.json ./\n-cp ../production-package.json ./package.json  # è¦†ç›–ä¸ºç”Ÿäº§ç‰ˆæœ¬\n-cp ../.env.production ./\n-cp ../ecosystem.config.js ./\n-cp ../deploy.sh ./\n-cp -r ../sql ./  # å¯é€‰\n+Copy-Item -Recurse ..\\src .\\\n+Copy-Item ..\\package.json .\\\n+Copy-Item ..\\production-package.json .\\package.json  # è¦†ç›–ä¸ºç”Ÿäº§ç‰ˆæœ¬\n+Copy-Item ..\\.env.production .\\\n+Copy-Item ..\\ecosystem.config.js .\\\n+Copy-Item ..\\deploy.bat .\\\n+Copy-Item -Recurse ..\\sql .\\  # å¯é€‰\n ```\n \n ### 2. FTPè¿æ¥ä¿¡æ¯\n \n"
                },
                {
                    "date": 1753705451167,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -123,9 +123,9 @@\n æœåŠ¡å™¨åœ°å€: 114.132.50.71\n FTPç«¯å£: 21 (é»˜è®¤)\n ç”¨æˆ·å: [æ‚¨çš„FTPç”¨æˆ·å]\n å¯†ç : [æ‚¨çš„FTPå¯†ç ]\n-ä¸Šä¼ ç›®å½•: /var/www/aimagic/server/\n+ä¸Šä¼ ç›®å½•: C:\\inetpub\\wwwroot\\aimagic\\server\\\n ```\n \n ### 3. ä½¿ç”¨FTPå®¢æˆ·ç«¯ä¸Šä¼ \n \n"
                },
                {
                    "date": 1753705469027,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -131,26 +131,30 @@\n \n #### æ–¹å¼ä¸€: FileZilla (æ¨è)\n 1. æ‰“å¼€FileZilla\n 2. è¿æ¥åˆ°æœåŠ¡å™¨\n-3. å¯¼èˆªåˆ° `/var/www/aimagic/server/`\n+3. å¯¼èˆªåˆ° `C:\\inetpub\\wwwroot\\aimagic\\server\\`\n 4. ä¸Šä¼ å‡†å¤‡å¥½çš„æ–‡ä»¶\n \n-#### æ–¹å¼äºŒ: å‘½ä»¤è¡ŒFTP\n-```bash\n+#### æ–¹å¼äºŒ: Windowså‘½ä»¤è¡ŒFTP\n+```cmd\n ftp 114.132.50.71\n # è¾“å…¥ç”¨æˆ·åå’Œå¯†ç \n-cd /var/www/aimagic/server\n-put -r aimagic-server-upload/*\n+cd C:\\inetpub\\wwwroot\\aimagic\\server\n+mput aimagic-server-upload\\*\n quit\n ```\n \n-#### æ–¹å¼ä¸‰: SFTP (æ›´å®‰å…¨)\n-```bash\n-sftp root@114.132.50.71\n-cd /var/www/aimagic/server\n-put -r aimagic-server-upload/*\n-quit\n+#### æ–¹å¼ä¸‰: PowerShell SFTP (éœ€è¦å®‰è£…Posh-SSHæ¨¡å—)\n+```powershell\n+# å®‰è£…Posh-SSHæ¨¡å—\n+Install-Module -Name Posh-SSH -Force\n+\n+# ä½¿ç”¨SFTPä¸Šä¼ \n+$session = New-SFTPSession -ComputerName 114.132.50.71 -Credential (Get-Credential)\n+Set-SFTPLocation -SessionId $session.SessionId -Path \"C:\\inetpub\\wwwroot\\aimagic\\server\"\n+Set-SFTPFile -SessionId $session.SessionId -LocalFile \".\\aimagic-server-upload\\*\" -RemotePath \".\"\n+Remove-SFTPSession -SessionId $session.SessionId\n ```\n \n ## ğŸ”§ æœåŠ¡å™¨ç«¯é…ç½®\n \n"
                },
                {
                    "date": 1753705521518,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -157,44 +157,62 @@\n ```\n \n ## ğŸ”§ æœåŠ¡å™¨ç«¯é…ç½®\n \n-### 1. è¿æ¥åˆ°æœåŠ¡å™¨\n-```bash\n-ssh root@114.132.50.71\n-cd /var/www/aimagic/server\n+### 1. è¿æ¥åˆ°è…¾è®¯äº‘WindowsæœåŠ¡å™¨\n+\n+#### æ–¹å¼ä¸€: è…¾è®¯äº‘æ§åˆ¶å°è¿œç¨‹æ¡Œé¢ (æ¨è)\n+1. ç™»å½•è…¾è®¯äº‘æ§åˆ¶å°: https://console.cloud.tencent.com/\n+2. è¿›å…¥ \"äº‘æœåŠ¡å™¨\" â†’ \"å®ä¾‹\"\n+3. æ‰¾åˆ°æœåŠ¡å™¨ 114.132.50.71\n+4. ç‚¹å‡» \"ç™»å½•\" â†’ \"VNCç™»å½•\" æˆ– \"è¿œç¨‹æ¡Œé¢ç™»å½•\"\n+5. è¾“å…¥Administratorå¯†ç \n+\n+#### æ–¹å¼äºŒ: Windowsè¿œç¨‹æ¡Œé¢è¿æ¥\n+```cmd\n+# åœ¨æœ¬åœ°Windowsç”µè„‘ä¸ŠæŒ‰ Win+Rï¼Œè¾“å…¥ï¼š\n+mstsc\n+\n+# åœ¨è¿œç¨‹æ¡Œé¢è¿æ¥ä¸­è¾“å…¥ï¼š\n+# è®¡ç®—æœº: 114.132.50.71\n+# ç”¨æˆ·å: Administrator\n+# å¯†ç : [æ‚¨çš„æœåŠ¡å™¨å¯†ç ]\n ```\n \n-### 2. è®¾ç½®æ–‡ä»¶æƒé™\n-```bash\n-# è®¾ç½®è„šæœ¬æ‰§è¡Œæƒé™\n-chmod +x deploy.sh\n+#### æ–¹å¼ä¸‰: PowerShellè¿œç¨‹è¿æ¥\n+```powershell\n+# åœ¨æœ¬åœ°PowerShellä¸­è¿è¡Œï¼š\n+Enter-PSSession -ComputerName 114.132.50.71 -Credential (Get-Credential)\n+```\n \n-# è®¾ç½®ç›®å½•æƒé™\n-chmod 755 src/\n-chmod 755 sql/\n-chmod 644 *.js\n-chmod 644 *.json\n-chmod 600 .env.production\n+### 2. å¯¼èˆªåˆ°é¡¹ç›®ç›®å½•\n+```cmd\n+# åœ¨æœåŠ¡å™¨ä¸Šæ‰“å¼€å‘½ä»¤æç¤ºç¬¦æˆ–PowerShell\n+cd C:\\inetpub\\wwwroot\\aimagic\\server\n ```\n \n ### 3. åˆ›å»ºå¿…è¦ç›®å½•\n-```bash\n-mkdir -p logs\n-mkdir -p uploads/images\n-mkdir -p uploads/temp\n-chmod 755 logs uploads\n-chmod 755 uploads/images uploads/temp\n+```cmd\n+# åˆ›å»ºå¿…è¦ç›®å½•\n+if not exist \"logs\" mkdir logs\n+if not exist \"uploads\" mkdir uploads\n+if not exist \"uploads\\images\" mkdir uploads\\images\n+if not exist \"uploads\\temp\" mkdir uploads\\temp\n ```\n \n ### 4. å®‰è£…Node.jså’ŒPM2 (å¦‚æœªå®‰è£…)\n-```bash\n-# å®‰è£…Node.js (å¦‚æœæœªå®‰è£…)\n-curl -fsSL https://deb.nodesource.com/setup_18.x | sudo -E bash -\n-apt-get install -y nodejs\n+```powershell\n+# ä¸‹è½½å¹¶å®‰è£…Node.js (å¦‚æœæœªå®‰è£…)\n+# è®¿é—® https://nodejs.org/ ä¸‹è½½Windowsç‰ˆæœ¬\n+# æˆ–ä½¿ç”¨ChocolateyåŒ…ç®¡ç†å™¨ï¼š\n+choco install nodejs\n \n # å®‰è£…PM2\n npm install -g pm2\n+npm install -g pm2-windows-startup\n+\n+# é…ç½®PM2 WindowsæœåŠ¡\n+pm2-startup install\n ```\n \n ## ğŸš€ éƒ¨ç½²æ‰§è¡Œ\n \n"
                },
                {
                    "date": 1753705539018,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -216,31 +216,41 @@\n \n ## ğŸš€ éƒ¨ç½²æ‰§è¡Œ\n \n ### è‡ªåŠ¨éƒ¨ç½² (æ¨è)\n-```bash\n-# æ‰§è¡Œéƒ¨ç½²è„šæœ¬\n-./deploy.sh\n+```cmd\n+# æ‰§è¡ŒWindowséƒ¨ç½²è„šæœ¬\n+deploy.bat\n ```\n \n ### æ‰‹åŠ¨éƒ¨ç½²\n-```bash\n+```cmd\n # 1. å®‰è£…ä¾èµ–\n npm install --production\n \n # 2. åˆå§‹åŒ–æ•°æ®åº“é…ç½®\n-node src/scripts/init-deployment-config.js\n+node src\\scripts\\init-deployment-config.js\n \n # 3. å¯åŠ¨æœåŠ¡\n pm2 start ecosystem.config.js --env production\n \n # 4. ä¿å­˜PM2é…ç½®\n pm2 save\n \n-# 5. è®¾ç½®å¼€æœºè‡ªå¯\n+# 5. è®¾ç½®å¼€æœºè‡ªå¯ (Windows)\n pm2 startup\n+pm2 save\n ```\n \n+### Windowsé˜²ç«å¢™é…ç½®\n+```cmd\n+# æ·»åŠ é˜²ç«å¢™è§„åˆ™å…è®¸3007ç«¯å£\n+netsh advfirewall firewall add rule name=\"AIMagic Server Port 3007\" dir=in action=allow protocol=TCP localport=3007\n+\n+# æŸ¥çœ‹é˜²ç«å¢™è§„åˆ™\n+netsh advfirewall firewall show rule name=\"AIMagic Server Port 3007\"\n+```\n+\n ## ğŸ“Š æœåŠ¡ç®¡ç†å‘½ä»¤\n \n ```bash\n # æŸ¥çœ‹æœåŠ¡çŠ¶æ€\n"
                },
                {
                    "date": 1753705554118,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -251,9 +251,9 @@\n ```\n \n ## ğŸ“Š æœåŠ¡ç®¡ç†å‘½ä»¤\n \n-```bash\n+```cmd\n # æŸ¥çœ‹æœåŠ¡çŠ¶æ€\n pm2 status\n \n # æŸ¥çœ‹æ—¥å¿—\n@@ -271,9 +271,14 @@\n # ç›‘æ§æœåŠ¡\n pm2 monit\n \n # å¥åº·æ£€æŸ¥\n-node src/scripts/health-check.js\n+node src\\scripts\\health-check.js\n+\n+# WindowsæœåŠ¡ç®¡ç†\n+sc query \"PM2 aimagic-server\"\n+sc start \"PM2 aimagic-server\"\n+sc stop \"PM2 aimagic-server\"\n ```\n \n ## ğŸ” éªŒè¯éƒ¨ç½²\n \n"
                },
                {
                    "date": 1753705698534,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -278,8 +278,11 @@\n sc query \"PM2 aimagic-server\"\n sc start \"PM2 aimagic-server\"\n sc stop \"PM2 aimagic-server\"\n ```\n+sc start \"PM2 aimagic-server\"\n+sc stop \"PM2 aimagic-server\"\n+```\n \n ## ğŸ” éªŒè¯éƒ¨ç½²\n \n ### 1. æ£€æŸ¥æœåŠ¡çŠ¶æ€\n"
                },
                {
                    "date": 1753705716067,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -285,27 +285,35 @@\n \n ## ğŸ” éªŒè¯éƒ¨ç½²\n \n ### 1. æ£€æŸ¥æœåŠ¡çŠ¶æ€\n-```bash\n+```cmd\n pm2 status\n-curl http://localhost:3007/api/health\n+# ä½¿ç”¨PowerShellæµ‹è¯•API\n+Invoke-RestMethod -Uri http://localhost:3007/api/health\n ```\n \n ### 2. æ£€æŸ¥æ•°æ®åº“è¿æ¥\n-```bash\n-node src/scripts/health-check.js\n+```cmd\n+node src\\scripts\\health-check.js\n ```\n \n ### 3. æµ‹è¯•APIæ¥å£\n-```bash\n+```powershell\n # æµ‹è¯•åŸºæœ¬æ¥å£\n-curl http://114.132.50.71:3007/api/health\n+Invoke-RestMethod -Uri http://114.132.50.71:3007/api/health\n \n # æµ‹è¯•é…ç½®æ¥å£\n-curl http://114.132.50.71:3007/api/config\n+Invoke-RestMethod -Uri http://114.132.50.71:3007/api/config\n ```\n \n+### 4. æµè§ˆå™¨æµ‹è¯•\n+```\n+ç›´æ¥åœ¨æµè§ˆå™¨ä¸­è®¿é—®ï¼š\n+http://114.132.50.71:3007/api/health\n+http://114.132.50.71:3007/api/config\n+```\n+\n ## ğŸ›¡ï¸ å®‰å…¨æ³¨æ„äº‹é¡¹\n \n 1. **ç¯å¢ƒå˜é‡å®‰å…¨**: ç¡®ä¿ `.env.production` æ–‡ä»¶æƒé™ä¸º 600\n 2. **æ•°æ®åº“å¯†ç **: ç”Ÿäº§ç¯å¢ƒå¯†ç å·²é…ç½®ï¼Œè¯·å‹¿ä¿®æ”¹\n"
                },
                {
                    "date": 1753705731139,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -314,12 +314,14 @@\n ```\n \n ## ğŸ›¡ï¸ å®‰å…¨æ³¨æ„äº‹é¡¹\n \n-1. **ç¯å¢ƒå˜é‡å®‰å…¨**: ç¡®ä¿ `.env.production` æ–‡ä»¶æƒé™ä¸º 600\n+1. **ç¯å¢ƒå˜é‡å®‰å…¨**: ç¡®ä¿ `.env.production` æ–‡ä»¶è®¿é—®æƒé™å—é™\n 2. **æ•°æ®åº“å¯†ç **: ç”Ÿäº§ç¯å¢ƒå¯†ç å·²é…ç½®ï¼Œè¯·å‹¿ä¿®æ”¹\n-3. **é˜²ç«å¢™è®¾ç½®**: ç¡®ä¿ç«¯å£3007å·²å¼€æ”¾\n-4. **SSLè¯ä¹¦**: å»ºè®®é…ç½®HTTPS (å¯é€‰)\n+3. **Windowsé˜²ç«å¢™**: ç¡®ä¿ç«¯å£3007å·²å¼€æ”¾\n+4. **Windowsæ›´æ–°**: ä¿æŒç³»ç»Ÿæ›´æ–°\n+5. **SSLè¯ä¹¦**: å»ºè®®é…ç½®HTTPS (å¯é€‰)\n+6. **ç”¨æˆ·æƒé™**: å»ºè®®ä½¿ç”¨éç®¡ç†å‘˜è´¦æˆ·è¿è¡ŒæœåŠ¡\n \n ## ğŸ”§ æ•…éšœæ’é™¤\n \n ### å¸¸è§é—®é¢˜\n"
                },
                {
                    "date": 1753705750007,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -326,28 +326,48 @@\n \n ### å¸¸è§é—®é¢˜\n \n 1. **ç«¯å£è¢«å ç”¨**\n-   ```bash\n-   lsof -i :3007\n-   kill -9 [PID]\n+   ```cmd\n+   # æŸ¥çœ‹ç«¯å£å ç”¨\n+   netstat -ano | findstr :3007\n+   # ç»“æŸå ç”¨è¿›ç¨‹\n+   taskkill /PID [PID] /F\n    ```\n \n-2. **æƒé™é—®é¢˜**\n-   ```bash\n-   chown -R www-data:www-data /var/www/aimagic/server\n+2. **WindowsæœåŠ¡æƒé™é—®é¢˜**\n+   ```cmd\n+   # ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œå‘½ä»¤æç¤ºç¬¦\n+   # æ£€æŸ¥æœåŠ¡çŠ¶æ€\n+   sc query \"PM2 aimagic-server\"\n+   # é‡å¯æœåŠ¡\n+   sc stop \"PM2 aimagic-server\"\n+   sc start \"PM2 aimagic-server\"\n    ```\n \n 3. **æ•°æ®åº“è¿æ¥å¤±è´¥**\n    - æ£€æŸ¥ `.env.production` é…ç½®\n-   - ç¡®è®¤æ•°æ®åº“æœåŠ¡è¿è¡Œæ­£å¸¸\n+   - ç¡®è®¤MySQLæœåŠ¡è¿è¡Œæ­£å¸¸\n+   - æ£€æŸ¥Windowsé˜²ç«å¢™è®¾ç½®\n \n 4. **PM2æœåŠ¡æ— æ³•å¯åŠ¨**\n-   ```bash\n+   ```cmd\n    pm2 logs aimagic-server\n-   pm2 flush  # æ¸…é™¤æ—¥å¿—\n+   pm2 flush\n+   # é‡æ–°å®‰è£…PM2 WindowsæœåŠ¡\n+   pm2-startup uninstall\n+   pm2-startup install\n    ```\n \n+5. **Node.jsæ¨¡å—é—®é¢˜**\n+   ```cmd\n+   # æ¸…é™¤npmç¼“å­˜\n+   npm cache clean --force\n+   # åˆ é™¤node_modulesé‡æ–°å®‰è£…\n+   rmdir /s node_modules\n+   npm install --production\n+   ```\n+\n ## ğŸ“ æŠ€æœ¯æ”¯æŒ\n \n å¦‚é‡åˆ°éƒ¨ç½²é—®é¢˜ï¼Œè¯·æ£€æŸ¥ï¼š\n 1. æœåŠ¡å™¨æ—¥å¿—: `pm2 logs aimagic-server`\n"
                },
                {
                    "date": 1753705766219,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -370,10 +370,26 @@\n ## ğŸ“ æŠ€æœ¯æ”¯æŒ\n \n å¦‚é‡åˆ°éƒ¨ç½²é—®é¢˜ï¼Œè¯·æ£€æŸ¥ï¼š\n 1. æœåŠ¡å™¨æ—¥å¿—: `pm2 logs aimagic-server`\n-2. ç³»ç»Ÿæ—¥å¿—: `tail -f /var/log/syslog`\n-3. å¥åº·æ£€æŸ¥: `node src/scripts/health-check.js`\n+2. Windowsäº‹ä»¶æ—¥å¿—: æ‰“å¼€\"äº‹ä»¶æŸ¥çœ‹å™¨\" â†’ \"Windowsæ—¥å¿—\" â†’ \"åº”ç”¨ç¨‹åº\"\n+3. å¥åº·æ£€æŸ¥: `node src\\scripts\\health-check.js`\n+4. è…¾è®¯äº‘æ§åˆ¶å°ç›‘æ§æ•°æ®\n \n+### Windowsç³»ç»Ÿç‰¹æœ‰æ£€æŸ¥\n+```cmd\n+# æ£€æŸ¥WindowsæœåŠ¡\n+services.msc\n+\n+# æ£€æŸ¥ç³»ç»Ÿèµ„æº\n+taskmgr\n+\n+# æ£€æŸ¥ç½‘ç»œè¿æ¥\n+netstat -an | findstr :3007\n+\n+# æ£€æŸ¥é˜²ç«å¢™çŠ¶æ€\n+netsh advfirewall show allprofiles\n+```\n+\n ---\n \n **éƒ¨ç½²å®Œæˆåè®¿é—®åœ°å€**: http://114.132.50.71:3007\n"
                }
            ],
            "date": 1753705123968,
            "name": "Commit-0",
            "content": "# AIMagic åç«¯æœåŠ¡ FTP ä¸Šä¼ éƒ¨ç½²æŒ‡å—\n\n## ğŸ“‹ æ¦‚è¿°\n\næœ¬æŒ‡å—è¯¦ç»†è¯´æ˜å¦‚ä½•é€šè¿‡FTPå°†AIMagicåç«¯æœåŠ¡éƒ¨ç½²åˆ°ç”Ÿäº§æœåŠ¡å™¨ `114.132.50.71`ã€‚\n\n## ğŸ¯ éƒ¨ç½²ç›®æ ‡\n\n- **æœåŠ¡å™¨**: 114.132.50.71\n- **ç«¯å£**: 3007\n- **æ•°æ®åº“**: å·²é…ç½® (aimagic@114.132.50.71:3306)\n- **è¿è¡Œç¯å¢ƒ**: Node.js + PM2\n\n## ğŸ“ æ–‡ä»¶ä¸Šä¼ æ¸…å•\n\n### ğŸ”´ å¿…éœ€æ–‡ä»¶ (REQUIRED)\n\n#### æ ¸å¿ƒåº”ç”¨æ–‡ä»¶\n```\nserver/\nâ”œâ”€â”€ src/                          # æºä»£ç ç›®å½• [å¿…éœ€]\nâ”‚   â”œâ”€â”€ app.js                   # åº”ç”¨å…¥å£ [å¿…éœ€]\nâ”‚   â”œâ”€â”€ config/                  # é…ç½®æ–‡ä»¶ [å¿…éœ€]\nâ”‚   â”‚   â””â”€â”€ database.js          # æ•°æ®åº“é…ç½® [å¿…éœ€]\nâ”‚   â”œâ”€â”€ middleware/              # ä¸­é—´ä»¶ [å¿…éœ€]\nâ”‚   â”‚   â”œâ”€â”€ auth.js             # è®¤è¯ä¸­é—´ä»¶ [å¿…éœ€]\nâ”‚   â”‚   â”œâ”€â”€ adminAuth.js        # ç®¡ç†å‘˜è®¤è¯ [å¿…éœ€]\nâ”‚   â”‚   â”œâ”€â”€ errorHandler.js     # é”™è¯¯å¤„ç† [å¿…éœ€]\nâ”‚   â”‚   â””â”€â”€ rateLimiter.js      # é™æµä¸­é—´ä»¶ [å¿…éœ€]\nâ”‚   â”œâ”€â”€ routes/                  # è·¯ç”±æ–‡ä»¶ [å¿…éœ€]\nâ”‚   â”‚   â”œâ”€â”€ auth.js             # è®¤è¯è·¯ç”± [å¿…éœ€]\nâ”‚   â”‚   â”œâ”€â”€ users.js            # ç”¨æˆ·è·¯ç”± [å¿…éœ€]\nâ”‚   â”‚   â”œâ”€â”€ images.js           # å›¾åƒå¤„ç†è·¯ç”± [å¿…éœ€]\nâ”‚   â”‚   â”œâ”€â”€ admin.js            # ç®¡ç†è·¯ç”± [å¿…éœ€]\nâ”‚   â”‚   â”œâ”€â”€ adminAuth.js        # ç®¡ç†å‘˜è®¤è¯è·¯ç”± [å¿…éœ€]\nâ”‚   â”‚   â”œâ”€â”€ points.js           # ç§¯åˆ†è·¯ç”± [å¿…éœ€]\nâ”‚   â”‚   â”œâ”€â”€ levelCards.js       # ç­‰çº§å¡è·¯ç”± [å¿…éœ€]\nâ”‚   â”‚   â”œâ”€â”€ config.js           # é…ç½®è·¯ç”± [å¿…éœ€]\nâ”‚   â”‚   â”œâ”€â”€ public-config.js    # å…¬å…±é…ç½®è·¯ç”± [å¿…éœ€]\nâ”‚   â”‚   â””â”€â”€ workflow-config.js  # å·¥ä½œæµé…ç½®è·¯ç”± [å¿…éœ€]\nâ”‚   â”œâ”€â”€ scripts/                 # è„šæœ¬æ–‡ä»¶ [å¿…éœ€]\nâ”‚   â”‚   â”œâ”€â”€ init-deployment-config.js  # éƒ¨ç½²åˆå§‹åŒ– [å¿…éœ€]\nâ”‚   â”‚   â””â”€â”€ health-check.js     # å¥åº·æ£€æŸ¥ [å¿…éœ€]\nâ”‚   â””â”€â”€ utils/                   # å·¥å…·å‡½æ•° [å¯é€‰]\nâ”‚       â”œâ”€â”€ memoryManager.js    # å†…å­˜ç®¡ç† [å¯é€‰]\nâ”‚       â”œâ”€â”€ performanceMonitor.js # æ€§èƒ½ç›‘æ§ [å¯é€‰]\nâ”‚       â””â”€â”€ pointsCalculator.js # ç§¯åˆ†è®¡ç®— [å¯é€‰]\n```\n\n#### é…ç½®æ–‡ä»¶\n```\nserver/\nâ”œâ”€â”€ package.json                 # ä¾èµ–é…ç½® [å¿…éœ€]\nâ”œâ”€â”€ production-package.json      # ç”Ÿäº§ç¯å¢ƒä¾èµ– [å¿…éœ€]\nâ”œâ”€â”€ .env.production             # ç”Ÿäº§ç¯å¢ƒå˜é‡ [å¿…éœ€]\nâ”œâ”€â”€ ecosystem.config.js         # PM2é…ç½® [å¿…éœ€]\nâ””â”€â”€ deploy.sh                   # éƒ¨ç½²è„šæœ¬ [å¿…éœ€]\n```\n\n#### SQLè„šæœ¬\n```\nserver/\nâ””â”€â”€ sql/                        # SQLè„šæœ¬ [å¯é€‰]\n    â”œâ”€â”€ create_config_table.sql # é…ç½®è¡¨åˆ›å»º [å¯é€‰]\n    â””â”€â”€ performance_optimization.sql # æ€§èƒ½ä¼˜åŒ– [å¯é€‰]\n```\n\n### ğŸŸ¡ å¯é€‰æ–‡ä»¶ (OPTIONAL)\n\n```\nserver/\nâ”œâ”€â”€ scripts/                    # é¢å¤–è„šæœ¬ [å¯é€‰]\nâ”‚   â”œâ”€â”€ optimize-database.js   # æ•°æ®åº“ä¼˜åŒ– [å¯é€‰]\nâ”‚   â””â”€â”€ process-manager.js     # è¿›ç¨‹ç®¡ç† [å¯é€‰]\nâ””â”€â”€ docs/                      # æ–‡æ¡£ [å¯é€‰]\n    â””â”€â”€ README.md              # é¡¹ç›®æ–‡æ¡£ [å¯é€‰]\n```\n\n### ğŸ”´ æ’é™¤æ–‡ä»¶ (EXCLUDE)\n\n**ç»å¯¹ä¸è¦ä¸Šä¼ çš„æ–‡ä»¶:**\n```\nâŒ node_modules/              # ä¾èµ–åŒ…ç›®å½•\nâŒ .git/                     # Gitç‰ˆæœ¬æ§åˆ¶\nâŒ .env                      # å¼€å‘ç¯å¢ƒå˜é‡\nâŒ .env.local               # æœ¬åœ°ç¯å¢ƒå˜é‡\nâŒ .env.development         # å¼€å‘ç¯å¢ƒå˜é‡\nâŒ logs/*.log               # æ—¥å¿—æ–‡ä»¶\nâŒ uploads/images/*         # ä¸Šä¼ çš„å›¾ç‰‡\nâŒ test/                    # æµ‹è¯•æ–‡ä»¶\nâŒ coverage/                # æµ‹è¯•è¦†ç›–ç‡\nâŒ .vscode/                 # IDEé…ç½®\nâŒ .idea/                   # IDEé…ç½®\nâŒ *.test.js               # æµ‹è¯•æ–‡ä»¶\nâŒ *.spec.js               # æµ‹è¯•æ–‡ä»¶\n```\n\n## ğŸš€ FTPä¸Šä¼ æ­¥éª¤\n\n### 1. å‡†å¤‡ä¸Šä¼ æ–‡ä»¶\n\nåœ¨æœ¬åœ°åˆ›å»ºä¸Šä¼ ç›®å½•ç»“æ„ï¼š\n```bash\n# åˆ›å»ºä¸´æ—¶ä¸Šä¼ ç›®å½•\nmkdir aimagic-server-upload\ncd aimagic-server-upload\n\n# å¤åˆ¶å¿…éœ€æ–‡ä»¶\ncp -r ../src ./\ncp ../package.json ./\ncp ../production-package.json ./package.json  # è¦†ç›–ä¸ºç”Ÿäº§ç‰ˆæœ¬\ncp ../.env.production ./\ncp ../ecosystem.config.js ./\ncp ../deploy.sh ./\ncp -r ../sql ./  # å¯é€‰\n```\n\n### 2. FTPè¿æ¥ä¿¡æ¯\n\n```\næœåŠ¡å™¨åœ°å€: 114.132.50.71\nFTPç«¯å£: 21 (é»˜è®¤)\nç”¨æˆ·å: [æ‚¨çš„FTPç”¨æˆ·å]\nå¯†ç : [æ‚¨çš„FTPå¯†ç ]\nä¸Šä¼ ç›®å½•: /var/www/aimagic/server/\n```\n\n### 3. ä½¿ç”¨FTPå®¢æˆ·ç«¯ä¸Šä¼ \n\n#### æ–¹å¼ä¸€: FileZilla (æ¨è)\n1. æ‰“å¼€FileZilla\n2. è¿æ¥åˆ°æœåŠ¡å™¨\n3. å¯¼èˆªåˆ° `/var/www/aimagic/server/`\n4. ä¸Šä¼ å‡†å¤‡å¥½çš„æ–‡ä»¶\n\n#### æ–¹å¼äºŒ: å‘½ä»¤è¡ŒFTP\n```bash\nftp 114.132.50.71\n# è¾“å…¥ç”¨æˆ·åå’Œå¯†ç \ncd /var/www/aimagic/server\nput -r aimagic-server-upload/*\nquit\n```\n\n#### æ–¹å¼ä¸‰: SFTP (æ›´å®‰å…¨)\n```bash\nsftp root@114.132.50.71\ncd /var/www/aimagic/server\nput -r aimagic-server-upload/*\nquit\n```\n\n## ğŸ”§ æœåŠ¡å™¨ç«¯é…ç½®\n\n### 1. è¿æ¥åˆ°æœåŠ¡å™¨\n```bash\nssh root@114.132.50.71\ncd /var/www/aimagic/server\n```\n\n### 2. è®¾ç½®æ–‡ä»¶æƒé™\n```bash\n# è®¾ç½®è„šæœ¬æ‰§è¡Œæƒé™\nchmod +x deploy.sh\n\n# è®¾ç½®ç›®å½•æƒé™\nchmod 755 src/\nchmod 755 sql/\nchmod 644 *.js\nchmod 644 *.json\nchmod 600 .env.production\n```\n\n### 3. åˆ›å»ºå¿…è¦ç›®å½•\n```bash\nmkdir -p logs\nmkdir -p uploads/images\nmkdir -p uploads/temp\nchmod 755 logs uploads\nchmod 755 uploads/images uploads/temp\n```\n\n### 4. å®‰è£…Node.jså’ŒPM2 (å¦‚æœªå®‰è£…)\n```bash\n# å®‰è£…Node.js (å¦‚æœæœªå®‰è£…)\ncurl -fsSL https://deb.nodesource.com/setup_18.x | sudo -E bash -\napt-get install -y nodejs\n\n# å®‰è£…PM2\nnpm install -g pm2\n```\n\n## ğŸš€ éƒ¨ç½²æ‰§è¡Œ\n\n### è‡ªåŠ¨éƒ¨ç½² (æ¨è)\n```bash\n# æ‰§è¡Œéƒ¨ç½²è„šæœ¬\n./deploy.sh\n```\n\n### æ‰‹åŠ¨éƒ¨ç½²\n```bash\n# 1. å®‰è£…ä¾èµ–\nnpm install --production\n\n# 2. åˆå§‹åŒ–æ•°æ®åº“é…ç½®\nnode src/scripts/init-deployment-config.js\n\n# 3. å¯åŠ¨æœåŠ¡\npm2 start ecosystem.config.js --env production\n\n# 4. ä¿å­˜PM2é…ç½®\npm2 save\n\n# 5. è®¾ç½®å¼€æœºè‡ªå¯\npm2 startup\n```\n\n## ğŸ“Š æœåŠ¡ç®¡ç†å‘½ä»¤\n\n```bash\n# æŸ¥çœ‹æœåŠ¡çŠ¶æ€\npm2 status\n\n# æŸ¥çœ‹æ—¥å¿—\npm2 logs aimagic-server\n\n# é‡å¯æœåŠ¡\npm2 restart aimagic-server\n\n# åœæ­¢æœåŠ¡\npm2 stop aimagic-server\n\n# åˆ é™¤æœåŠ¡\npm2 delete aimagic-server\n\n# ç›‘æ§æœåŠ¡\npm2 monit\n\n# å¥åº·æ£€æŸ¥\nnode src/scripts/health-check.js\n```\n\n## ğŸ” éªŒè¯éƒ¨ç½²\n\n### 1. æ£€æŸ¥æœåŠ¡çŠ¶æ€\n```bash\npm2 status\ncurl http://localhost:3007/api/health\n```\n\n### 2. æ£€æŸ¥æ•°æ®åº“è¿æ¥\n```bash\nnode src/scripts/health-check.js\n```\n\n### 3. æµ‹è¯•APIæ¥å£\n```bash\n# æµ‹è¯•åŸºæœ¬æ¥å£\ncurl http://114.132.50.71:3007/api/health\n\n# æµ‹è¯•é…ç½®æ¥å£\ncurl http://114.132.50.71:3007/api/config\n```\n\n## ğŸ›¡ï¸ å®‰å…¨æ³¨æ„äº‹é¡¹\n\n1. **ç¯å¢ƒå˜é‡å®‰å…¨**: ç¡®ä¿ `.env.production` æ–‡ä»¶æƒé™ä¸º 600\n2. **æ•°æ®åº“å¯†ç **: ç”Ÿäº§ç¯å¢ƒå¯†ç å·²é…ç½®ï¼Œè¯·å‹¿ä¿®æ”¹\n3. **é˜²ç«å¢™è®¾ç½®**: ç¡®ä¿ç«¯å£3007å·²å¼€æ”¾\n4. **SSLè¯ä¹¦**: å»ºè®®é…ç½®HTTPS (å¯é€‰)\n\n## ğŸ”§ æ•…éšœæ’é™¤\n\n### å¸¸è§é—®é¢˜\n\n1. **ç«¯å£è¢«å ç”¨**\n   ```bash\n   lsof -i :3007\n   kill -9 [PID]\n   ```\n\n2. **æƒé™é—®é¢˜**\n   ```bash\n   chown -R www-data:www-data /var/www/aimagic/server\n   ```\n\n3. **æ•°æ®åº“è¿æ¥å¤±è´¥**\n   - æ£€æŸ¥ `.env.production` é…ç½®\n   - ç¡®è®¤æ•°æ®åº“æœåŠ¡è¿è¡Œæ­£å¸¸\n\n4. **PM2æœåŠ¡æ— æ³•å¯åŠ¨**\n   ```bash\n   pm2 logs aimagic-server\n   pm2 flush  # æ¸…é™¤æ—¥å¿—\n   ```\n\n## ğŸ“ æŠ€æœ¯æ”¯æŒ\n\nå¦‚é‡åˆ°éƒ¨ç½²é—®é¢˜ï¼Œè¯·æ£€æŸ¥ï¼š\n1. æœåŠ¡å™¨æ—¥å¿—: `pm2 logs aimagic-server`\n2. ç³»ç»Ÿæ—¥å¿—: `tail -f /var/log/syslog`\n3. å¥åº·æ£€æŸ¥: `node src/scripts/health-check.js`\n\n---\n\n**éƒ¨ç½²å®Œæˆåè®¿é—®åœ°å€**: http://114.132.50.71:3007\n"
        }
    ]
}