{
    "sourceFile": "server/PRODUCTION_FILES_SUMMARY.md",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 3,
            "patches": [
                {
                    "date": 1753705857995,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1753705871039,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -8,9 +8,9 @@\n |--------|------|--------|------|\n | `.env.production` | `server/.env.production` | **å¿…éœ€** | ç”Ÿäº§ç¯å¢ƒå˜é‡é…ç½® |\n | `ecosystem.config.js` | `server/ecosystem.config.js` | **å¿…éœ€** | PM2è¿›ç¨‹ç®¡ç†é…ç½® |\n | `production-package.json` | `server/production-package.json` | **å¿…éœ€** | ç”Ÿäº§ç¯å¢ƒä¾èµ–é…ç½® |\n-| `deploy.sh` | `server/deploy.sh` | **å¿…éœ€** | è‡ªåŠ¨åŒ–éƒ¨ç½²è„šæœ¬ |\n+| `deploy.bat` | `server/deploy.bat` | **å¿…éœ€** | Windowsè‡ªåŠ¨åŒ–éƒ¨ç½²è„šæœ¬ |\n \n ### ğŸ“‹ éƒ¨ç½²æŒ‡å—æ–‡ä»¶\n \n | æ–‡ä»¶å | è·¯å¾„ | é‡è¦æ€§ | æè¿° |\n"
                },
                {
                    "date": 1753705888524,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -28,26 +28,26 @@\n \n ## ğŸš€ å¿«é€Ÿéƒ¨ç½²æŒ‡ä»¤\n \n ### 1. å‡†å¤‡ä¸Šä¼ æ–‡ä»¶åŒ…\n-```bash\n-# åœ¨æœ¬åœ°é¡¹ç›®æ ¹ç›®å½•æ‰§è¡Œ\n+```powershell\n+# åœ¨æœ¬åœ°é¡¹ç›®æ ¹ç›®å½•æ‰§è¡Œ (PowerShell)\n cd server\n-mkdir -p ../aimagic-server-production\n+mkdir ..\\aimagic-server-production\n \n # å¤åˆ¶å¿…éœ€æ–‡ä»¶\n-cp -r src ../aimagic-server-production/\n-cp package.json ../aimagic-server-production/\n-cp production-package.json ../aimagic-server-production/package.json  # è¦†ç›–ä¸ºç”Ÿäº§ç‰ˆæœ¬\n-cp .env.production ../aimagic-server-production/\n-cp ecosystem.config.js ../aimagic-server-production/\n-cp deploy.sh ../aimagic-server-production/\n-cp -r sql ../aimagic-server-production/  # å¯é€‰\n+Copy-Item -Recurse src ..\\aimagic-server-production\\\n+Copy-Item package.json ..\\aimagic-server-production\\\n+Copy-Item production-package.json ..\\aimagic-server-production\\package.json  # è¦†ç›–ä¸ºç”Ÿäº§ç‰ˆæœ¬\n+Copy-Item .env.production ..\\aimagic-server-production\\\n+Copy-Item ecosystem.config.js ..\\aimagic-server-production\\\n+Copy-Item deploy.bat ..\\aimagic-server-production\\\n+Copy-Item -Recurse sql ..\\aimagic-server-production\\  # å¯é€‰\n \n # åˆ›å»ºå¿…è¦ç›®å½•\n-mkdir -p ../aimagic-server-production/logs\n-mkdir -p ../aimagic-server-production/uploads/images\n-mkdir -p ../aimagic-server-production/uploads/temp\n+mkdir ..\\aimagic-server-production\\logs\n+mkdir ..\\aimagic-server-production\\uploads\\images\n+mkdir ..\\aimagic-server-production\\uploads\\temp\n ```\n \n ### 2. FTPä¸Šä¼ \n ```bash\n"
                },
                {
                    "date": 1753705905279,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -49,26 +49,25 @@\n mkdir ..\\aimagic-server-production\\uploads\\temp\n ```\n \n ### 2. FTPä¸Šä¼ \n-```bash\n-# ä½¿ç”¨FTPå®¢æˆ·ç«¯ä¸Šä¼  aimagic-server-production/ ç›®å½•å†…å®¹åˆ°:\n-# æœåŠ¡å™¨: 114.132.50.71\n-# ç›®æ ‡è·¯å¾„: /var/www/aimagic/server/\n ```\n+# ä½¿ç”¨FTPå®¢æˆ·ç«¯ä¸Šä¼  aimagic-server-production\\ ç›®å½•å†…å®¹åˆ°:\n+# æœåŠ¡å™¨: 114.132.50.71 (è…¾è®¯äº‘Windows Server)\n+# ç›®æ ‡è·¯å¾„: C:\\inetpub\\wwwroot\\aimagic\\server\\\n+```\n \n ### 3. æœåŠ¡å™¨ç«¯éƒ¨ç½²\n-```bash\n-# SSHè¿æ¥åˆ°æœåŠ¡å™¨\n-ssh root@114.132.50.71\n-cd /var/www/aimagic/server\n+```cmd\n+# è¿œç¨‹æ¡Œé¢è¿æ¥åˆ°æœåŠ¡å™¨\n+# è®¡ç®—æœº: 114.132.50.71\n+# ç”¨æˆ·å: Administrator\n \n-# è®¾ç½®æƒé™\n-chmod +x deploy.sh\n-chmod 600 .env.production\n+# åœ¨æœåŠ¡å™¨ä¸Šæ‰“å¼€å‘½ä»¤æç¤ºç¬¦\n+cd C:\\inetpub\\wwwroot\\aimagic\\server\n \n-# æ‰§è¡Œéƒ¨ç½²\n-./deploy.sh\n+# æ‰§è¡ŒWindowséƒ¨ç½²è„šæœ¬\n+deploy.bat\n ```\n \n ## ğŸ“Š æ–‡ä»¶é‡è¦æ€§è¯´æ˜\n \n"
                }
            ],
            "date": 1753705857995,
            "name": "Commit-0",
            "content": "# AIMagic åç«¯æœåŠ¡ç”Ÿäº§ç¯å¢ƒæ–‡ä»¶æ€»ç»“ (Windows Server)\n\n## ğŸ“ å·²åˆ›å»ºçš„ç”Ÿäº§ç¯å¢ƒé…ç½®æ–‡ä»¶ (è…¾è®¯äº‘Windows Server)\n\n### ğŸ”§ æ ¸å¿ƒé…ç½®æ–‡ä»¶\n\n| æ–‡ä»¶å | è·¯å¾„ | é‡è¦æ€§ | æè¿° |\n|--------|------|--------|------|\n| `.env.production` | `server/.env.production` | **å¿…éœ€** | ç”Ÿäº§ç¯å¢ƒå˜é‡é…ç½® |\n| `ecosystem.config.js` | `server/ecosystem.config.js` | **å¿…éœ€** | PM2è¿›ç¨‹ç®¡ç†é…ç½® |\n| `production-package.json` | `server/production-package.json` | **å¿…éœ€** | ç”Ÿäº§ç¯å¢ƒä¾èµ–é…ç½® |\n| `deploy.sh` | `server/deploy.sh` | **å¿…éœ€** | è‡ªåŠ¨åŒ–éƒ¨ç½²è„šæœ¬ |\n\n### ğŸ“‹ éƒ¨ç½²æŒ‡å—æ–‡ä»¶\n\n| æ–‡ä»¶å | è·¯å¾„ | é‡è¦æ€§ | æè¿° |\n|--------|------|--------|------|\n| `FTP_UPLOAD_GUIDE.md` | `server/FTP_UPLOAD_GUIDE.md` | **å¿…éœ€** | è¯¦ç»†çš„FTPä¸Šä¼ éƒ¨ç½²æŒ‡å— |\n| `DEPLOYMENT_CHECKLIST.md` | `server/DEPLOYMENT_CHECKLIST.md` | **æ¨è** | éƒ¨ç½²æ£€æŸ¥æ¸…å• |\n| `.ftpignore` | `server/.ftpignore` | **æ¨è** | FTPä¸Šä¼ å¿½ç•¥æ–‡ä»¶åˆ—è¡¨ |\n\n### ğŸ› ï¸ å·¥å…·è„šæœ¬\n\n| æ–‡ä»¶å | è·¯å¾„ | é‡è¦æ€§ | æè¿° |\n|--------|------|--------|------|\n| `health-check.js` | `server/src/scripts/health-check.js` | **æ¨è** | æœåŠ¡å¥åº·æ£€æŸ¥è„šæœ¬ |\n| `init-deployment-config.js` | `server/src/scripts/init-deployment-config.js` | **å¿…éœ€** | éƒ¨ç½²é…ç½®åˆå§‹åŒ–è„šæœ¬ |\n\n## ğŸš€ å¿«é€Ÿéƒ¨ç½²æŒ‡ä»¤\n\n### 1. å‡†å¤‡ä¸Šä¼ æ–‡ä»¶åŒ…\n```bash\n# åœ¨æœ¬åœ°é¡¹ç›®æ ¹ç›®å½•æ‰§è¡Œ\ncd server\nmkdir -p ../aimagic-server-production\n\n# å¤åˆ¶å¿…éœ€æ–‡ä»¶\ncp -r src ../aimagic-server-production/\ncp package.json ../aimagic-server-production/\ncp production-package.json ../aimagic-server-production/package.json  # è¦†ç›–ä¸ºç”Ÿäº§ç‰ˆæœ¬\ncp .env.production ../aimagic-server-production/\ncp ecosystem.config.js ../aimagic-server-production/\ncp deploy.sh ../aimagic-server-production/\ncp -r sql ../aimagic-server-production/  # å¯é€‰\n\n# åˆ›å»ºå¿…è¦ç›®å½•\nmkdir -p ../aimagic-server-production/logs\nmkdir -p ../aimagic-server-production/uploads/images\nmkdir -p ../aimagic-server-production/uploads/temp\n```\n\n### 2. FTPä¸Šä¼ \n```bash\n# ä½¿ç”¨FTPå®¢æˆ·ç«¯ä¸Šä¼  aimagic-server-production/ ç›®å½•å†…å®¹åˆ°:\n# æœåŠ¡å™¨: 114.132.50.71\n# ç›®æ ‡è·¯å¾„: /var/www/aimagic/server/\n```\n\n### 3. æœåŠ¡å™¨ç«¯éƒ¨ç½²\n```bash\n# SSHè¿æ¥åˆ°æœåŠ¡å™¨\nssh root@114.132.50.71\ncd /var/www/aimagic/server\n\n# è®¾ç½®æƒé™\nchmod +x deploy.sh\nchmod 600 .env.production\n\n# æ‰§è¡Œéƒ¨ç½²\n./deploy.sh\n```\n\n## ğŸ“Š æ–‡ä»¶é‡è¦æ€§è¯´æ˜\n\n### ğŸ”´ å¿…éœ€æ–‡ä»¶ (CRITICAL)\nè¿™äº›æ–‡ä»¶æ˜¯æœåŠ¡è¿è¡Œçš„åŸºç¡€ï¼Œç¼ºå°‘ä»»ä½•ä¸€ä¸ªéƒ½ä¼šå¯¼è‡´éƒ¨ç½²å¤±è´¥ï¼š\n\n- **src/** - å®Œæ•´çš„æºä»£ç ç›®å½•\n- **package.json** - ä¾èµ–ç®¡ç†ï¼ˆä½¿ç”¨production-package.jsonè¦†ç›–ï¼‰\n- **.env.production** - ç”Ÿäº§ç¯å¢ƒé…ç½®\n- **ecosystem.config.js** - PM2é…ç½®\n- **deploy.sh** - éƒ¨ç½²è„šæœ¬\n\n### ğŸŸ¡ æ¨èæ–‡ä»¶ (RECOMMENDED)\nè¿™äº›æ–‡ä»¶æä¾›é¢å¤–çš„åŠŸèƒ½å’Œä¾¿åˆ©æ€§ï¼š\n\n- **health-check.js** - æœåŠ¡å¥åº·ç›‘æ§\n- **sql/** - æ•°æ®åº“è„šæœ¬ï¼ˆå¦‚éœ€è¦ï¼‰\n- **DEPLOYMENT_CHECKLIST.md** - éƒ¨ç½²æ£€æŸ¥æ¸…å•\n\n### ğŸŸ¢ å¯é€‰æ–‡ä»¶ (OPTIONAL)\nè¿™äº›æ–‡ä»¶æä¾›æ–‡æ¡£å’Œå‚è€ƒï¼š\n\n- **FTP_UPLOAD_GUIDE.md** - è¯¦ç»†éƒ¨ç½²æŒ‡å—\n- **.ftpignore** - ä¸Šä¼ å¿½ç•¥åˆ—è¡¨\n- **docs/** - é¡¹ç›®æ–‡æ¡£\n\n## ğŸ”§ é…ç½®è¦ç‚¹\n\n### æ•°æ®åº“é…ç½®\n```env\nDB_HOST=114.132.50.71\nDB_PORT=3306\nDB_NAME=aimagic\nDB_USER=aimagic\nDB_PASSWORD=dFLJYsd82irJwHX5\n```\n\n### æœåŠ¡é…ç½®\n```env\nNODE_ENV=production\nPORT=3007\nJWT_SECRET=aimagic.icomfy.co^~^\n```\n\n### CORSé…ç½®\n```env\nCORS_ORIGIN=https://your-frontend-domain.com,http://114.132.50.71:3001,http://114.132.50.71:3003\n```\n\n## ğŸ›¡ï¸ å®‰å…¨æ£€æŸ¥\n\n### æ–‡ä»¶æƒé™\n```bash\nchmod 755 /var/www/aimagic/server\nchmod 600 /var/www/aimagic/server/.env.production\nchmod +x /var/www/aimagic/server/deploy.sh\nchmod 755 /var/www/aimagic/server/logs\nchmod 755 /var/www/aimagic/server/uploads\n```\n\n### ç¯å¢ƒå˜é‡å®‰å…¨\n- âœ… ç”Ÿäº§ç¯å¢ƒJWTå¯†é’¥å·²é…ç½®\n- âœ… æ•°æ®åº“å¯†ç å·²é…ç½®\n- âœ… CORSåŸŸåé™åˆ¶å·²è®¾ç½®\n\n## ğŸ“ˆ éƒ¨ç½²åéªŒè¯\n\n### æœåŠ¡çŠ¶æ€æ£€æŸ¥\n```bash\n# æ£€æŸ¥PM2çŠ¶æ€\npm2 status\n\n# æ£€æŸ¥æœåŠ¡å“åº”\ncurl http://114.132.50.71:3007/api/health\n\n# è¿è¡Œå¥åº·æ£€æŸ¥\nnode src/scripts/health-check.js\n```\n\n### APIæµ‹è¯•\n```bash\n# åŸºç¡€å¥åº·æ£€æŸ¥\ncurl http://114.132.50.71:3007/api/health\n\n# é…ç½®æ¥å£æµ‹è¯•\ncurl http://114.132.50.71:3007/api/config\n\n# å…¬å…±é…ç½®æµ‹è¯•\ncurl http://114.132.50.71:3007/api/public-config\n```\n\n## ğŸ”„ æ›´æ–°éƒ¨ç½²\n\n### ä»£ç æ›´æ–°æµç¨‹\n1. åœ¨æœ¬åœ°ä¿®æ”¹ä»£ç \n2. é‡æ–°æ‰“åŒ…ä¸Šä¼ æ–‡ä»¶\n3. é€šè¿‡FTPä¸Šä¼ åˆ°æœåŠ¡å™¨\n4. åœ¨æœåŠ¡å™¨æ‰§è¡Œ: `pm2 restart aimagic-server`\n\n### é…ç½®æ›´æ–°æµç¨‹\n1. ä¿®æ”¹ `.env.production`\n2. ä¸Šä¼ åˆ°æœåŠ¡å™¨\n3. æ‰§è¡Œ: `pm2 restart aimagic-server`\n\n---\n\n**éƒ¨ç½²æˆåŠŸæ ‡å¿—**:\n- PM2æ˜¾ç¤ºæœåŠ¡çŠ¶æ€ä¸º `online`\n- å¥åº·æ£€æŸ¥è„šæœ¬è¿”å›æˆåŠŸ\n- APIæ¥å£å“åº”æ­£å¸¸\n- æœåŠ¡åœ°å€ http://114.132.50.71:3007 å¯è®¿é—®\n"
        }
    ]
}