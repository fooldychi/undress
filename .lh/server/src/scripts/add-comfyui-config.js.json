{
    "sourceFile": "server/src/scripts/add-comfyui-config.js",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1752329620203,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1752329620203,
            "name": "Commit-0",
            "content": "const { query } = require('../config/database');\n\nasync function addComfyUIConfig() {\n  try {\n    console.log('ðŸ”§ æ·»åŠ ComfyUIé…ç½®é¡¹...');\n\n    const comfyuiConfigs = [\n      // ComfyUIæœåŠ¡å™¨é…ç½®\n      ['comfyui.server_url', 'https://your-comfyui-server.com', 'string', 'comfyui', 'ComfyUIæœåŠ¡å™¨åœ°å€'],\n      ['comfyui.client_id', 'your-comfyui-client-id', 'string', 'comfyui', 'ComfyUIå®¢æˆ·ç«¯ID'],\n      ['comfyui.timeout', '300000', 'number', 'comfyui', 'ComfyUIè¯·æ±‚è¶…æ—¶æ—¶é—´(æ¯«ç§’)'],\n      \n      // AIåŠŸèƒ½é…ç½®\n      ['ai.text_to_image_points', '20', 'number', 'ai', 'æ–‡ç”Ÿå›¾æ¶ˆè€—ç§¯åˆ†'],\n      ['ai.face_swap_points', '20', 'number', 'ai', 'æ¢è„¸æ¶ˆè€—ç§¯åˆ†'],\n      ['ai.undress_points', '20', 'number', 'ai', 'æ¢è¡£æ¶ˆè€—ç§¯åˆ†'],\n      \n      // å‰ç«¯é…ç½®\n      ['frontend.api_base_url', 'https://your-api-server.com/api', 'string', 'frontend', 'å‰ç«¯APIåŸºç¡€åœ°å€'],\n      ['frontend.title', 'AI Magic - AIå›¾åƒå¤„ç†å¹³å°', 'string', 'frontend', 'åº”ç”¨æ ‡é¢˜'],\n      ['frontend.version', '1.0.0', 'string', 'frontend', 'åº”ç”¨ç‰ˆæœ¬']\n    ];\n\n    for (const [key, value, type, group, desc] of comfyuiConfigs) {\n      await query(`\n        INSERT INTO system_config (config_key, config_value, config_type, config_group, description)\n        VALUES (?, ?, ?, ?, ?)\n        ON DUPLICATE KEY UPDATE \n          config_value = VALUES(config_value),\n          updated_at = CURRENT_TIMESTAMP\n      `, [key, value, type, group, desc]);\n    }\n    \n    console.log(`âœ… æ·»åŠ äº† ${comfyuiConfigs.length} ä¸ªComfyUIé…ç½®é¡¹`);\n\n    // éªŒè¯ç»“æžœ\n    const configs = await query('SELECT config_group, COUNT(*) as count FROM system_config GROUP BY config_group');\n    console.log('\\nðŸ“Š é…ç½®åˆ†ç»„ç»Ÿè®¡:');\n    configs.forEach(config => {\n      console.log(`  ${config.config_group}: ${config.count} é¡¹`);\n    });\n\n    console.log('\\nðŸŽ‰ ComfyUIé…ç½®æ·»åŠ å®Œæˆï¼');\n\n  } catch (error) {\n    console.error('âŒ æ·»åŠ ComfyUIé…ç½®å¤±è´¥:', error);\n    throw error;\n  }\n}\n\nif (require.main === module) {\n  addComfyUIConfig()\n    .then(() => process.exit(0))\n    .catch(error => {\n      console.error('ðŸ’¥ å¤±è´¥:', error);\n      process.exit(1);\n    });\n}\n\nmodule.exports = { addComfyUIConfig };\n\n"
        }
    ]
}