{
    "sourceFile": "server/diagnose.js",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1752493531414,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1752493531414,
            "name": "Commit-0",
            "content": "// è¯Šæ–­è„šæœ¬\nconsole.log('ğŸ” å¼€å§‹è¯Šæ–­...');\n\n// 1. æ£€æŸ¥ç¯å¢ƒå˜é‡\nrequire('dotenv').config();\nconsole.log('ğŸ“‹ ç¯å¢ƒå˜é‡æ£€æŸ¥:');\nconsole.log('  PORT:', process.env.PORT);\nconsole.log('  NODE_ENV:', process.env.NODE_ENV);\nconsole.log('  JWT_SECRET:', process.env.JWT_SECRET ? 'å·²è®¾ç½®' : 'æœªè®¾ç½®');\nconsole.log('  DB_HOST:', process.env.DB_HOST);\n\n// 2. æ£€æŸ¥ä¾èµ–\nconsole.log('\\nğŸ“¦ ä¾èµ–æ£€æŸ¥:');\ntry {\n  const express = require('express');\n  console.log('  âœ… express å¯ç”¨');\n} catch (error) {\n  console.log('  âŒ express ä¸å¯ç”¨:', error.message);\n}\n\ntry {\n  const cors = require('cors');\n  console.log('  âœ… cors å¯ç”¨');\n} catch (error) {\n  console.log('  âŒ cors ä¸å¯ç”¨:', error.message);\n}\n\ntry {\n  const jwt = require('jsonwebtoken');\n  console.log('  âœ… jsonwebtoken å¯ç”¨');\n} catch (error) {\n  console.log('  âŒ jsonwebtoken ä¸å¯ç”¨:', error.message);\n}\n\n// 3. æµ‹è¯•ç«¯å£\nconsole.log('\\nğŸ”Œ ç«¯å£æ£€æŸ¥:');\nconst net = require('net');\nconst PORT = 3008; // ä½¿ç”¨ä¸åŒçš„ç«¯å£\n\nconst server = net.createServer();\nserver.listen(PORT, () => {\n  console.log(`  âœ… ç«¯å£ ${PORT} å¯ç”¨`);\n  server.close();\n\n  // 4. å¯åŠ¨æœ€å°æœåŠ¡å™¨\n  console.log('\\nğŸš€ å¯åŠ¨æœ€å°æœåŠ¡å™¨...');\n  startMinimalServer();\n});\n\nserver.on('error', (err) => {\n  if (err.code === 'EADDRINUSE') {\n    console.log(`  âŒ ç«¯å£ ${PORT} å·²è¢«å ç”¨`);\n  } else {\n    console.log(`  âŒ ç«¯å£æ£€æŸ¥å¤±è´¥:`, err.message);\n  }\n});\n\nfunction startMinimalServer() {\n  const express = require('express');\n  const app = express();\n\n  app.use(express.json());\n\n  app.get('/health', (req, res) => {\n    console.log('ğŸ“Š æ”¶åˆ°å¥åº·æ£€æŸ¥è¯·æ±‚');\n    res.json({ status: 'OK', timestamp: new Date().toISOString() });\n  });\n\n  app.get('/api/auth/me', (req, res) => {\n    console.log('ğŸ‘¤ æ”¶åˆ°ç”¨æˆ·ä¿¡æ¯è¯·æ±‚');\n    res.status(500).json({\n      success: false,\n      message: 'æµ‹è¯•500é”™è¯¯'\n    });\n  });\n\n  const server = app.listen(PORT, () => {\n    console.log(`âœ… æœ€å°æœåŠ¡å™¨å¯åŠ¨æˆåŠŸ: http://localhost:${PORT}`);\n    console.log('ğŸ”— æµ‹è¯•é“¾æ¥:');\n    console.log(`   http://localhost:${PORT}/health`);\n    console.log(`   http://localhost:${PORT}/api/auth/me`);\n  });\n\n  server.on('error', (err) => {\n    console.error('âŒ æœåŠ¡å™¨å¯åŠ¨å¤±è´¥:', err.message);\n  });\n}\n"
        }
    ]
}