{
    "sourceFile": "server/verify-package.bat",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 4,
            "patches": [
                {
                    "date": 1753707831038,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1753707848413,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -9,41 +9,41 @@\n \n set ERROR_COUNT=0\n set WARNING_COUNT=0\n \n-echo [INFO] 开始验证打包文件...\n+[INFO] Starting package verification...\n echo.\n \n-REM 验证核心文件\n-echo === 核心文件验证 ===\n+REM Verify core files\n+echo === Core Files Verification ===\n if exist \"src\\app.js\" (\n-    echo [✅] src\\app.js - 存在\n+    echo [OK] src\\app.js - Found\n ) else (\n-    echo [❌] src\\app.js - 缺失\n-    set /a ERROR_COUNT+=1\n+    echo [ERROR] src\\app.js - Missing\n+    set /a ERROR_COUNT=!ERROR_COUNT!+1\n )\n \n if exist \"package.json\" (\n-    echo [✅] package.json - 存在\n+    echo [OK] package.json - Found\n ) else if exist \"production-package.json\" (\n-    echo [✅] production-package.json - 存在\n+    echo [OK] production-package.json - Found\n ) else (\n-    echo [❌] package.json/production-package.json - 缺失\n-    set /a ERROR_COUNT+=1\n+    echo [ERROR] package.json/production-package.json - Missing\n+    set /a ERROR_COUNT=!ERROR_COUNT!+1\n )\n \n if exist \".env.production\" (\n-    echo [✅] .env.production - 存在\n+    echo [OK] .env.production - Found\n ) else (\n-    echo [❌] .env.production - 缺失\n-    set /a ERROR_COUNT+=1\n+    echo [ERROR] .env.production - Missing\n+    set /a ERROR_COUNT=!ERROR_COUNT!+1\n )\n \n if exist \"ecosystem.config.js\" (\n-    echo [✅] ecosystem.config.js - 存在\n+    echo [OK] ecosystem.config.js - Found\n ) else (\n-    echo [❌] ecosystem.config.js - 缺失\n-    set /a ERROR_COUNT+=1\n+    echo [ERROR] ecosystem.config.js - Missing\n+    set /a ERROR_COUNT=!ERROR_COUNT!+1\n )\n \n echo.\n echo === 源代码目录验证 ===\n"
                },
                {
                    "date": 1753707867939,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -45,56 +45,56 @@\n     set /a ERROR_COUNT=!ERROR_COUNT!+1\n )\n \n echo.\n-echo === 源代码目录验证 ===\n+echo === Source Code Directories Verification ===\n if exist \"src\\config\" (\n-    echo [✅] src\\config - 存在\n+    echo [OK] src\\config - Found\n ) else (\n-    echo [⚠️] src\\config - 缺失\n-    set /a WARNING_COUNT+=1\n+    echo [WARN] src\\config - Missing\n+    set /a WARNING_COUNT=!WARNING_COUNT!+1\n )\n \n if exist \"src\\controllers\" (\n-    echo [✅] src\\controllers - 存在\n+    echo [OK] src\\controllers - Found\n ) else (\n-    echo [⚠️] src\\controllers - 缺失\n-    set /a WARNING_COUNT+=1\n+    echo [WARN] src\\controllers - Missing\n+    set /a WARNING_COUNT=!WARNING_COUNT!+1\n )\n \n if exist \"src\\middleware\" (\n-    echo [✅] src\\middleware - 存在\n+    echo [OK] src\\middleware - Found\n ) else (\n-    echo [⚠️] src\\middleware - 缺失\n-    set /a WARNING_COUNT+=1\n+    echo [WARN] src\\middleware - Missing\n+    set /a WARNING_COUNT=!WARNING_COUNT!+1\n )\n \n if exist \"src\\models\" (\n-    echo [✅] src\\models - 存在\n+    echo [OK] src\\models - Found\n ) else (\n-    echo [⚠️] src\\models - 缺失\n-    set /a WARNING_COUNT+=1\n+    echo [WARN] src\\models - Missing\n+    set /a WARNING_COUNT=!WARNING_COUNT!+1\n )\n \n if exist \"src\\routes\" (\n-    echo [✅] src\\routes - 存在\n+    echo [OK] src\\routes - Found\n ) else (\n-    echo [⚠️] src\\routes - 缺失\n-    set /a WARNING_COUNT+=1\n+    echo [WARN] src\\routes - Missing\n+    set /a WARNING_COUNT=!WARNING_COUNT!+1\n )\n \n if exist \"src\\services\" (\n-    echo [✅] src\\services - 存在\n+    echo [OK] src\\services - Found\n ) else (\n-    echo [⚠️] src\\services - 缺失\n-    set /a WARNING_COUNT+=1\n+    echo [WARN] src\\services - Missing\n+    set /a WARNING_COUNT=!WARNING_COUNT!+1\n )\n \n if exist \"src\\utils\" (\n-    echo [✅] src\\utils - 存在\n+    echo [OK] src\\utils - Found\n ) else (\n-    echo [⚠️] src\\utils - 缺失\n-    set /a WARNING_COUNT+=1\n+    echo [WARN] src\\utils - Missing\n+    set /a WARNING_COUNT=!WARNING_COUNT!+1\n )\n \n echo.\n echo === 脚本文件验证 ===\n"
                },
                {
                    "date": 1753707890558,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -96,57 +96,57 @@\n     set /a WARNING_COUNT=!WARNING_COUNT!+1\n )\n \n echo.\n-echo === 脚本文件验证 ===\n+echo === Script Files Verification ===\n if exist \"src\\scripts\" (\n-    echo [✅] src\\scripts 目录 - 存在\n+    echo [OK] src\\scripts directory - Found\n     if exist \"src\\scripts\\health-check.js\" (\n-        echo [✅] src\\scripts\\health-check.js - 存在\n+        echo [OK] src\\scripts\\health-check.js - Found\n     ) else (\n-        echo [⚠️] src\\scripts\\health-check.js - 缺失（将自动创建）\n-        set /a WARNING_COUNT+=1\n+        echo [WARN] src\\scripts\\health-check.js - Missing (will be auto-created)\n+        set /a WARNING_COUNT=!WARNING_COUNT!+1\n     )\n \n     if exist \"src\\scripts\\init-deployment-config.js\" (\n-        echo [✅] src\\scripts\\init-deployment-config.js - 存在\n+        echo [OK] src\\scripts\\init-deployment-config.js - Found\n     ) else (\n-        echo [⚠️] src\\scripts\\init-deployment-config.js - 缺失（将自动创建）\n-        set /a WARNING_COUNT+=1\n+        echo [WARN] src\\scripts\\init-deployment-config.js - Missing (will be auto-created)\n+        set /a WARNING_COUNT=!WARNING_COUNT!+1\n     )\n ) else (\n-    echo [⚠️] src\\scripts 目录 - 缺失（将自动创建）\n-    set /a WARNING_COUNT+=1\n+    echo [WARN] src\\scripts directory - Missing (will be auto-created)\n+    set /a WARNING_COUNT=!WARNING_COUNT!+1\n )\n \n echo.\n-echo === 部署脚本验证 ===\n+echo === Deployment Scripts Verification ===\n if exist \"deploy.bat\" (\n-    echo [✅] deploy.bat - 存在\n+    echo [OK] deploy.bat - Found\n ) else (\n-    echo [⚠️] deploy.bat - 缺失\n-    set /a WARNING_COUNT+=1\n+    echo [WARN] deploy.bat - Missing\n+    set /a WARNING_COUNT=!WARNING_COUNT!+1\n )\n \n if exist \"deploy-en.bat\" (\n-    echo [✅] deploy-en.bat - 存在\n+    echo [OK] deploy-en.bat - Found\n ) else (\n-    echo [⚠️] deploy-en.bat - 缺失\n-    set /a WARNING_COUNT+=1\n+    echo [WARN] deploy-en.bat - Missing\n+    set /a WARNING_COUNT=!WARNING_COUNT!+1\n )\n \n echo.\n-echo === 可选文件验证 ===\n+echo === Optional Files Verification ===\n if exist \"sql\" (\n-    echo [✅] sql 目录 - 存在\n+    echo [OK] sql directory - Found\n ) else (\n-    echo [ℹ️] sql 目录 - 不存在（可选）\n+    echo [INFO] sql directory - Not found (optional)\n )\n \n if exist \"README.md\" (\n-    echo [✅] README.md - 存在\n+    echo [OK] README.md - Found\n ) else (\n-    echo [ℹ️] README.md - 不存在（可选）\n+    echo [INFO] README.md - Not found (optional)\n )\n \n echo.\n echo ========================================\n"
                },
                {
                    "date": 1753707909843,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -149,32 +149,32 @@\n )\n \n echo.\n echo ========================================\n-echo          验证结果\n+echo          Verification Results\n echo ========================================\n-echo 错误数量: %ERROR_COUNT%\n-echo 警告数量: %WARNING_COUNT%\n+echo Errors: !ERROR_COUNT!\n+echo Warnings: !WARNING_COUNT!\n echo ========================================\n \n-if %ERROR_COUNT% GTR 0 (\n+if !ERROR_COUNT! GTR 0 (\n     echo.\n-    echo [❌] 发现 %ERROR_COUNT% 个严重错误！\n-    echo [INFO] 请先解决这些错误再进行打包\n+    echo [ERROR] Found !ERROR_COUNT! critical errors!\n+    echo [INFO] Please fix these errors before packaging\n     echo.\n     pause\n     exit /b 1\n-) else if %WARNING_COUNT% GTR 0 (\n+) else if !WARNING_COUNT! GTR 0 (\n     echo.\n-    echo [⚠️] 发现 %WARNING_COUNT% 个警告\n-    echo [INFO] 这些文件缺失可能影响功能，建议检查\n-    echo [INFO] 打包脚本会自动创建缺失的脚本文件\n+    echo [WARN] Found !WARNING_COUNT! warnings\n+    echo [INFO] Missing files may affect functionality\n+    echo [INFO] Packaging script will auto-create missing script files\n     echo.\n ) else (\n     echo.\n-    echo [✅] 所有验证通过！\n-    echo [INFO] 可以安全进行打包\n+    echo [SUCCESS] All verifications passed!\n+    echo [INFO] Safe to proceed with packaging\n     echo.\n )\n \n-echo 按任意键继续...\n+echo Press any key to continue...\n pause >nul\n"
                }
            ],
            "date": 1753707831038,
            "name": "Commit-0",
            "content": "@echo off\nsetlocal enabledelayedexpansion\necho ========================================\necho    AIMagic Package Verification Script\necho ========================================\necho Verification Time: %date% %time%\necho ========================================\necho.\n\nset ERROR_COUNT=0\nset WARNING_COUNT=0\n\necho [INFO] 开始验证打包文件...\necho.\n\nREM 验证核心文件\necho === 核心文件验证 ===\nif exist \"src\\app.js\" (\n    echo [✅] src\\app.js - 存在\n) else (\n    echo [❌] src\\app.js - 缺失\n    set /a ERROR_COUNT+=1\n)\n\nif exist \"package.json\" (\n    echo [✅] package.json - 存在\n) else if exist \"production-package.json\" (\n    echo [✅] production-package.json - 存在\n) else (\n    echo [❌] package.json/production-package.json - 缺失\n    set /a ERROR_COUNT+=1\n)\n\nif exist \".env.production\" (\n    echo [✅] .env.production - 存在\n) else (\n    echo [❌] .env.production - 缺失\n    set /a ERROR_COUNT+=1\n)\n\nif exist \"ecosystem.config.js\" (\n    echo [✅] ecosystem.config.js - 存在\n) else (\n    echo [❌] ecosystem.config.js - 缺失\n    set /a ERROR_COUNT+=1\n)\n\necho.\necho === 源代码目录验证 ===\nif exist \"src\\config\" (\n    echo [✅] src\\config - 存在\n) else (\n    echo [⚠️] src\\config - 缺失\n    set /a WARNING_COUNT+=1\n)\n\nif exist \"src\\controllers\" (\n    echo [✅] src\\controllers - 存在\n) else (\n    echo [⚠️] src\\controllers - 缺失\n    set /a WARNING_COUNT+=1\n)\n\nif exist \"src\\middleware\" (\n    echo [✅] src\\middleware - 存在\n) else (\n    echo [⚠️] src\\middleware - 缺失\n    set /a WARNING_COUNT+=1\n)\n\nif exist \"src\\models\" (\n    echo [✅] src\\models - 存在\n) else (\n    echo [⚠️] src\\models - 缺失\n    set /a WARNING_COUNT+=1\n)\n\nif exist \"src\\routes\" (\n    echo [✅] src\\routes - 存在\n) else (\n    echo [⚠️] src\\routes - 缺失\n    set /a WARNING_COUNT+=1\n)\n\nif exist \"src\\services\" (\n    echo [✅] src\\services - 存在\n) else (\n    echo [⚠️] src\\services - 缺失\n    set /a WARNING_COUNT+=1\n)\n\nif exist \"src\\utils\" (\n    echo [✅] src\\utils - 存在\n) else (\n    echo [⚠️] src\\utils - 缺失\n    set /a WARNING_COUNT+=1\n)\n\necho.\necho === 脚本文件验证 ===\nif exist \"src\\scripts\" (\n    echo [✅] src\\scripts 目录 - 存在\n    if exist \"src\\scripts\\health-check.js\" (\n        echo [✅] src\\scripts\\health-check.js - 存在\n    ) else (\n        echo [⚠️] src\\scripts\\health-check.js - 缺失（将自动创建）\n        set /a WARNING_COUNT+=1\n    )\n\n    if exist \"src\\scripts\\init-deployment-config.js\" (\n        echo [✅] src\\scripts\\init-deployment-config.js - 存在\n    ) else (\n        echo [⚠️] src\\scripts\\init-deployment-config.js - 缺失（将自动创建）\n        set /a WARNING_COUNT+=1\n    )\n) else (\n    echo [⚠️] src\\scripts 目录 - 缺失（将自动创建）\n    set /a WARNING_COUNT+=1\n)\n\necho.\necho === 部署脚本验证 ===\nif exist \"deploy.bat\" (\n    echo [✅] deploy.bat - 存在\n) else (\n    echo [⚠️] deploy.bat - 缺失\n    set /a WARNING_COUNT+=1\n)\n\nif exist \"deploy-en.bat\" (\n    echo [✅] deploy-en.bat - 存在\n) else (\n    echo [⚠️] deploy-en.bat - 缺失\n    set /a WARNING_COUNT+=1\n)\n\necho.\necho === 可选文件验证 ===\nif exist \"sql\" (\n    echo [✅] sql 目录 - 存在\n) else (\n    echo [ℹ️] sql 目录 - 不存在（可选）\n)\n\nif exist \"README.md\" (\n    echo [✅] README.md - 存在\n) else (\n    echo [ℹ️] README.md - 不存在（可选）\n)\n\necho.\necho ========================================\necho          验证结果\necho ========================================\necho 错误数量: %ERROR_COUNT%\necho 警告数量: %WARNING_COUNT%\necho ========================================\n\nif %ERROR_COUNT% GTR 0 (\n    echo.\n    echo [❌] 发现 %ERROR_COUNT% 个严重错误！\n    echo [INFO] 请先解决这些错误再进行打包\n    echo.\n    pause\n    exit /b 1\n) else if %WARNING_COUNT% GTR 0 (\n    echo.\n    echo [⚠️] 发现 %WARNING_COUNT% 个警告\n    echo [INFO] 这些文件缺失可能影响功能，建议检查\n    echo [INFO] 打包脚本会自动创建缺失的脚本文件\n    echo.\n) else (\n    echo.\n    echo [✅] 所有验证通过！\n    echo [INFO] 可以安全进行打包\n    echo.\n)\n\necho 按任意键继续...\npause >nul\n"
        }
    ]
}