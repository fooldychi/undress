{
    "sourceFile": "validate-html-tags.js",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1752416358315,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1752416358315,
            "name": "Commit-0",
            "content": "const fs = require('fs');\nconst path = require('path');\n\nfunction validateHTMLTags(filePath) {\n  console.log(`\\nğŸ” éªŒè¯æ–‡ä»¶: ${filePath}`);\n\n  const content = fs.readFileSync(filePath, 'utf8');\n  const lines = content.split('\\n');\n\n  // æå–templateéƒ¨åˆ†\n  const templateStart = lines.findIndex(line => line.trim().startsWith('<template'));\n  const templateEnd = lines.findIndex(line => line.trim() === '</template>');\n\n  if (templateStart === -1 || templateEnd === -1) {\n    console.log('âŒ æœªæ‰¾åˆ°templateæ ‡ç­¾');\n    return false;\n  }\n\n  console.log(`ğŸ“ TemplateèŒƒå›´: ç¬¬${templateStart + 1}è¡Œ åˆ° ç¬¬${templateEnd + 1}è¡Œ`);\n\n  const templateLines = lines.slice(templateStart + 1, templateEnd);\n  const stack = [];\n  let isValid = true;\n\n  templateLines.forEach((line, index) => {\n    const lineNumber = templateStart + 2 + index;\n    const trimmedLine = line.trim();\n\n    // è·³è¿‡æ³¨é‡Šå’Œç©ºè¡Œ\n    if (!trimmedLine || trimmedLine.startsWith('<!--')) return;\n\n    // æŸ¥æ‰¾æ‰€æœ‰æ ‡ç­¾\n    const tagRegex = /<\\/?([a-zA-Z][a-zA-Z0-9-]*)[^>]*>/g;\n    let match;\n\n    while ((match = tagRegex.exec(line)) !== null) {\n      const fullTag = match[0];\n      const tagName = match[1];\n\n      // è·³è¿‡è‡ªé—­åˆæ ‡ç­¾\n      if (fullTag.endsWith('/>') || ['img', 'input', 'br', 'hr', 'meta', 'link'].includes(tagName)) {\n        continue;\n      }\n\n      if (fullTag.startsWith('</')) {\n        // ç»“æŸæ ‡ç­¾\n        if (stack.length === 0) {\n          console.log(`âŒ ç¬¬${lineNumber}è¡Œ: å¤šä½™çš„ç»“æŸæ ‡ç­¾ ${fullTag}`);\n          isValid = false;\n        } else {\n          const lastTag = stack.pop();\n          if (lastTag !== tagName) {\n            console.log(`âŒ ç¬¬${lineNumber}è¡Œ: æ ‡ç­¾ä¸åŒ¹é…ï¼ŒæœŸæœ› </${lastTag}>ï¼Œå®é™… ${fullTag}`);\n            isValid = false;\n          } else {\n            console.log(`âœ… ç¬¬${lineNumber}è¡Œ: ${fullTag} æ­£ç¡®åŒ¹é…`);\n          }\n        }\n      } else {\n        // å¼€å§‹æ ‡ç­¾\n        stack.push(tagName);\n        console.log(`ğŸ“ ç¬¬${lineNumber}è¡Œ: å¼€å§‹æ ‡ç­¾ ${fullTag}`);\n      }\n    }\n  });\n\n  // æ£€æŸ¥æ˜¯å¦æœ‰æœªé—­åˆçš„æ ‡ç­¾\n  if (stack.length > 0) {\n    console.log(`âŒ æœªé—­åˆçš„æ ‡ç­¾: ${stack.join(', ')}`);\n    isValid = false;\n  }\n\n  if (isValid) {\n    console.log('âœ… HTMLæ ‡ç­¾ç»“æ„æ­£ç¡®ï¼');\n  } else {\n    console.log('âŒ HTMLæ ‡ç­¾ç»“æ„æœ‰é—®é¢˜ï¼');\n  }\n\n  return isValid;\n}\n\n// éªŒè¯ä¸¤ä¸ªç»„ä»¶æ–‡ä»¶\nconst files = [\n  'client/src/components/ImageComparison.vue',\n  'client/src/components/common/VantImageComparison.vue'\n];\n\nconsole.log('ğŸš€ å¼€å§‹éªŒè¯Vueç»„ä»¶çš„HTMLæ ‡ç­¾ç»“æ„...\\n');\n\nlet allValid = true;\nfiles.forEach(file => {\n  if (fs.existsSync(file)) {\n    const isValid = validateHTMLTags(file);\n    allValid = allValid && isValid;\n  } else {\n    console.log(`âŒ æ–‡ä»¶ä¸å­˜åœ¨: ${file}`);\n    allValid = false;\n  }\n});\n\nconsole.log('\\n' + '='.repeat(50));\nif (allValid) {\n  console.log('ğŸ‰ æ‰€æœ‰æ–‡ä»¶çš„HTMLæ ‡ç­¾ç»“æ„éƒ½æ­£ç¡®ï¼');\n} else {\n  console.log('ğŸ’¥ å‘ç°HTMLæ ‡ç­¾ç»“æ„é—®é¢˜ï¼Œè¯·æ£€æŸ¥ä¸Šè¿°é”™è¯¯ï¼');\n}\n"
        }
    ]
}