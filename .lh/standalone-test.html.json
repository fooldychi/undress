{
    "sourceFile": "standalone-test.html",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 3,
            "patches": [
                {
                    "date": 1752515398486,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1752515416559,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -431,10 +431,14 @@\n                         <div>ç±»å‹: ${server.type === 'primary' ? 'ä¸»æœåŠ¡å™¨' : 'å¤‡ç”¨æœåŠ¡å™¨'}</div>\n                         <div>ä¼˜å…ˆçº§: ${server.priority}</div>\n                         ${server.responseTime > 0 ? `<div>å“åº”æ—¶é—´: ${server.responseTime}ms</div>` : ''}\n                         ${server.queue ? `<div>é˜Ÿåˆ—: ${server.queue.total || 0} (è¿è¡Œä¸­: ${server.queue.running || 0}, ç­‰å¾…ä¸­: ${server.queue.pending || 0})</div>` : ''}\n+                        ${server.queue && server.queue.isEstimate ? `<div style=\"color: #856404;\">âš ï¸ é˜Ÿåˆ—ä¿¡æ¯ä¸ºä¼°ç®—å€¼</div>` : ''}\n+                        ${server.queue && server.queue.parseError ? `<div style=\"color: #856404;\">âš ï¸ é˜Ÿåˆ—æ•°æ®è§£æå¤±è´¥: ${server.queue.parseError}</div>` : ''}\n+                        ${server.queue && server.queue.httpError ? `<div style=\"color: #856404;\">âš ï¸ é˜Ÿåˆ—API HTTPé”™è¯¯: ${server.queue.httpError}</div>` : ''}\n                         ${server.healthCheckEndpoint ? `<div>å¯ç”¨ç«¯ç‚¹: ${server.healthCheckEndpoint}</div>` : ''}\n                         ${server.error ? `<div style=\"color: #dc3545;\">é”™è¯¯: ${server.error}</div>` : ''}\n+                        ${server.queue && server.queue.rawData ? `<details><summary>åŸå§‹é˜Ÿåˆ—æ•°æ®</summary><pre style=\"font-size: 11px; max-height: 100px; overflow-y: auto;\">${JSON.stringify(server.queue.rawData, null, 2)}</pre></details>` : ''}\n                     `;\n \n                     resultsElement.appendChild(div);\n                 });\n"
                },
                {
                    "date": 1752516131637,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -202,14 +202,16 @@\n                     const timeoutId = setTimeout(() => controller.abort(), this.queueCheckTimeout);\n \n                     console.log(`ğŸ“Š è·å–æœåŠ¡å™¨é˜Ÿåˆ—ä¿¡æ¯: ${serverUrl}/queue`);\n \n-                    const response = await fetch(`${serverUrl}/queue`, {\n+                    const response = await fetch(`${serverUrl}/api/queue`, {\n                         method: 'GET',\n                         signal: controller.signal,\n                         headers: {\n-                            'Accept': 'application/json, text/plain, */*',\n-                            'Cache-Control': 'no-cache'\n+                            'Accept': '*/*',\n+                            'Cache-Control': 'max-age=0',\n+                            'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',\n+                            'comfy-user': 'standalone-test-client'\n                         }\n                     });\n \n                     clearTimeout(timeoutId);\n"
                },
                {
                    "date": 1752516149494,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -145,9 +145,9 @@\n                 return servers;\n             }\n \n             async checkServerHealth(serverUrl) {\n-                const testEndpoints = ['/queue', '/system_stats', '/history', '/'];\n+                const testEndpoints = ['/api/queue', '/api/system_stats', '/api/history', '/queue', '/system_stats', '/'];\n                 let lastError = null;\n                 const startTime = Date.now();\n \n                 for (const endpoint of testEndpoints) {\n@@ -160,10 +160,12 @@\n                         const response = await fetch(`${serverUrl}${endpoint}`, {\n                             method: 'GET',\n                             signal: controller.signal,\n                             headers: {\n-                                'Cache-Control': 'no-cache',\n-                                'Accept': 'application/json, text/plain, */*'\n+                                'Accept': '*/*',\n+                                'Cache-Control': 'max-age=0',\n+                                'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',\n+                                'comfy-user': 'health-check-client'\n                             }\n                         });\n \n                         clearTimeout(timeoutId);\n"
                }
            ],
            "date": 1752515398486,
            "name": "Commit-0",
            "content": "<!DOCTYPE html>\n<html lang=\"zh-CN\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>ç‹¬ç«‹è´Ÿè½½å‡è¡¡å™¨æµ‹è¯•</title>\n    <style>\n        body {\n            font-family: Arial, sans-serif;\n            max-width: 1000px;\n            margin: 0 auto;\n            padding: 20px;\n            background-color: #f5f5f5;\n        }\n        .container {\n            background: white;\n            padding: 20px;\n            border-radius: 8px;\n            box-shadow: 0 2px 10px rgba(0,0,0,0.1);\n        }\n        .log {\n            background: #f8f9fa;\n            border: 1px solid #e9ecef;\n            padding: 15px;\n            margin: 15px 0;\n            border-radius: 5px;\n            font-family: monospace;\n            font-size: 13px;\n            max-height: 500px;\n            overflow-y: auto;\n            white-space: pre-wrap;\n        }\n        button {\n            background: #007bff;\n            color: white;\n            border: none;\n            padding: 10px 20px;\n            border-radius: 5px;\n            cursor: pointer;\n            margin: 5px;\n        }\n        button:hover {\n            background: #0056b3;\n        }\n        .status {\n            padding: 10px;\n            margin: 10px 0;\n            border-radius: 5px;\n            font-weight: bold;\n        }\n        .success { background: #d4edda; color: #155724; }\n        .error { background: #f8d7da; color: #721c24; }\n        .warning { background: #fff3cd; color: #856404; }\n        .server-result {\n            margin: 10px 0;\n            padding: 10px;\n            border: 1px solid #ddd;\n            border-radius: 5px;\n            background: #f9f9f9;\n        }\n    </style>\n</head>\n<body>\n    <div class=\"container\">\n        <h1>ğŸ” ç‹¬ç«‹è´Ÿè½½å‡è¡¡å™¨æµ‹è¯•</h1>\n        <p>è¿™ä¸ªæµ‹è¯•é¡µé¢æ¨¡æ‹ŸçœŸå®çš„è´Ÿè½½å‡è¡¡å™¨è¡Œä¸ºï¼Œæµ‹è¯•æ‚¨æä¾›çš„æœåŠ¡å™¨åœ°å€ã€‚</p>\n\n        <div>\n            <button onclick=\"runFullTest()\">è¿è¡Œå®Œæ•´æµ‹è¯•</button>\n            <button onclick=\"testServerSelection()\">æµ‹è¯•æœåŠ¡å™¨é€‰æ‹©</button>\n            <button onclick=\"clearLog()\">æ¸…é™¤æ—¥å¿—</button>\n        </div>\n\n        <div id=\"status\"></div>\n        <div id=\"results\"></div>\n        <div class=\"log\" id=\"log\"></div>\n    </div>\n\n    <script>\n        // æ¨¡æ‹Ÿé…ç½®\n        const mockConfig = {\n            'comfyui.server_url': 'https://l9s75ay3rp-8188.cnb.run',\n            'comfyui.backup_servers': 'https://0rv00xh2vg-8188.cnb.run'\n        };\n\n        let logElement = document.getElementById('log');\n        let statusElement = document.getElementById('status');\n        let resultsElement = document.getElementById('results');\n\n        // é‡å†™console.logæ¥æ˜¾ç¤ºåœ¨é¡µé¢ä¸Š\n        const originalLog = console.log;\n        console.log = function(...args) {\n            originalLog.apply(console, args);\n            const message = args.join(' ');\n            logElement.textContent += message + '\\n';\n            logElement.scrollTop = logElement.scrollHeight;\n        };\n\n        function clearLog() {\n            logElement.textContent = '';\n            resultsElement.innerHTML = '';\n            statusElement.innerHTML = '';\n        }\n\n        function setStatus(message, type = 'info') {\n            statusElement.innerHTML = `<div class=\"status ${type}\">${message}</div>`;\n        }\n\n        // æ¨¡æ‹Ÿè´Ÿè½½å‡è¡¡å™¨ç±»\n        class StandaloneLoadBalancer {\n            constructor() {\n                this.healthCheckTimeout = 10000;\n                this.queueCheckTimeout = 5000;\n            }\n\n            async getLatestServerList() {\n                const servers = [];\n\n                // ä¸»æœåŠ¡å™¨\n                if (mockConfig['comfyui.server_url']) {\n                    servers.push({\n                        url: mockConfig['comfyui.server_url'],\n                        type: 'primary',\n                        priority: 1\n                    });\n                }\n\n                // å¤‡ç”¨æœåŠ¡å™¨\n                if (mockConfig['comfyui.backup_servers']) {\n                    const backupServers = mockConfig['comfyui.backup_servers']\n                        .replace(/\\s*,\\s*/g, '\\n')\n                        .split('\\n')\n                        .map(url => url.trim())\n                        .filter(url => url && url.startsWith('http'));\n\n                    backupServers.forEach((url, index) => {\n                        servers.push({\n                            url,\n                            type: 'backup',\n                            priority: index + 2\n                        });\n                    });\n                }\n\n                return servers;\n            }\n\n            async checkServerHealth(serverUrl) {\n                const testEndpoints = ['/queue', '/system_stats', '/history', '/'];\n                let lastError = null;\n                const startTime = Date.now();\n\n                for (const endpoint of testEndpoints) {\n                    try {\n                        const controller = new AbortController();\n                        const timeoutId = setTimeout(() => controller.abort(), this.healthCheckTimeout);\n\n                        console.log(`ğŸ” æµ‹è¯•ç«¯ç‚¹: ${serverUrl}${endpoint}`);\n\n                        const response = await fetch(`${serverUrl}${endpoint}`, {\n                            method: 'GET',\n                            signal: controller.signal,\n                            headers: {\n                                'Cache-Control': 'no-cache',\n                                'Accept': 'application/json, text/plain, */*'\n                            }\n                        });\n\n                        clearTimeout(timeoutId);\n                        const endTime = Date.now();\n\n                        if (response.ok) {\n                            console.log(`âœ… ç«¯ç‚¹ ${endpoint} å“åº”æˆåŠŸ (${response.status})`);\n                            return {\n                                healthy: true,\n                                responseTime: endTime - startTime,\n                                status: response.status,\n                                endpoint: endpoint\n                            };\n                        } else {\n                            console.log(`âš ï¸ ç«¯ç‚¹ ${endpoint} å“åº”å¤±è´¥ (${response.status})`);\n                            lastError = `HTTP ${response.status}`;\n                        }\n                    } catch (error) {\n                        console.log(`âŒ ç«¯ç‚¹ ${endpoint} è¿æ¥å¤±è´¥: ${error.message}`);\n                        lastError = error.message;\n                        continue;\n                    }\n                }\n\n                const endTime = Date.now();\n                return {\n                    healthy: false,\n                    responseTime: endTime - startTime,\n                    error: lastError || 'æ‰€æœ‰ç«¯ç‚¹éƒ½æ— æ³•è®¿é—®'\n                };\n            }\n\n            async getServerQueueInfo(serverUrl) {\n                try {\n                    const controller = new AbortController();\n                    const timeoutId = setTimeout(() => controller.abort(), this.queueCheckTimeout);\n\n                    console.log(`ğŸ“Š è·å–æœåŠ¡å™¨é˜Ÿåˆ—ä¿¡æ¯: ${serverUrl}/queue`);\n\n                    const response = await fetch(`${serverUrl}/queue`, {\n                        method: 'GET',\n                        signal: controller.signal,\n                        headers: {\n                            'Accept': 'application/json, text/plain, */*',\n                            'Cache-Control': 'no-cache'\n                        }\n                    });\n\n                    clearTimeout(timeoutId);\n\n                    if (response.ok) {\n                        try {\n                            const responseText = await response.text();\n                            console.log(`ğŸ“Š é˜Ÿåˆ—APIåŸå§‹å“åº”: ${responseText.substring(0, 200)}...`);\n\n                            const queueData = JSON.parse(responseText);\n                            console.log(`ğŸ“Š é˜Ÿåˆ—æ•°æ®ç»“æ„:`, Object.keys(queueData));\n\n                            // å°è¯•å¤šç§å¯èƒ½çš„æ•°æ®æ ¼å¼\n                            let running = 0;\n                            let pending = 0;\n\n                            // æ ‡å‡† ComfyUI æ ¼å¼\n                            if (queueData.queue_running !== undefined && queueData.queue_pending !== undefined) {\n                                running = Array.isArray(queueData.queue_running) ? queueData.queue_running.length :\n                                         (typeof queueData.queue_running === 'number' ? queueData.queue_running : 0);\n                                pending = Array.isArray(queueData.queue_pending) ? queueData.queue_pending.length :\n                                         (typeof queueData.queue_pending === 'number' ? queueData.queue_pending : 0);\n                            }\n                            // å…¶ä»–å¯èƒ½çš„æ ¼å¼\n                            else if (queueData.running !== undefined && queueData.pending !== undefined) {\n                                running = typeof queueData.running === 'number' ? queueData.running : 0;\n                                pending = typeof queueData.pending === 'number' ? queueData.pending : 0;\n                            }\n                            // å¦‚æœæœ‰ exec_info\n                            else if (queueData.exec_info) {\n                                running = queueData.exec_info.queue_remaining || 0;\n                                pending = 0;\n                            }\n                            // ç®€å•çš„æ•°å­—æ ¼å¼\n                            else if (typeof queueData === 'number') {\n                                running = 0;\n                                pending = queueData;\n                            }\n                            // å¦‚æœæœ‰ queue å­—æ®µ\n                            else if (queueData.queue) {\n                                if (Array.isArray(queueData.queue)) {\n                                    pending = queueData.queue.length;\n                                    running = 0;\n                                } else if (typeof queueData.queue === 'number') {\n                                    pending = queueData.queue;\n                                    running = 0;\n                                }\n                            }\n\n                            const total = running + pending;\n                            console.log(`ğŸ“Š é˜Ÿåˆ—ç»Ÿè®¡ - è¿è¡Œä¸­: ${running}, ç­‰å¾…ä¸­: ${pending}, æ€»è®¡: ${total}`);\n\n                            return {\n                                running,\n                                pending,\n                                total,\n                                healthy: true,\n                                rawData: queueData\n                            };\n                        } catch (parseError) {\n                            console.log(`âš ï¸ è§£æé˜Ÿåˆ—æ•°æ®å¤±è´¥: ${parseError.message}`);\n                            console.log(`âš ï¸ åŸå§‹å“åº”: ${responseText.substring(0, 100)}...`);\n\n                            // å³ä½¿è§£æå¤±è´¥ï¼Œä¹Ÿè®¤ä¸ºæœåŠ¡å™¨æ˜¯å¥åº·çš„\n                            return {\n                                running: 0,\n                                pending: 0,\n                                total: 1,\n                                healthy: true,\n                                isEstimate: true,\n                                parseError: parseError.message\n                            };\n                        }\n                    } else {\n                        console.log(`âš ï¸ é˜Ÿåˆ—APIè¿”å›çŠ¶æ€ç : ${response.status} ${response.statusText}`);\n\n                        // å°è¯•è¯»å–é”™è¯¯å“åº”\n                        try {\n                            const errorText = await response.text();\n                            console.log(`âš ï¸ é”™è¯¯å“åº”: ${errorText.substring(0, 100)}...`);\n                        } catch (e) {\n                            console.log(`âš ï¸ æ— æ³•è¯»å–é”™è¯¯å“åº”`);\n                        }\n\n                        return {\n                            running: 0,\n                            pending: 0,\n                            total: 1,\n                            healthy: true,\n                            isEstimate: true,\n                            httpError: response.status\n                        };\n                    }\n                } catch (error) {\n                    console.log(`âš ï¸ è·å–é˜Ÿåˆ—ä¿¡æ¯å¤±è´¥: ${error.message}`);\n\n                    // åŒºåˆ†ä¸åŒç±»å‹çš„é”™è¯¯\n                    if (error.name === 'AbortError') {\n                        console.log(`âš ï¸ é˜Ÿåˆ—è¯·æ±‚è¶…æ—¶`);\n                    } else if (error.message.includes('CORS')) {\n                        console.log(`âš ï¸ CORSé”™è¯¯ï¼Œå¯èƒ½éœ€è¦æœåŠ¡å™¨é…ç½®è·¨åŸŸ`);\n                    } else if (error.message.includes('Failed to fetch')) {\n                        console.log(`âš ï¸ ç½‘ç»œè¿æ¥å¤±è´¥`);\n                    }\n\n                    return {\n                        running: 0,\n                        pending: 0,\n                        total: 999,\n                        healthy: false,\n                        error: error.message\n                    };\n                }\n            }\n\n            async initializeServerConnection() {\n                try {\n                    console.log('ğŸš€ æ­£åœ¨åˆå§‹åŒ– ComfyUI æœåŠ¡å™¨è¿æ¥...');\n\n                    const servers = await this.getLatestServerList();\n\n                    if (servers.length === 0) {\n                        console.log('âš ï¸ æœªæ‰¾åˆ°ä»»ä½•é…ç½®çš„æœåŠ¡å™¨');\n                        return null;\n                    }\n\n                    console.log(`ğŸ“‹ å‘ç° ${servers.length} ä¸ªé…ç½®çš„æœåŠ¡å™¨ï¼Œå¼€å§‹è¿æ¥æµ‹è¯•...`);\n                    servers.forEach((server, index) => {\n                        console.log(`   ${index + 1}. ${server.url} (${server.type}, ä¼˜å…ˆçº§: ${server.priority})`);\n                    });\n\n                    const serverChecks = servers.map(async (server) => {\n                        console.log(`ğŸ” æµ‹è¯•æœåŠ¡å™¨: ${server.url}`);\n\n                        try {\n                            const [healthResult, queueResult] = await Promise.allSettled([\n                                this.checkServerHealth(server.url),\n                                this.getServerQueueInfo(server.url)\n                            ]);\n\n                            const health = healthResult.status === 'fulfilled' ? healthResult.value : { healthy: false };\n                            const queue = queueResult.status === 'fulfilled' ? queueResult.value : { total: 999, healthy: false };\n\n                            const isHealthy = health.healthy || (health.responseTime > 0 && health.responseTime < 30000);\n\n                            // è¾“å‡ºæ¯ä¸ªæœåŠ¡å™¨çš„æµ‹è¯•ç»“æœ\n                            if (isHealthy) {\n                                console.log(`âœ… ${server.url} - å¥åº· (å“åº”æ—¶é—´: ${health.responseTime}ms, é˜Ÿåˆ—: ${queue.total || 0})`);\n                            } else {\n                                console.log(`âŒ ${server.url} - ä¸å¯ç”¨ (${health.error || 'è¿æ¥å¤±è´¥'})`);\n                            }\n\n                            return {\n                                ...server,\n                                healthy: isHealthy,\n                                queue: queue,\n                                responseTime: health.responseTime || 0,\n                                error: health.error,\n                                healthCheckEndpoint: health.endpoint\n                            };\n                        } catch (error) {\n                            return {\n                                ...server,\n                                healthy: false,\n                                queue: { total: 999, healthy: false },\n                                responseTime: 0,\n                                error: error.message\n                            };\n                        }\n                    });\n\n                    const serverResults = await Promise.all(serverChecks);\n\n                    const healthyServers = serverResults.filter(s => s.healthy);\n                    console.log(`âœ… æœåŠ¡å™¨è¿æ¥æµ‹è¯•å®Œæˆ: ${healthyServers.length}/${serverResults.length} ä¸ªæœåŠ¡å™¨å¯ç”¨`);\n\n                    // æ˜¾ç¤ºè¯¦ç»†ç»“æœ\n                    this.displayResults(serverResults);\n\n                    if (healthyServers.length > 0) {\n                        const bestServer = healthyServers.sort((a, b) => {\n                            const queueDiff = (a.queue.total || 0) - (b.queue.total || 0);\n                            if (queueDiff !== 0) return queueDiff;\n                            return a.priority - b.priority;\n                        })[0];\n\n                        console.log(`ğŸ¯ æ¨èæœåŠ¡å™¨: ${bestServer.url}`);\n                        console.log(`   é˜Ÿåˆ—çŠ¶æ€: ${bestServer.queue.total || 0} ä¸ªä»»åŠ¡ (è¿è¡Œä¸­: ${bestServer.queue.running || 0}, ç­‰å¾…ä¸­: ${bestServer.queue.pending || 0})`);\n                        console.log(`   å“åº”æ—¶é—´: ${bestServer.responseTime}ms`);\n\n                        setStatus(`âœ… æµ‹è¯•å®Œæˆï¼Œæ¨èä½¿ç”¨: ${bestServer.url}`, 'success');\n                        return bestServer.url;\n                    } else {\n                        console.log('âŒ æ‰€æœ‰æœåŠ¡å™¨éƒ½ä¸å¯ç”¨ï¼Œè¯·æ£€æŸ¥æœåŠ¡å™¨é…ç½®');\n                        setStatus('âŒ æ‰€æœ‰æœåŠ¡å™¨éƒ½ä¸å¯ç”¨', 'error');\n                        return null;\n                    }\n\n                } catch (error) {\n                    console.log(`âŒ æœåŠ¡å™¨åˆå§‹åŒ–å¤±è´¥: ${error.message}`);\n                    setStatus('âŒ æœåŠ¡å™¨åˆå§‹åŒ–å¤±è´¥', 'error');\n                    return null;\n                }\n            }\n\n            displayResults(serverResults) {\n                resultsElement.innerHTML = '';\n\n                serverResults.forEach(server => {\n                    const div = document.createElement('div');\n                    div.className = 'server-result';\n\n                    const status = server.healthy ? 'âœ… å¯ç”¨' : 'âŒ ä¸å¯ç”¨';\n                    const statusClass = server.healthy ? 'success' : 'error';\n\n                    div.innerHTML = `\n                        <h4>${server.url}</h4>\n                        <div class=\"status ${statusClass}\">${status}</div>\n                        <div>ç±»å‹: ${server.type === 'primary' ? 'ä¸»æœåŠ¡å™¨' : 'å¤‡ç”¨æœåŠ¡å™¨'}</div>\n                        <div>ä¼˜å…ˆçº§: ${server.priority}</div>\n                        ${server.responseTime > 0 ? `<div>å“åº”æ—¶é—´: ${server.responseTime}ms</div>` : ''}\n                        ${server.queue ? `<div>é˜Ÿåˆ—: ${server.queue.total || 0} (è¿è¡Œä¸­: ${server.queue.running || 0}, ç­‰å¾…ä¸­: ${server.queue.pending || 0})</div>` : ''}\n                        ${server.healthCheckEndpoint ? `<div>å¯ç”¨ç«¯ç‚¹: ${server.healthCheckEndpoint}</div>` : ''}\n                        ${server.error ? `<div style=\"color: #dc3545;\">é”™è¯¯: ${server.error}</div>` : ''}\n                    `;\n\n                    resultsElement.appendChild(div);\n                });\n            }\n        }\n\n        const loadBalancer = new StandaloneLoadBalancer();\n\n        window.runFullTest = async function() {\n            clearLog();\n            setStatus('æ­£åœ¨è¿è¡Œå®Œæ•´æµ‹è¯•...', 'warning');\n\n            try {\n                await loadBalancer.initializeServerConnection();\n            } catch (error) {\n                console.log(`âŒ æµ‹è¯•å¤±è´¥: ${error.message}`);\n                setStatus('âŒ æµ‹è¯•å¤±è´¥', 'error');\n            }\n        };\n\n        window.testServerSelection = async function() {\n            clearLog();\n            setStatus('æ­£åœ¨æµ‹è¯•æœåŠ¡å™¨é€‰æ‹©...', 'warning');\n\n            try {\n                const servers = await loadBalancer.getLatestServerList();\n                console.log(`ğŸ“‹ é…ç½®çš„æœåŠ¡å™¨åˆ—è¡¨:`);\n                servers.forEach((server, index) => {\n                    console.log(`   ${index + 1}. ${server.url} (${server.type}, ä¼˜å…ˆçº§: ${server.priority})`);\n                });\n\n                setStatus('âœ… æœåŠ¡å™¨åˆ—è¡¨è·å–æˆåŠŸ', 'success');\n            } catch (error) {\n                console.log(`âŒ è·å–æœåŠ¡å™¨åˆ—è¡¨å¤±è´¥: ${error.message}`);\n                setStatus('âŒ è·å–æœåŠ¡å™¨åˆ—è¡¨å¤±è´¥', 'error');\n            }\n        };\n\n        window.clearLog = clearLog;\n\n        // é¡µé¢åŠ è½½æ—¶è‡ªåŠ¨æµ‹è¯•\n        window.addEventListener('load', () => {\n            console.log('ğŸ“‹ é¡µé¢åŠ è½½å®Œæˆï¼Œå¼€å§‹è‡ªåŠ¨æµ‹è¯•...');\n            setTimeout(() => {\n                runFullTest();\n            }, 1000);\n        });\n    </script>\n</body>\n</html>\n"
        }
    ]
}