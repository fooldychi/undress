{
    "sourceFile": "client/src/views/FaceSwap.vue",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 50,
            "patches": [
                {
                    "date": 1752348807217,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1752348821426,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -115,8 +115,9 @@\n import ProcessingStatus from '../components/ProcessingStatus.vue'\r\n import ImageComparison from '../components/ImageComparison.vue'\r\n import PointsDisplay from '../components/PointsDisplay.vue'\r\n import UserInfo from '../components/UserInfo.vue'\r\n+import BackToHomeButton from '../components/BackToHomeButton.vue'\r\n import { FaceSwapIcon } from '../components/icons'\r\n \r\n // é™æ€å¯¼å…¥ComfyUIæœåŠ¡\r\n import { processFaceSwapImage } from '../services/comfyui.js'\r\n"
                },
                {
                    "date": 1752351589068,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,23 +1,21 @@\n <template>\r\n-  <div class=\"feature-page\">\r\n+  <div class=\"mobile-page\">\r\n     <!-- å³ä¸Šè§’ç”¨æˆ·ä¿¡æ¯ -->\r\n     <div class=\"top-corner\">\r\n       <UserInfo @login=\"handleUserLogin\" @logout=\"handleUserLogout\" />\r\n     </div>\r\n \r\n-    <div class=\"container\">\r\n-      <header class=\"page-header\">\r\n-        <BackToHomeButton class=\"back-btn\" />\r\n-        <h1 class=\"page-title\">\r\n-          <FaceSwapIcon :size=\"32\" color=\"var(--warning-color)\" class=\"page-icon\" />\r\n-          æé€Ÿæ¢è„¸\r\n-        </h1>\r\n-        <p class=\"page-description\">ä¸Šä¼ 4å¼ äººè„¸ç…§ç‰‡å’Œ1å¼ ç›®æ ‡å›¾ç‰‡ï¼ŒAIå°†ä¸ºæ‚¨æ™ºèƒ½æ¢è„¸</p>\r\n+    <div class=\"mobile-container\">\r\n+      <header class=\"mobile-header\">\r\n+        <BackToHomeButton class=\"mobile-header-back\" />\r\n+        <h1 class=\"mobile-header-title\">æé€Ÿæ¢è„¸</h1>\r\n+        <div></div>\r\n       </header>\r\n \r\n       <!-- ä½“éªŒç‚¹æ˜¾ç¤º -->\r\n-      <PointsDisplay ref=\"pointsDisplayRef\" />\r\n+      <div class=\"mobile-content\">\r\n+        <PointsDisplay ref=\"pointsDisplayRef\" />\r\n \r\n       <main class=\"page-content\">\r\n         <div v-if=\"!resultImage\" class=\"upload-section\">\r\n           <!-- äººè„¸ç…§ç‰‡ä¸Šä¼ åŒºåŸŸ -->\r\n"
                },
                {
                    "date": 1752352751828,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -14,10 +14,8 @@\n \r\n       <!-- ä½“éªŒç‚¹æ˜¾ç¤º -->\r\n       <div class=\"mobile-content\">\r\n         <PointsDisplay ref=\"pointsDisplayRef\" />\r\n-\r\n-      <main class=\"page-content\">\r\n         <div v-if=\"!resultImage\" class=\"upload-section\">\r\n           <!-- äººè„¸ç…§ç‰‡ä¸Šä¼ åŒºåŸŸ -->\r\n           <div class=\"face-photos-section\">\r\n             <h3 class=\"section-title\">\r\n"
                },
                {
                    "date": 1752353188970,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -96,9 +96,9 @@\n           :original-image=\"targetImageForComparison\"\r\n           :result-image=\"resultImage\"\r\n           @reset=\"resetProcess\"\r\n         />\r\n-      </main>\r\n+      </div>\r\n     </div>\r\n   </div>\r\n </template>\r\n \r\n"
                },
                {
                    "date": 1752354037622,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,21 +1,25 @@\n <template>\r\n-  <div class=\"mobile-page\">\r\n+  <div class=\"feature-page\">\r\n     <!-- å³ä¸Šè§’ç”¨æˆ·ä¿¡æ¯ -->\r\n     <div class=\"top-corner\">\r\n       <UserInfo @login=\"handleUserLogin\" @logout=\"handleUserLogout\" />\r\n     </div>\r\n \r\n-    <div class=\"mobile-container\">\r\n-      <header class=\"mobile-header\">\r\n-        <BackToHomeButton class=\"mobile-header-back\" />\r\n-        <h1 class=\"mobile-header-title\">æé€Ÿæ¢è„¸</h1>\r\n-        <div></div>\r\n+    <div class=\"container\">\r\n+      <header class=\"page-header\">\r\n+        <BackToHomeButton class=\"back-btn\" />\r\n+        <h1 class=\"page-title\">\r\n+          <FaceSwapIcon :size=\"32\" color=\"var(--warning-color)\" class=\"page-icon\" />\r\n+          æé€Ÿæ¢è„¸\r\n+        </h1>\r\n+        <p class=\"page-description\">ä¸Šä¼ 4å¼ äººè„¸ç…§ç‰‡å’Œ1å¼ ç›®æ ‡å›¾ç‰‡ï¼ŒAIå°†ä¸ºæ‚¨æ™ºèƒ½æ¢è„¸</p>\r\n       </header>\r\n \r\n       <!-- ä½“éªŒç‚¹æ˜¾ç¤º -->\r\n-      <div class=\"mobile-content\">\r\n-        <PointsDisplay ref=\"pointsDisplayRef\" />\r\n+      <PointsDisplay ref=\"pointsDisplayRef\" />\r\n+\r\n+      <main class=\"page-content\">\r\n         <div v-if=\"!resultImage\" class=\"upload-section\">\r\n           <!-- äººè„¸ç…§ç‰‡ä¸Šä¼ åŒºåŸŸ -->\r\n           <div class=\"face-photos-section\">\r\n             <h3 class=\"section-title\">\r\n@@ -96,9 +100,9 @@\n           :original-image=\"targetImageForComparison\"\r\n           :result-image=\"resultImage\"\r\n           @reset=\"resetProcess\"\r\n         />\r\n-      </div>\r\n+      </main>\r\n     </div>\r\n   </div>\r\n </template>\r\n \r\n"
                },
                {
                    "date": 1752370230331,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,24 +1,23 @@\n <template>\r\n-  <div class=\"feature-page\">\r\n-    <!-- å³ä¸Šè§’ç”¨æˆ·ä¿¡æ¯ -->\r\n-    <div class=\"top-corner\">\r\n-      <UserInfo @login=\"handleUserLogin\" @logout=\"handleUserLogout\" />\r\n-    </div>\r\n+  <MobileLayout\r\n+    title=\"æé€Ÿæ¢è„¸\"\r\n+    :show-back=\"true\"\r\n+    :show-tabbar=\"true\"\r\n+    @login=\"handleUserLogin\"\r\n+    @logout=\"handleUserLogout\"\r\n+  >\r\n+    <!-- é¡µé¢æè¿° -->\r\n+    <MobileCard\r\n+      title=\"æé€Ÿæ¢è„¸\"\r\n+      subtitle=\"ä¸Šä¼ 4å¼ äººè„¸ç…§ç‰‡å’Œ1å¼ ç›®æ ‡å›¾ç‰‡ï¼ŒAIå°†ä¸ºæ‚¨æ™ºèƒ½æ¢è„¸\"\r\n+      icon=\"user-circle-o\"\r\n+      variant=\"warning\"\r\n+    />\r\n \r\n-    <div class=\"container\">\r\n-      <header class=\"page-header\">\r\n-        <BackToHomeButton class=\"back-btn\" />\r\n-        <h1 class=\"page-title\">\r\n-          <FaceSwapIcon :size=\"32\" color=\"var(--warning-color)\" class=\"page-icon\" />\r\n-          æé€Ÿæ¢è„¸\r\n-        </h1>\r\n-        <p class=\"page-description\">ä¸Šä¼ 4å¼ äººè„¸ç…§ç‰‡å’Œ1å¼ ç›®æ ‡å›¾ç‰‡ï¼ŒAIå°†ä¸ºæ‚¨æ™ºèƒ½æ¢è„¸</p>\r\n-      </header>\r\n+    <!-- ä½“éªŒç‚¹æ˜¾ç¤º -->\r\n+    <PointsDisplay ref=\"pointsDisplayRef\" />\r\n \r\n-      <!-- ä½“éªŒç‚¹æ˜¾ç¤º -->\r\n-      <PointsDisplay ref=\"pointsDisplayRef\" />\r\n-\r\n       <main class=\"page-content\">\r\n         <div v-if=\"!resultImage\" class=\"upload-section\">\r\n           <!-- äººè„¸ç…§ç‰‡ä¸Šä¼ åŒºåŸŸ -->\r\n           <div class=\"face-photos-section\">\r\n"
                },
                {
                    "date": 1752370256300,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -16,44 +16,42 @@\n \r\n     <!-- ä½“éªŒç‚¹æ˜¾ç¤º -->\r\n     <PointsDisplay ref=\"pointsDisplayRef\" />\r\n \r\n-      <main class=\"page-content\">\r\n-        <div v-if=\"!resultImage\" class=\"upload-section\">\r\n-          <!-- äººè„¸ç…§ç‰‡ä¸Šä¼ åŒºåŸŸ -->\r\n-          <div class=\"face-photos-section\">\r\n-            <h3 class=\"section-title\">\r\n-              <FaceSwapIcon :size=\"20\" color=\"var(--primary-color)\" class=\"section-icon\" />\r\n-              äººè„¸ç…§ç‰‡ (1-4å¼ )\r\n-            </h3>\r\n-            <!-- <p class=\"section-description\">ä¸€æ¬¡æ€§é€‰æ‹©1-4å¼ æ¸…æ™°çš„äººè„¸ç…§ç‰‡</p> -->\r\n+    <!-- ä¸Šä¼ åŒºåŸŸ -->\r\n+    <div v-if=\"!resultImage\">\r\n+      <!-- äººè„¸ç…§ç‰‡ä¸Šä¼  -->\r\n+      <MobileCard\r\n+        title=\"äººè„¸ç…§ç‰‡ (1-4å¼ )\"\r\n+        subtitle=\"ä¸€æ¬¡æ€§é€‰æ‹©1-4å¼ æ¸…æ™°çš„äººè„¸ç…§ç‰‡\"\r\n+        icon=\"user-circle-o\"\r\n+        variant=\"primary\"\r\n+      >\r\n+        <MultiImageUpload\r\n+          v-model=\"facePhotos\"\r\n+          :disabled=\"isLoading\"\r\n+          @change=\"handleFacePhotosChange\"\r\n+        />\r\n+      </MobileCard>\r\n \r\n-            <MultiImageUpload\r\n-              v-model=\"facePhotos\"\r\n-              :disabled=\"isLoading\"\r\n-              @change=\"handleFacePhotosChange\"\r\n-            />\r\n-          </div>\r\n+      <!-- ç›®æ ‡å›¾ç‰‡ä¸Šä¼  -->\r\n+      <MobileCard\r\n+        title=\"ç›®æ ‡å›¾ç‰‡\"\r\n+        subtitle=\"ä¸Šä¼ éœ€è¦æ¢è„¸çš„ç›®æ ‡å›¾ç‰‡\"\r\n+        icon=\"photo-o\"\r\n+        variant=\"success\"\r\n+      >\r\n+        <ImageUpload\r\n+          v-model=\"targetImage\"\r\n+          title=\"ä¸Šä¼ éœ€è¦æ¢è„¸çš„ç›®æ ‡å›¾ç‰‡\"\r\n+          description=\"æ”¯æŒ JPGã€PNG æ ¼å¼ï¼Œå»ºè®®å°ºå¯¸ 512x512 ä»¥ä¸Š\"\r\n+          icon=\"Image\"\r\n+          :icon-size=\"48\"\r\n+          :disabled=\"isLoading\"\r\n+          @change=\"handleTargetImageChange\"\r\n+        />\r\n+      </MobileCard>\r\n \r\n-          <!-- ç›®æ ‡å›¾ç‰‡ä¸Šä¼ åŒºåŸŸ -->\r\n-          <div class=\"target-image-section\">\r\n-            <h3 class=\"section-title\">\r\n-              <Image :size=\"20\" color=\"var(--success-color)\" class=\"section-icon\" />\r\n-              ç›®æ ‡å›¾ç‰‡\r\n-            </h3>\r\n-            <!-- <p class=\"section-description\">ä¸Šä¼ éœ€è¦æ¢è„¸çš„ç›®æ ‡å›¾ç‰‡</p> -->\r\n-\r\n-            <ImageUpload\r\n-              v-model=\"targetImage\"\r\n-              title=\"ä¸Šä¼ éœ€è¦æ¢è„¸çš„ç›®æ ‡å›¾ç‰‡\"\r\n-              description=\"æ”¯æŒ JPGã€PNG æ ¼å¼ï¼Œå»ºè®®å°ºå¯¸ 512x512 ä»¥ä¸Š\"\r\n-              icon=\"Image\"\r\n-              :icon-size=\"48\"\r\n-              :disabled=\"isLoading\"\r\n-              @change=\"handleTargetImageChange\"\r\n-            />\r\n-          </div>\r\n-\r\n           <!-- å¤„ç†æŒ‰é’® -->\r\n           <div v-if=\"canProcess && !isLoading\" class=\"action-section\">\r\n             <van-button\r\n               @click=\"processImages\"\r\n"
                },
                {
                    "date": 1752370290215,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -50,55 +50,68 @@\n           @change=\"handleTargetImageChange\"\r\n         />\r\n       </MobileCard>\r\n \r\n-          <!-- å¤„ç†æŒ‰é’® -->\r\n-          <div v-if=\"canProcess && !isLoading\" class=\"action-section\">\r\n-            <van-button\r\n-              @click=\"processImages\"\r\n-              type=\"primary\"\r\n-              size=\"large\"\r\n-              round\r\n-              block\r\n-              class=\"process-btn\"\r\n-            >\r\n-              <Users :size=\"20\" color=\"white\" class=\"btn-icon\" />\r\n-              å¼€å§‹æ¢è„¸\r\n-            </van-button>\r\n-          </div>\r\n+      <!-- å¤„ç†æŒ‰é’® -->\r\n+      <MobileCard v-if=\"canProcess && !isLoading\">\r\n+        <van-button\r\n+          @click=\"processImages\"\r\n+          type=\"primary\"\r\n+          size=\"large\"\r\n+          round\r\n+          block\r\n+          class=\"process-btn\"\r\n+        >\r\n+          <Users :size=\"20\" color=\"white\" class=\"btn-icon\" />\r\n+          å¼€å§‹æ¢è„¸\r\n+        </van-button>\r\n+      </MobileCard>\r\n \r\n-          <!-- ä¸Šä¼ æç¤º -->\r\n-          <div v-else class=\"upload-tips\">\r\n-            <div class=\"tip-item\">\r\n-              <Image :size=\"16\" color=\"var(--primary-color)\" class=\"tip-icon\" />\r\n-              <span>å·²ä¸Šä¼  {{ uploadedFacePhotos }}/4 å¼ äººè„¸ç…§ç‰‡</span>\r\n-            </div>\r\n-            <div class=\"tip-item\">\r\n-              <Image :size=\"16\" color=\"var(--success-color)\" class=\"tip-icon\" />\r\n-              <van-icon :name=\"targetImage ? 'success' : 'cross'\" size=\"16\" :color=\"targetImage ? 'var(--success-color)' : 'var(--error-color)'\" />\r\n-              <span>ç›®æ ‡å›¾ç‰‡</span>\r\n-            </div>\r\n+      <!-- ä¸Šä¼ æç¤º -->\r\n+      <MobileCard v-else title=\"ä¸Šä¼ è¿›åº¦\" subtitle=\"è¯·å®Œæˆæ‰€æœ‰å›¾ç‰‡ä¸Šä¼ \" variant=\"default\">\r\n+        <div class=\"upload-status\">\r\n+          <div class=\"status-item\">\r\n+            <van-icon name=\"photo-o\" size=\"16\" color=\"var(--van-primary-color)\" />\r\n+            <span>å·²ä¸Šä¼  {{ uploadedFacePhotos }}/4 å¼ äººè„¸ç…§ç‰‡</span>\r\n+            <van-icon\r\n+              :name=\"uploadedFacePhotos > 0 ? 'success' : 'cross'\"\r\n+              size=\"16\"\r\n+              :color=\"uploadedFacePhotos > 0 ? 'var(--van-success-color)' : 'var(--van-text-color-3)'\"\r\n+            />\r\n           </div>\r\n+          <div class=\"status-item\">\r\n+            <van-icon name=\"photo-o\" size=\"16\" color=\"var(--van-success-color)\" />\r\n+            <span>ç›®æ ‡å›¾ç‰‡</span>\r\n+            <van-icon\r\n+              :name=\"targetImage ? 'success' : 'cross'\"\r\n+              size=\"16\"\r\n+              :color=\"targetImage ? 'var(--van-success-color)' : 'var(--van-text-color-3)'\"\r\n+            />\r\n+          </div>\r\n         </div>\r\n+      </MobileCard>\r\n+    </div>\r\n \r\n-        <!-- å¤„ç†çŠ¶æ€ -->\r\n-        <ProcessingStatus\r\n-          v-if=\"isLoading\"\r\n-          status=\"loading\"\r\n-          title=\"æ­£åœ¨å¤„ç†æ¢è„¸...\"\r\n-          description=\"è¯·è€å¿ƒç­‰å¾…ï¼Œå¤„ç†æ—¶é—´å¯èƒ½éœ€è¦å‡ åˆ†é’Ÿ\"\r\n-          :progress=\"progressPercent\"\r\n-          :prompt-id=\"promptId\"\r\n-          :processing-time=\"processingTime\"\r\n-        />\r\n+    <!-- å¤„ç†çŠ¶æ€ -->\r\n+    <MobileCard v-if=\"isLoading\" variant=\"primary\">\r\n+      <ProcessingStatus\r\n+        status=\"loading\"\r\n+        title=\"æ­£åœ¨å¤„ç†æ¢è„¸...\"\r\n+        description=\"è¯·è€å¿ƒç­‰å¾…ï¼Œå¤„ç†æ—¶é—´å¯èƒ½éœ€è¦å‡ åˆ†é’Ÿ\"\r\n+        :progress=\"progressPercent\"\r\n+        :prompt-id=\"promptId\"\r\n+        :processing-time=\"processingTime\"\r\n+      />\r\n+    </MobileCard>\r\n \r\n-        <!-- ç»“æœå±•ç¤ºåŒºåŸŸ -->\r\n-        <ImageComparison\r\n-          v-if=\"resultImage\"\r\n-          :original-image=\"targetImageForComparison\"\r\n-          :result-image=\"resultImage\"\r\n-          @reset=\"resetProcess\"\r\n-        />\r\n+    <!-- ç»“æœå±•ç¤º -->\r\n+    <MobileCard v-if=\"resultImage\" title=\"æ¢è„¸ç»“æœ\" subtitle=\"å¯¹æ¯”æŸ¥çœ‹æ¢è„¸æ•ˆæœ\" variant=\"success\">\r\n+      <ImageComparison\r\n+        :original-image=\"targetImageForComparison\"\r\n+        :result-image=\"resultImage\"\r\n+        @reset=\"resetProcess\"\r\n+      />\r\n+    </MobileCard>\r\n       </main>\r\n     </div>\r\n   </div>\r\n </template>\r\n"
                },
                {
                    "date": 1752370310387,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -109,12 +109,9 @@\n         :original-image=\"targetImageForComparison\"\r\n         :result-image=\"resultImage\"\r\n         @reset=\"resetProcess\"\r\n       />\r\n-    </MobileCard>\r\n-      </main>\r\n-    </div>\r\n-  </div>\r\n+  </MobileLayout>\r\n </template>\r\n \r\n <script setup>\r\n import { ref, computed, onMounted, onUnmounted } from 'vue'\r\n"
                },
                {
                    "date": 1752370327465,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -115,16 +115,16 @@\n \r\n <script setup>\r\n import { ref, computed, onMounted, onUnmounted } from 'vue'\r\n import { Toast } from 'vant'\r\n-import { Image } from 'lucide-vue-next'\r\n+import { Users } from 'lucide-vue-next'\r\n+import MobileLayout from '../components/MobileLayout.vue'\r\n+import MobileCard from '../components/MobileCard.vue'\r\n import ImageUpload from '../components/ImageUpload.vue'\r\n import MultiImageUpload from '../components/MultiImageUpload.vue'\r\n import ProcessingStatus from '../components/ProcessingStatus.vue'\r\n import ImageComparison from '../components/ImageComparison.vue'\r\n import PointsDisplay from '../components/PointsDisplay.vue'\r\n-import UserInfo from '../components/UserInfo.vue'\r\n-import BackToHomeButton from '../components/BackToHomeButton.vue'\r\n import { FaceSwapIcon } from '../components/icons'\r\n \r\n // é™æ€å¯¼å…¥ComfyUIæœåŠ¡\r\n import { processFaceSwapImage } from '../services/comfyui.js'\r\n"
                },
                {
                    "date": 1752370398826,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -923,5 +923,28 @@\n   .tip-item {\r\n     font-size: 1rem;\r\n   }\r\n }\r\n+\r\n+/* ä¸Šä¼ çŠ¶æ€æ ·å¼ */\r\n+.upload-status {\r\n+  display: flex;\r\n+  flex-direction: column;\r\n+  gap: 12px;\r\n+}\r\n+\r\n+.status-item {\r\n+  display: flex;\r\n+  align-items: center;\r\n+  gap: 12px;\r\n+  padding: 12px;\r\n+  background: rgba(255, 255, 255, 0.05);\r\n+  border-radius: 8px;\r\n+  border: 1px solid var(--van-border-color);\r\n+}\r\n+\r\n+.status-item span {\r\n+  flex: 1;\r\n+  font-size: 14px;\r\n+  color: var(--van-text-color);\r\n+}\r\n </style>\r\n"
                },
                {
                    "date": 1752371340211,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -109,8 +109,12 @@\n         :original-image=\"targetImageForComparison\"\r\n         :result-image=\"resultImage\"\r\n         @reset=\"resetProcess\"\r\n       />\r\n+    </MobileCard>\r\n+\r\n+    <!-- åº•éƒ¨å¯¼èˆª -->\r\n+    <MobileTabbar />\r\n   </MobileLayout>\r\n </template>\r\n \r\n <script setup>\r\n"
                },
                {
                    "date": 1752371357018,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -122,8 +122,9 @@\n import { Toast } from 'vant'\r\n import { Users } from 'lucide-vue-next'\r\n import MobileLayout from '../components/MobileLayout.vue'\r\n import MobileCard from '../components/MobileCard.vue'\r\n+import MobileTabbar from '../components/MobileTabbar.vue'\r\n import ImageUpload from '../components/ImageUpload.vue'\r\n import MultiImageUpload from '../components/MultiImageUpload.vue'\r\n import ProcessingStatus from '../components/ProcessingStatus.vue'\r\n import ImageComparison from '../components/ImageComparison.vue'\r\n"
                },
                {
                    "date": 1752373221579,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -128,9 +128,8 @@\n import MultiImageUpload from '../components/MultiImageUpload.vue'\r\n import ProcessingStatus from '../components/ProcessingStatus.vue'\r\n import ImageComparison from '../components/ImageComparison.vue'\r\n import PointsDisplay from '../components/PointsDisplay.vue'\r\n-import { FaceSwapIcon } from '../components/icons'\r\n \r\n // é™æ€å¯¼å…¥ComfyUIæœåŠ¡\r\n import { processFaceSwapImage } from '../services/comfyui.js'\r\n \r\n"
                },
                {
                    "date": 1752373807414,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,135 +1,124 @@\n <template>\r\n-  <MobileLayout\r\n-    title=\"æé€Ÿæ¢è„¸\"\r\n-    :show-back=\"true\"\r\n-    :show-tabbar=\"true\"\r\n-    @login=\"handleUserLogin\"\r\n-    @logout=\"handleUserLogout\"\r\n-  >\r\n-    <!-- é¡µé¢æè¿° -->\r\n-    <MobileCard\r\n-      title=\"æé€Ÿæ¢è„¸\"\r\n-      subtitle=\"ä¸Šä¼ 4å¼ äººè„¸ç…§ç‰‡å’Œ1å¼ ç›®æ ‡å›¾ç‰‡ï¼ŒAIå°†ä¸ºæ‚¨æ™ºèƒ½æ¢è„¸\"\r\n-      icon=\"user-circle-o\"\r\n-      variant=\"warning\"\r\n-    />\r\n+  <div class=\"feature-page\">\r\n+    <!-- å³ä¸Šè§’ç”¨æˆ·ä¿¡æ¯ -->\r\n+    <div class=\"top-corner\">\r\n+      <UserInfo @login=\"handleUserLogin\" @logout=\"handleUserLogout\" />\r\n+    </div>\r\n \r\n-    <!-- ä½“éªŒç‚¹æ˜¾ç¤º -->\r\n-    <PointsDisplay ref=\"pointsDisplayRef\" />\r\n+    <div class=\"container\">\r\n+      <header class=\"page-header\">\r\n+        <BackToHomeButton class=\"back-btn\" />\r\n+        <h1 class=\"page-title\">\r\n+          <FaceSwapIcon :size=\"32\" color=\"var(--warning-color)\" class=\"page-icon\" />\r\n+          æé€Ÿæ¢è„¸\r\n+        </h1>\r\n+        <p class=\"page-description\">ä¸Šä¼ 4å¼ äººè„¸ç…§ç‰‡å’Œ1å¼ ç›®æ ‡å›¾ç‰‡ï¼ŒAIå°†ä¸ºæ‚¨æ™ºèƒ½æ¢è„¸</p>\r\n+      </header>\r\n \r\n-    <!-- ä¸Šä¼ åŒºåŸŸ -->\r\n-    <div v-if=\"!resultImage\">\r\n-      <!-- äººè„¸ç…§ç‰‡ä¸Šä¼  -->\r\n-      <MobileCard\r\n-        title=\"äººè„¸ç…§ç‰‡ (1-4å¼ )\"\r\n-        subtitle=\"ä¸€æ¬¡æ€§é€‰æ‹©1-4å¼ æ¸…æ™°çš„äººè„¸ç…§ç‰‡\"\r\n-        icon=\"user-circle-o\"\r\n-        variant=\"primary\"\r\n-      >\r\n-        <MultiImageUpload\r\n-          v-model=\"facePhotos\"\r\n-          :disabled=\"isLoading\"\r\n-          @change=\"handleFacePhotosChange\"\r\n-        />\r\n-      </MobileCard>\r\n+      <!-- ä½“éªŒç‚¹æ˜¾ç¤º -->\r\n+      <PointsDisplay ref=\"pointsDisplayRef\" />\r\n \r\n-      <!-- ç›®æ ‡å›¾ç‰‡ä¸Šä¼  -->\r\n-      <MobileCard\r\n-        title=\"ç›®æ ‡å›¾ç‰‡\"\r\n-        subtitle=\"ä¸Šä¼ éœ€è¦æ¢è„¸çš„ç›®æ ‡å›¾ç‰‡\"\r\n-        icon=\"photo-o\"\r\n-        variant=\"success\"\r\n-      >\r\n-        <ImageUpload\r\n-          v-model=\"targetImage\"\r\n-          title=\"ä¸Šä¼ éœ€è¦æ¢è„¸çš„ç›®æ ‡å›¾ç‰‡\"\r\n-          description=\"æ”¯æŒ JPGã€PNG æ ¼å¼ï¼Œå»ºè®®å°ºå¯¸ 512x512 ä»¥ä¸Š\"\r\n-          icon=\"Image\"\r\n-          :icon-size=\"48\"\r\n-          :disabled=\"isLoading\"\r\n-          @change=\"handleTargetImageChange\"\r\n-        />\r\n-      </MobileCard>\r\n+      <main class=\"page-content\">\r\n+        <div v-if=\"!resultImage\" class=\"upload-section\">\r\n+          <!-- äººè„¸ç…§ç‰‡ä¸Šä¼ åŒºåŸŸ -->\r\n+          <div class=\"face-photos-section\">\r\n+            <h3 class=\"section-title\">\r\n+              <FaceSwapIcon :size=\"20\" color=\"var(--primary-color)\" class=\"section-icon\" />\r\n+              äººè„¸ç…§ç‰‡ (1-4å¼ )\r\n+            </h3>\r\n+            <!-- <p class=\"section-description\">ä¸€æ¬¡æ€§é€‰æ‹©1-4å¼ æ¸…æ™°çš„äººè„¸ç…§ç‰‡</p> -->\r\n \r\n-      <!-- å¤„ç†æŒ‰é’® -->\r\n-      <MobileCard v-if=\"canProcess && !isLoading\">\r\n-        <van-button\r\n-          @click=\"processImages\"\r\n-          type=\"primary\"\r\n-          size=\"large\"\r\n-          round\r\n-          block\r\n-          class=\"process-btn\"\r\n-        >\r\n-          <Users :size=\"20\" color=\"white\" class=\"btn-icon\" />\r\n-          å¼€å§‹æ¢è„¸\r\n-        </van-button>\r\n-      </MobileCard>\r\n-\r\n-      <!-- ä¸Šä¼ æç¤º -->\r\n-      <MobileCard v-else title=\"ä¸Šä¼ è¿›åº¦\" subtitle=\"è¯·å®Œæˆæ‰€æœ‰å›¾ç‰‡ä¸Šä¼ \" variant=\"default\">\r\n-        <div class=\"upload-status\">\r\n-          <div class=\"status-item\">\r\n-            <van-icon name=\"photo-o\" size=\"16\" color=\"var(--van-primary-color)\" />\r\n-            <span>å·²ä¸Šä¼  {{ uploadedFacePhotos }}/4 å¼ äººè„¸ç…§ç‰‡</span>\r\n-            <van-icon\r\n-              :name=\"uploadedFacePhotos > 0 ? 'success' : 'cross'\"\r\n-              size=\"16\"\r\n-              :color=\"uploadedFacePhotos > 0 ? 'var(--van-success-color)' : 'var(--van-text-color-3)'\"\r\n+            <MultiImageUpload\r\n+              v-model=\"facePhotos\"\r\n+              :disabled=\"isLoading\"\r\n+              @change=\"handleFacePhotosChange\"\r\n             />\r\n           </div>\r\n-          <div class=\"status-item\">\r\n-            <van-icon name=\"photo-o\" size=\"16\" color=\"var(--van-success-color)\" />\r\n-            <span>ç›®æ ‡å›¾ç‰‡</span>\r\n-            <van-icon\r\n-              :name=\"targetImage ? 'success' : 'cross'\"\r\n-              size=\"16\"\r\n-              :color=\"targetImage ? 'var(--van-success-color)' : 'var(--van-text-color-3)'\"\r\n+\r\n+          <!-- ç›®æ ‡å›¾ç‰‡ä¸Šä¼ åŒºåŸŸ -->\r\n+          <div class=\"target-image-section\">\r\n+            <h3 class=\"section-title\">\r\n+              <Image :size=\"20\" color=\"var(--success-color)\" class=\"section-icon\" />\r\n+              ç›®æ ‡å›¾ç‰‡\r\n+            </h3>\r\n+            <!-- <p class=\"section-description\">ä¸Šä¼ éœ€è¦æ¢è„¸çš„ç›®æ ‡å›¾ç‰‡</p> -->\r\n+\r\n+            <ImageUpload\r\n+              v-model=\"targetImage\"\r\n+              title=\"ä¸Šä¼ éœ€è¦æ¢è„¸çš„ç›®æ ‡å›¾ç‰‡\"\r\n+              description=\"æ”¯æŒ JPGã€PNG æ ¼å¼ï¼Œå»ºè®®å°ºå¯¸ 512x512 ä»¥ä¸Š\"\r\n+              icon=\"Image\"\r\n+              :icon-size=\"48\"\r\n+              :disabled=\"isLoading\"\r\n+              @change=\"handleTargetImageChange\"\r\n             />\r\n           </div>\r\n+\r\n+          <!-- å¤„ç†æŒ‰é’® -->\r\n+          <div v-if=\"canProcess && !isLoading\" class=\"action-section\">\r\n+            <van-button\r\n+              @click=\"processImages\"\r\n+              type=\"primary\"\r\n+              size=\"large\"\r\n+              round\r\n+              block\r\n+              class=\"process-btn\"\r\n+            >\r\n+              <Users :size=\"20\" color=\"white\" class=\"btn-icon\" />\r\n+              å¼€å§‹æ¢è„¸\r\n+            </van-button>\r\n+          </div>\r\n+\r\n+          <!-- ä¸Šä¼ æç¤º -->\r\n+          <div v-else class=\"upload-tips\">\r\n+            <div class=\"tip-item\">\r\n+              <Image :size=\"16\" color=\"var(--primary-color)\" class=\"tip-icon\" />\r\n+              <span>å·²ä¸Šä¼  {{ uploadedFacePhotos }}/4 å¼ äººè„¸ç…§ç‰‡</span>\r\n+            </div>\r\n+            <div class=\"tip-item\">\r\n+              <Image :size=\"16\" color=\"var(--success-color)\" class=\"tip-icon\" />\r\n+              <van-icon :name=\"targetImage ? 'success' : 'cross'\" size=\"16\" :color=\"targetImage ? 'var(--success-color)' : 'var(--error-color)'\" />\r\n+              <span>ç›®æ ‡å›¾ç‰‡</span>\r\n+            </div>\r\n+          </div>\r\n         </div>\r\n-      </MobileCard>\r\n-    </div>\r\n \r\n-    <!-- å¤„ç†çŠ¶æ€ -->\r\n-    <MobileCard v-if=\"isLoading\" variant=\"primary\">\r\n-      <ProcessingStatus\r\n-        status=\"loading\"\r\n-        title=\"æ­£åœ¨å¤„ç†æ¢è„¸...\"\r\n-        description=\"è¯·è€å¿ƒç­‰å¾…ï¼Œå¤„ç†æ—¶é—´å¯èƒ½éœ€è¦å‡ åˆ†é’Ÿ\"\r\n-        :progress=\"progressPercent\"\r\n-        :prompt-id=\"promptId\"\r\n-        :processing-time=\"processingTime\"\r\n-      />\r\n-    </MobileCard>\r\n+        <!-- å¤„ç†çŠ¶æ€ -->\r\n+        <ProcessingStatus\r\n+          v-if=\"isLoading\"\r\n+          status=\"loading\"\r\n+          title=\"æ­£åœ¨å¤„ç†æ¢è„¸...\"\r\n+          description=\"è¯·è€å¿ƒç­‰å¾…ï¼Œå¤„ç†æ—¶é—´å¯èƒ½éœ€è¦å‡ åˆ†é’Ÿ\"\r\n+          :progress=\"progressPercent\"\r\n+          :prompt-id=\"promptId\"\r\n+          :processing-time=\"processingTime\"\r\n+        />\r\n \r\n-    <!-- ç»“æœå±•ç¤º -->\r\n-    <MobileCard v-if=\"resultImage\" title=\"æ¢è„¸ç»“æœ\" subtitle=\"å¯¹æ¯”æŸ¥çœ‹æ¢è„¸æ•ˆæœ\" variant=\"success\">\r\n-      <ImageComparison\r\n-        :original-image=\"targetImageForComparison\"\r\n-        :result-image=\"resultImage\"\r\n-        @reset=\"resetProcess\"\r\n-      />\r\n-    </MobileCard>\r\n-\r\n-    <!-- åº•éƒ¨å¯¼èˆª -->\r\n-    <MobileTabbar />\r\n-  </MobileLayout>\r\n+        <!-- ç»“æœå±•ç¤ºåŒºåŸŸ -->\r\n+        <ImageComparison\r\n+          v-if=\"resultImage\"\r\n+          :original-image=\"targetImageForComparison\"\r\n+          :result-image=\"resultImage\"\r\n+          @reset=\"resetProcess\"\r\n+        />\r\n+      </main>\r\n+    </div>\r\n+  </div>\r\n </template>\r\n \r\n <script setup>\r\n import { ref, computed, onMounted, onUnmounted } from 'vue'\r\n import { Toast } from 'vant'\r\n-import { Users } from 'lucide-vue-next'\r\n-import MobileLayout from '../components/MobileLayout.vue'\r\n-import MobileCard from '../components/MobileCard.vue'\r\n-import MobileTabbar from '../components/MobileTabbar.vue'\r\n+import { Image } from 'lucide-vue-next'\r\n import ImageUpload from '../components/ImageUpload.vue'\r\n import MultiImageUpload from '../components/MultiImageUpload.vue'\r\n import ProcessingStatus from '../components/ProcessingStatus.vue'\r\n import ImageComparison from '../components/ImageComparison.vue'\r\n import PointsDisplay from '../components/PointsDisplay.vue'\r\n+import UserInfo from '../components/UserInfo.vue'\r\n+import BackToHomeButton from '../components/BackToHomeButton.vue'\r\n+import { FaceSwapIcon } from '../components/icons'\r\n \r\n // é™æ€å¯¼å…¥ComfyUIæœåŠ¡\r\n import { processFaceSwapImage } from '../services/comfyui.js'\r\n \r\n@@ -927,28 +916,5 @@\n   .tip-item {\r\n     font-size: 1rem;\r\n   }\r\n }\r\n-\r\n-/* ä¸Šä¼ çŠ¶æ€æ ·å¼ */\r\n-.upload-status {\r\n-  display: flex;\r\n-  flex-direction: column;\r\n-  gap: 12px;\r\n-}\r\n-\r\n-.status-item {\r\n-  display: flex;\r\n-  align-items: center;\r\n-  gap: 12px;\r\n-  padding: 12px;\r\n-  background: rgba(255, 255, 255, 0.05);\r\n-  border-radius: 8px;\r\n-  border: 1px solid var(--van-border-color);\r\n-}\r\n-\r\n-.status-item span {\r\n-  flex: 1;\r\n-  font-size: 14px;\r\n-  color: var(--van-text-color);\r\n-}\r\n </style>\r\n"
                },
                {
                    "date": 1752374951510,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -14,11 +14,8 @@\n         </h1>\r\n         <p class=\"page-description\">ä¸Šä¼ 4å¼ äººè„¸ç…§ç‰‡å’Œ1å¼ ç›®æ ‡å›¾ç‰‡ï¼ŒAIå°†ä¸ºæ‚¨æ™ºèƒ½æ¢è„¸</p>\r\n       </header>\r\n \r\n-      <!-- ä½“éªŒç‚¹æ˜¾ç¤º -->\r\n-      <PointsDisplay ref=\"pointsDisplayRef\" />\r\n-\r\n       <main class=\"page-content\">\r\n         <div v-if=\"!resultImage\" class=\"upload-section\">\r\n           <!-- äººè„¸ç…§ç‰‡ä¸Šä¼ åŒºåŸŸ -->\r\n           <div class=\"face-photos-section\">\r\n"
                },
                {
                    "date": 1752374978088,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -110,9 +110,8 @@\n import ImageUpload from '../components/ImageUpload.vue'\r\n import MultiImageUpload from '../components/MultiImageUpload.vue'\r\n import ProcessingStatus from '../components/ProcessingStatus.vue'\r\n import ImageComparison from '../components/ImageComparison.vue'\r\n-import PointsDisplay from '../components/PointsDisplay.vue'\r\n import UserInfo from '../components/UserInfo.vue'\r\n import BackToHomeButton from '../components/BackToHomeButton.vue'\r\n import { FaceSwapIcon } from '../components/icons'\r\n \r\n"
                },
                {
                    "date": 1752375004010,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -136,11 +136,10 @@\n const isDragging = ref(false)\r\n const comparisonContainer = ref(null)\r\n const startTime = ref(null)\r\n \r\n-// ä½“éªŒç‚¹ç»„ä»¶å¼•ç”¨\r\n-const pointsDisplayRef = ref(null)\r\n \r\n+\r\n // ä½¿ç”¨VantUI Toastç³»ç»Ÿ\r\n \r\n // è®¡ç®—å±æ€§\r\n const uploadedFacePhotos = computed(() => {\r\n"
                },
                {
                    "date": 1752375016371,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -205,13 +205,10 @@\n       const endTime = Date.now()\r\n       const duration = Math.round((endTime - startTime.value) / 1000)\r\n       processingTime.value = `${duration}ç§’`\r\n \r\n-      // æ›´æ–°ä½“éªŒç‚¹æ˜¾ç¤º\r\n-      if (pointsDisplayRef.value) {\r\n-        pointsDisplayRef.value.updatePointsStatus()\r\n-      }\r\n \r\n+\r\n       // æ˜¾ç¤ºæˆåŠŸtoast\r\n       const pointsInfo = result.pointsConsumed ? `ï¼ˆæ¶ˆè€—${result.pointsConsumed}ç‚¹ï¼‰` : ''\r\n       Toast.success(`ğŸ‰ æ¢è„¸å®Œæˆï¼${pointsInfo}å¯ä»¥æ‹–æ‹½ä¸­é—´çº¿å¯¹æ¯”ç›®æ ‡å›¾åƒå’Œæ¢è„¸ç»“æœ`)\r\n       console.log('âœ… æ¢è„¸å¤„ç†å®Œæˆ')\r\n"
                },
                {
                    "date": 1752375077075,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,14 +1,15 @@\n <template>\r\n   <div class=\"feature-page\">\r\n-    <!-- å³ä¸Šè§’ç”¨æˆ·ä¿¡æ¯ -->\r\n-    <div class=\"top-corner\">\r\n-      <UserInfo @login=\"handleUserLogin\" @logout=\"handleUserLogout\" />\r\n-    </div>\r\n+    <!-- é¡¶éƒ¨å¯¼èˆª -->\r\n+    <TopNavigation\r\n+      title=\"æé€Ÿæ¢è„¸\"\r\n+      @login=\"handleUserLogin\"\r\n+      @logout=\"handleUserLogout\"\r\n+    />\r\n \r\n     <div class=\"container\">\r\n       <header class=\"page-header\">\r\n-        <BackToHomeButton class=\"back-btn\" />\r\n         <h1 class=\"page-title\">\r\n           <FaceSwapIcon :size=\"32\" color=\"var(--warning-color)\" class=\"page-icon\" />\r\n           æé€Ÿæ¢è„¸\r\n         </h1>\r\n"
                },
                {
                    "date": 1752375090665,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -111,10 +111,9 @@\n import ImageUpload from '../components/ImageUpload.vue'\r\n import MultiImageUpload from '../components/MultiImageUpload.vue'\r\n import ProcessingStatus from '../components/ProcessingStatus.vue'\r\n import ImageComparison from '../components/ImageComparison.vue'\r\n-import UserInfo from '../components/UserInfo.vue'\r\n-import BackToHomeButton from '../components/BackToHomeButton.vue'\r\n+import TopNavigation from '../components/TopNavigation.vue'\r\n import { FaceSwapIcon } from '../components/icons'\r\n \r\n // é™æ€å¯¼å…¥ComfyUIæœåŠ¡\r\n import { processFaceSwapImage } from '../services/comfyui.js'\r\n"
                },
                {
                    "date": 1752375262925,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -309,20 +309,13 @@\n <style scoped>\r\n .feature-page {\r\n   min-height: 100vh;\r\n   padding: 20px;\r\n+  padding-top: 80px; /* ä¸ºå›ºå®šå¯¼èˆªæ ç•™å‡ºç©ºé—´ */\r\n   background: linear-gradient(135deg, var(--bg-primary) 0%, var(--bg-secondary) 100%);\r\n   position: relative;\r\n }\r\n \r\n-/* å³ä¸Šè§’ç”¨æˆ·ä¿¡æ¯ */\r\n-.top-corner {\r\n-  position: fixed;\r\n-  top: 20px;\r\n-  right: 20px;\r\n-  z-index: 1000;\r\n-}\r\n-\r\n .container {\r\n   max-width: 1000px;\r\n   margin: 0 auto;\r\n }\r\n"
                },
                {
                    "date": 1752383881717,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,105 +1,106 @@\n <template>\r\n-  <div class=\"feature-page\">\r\n-    <!-- é¡¶éƒ¨å¯¼èˆª -->\r\n-    <TopNavigation\r\n-      title=\"æé€Ÿæ¢è„¸\"\r\n-      @login=\"handleUserLogin\"\r\n-      @logout=\"handleUserLogout\"\r\n-    />\r\n+  <AIProcessingTemplate\r\n+    title=\"æé€Ÿæ¢è„¸\"\r\n+    description=\"ä¸Šä¼ äººè„¸ç…§ç‰‡å’Œç›®æ ‡å›¾ç‰‡ï¼ŒAIæ™ºèƒ½æ¢è„¸\"\r\n+    :title-icon=\"FaceSwapIcon\"\r\n+    title-icon-color=\"var(--van-warning-color)\"\r\n+    :is-processing=\"isLoading\"\r\n+    :can-process=\"canProcess\"\r\n+    :show-upload-tips=\"!canProcess\"\r\n+    process-button-text=\"å¼€å§‹æ¢è„¸\"\r\n+    :process-button-icon=\"Users\"\r\n+    :progress=\"progressPercent\"\r\n+    processing-title=\"æ­£åœ¨å¤„ç†æ¢è„¸...\"\r\n+    processing-description=\"è¯·è€å¿ƒç­‰å¾…ï¼Œå¤„ç†æ—¶é—´å¯èƒ½éœ€è¦å‡ åˆ†é’Ÿ\"\r\n+    :processing-info=\"{ promptId, processingTime }\"\r\n+    :result-data=\"resultImage\"\r\n+    @login=\"handleUserLogin\"\r\n+    @logout=\"handleUserLogout\"\r\n+    @process=\"processImages\"\r\n+  >\r\n+    <!-- è¾“å…¥åŒºåŸŸ -->\r\n+    <template #inputs>\r\n+      <!-- äººè„¸ç…§ç‰‡ä¸Šä¼  -->\r\n+      <MobileCard title=\"äººè„¸ç…§ç‰‡ (1-4å¼ )\" icon=\"friends-o\" inset>\r\n+        <VantMultiImageUpload\r\n+          v-model=\"facePhotos\"\r\n+          :max-count=\"4\"\r\n+          :min-count=\"1\"\r\n+          upload-text=\"æ·»åŠ äººè„¸\"\r\n+          :disabled=\"isLoading\"\r\n+          :tips=\"[\r\n+            'æ”¯æŒ JPGã€PNG æ ¼å¼',\r\n+            'å»ºè®®å°ºå¯¸ 512x512 ä»¥ä¸Š',\r\n+            'äººè„¸æ¸…æ™°ã€æ­£é¢æ•ˆæœæ›´ä½³',\r\n+            'å¯ä¸€æ¬¡é€‰æ‹©å¤šå¼ ç…§ç‰‡'\r\n+          ]\"\r\n+          @change=\"handleFacePhotosChange\"\r\n+        />\r\n+      </MobileCard>\r\n \r\n-    <div class=\"container\">\r\n-      <header class=\"page-header\">\r\n-        <h1 class=\"page-title\">\r\n-          <FaceSwapIcon :size=\"32\" color=\"var(--warning-color)\" class=\"page-icon\" />\r\n-          æé€Ÿæ¢è„¸\r\n-        </h1>\r\n-        <p class=\"page-description\">ä¸Šä¼ 4å¼ äººè„¸ç…§ç‰‡å’Œ1å¼ ç›®æ ‡å›¾ç‰‡ï¼ŒAIå°†ä¸ºæ‚¨æ™ºèƒ½æ¢è„¸</p>\r\n-      </header>\r\n+      <!-- ç›®æ ‡å›¾ç‰‡ä¸Šä¼  -->\r\n+      <MobileCard title=\"ç›®æ ‡å›¾ç‰‡\" icon=\"photo-o\" inset>\r\n+        <VantImageUpload\r\n+          v-model=\"targetImage\"\r\n+          upload-text=\"é€‰æ‹©ç›®æ ‡å›¾ç‰‡\"\r\n+          description=\"ä¸Šä¼ éœ€è¦æ¢è„¸çš„ç›®æ ‡å›¾ç‰‡\"\r\n+          upload-icon=\"photograph\"\r\n+          :disabled=\"isLoading\"\r\n+          :tips=\"[\r\n+            'æ”¯æŒ JPGã€PNG æ ¼å¼',\r\n+            'å»ºè®®å°ºå¯¸ 512x512 ä»¥ä¸Š',\r\n+            'å›¾ç‰‡æ¸…æ™°åº¦å½±å“æ¢è„¸æ•ˆæœ'\r\n+          ]\"\r\n+          @change=\"handleTargetImageChange\"\r\n+        />\r\n+      </MobileCard>\r\n+    </template>\r\n \r\n-      <main class=\"page-content\">\r\n-        <div v-if=\"!resultImage\" class=\"upload-section\">\r\n-          <!-- äººè„¸ç…§ç‰‡ä¸Šä¼ åŒºåŸŸ -->\r\n-          <div class=\"face-photos-section\">\r\n-            <h3 class=\"section-title\">\r\n-              <FaceSwapIcon :size=\"20\" color=\"var(--primary-color)\" class=\"section-icon\" />\r\n-              äººè„¸ç…§ç‰‡ (1-4å¼ )\r\n-            </h3>\r\n-            <!-- <p class=\"section-description\">ä¸€æ¬¡æ€§é€‰æ‹©1-4å¼ æ¸…æ™°çš„äººè„¸ç…§ç‰‡</p> -->\r\n+    <!-- ä¸Šä¼ æç¤º -->\r\n+    <template #upload-tips>\r\n+      <div class=\"upload-status\">\r\n+        <div class=\"status-item\">\r\n+          <van-icon\r\n+            :name=\"facePhotos.length > 0 ? 'friends' : 'friends-o'\"\r\n+            :color=\"facePhotos.length > 0 ? 'var(--van-success-color)' : 'var(--van-text-color-3)'\"\r\n+            size=\"16\"\r\n+          />\r\n+          <span :class=\"{ 'text-success': facePhotos.length > 0 }\">\r\n+            å·²ä¸Šä¼  {{ facePhotos.length }}/4 å¼ äººè„¸ç…§ç‰‡\r\n+          </span>\r\n+        </div>\r\n \r\n-            <MultiImageUpload\r\n-              v-model=\"facePhotos\"\r\n-              :disabled=\"isLoading\"\r\n-              @change=\"handleFacePhotosChange\"\r\n-            />\r\n-          </div>\r\n-\r\n-          <!-- ç›®æ ‡å›¾ç‰‡ä¸Šä¼ åŒºåŸŸ -->\r\n-          <div class=\"target-image-section\">\r\n-            <h3 class=\"section-title\">\r\n-              <Image :size=\"20\" color=\"var(--success-color)\" class=\"section-icon\" />\r\n-              ç›®æ ‡å›¾ç‰‡\r\n-            </h3>\r\n-            <!-- <p class=\"section-description\">ä¸Šä¼ éœ€è¦æ¢è„¸çš„ç›®æ ‡å›¾ç‰‡</p> -->\r\n-\r\n-            <ImageUpload\r\n-              v-model=\"targetImage\"\r\n-              title=\"ä¸Šä¼ éœ€è¦æ¢è„¸çš„ç›®æ ‡å›¾ç‰‡\"\r\n-              description=\"æ”¯æŒ JPGã€PNG æ ¼å¼ï¼Œå»ºè®®å°ºå¯¸ 512x512 ä»¥ä¸Š\"\r\n-              icon=\"Image\"\r\n-              :icon-size=\"48\"\r\n-              :disabled=\"isLoading\"\r\n-              @change=\"handleTargetImageChange\"\r\n-            />\r\n-          </div>\r\n-\r\n-          <!-- å¤„ç†æŒ‰é’® -->\r\n-          <div v-if=\"canProcess && !isLoading\" class=\"action-section\">\r\n-            <van-button\r\n-              @click=\"processImages\"\r\n-              type=\"primary\"\r\n-              size=\"large\"\r\n-              round\r\n-              block\r\n-              class=\"process-btn\"\r\n-            >\r\n-              <Users :size=\"20\" color=\"white\" class=\"btn-icon\" />\r\n-              å¼€å§‹æ¢è„¸\r\n-            </van-button>\r\n-          </div>\r\n-\r\n-          <!-- ä¸Šä¼ æç¤º -->\r\n-          <div v-else class=\"upload-tips\">\r\n-            <div class=\"tip-item\">\r\n-              <Image :size=\"16\" color=\"var(--primary-color)\" class=\"tip-icon\" />\r\n-              <span>å·²ä¸Šä¼  {{ uploadedFacePhotos }}/4 å¼ äººè„¸ç…§ç‰‡</span>\r\n-            </div>\r\n-            <div class=\"tip-item\">\r\n-              <Image :size=\"16\" color=\"var(--success-color)\" class=\"tip-icon\" />\r\n-              <van-icon :name=\"targetImage ? 'success' : 'cross'\" size=\"16\" :color=\"targetImage ? 'var(--success-color)' : 'var(--error-color)'\" />\r\n-              <span>ç›®æ ‡å›¾ç‰‡</span>\r\n-            </div>\r\n-          </div>\r\n+        <div class=\"status-item\">\r\n+          <van-icon\r\n+            :name=\"targetImage ? 'photo' : 'photo-o'\"\r\n+            :color=\"targetImage ? 'var(--van-success-color)' : 'var(--van-text-color-3)'\"\r\n+            size=\"16\"\r\n+          />\r\n+          <span :class=\"{ 'text-success': targetImage }\">\r\n+            {{ targetImage ? 'ç›®æ ‡å›¾ç‰‡å·²ä¸Šä¼ ' : 'è¯·ä¸Šä¼ ç›®æ ‡å›¾ç‰‡' }}\r\n+          </span>\r\n         </div>\r\n+      </div>\r\n+    </template>\r\n \r\n-        <!-- å¤„ç†çŠ¶æ€ -->\r\n-        <ProcessingStatus\r\n-          v-if=\"isLoading\"\r\n-          status=\"loading\"\r\n-          title=\"æ­£åœ¨å¤„ç†æ¢è„¸...\"\r\n-          description=\"è¯·è€å¿ƒç­‰å¾…ï¼Œå¤„ç†æ—¶é—´å¯èƒ½éœ€è¦å‡ åˆ†é’Ÿ\"\r\n-          :progress=\"progressPercent\"\r\n-          :prompt-id=\"promptId\"\r\n-          :processing-time=\"processingTime\"\r\n+    <!-- ç»“æœå±•ç¤º -->\r\n+    <template #result=\"{ result }\">\r\n+      <VantImageComparison\r\n+        :original-image=\"targetImageForComparison\"\r\n+        :result-image=\"result\"\r\n+        :process-info=\"{\r\n+          promptId,\r\n+          processingTime,\r\n+          timestamp: Date.now(),\r\n+          model: 'FaceSwap v3.0'\r\n+        }\"\r\n+        @reset=\"resetProcess\"\r\n+        @download=\"handleDownload\"\r\n+      />\r\n+    </template>\r\n+  </AIProcessingTemplate>\r\n         />\r\n-\r\n-        <!-- ç»“æœå±•ç¤ºåŒºåŸŸ -->\r\n-        <ImageComparison\r\n-          v-if=\"resultImage\"\r\n-          :original-image=\"targetImageForComparison\"\r\n-          :result-image=\"resultImage\"\r\n-          @reset=\"resetProcess\"\r\n-        />\r\n       </main>\r\n     </div>\r\n   </div>\r\n </template>\r\n"
                },
                {
                    "date": 1752383913104,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -98,23 +98,21 @@\n         @download=\"handleDownload\"\r\n       />\r\n     </template>\r\n   </AIProcessingTemplate>\r\n-        />\r\n-      </main>\r\n-    </div>\r\n-  </div>\r\n </template>\r\n \r\n <script setup>\r\n import { ref, computed, onMounted, onUnmounted } from 'vue'\r\n import { Toast } from 'vant'\r\n-import { Image } from 'lucide-vue-next'\r\n-import ImageUpload from '../components/ImageUpload.vue'\r\n-import MultiImageUpload from '../components/MultiImageUpload.vue'\r\n-import ProcessingStatus from '../components/ProcessingStatus.vue'\r\n-import ImageComparison from '../components/ImageComparison.vue'\r\n-import TopNavigation from '../components/TopNavigation.vue'\r\n+import { Users } from 'lucide-vue-next'\r\n+import {\r\n+  AIProcessingTemplate,\r\n+  MobileCard,\r\n+  VantImageUpload,\r\n+  VantMultiImageUpload,\r\n+  VantImageComparison\r\n+} from '../components/mobile'\r\n import { FaceSwapIcon } from '../components/icons'\r\n \r\n // é™æ€å¯¼å…¥ComfyUIæœåŠ¡\r\n import { processFaceSwapImage } from '../services/comfyui.js'\r\n"
                },
                {
                    "date": 1752383939511,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -291,8 +291,14 @@\n     stopDrag()\r\n   }\r\n })\r\n \r\n+// å¤„ç†ä¸‹è½½äº‹ä»¶\r\n+const handleDownload = (imageUrl) => {\r\n+  console.log('ä¸‹è½½å›¾ç‰‡:', imageUrl)\r\n+  Toast.success('å›¾ç‰‡ä¸‹è½½æˆåŠŸ')\r\n+}\r\n+\r\n // ç”¨æˆ·ç™»å½•æˆåŠŸå›è°ƒ\r\n const handleUserLogin = (data) => {\r\n   console.log('ç”¨æˆ·ç™»å½•æˆåŠŸ:', data)\r\n   // å¯ä»¥åœ¨è¿™é‡Œè§¦å‘ä¸€äº›éœ€è¦ç™»å½•çŠ¶æ€çš„æ“ä½œ\r\n"
                },
                {
                    "date": 1752384015602,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -311,600 +311,40 @@\n }\r\n </script>\r\n \r\n <style scoped>\r\n-.feature-page {\r\n-  min-height: 100vh;\r\n-  padding: 20px;\r\n-  padding-top: 80px; /* ä¸ºå›ºå®šå¯¼èˆªæ ç•™å‡ºç©ºé—´ */\r\n-  background: linear-gradient(135deg, var(--bg-primary) 0%, var(--bg-secondary) 100%);\r\n-  position: relative;\r\n-}\r\n-\r\n-.container {\r\n-  max-width: 1000px;\r\n-  margin: 0 auto;\r\n-}\r\n-\r\n-.page-header {\r\n-  text-align: center;\r\n-  margin-bottom: 40px;\r\n-}\r\n-\r\n-.page-title {\r\n-  color: var(--text-color);\r\n-  font-size: 2.5rem;\r\n-  font-weight: 700;\r\n-  margin-bottom: 12px;\r\n+/* ä¸Šä¼ çŠ¶æ€æ ·å¼ */\r\n+.upload-status {\r\n   display: flex;\r\n-  align-items: center;\r\n-  justify-content: center;\r\n-  gap: 16px;\r\n-}\r\n-\r\n-.page-icon {\r\n-  flex-shrink: 0;\r\n-}\r\n-\r\n-.page-description {\r\n-  color: var(--text-light);\r\n-  font-size: 1.1rem;\r\n-  margin: 0;\r\n-  line-height: 1.5;\r\n-}\r\n-\r\n-.section-title {\r\n-  color: var(--text-color);\r\n-  font-size: 1.3rem;\r\n-  font-weight: 600;\r\n-  margin-bottom: 12px;\r\n-  display: flex;\r\n-  align-items: center;\r\n-  gap: 12px;\r\n-}\r\n-\r\n-.section-icon {\r\n-  flex-shrink: 0;\r\n-}\r\n-\r\n-.section-description {\r\n-  color: var(--text-light);\r\n-  font-size: 0.95rem;\r\n-  margin-bottom: 24px;\r\n-  line-height: 1.5;\r\n-}\r\n-\r\n-.face-photos-grid {\r\n-  display: grid;\r\n-  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\r\n-  gap: 20px;\r\n-  margin-bottom: 32px;\r\n-}\r\n-\r\n-.upload-tips {\r\n-  background: var(--bg-card);\r\n-  border: 1px solid var(--border-color);\r\n-  border-radius: 12px;\r\n-  padding: 20px;\r\n-  margin-top: 24px;\r\n-}\r\n-\r\n-.tip-item {\r\n-  display: flex;\r\n-  align-items: center;\r\n-  gap: 12px;\r\n-  margin-bottom: 12px;\r\n-  color: var(--text-light);\r\n-  font-size: 0.95rem;\r\n-}\r\n-\r\n-.tip-item:last-child {\r\n-  margin-bottom: 0;\r\n-}\r\n-\r\n-.tip-icon {\r\n-  flex-shrink: 0;\r\n-}\r\n-\r\n-.process-btn {\r\n-  margin-top: 24px;\r\n-}\r\n-\r\n-.process-btn .van-button__content {\r\n-  display: flex;\r\n-  align-items: center;\r\n-  justify-content: center;\r\n+  flex-direction: column;\r\n   gap: 8px;\r\n+  padding: 12px;\r\n+  background: var(--van-background-2, #f7f8fa);\r\n+  border-radius: 6px;\r\n }\r\n \r\n-.loading-icon,\r\n-.btn-icon {\r\n-  flex-shrink: 0;\r\n-}\r\n-\r\n-.back-btn {\r\n-  display: inline-flex;\r\n-  align-items: center;\r\n-  gap: 8px;\r\n-  color: rgba(255, 255, 255, 0.9);\r\n-  text-decoration: none;\r\n-  font-size: 1rem;\r\n-  margin-bottom: 20px;\r\n-  transition: var(--transition);\r\n-}\r\n-\r\n-.back-btn:hover {\r\n-  color: white;\r\n-  transform: translateX(-4px);\r\n-}\r\n-\r\n-.back-icon {\r\n-  font-size: 1.2rem;\r\n-}\r\n-\r\n-.page-title {\r\n-  font-size: 3rem;\r\n-  color: white;\r\n-  margin-bottom: 16px;\r\n-  text-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);\r\n-}\r\n-\r\n-.page-icon {\r\n-  margin-right: 16px;\r\n-}\r\n-\r\n-.page-description {\r\n-  font-size: 1.2rem;\r\n-  color: rgba(255, 255, 255, 0.8);\r\n-}\r\n-\r\n-.page-content {\r\n+.status-item {\r\n   display: flex;\r\n-  flex-direction: column;\r\n-  gap: 40px;\r\n-}\r\n-\r\n-.upload-section {\r\n-  display: flex;\r\n-  flex-direction: column;\r\n-  gap: 40px;\r\n-}\r\n-\r\n-/* äººè„¸ç…§ç‰‡åŒºåŸŸæ ·å¼ */\r\n-.face-photos-section, .target-image-section {\r\n-  background: var(--bg-card);\r\n-  border: 1px solid var(--border-color);\r\n-  border-radius: 20px;\r\n-  padding: 32px;\r\n-  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);\r\n-}\r\n-\r\n-.section-title {\r\n-  display: flex;\r\n   align-items: center;\r\n-  gap: 12px;\r\n-  font-size: 1.5rem;\r\n-  color: var(--text-color);\r\n-  margin-bottom: 16px;\r\n-}\r\n-\r\n-.section-icon {\r\n-  font-size: 1.8rem;\r\n-}\r\n-\r\n-.section-description {\r\n-  color: var(--text-light);\r\n-  margin-bottom: 24px;\r\n-  line-height: 1.6;\r\n-}\r\n-\r\n-/* äººè„¸ç…§ç‰‡ç½‘æ ¼æ ·å¼å·²ç§»è‡³ MultiImageUpload ç»„ä»¶ */\r\n-\r\n-/* äººè„¸ç…§ç‰‡ç›¸å…³æ ·å¼å·²ç§»è‡³ MultiImageUpload ç»„ä»¶ */\r\n-\r\n-.target-image-card {\r\n-  max-width: 400px;\r\n-  margin: 0 auto;\r\n-  background: var(--bg-dark-light);\r\n-  border: 1px solid var(--border-color);\r\n-  border-radius: 16px;\r\n-  overflow: hidden;\r\n-  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.3);\r\n-  transition: var(--transition);\r\n-}\r\n-\r\n-.target-image-card:hover {\r\n-  border-color: var(--primary-color);\r\n-  box-shadow: 0 12px 32px rgba(0, 0, 0, 0.4);\r\n-}\r\n-\r\n-.target-image-area {\r\n-  display: block;\r\n-  cursor: pointer;\r\n-  min-height: 300px;\r\n-  display: flex;\r\n-  align-items: center;\r\n-  justify-content: center;\r\n-  flex-direction: column;\r\n-  padding: 32px;\r\n-}\r\n-\r\n-.target-image-placeholder {\r\n-  text-align: center;\r\n-  color: var(--text-light);\r\n-}\r\n-\r\n-.target-image-placeholder h3 {\r\n-  margin: 16px 0 12px;\r\n-  color: var(--text-color);\r\n-  font-size: 1.2rem;\r\n-}\r\n-\r\n-.target-image-placeholder p {\r\n-  font-size: 0.9rem;\r\n-  margin: 0;\r\n-  line-height: 1.5;\r\n-}\r\n-\r\n-.target-image-preview {\r\n-  position: relative;\r\n-  width: 100%;\r\n-  height: 100%;\r\n-}\r\n-\r\n-/* ä¸Šä¼ æç¤ºæ ·å¼å·²ç§»è‡³ shared.css */\r\n-\r\n-/* å¤„ç†çŠ¶æ€æ ·å¼å·²ç§»è‡³ shared.css */\r\n-\r\n-.hidden {\r\n-  display: none;\r\n-}\r\n-\r\n-.image-preview {\r\n-  position: relative;\r\n-  border-radius: 12px;\r\n-  overflow: hidden;\r\n-}\r\n-\r\n-.preview-image {\r\n-  max-width: 100%;\r\n-  max-height: 200px;\r\n-  border-radius: 12px;\r\n-  display: block;\r\n-}\r\n-\r\n-.image-overlay {\r\n-  position: absolute;\r\n-  top: 0;\r\n-  left: 0;\r\n-  right: 0;\r\n-  bottom: 0;\r\n-  background: rgba(0, 0, 0, 0.7);\r\n-  color: white;\r\n-  display: flex;\r\n-  align-items: center;\r\n-  justify-content: center;\r\n-  opacity: 0;\r\n-  transition: var(--transition);\r\n-}\r\n-\r\n-.image-preview:hover .image-overlay {\r\n-  opacity: 1;\r\n-}\r\n-\r\n-.upload-grid {\r\n-  display: grid;\r\n-  grid-template-columns: 1fr auto 1fr;\r\n-  gap: 32px;\r\n-  align-items: center;\r\n-  margin-bottom: 32px;\r\n-}\r\n-\r\n-.upload-card {\r\n-  background: var(--bg-card);\r\n-  border: 1px solid var(--border-color);\r\n-  border-radius: 20px;\r\n-  padding: 24px;\r\n-  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);\r\n-}\r\n-\r\n-.upload-title {\r\n-  text-align: center;\r\n-  margin-bottom: 16px;\r\n-  color: var(--text-color);\r\n-  font-size: 1.2rem;\r\n-}\r\n-\r\n-.upload-area {\r\n-  display: block;\r\n-  cursor: pointer;\r\n-  border: 3px dashed var(--border-color);\r\n-  border-radius: 16px;\r\n-  padding: 32px 16px;\r\n-  text-align: center;\r\n-  transition: var(--transition);\r\n-  min-height: 250px;\r\n-  display: flex;\r\n-  align-items: center;\r\n-  justify-content: center;\r\n-  flex-direction: column;\r\n-}\r\n-\r\n-.upload-area:hover {\r\n-  border-color: var(--primary-color);\r\n-  background: rgba(102, 126, 234, 0.05);\r\n-}\r\n-\r\n-.upload-placeholder p {\r\n-  margin: 12px 0 4px;\r\n-  color: var(--text-color);\r\n-  font-weight: 600;\r\n-}\r\n-\r\n-.upload-hint {\r\n-  font-size: 0.85rem;\r\n-  color: var(--text-light);\r\n-}\r\n-\r\n-.upload-icon {\r\n-  font-size: 3rem;\r\n-  margin-bottom: 8px;\r\n-}\r\n-\r\n-.swap-arrow {\r\n-  display: flex;\r\n-  align-items: center;\r\n-  justify-content: center;\r\n-  background: rgba(255, 255, 255, 0.9);\r\n-  border-radius: 50%;\r\n-  width: 60px;\r\n-  height: 60px;\r\n-  box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);\r\n-}\r\n-\r\n-.arrow-icon {\r\n-  font-size: 1.5rem;\r\n-  color: var(--primary-color);\r\n-  font-weight: bold;\r\n-}\r\n-\r\n-.action-section {\r\n-  text-align: center;\r\n-}\r\n-\r\n-.swap-options {\r\n-  display: flex;\r\n-  justify-content: center;\r\n-  gap: 32px;\r\n-  margin-bottom: 24px;\r\n-  background: var(--bg-card);\r\n-  border: 1px solid var(--border-color);\r\n-  padding: 20px;\r\n-  border-radius: 12px;\r\n-}\r\n-\r\n-.option-group label {\r\n-  display: flex;\r\n-  align-items: center;\r\n   gap: 8px;\r\n-  color: var(--text-color);\r\n-  font-weight: 500;\r\n-  cursor: pointer;\r\n+  font-size: 14px;\r\n+  color: var(--van-text-color-2, #646566);\r\n }\r\n \r\n-.option-group input[type=\"checkbox\"] {\r\n-  width: 18px;\r\n-  height: 18px;\r\n-  accent-color: var(--primary-color);\r\n+.text-success {\r\n+  color: var(--van-success-color, #07c160);\r\n }\r\n \r\n-.swap-btn {\r\n-  font-size: 1.1rem;\r\n-  padding: 16px 32px;\r\n-  min-width: 200px;\r\n-}\r\n-\r\n-.result-section {\r\n-  display: flex;\r\n-  justify-content: center;\r\n-}\r\n-\r\n-.result-card {\r\n-  background: var(--bg-card);\r\n-  border: 1px solid var(--border-color);\r\n-  border-radius: 20px;\r\n-  padding: 32px;\r\n-  text-align: center;\r\n-  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);\r\n-  max-width: 800px;\r\n-  width: 100%;\r\n-}\r\n-\r\n-.result-title {\r\n-  font-size: 1.5rem;\r\n-  margin-bottom: 24px;\r\n-  color: var(--text-color);\r\n-}\r\n-\r\n-.result-comparison {\r\n-  display: grid;\r\n-  grid-template-columns: 1fr auto 1fr;\r\n-  gap: 24px;\r\n-  align-items: center;\r\n-  margin: 24px 0;\r\n-}\r\n-\r\n-.comparison-item {\r\n-  text-align: center;\r\n-}\r\n-\r\n-.comparison-item h4 {\r\n-  margin-bottom: 12px;\r\n-  color: var(--text-color);\r\n-}\r\n-\r\n-.comparison-image {\r\n-  max-width: 100%;\r\n-  max-height: 300px;\r\n-  border-radius: 12px;\r\n-  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);\r\n-}\r\n-\r\n-.comparison-arrow {\r\n-  font-size: 2rem;\r\n-  color: var(--primary-color);\r\n-  font-weight: bold;\r\n-}\r\n-\r\n-/* ç»“æœå±•ç¤ºæ ·å¼ */\r\n-.result-container {\r\n-  background: var(--bg-card);\r\n-  border: 1px solid var(--border-color);\r\n-  border-radius: 20px;\r\n-  padding: 32px;\r\n-  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);\r\n-}\r\n-\r\n-.comparison-container {\r\n-  position: relative;\r\n-  margin: 24px 0;\r\n-  border-radius: 16px;\r\n-  overflow: hidden;\r\n-  box-shadow: 0 12px 32px rgba(0, 0, 0, 0.15);\r\n-  user-select: none;\r\n-  background: #f8f9fa;\r\n-  width: 100%;\r\n-  height: 80vh;\r\n-  min-height: 700px;\r\n-  max-height: 900px;\r\n-}\r\n-\r\n-.comparison-wrapper {\r\n-  position: relative;\r\n-  width: 100%;\r\n-  height: 100%;\r\n-  overflow: hidden;\r\n-  background: var(--bg-dark);\r\n-}\r\n-\r\n-.image-before, .image-after {\r\n-  position: absolute;\r\n-  top: 0;\r\n-  left: 0;\r\n-  width: 100%;\r\n-  height: 100%;\r\n-  display: flex;\r\n-  align-items: center;\r\n-  justify-content: center;\r\n-}\r\n-\r\n-.comparison-image {\r\n-  max-width: 100%;\r\n-  max-height: 100%;\r\n-  width: auto;\r\n-  height: auto;\r\n-  object-fit: contain;\r\n-  object-position: center;\r\n-  display: block;\r\n-}\r\n-\r\n-.image-label {\r\n-  position: absolute;\r\n-  top: 16px;\r\n-  left: 16px;\r\n-  background: rgba(0, 0, 0, 0.7);\r\n-  color: white;\r\n-  padding: 8px 16px;\r\n-  border-radius: 20px;\r\n-  font-size: 0.9rem;\r\n-  font-weight: 500;\r\n-}\r\n-\r\n-.slider-handle {\r\n-  position: absolute;\r\n-  top: 0;\r\n-  bottom: 0;\r\n-  width: 4px;\r\n-  cursor: ew-resize;\r\n-  z-index: 10;\r\n-  display: flex;\r\n-  align-items: center;\r\n-  justify-content: center;\r\n-}\r\n-\r\n-.slider-line {\r\n-  width: 4px;\r\n-  height: 100%;\r\n-  background: white;\r\n-  box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);\r\n-}\r\n-\r\n-.slider-button {\r\n-  position: absolute;\r\n-  background: white;\r\n-  border-radius: 50%;\r\n-  width: 40px;\r\n-  height: 40px;\r\n-  display: flex;\r\n-  align-items: center;\r\n-  justify-content: center;\r\n-  font-size: 1.2rem;\r\n-  color: var(--primary-color);\r\n-  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);\r\n-  cursor: ew-resize;\r\n-  user-select: none;\r\n-}\r\n-\r\n-.result-actions {\r\n-  display: flex;\r\n-  gap: 16px;\r\n-  justify-content: center;\r\n-  margin-top: 24px;\r\n-}\r\n-\r\n-/* å¤„ç†ä¿¡æ¯æ ·å¼ */\r\n-.process-info {\r\n-  display: flex;\r\n-  gap: 24px;\r\n-  justify-content: center;\r\n-  flex-wrap: wrap;\r\n-}\r\n-\r\n-/* æŒ‰é’®æ ·å¼å·²ç§»è‡³AppButtonç»„ä»¶ */\r\n-\r\n+/* ç§»åŠ¨ç«¯ä¼˜åŒ– */\r\n @media (max-width: 768px) {\r\n-  .page-title {\r\n-    font-size: 2rem;\r\n+  .status-item {\r\n+    font-size: 13px;\r\n   }\r\n+}\r\n \r\n-  .face-photos-grid {\r\n-    grid-template-columns: repeat(2, 1fr);\r\n-    gap: 16px;\r\n+/* æ·±è‰²ä¸»é¢˜é€‚é… */\r\n+@media (prefers-color-scheme: dark) {\r\n+  .upload-status {\r\n+    background: var(--van-background-2, #1e1e1e);\r\n   }\r\n-\r\n-  .comparison-container {\r\n-    height: 60vh;\r\n-    min-height: 400px;\r\n-    max-height: 600px;\r\n-    margin: 16px 0;\r\n-  }\r\n-\r\n-  .result-actions {\r\n-    flex-direction: column;\r\n-    gap: 12px;\r\n-  }\r\n-\r\n-  .process-info {\r\n-    flex-direction: column;\r\n-    gap: 16px;\r\n-    text-align: center;\r\n-  }\r\n-\r\n-  .upload-tips {\r\n-    padding: 16px;\r\n-  }\r\n-\r\n-  .tip-item {\r\n-    font-size: 1rem;\r\n-  }\r\n }\r\n </style>\r\n"
                },
                {
                    "date": 1752394149545,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,24 +1,23 @@\n <template>\r\n-  <AIProcessingTemplate\r\n-    title=\"æé€Ÿæ¢è„¸\"\r\n-    description=\"ä¸Šä¼ äººè„¸ç…§ç‰‡å’Œç›®æ ‡å›¾ç‰‡ï¼ŒAIæ™ºèƒ½æ¢è„¸\"\r\n+  <UnifiedImageProcessingTemplate\r\n+    function-id=\"face-swap\"\r\n     :title-icon=\"FaceSwapIcon\"\r\n     title-icon-color=\"var(--van-warning-color)\"\r\n+    :process-button-icon=\"Users\"\r\n     :is-processing=\"isLoading\"\r\n-    :can-process=\"canProcess\"\r\n-    :show-upload-tips=\"!canProcess\"\r\n-    process-button-text=\"å¼€å§‹æ¢è„¸\"\r\n-    :process-button-icon=\"Users\"\r\n     :progress=\"progressPercent\"\r\n-    processing-title=\"æ­£åœ¨å¤„ç†æ¢è„¸...\"\r\n-    processing-description=\"è¯·è€å¿ƒç­‰å¾…ï¼Œå¤„ç†æ—¶é—´å¯èƒ½éœ€è¦å‡ åˆ†é’Ÿ\"\r\n     :processing-info=\"{ promptId, processingTime }\"\r\n     :result-data=\"resultImage\"\r\n+    :original-image-for-comparison=\"originalImageForComparison\"\r\n     @login=\"handleUserLogin\"\r\n     @logout=\"handleUserLogout\"\r\n     @process=\"processImages\"\r\n-  >\r\n+    @reset=\"resetProcess\"\r\n+    @download=\"handleDownload\"\r\n+    @upload-change=\"handleUploadChange\"\r\n+    ref=\"templateRef\"\r\n+  />\r\n     <!-- è¾“å…¥åŒºåŸŸ -->\r\n     <template #inputs>\r\n       <!-- äººè„¸ç…§ç‰‡ä¸Šä¼  -->\r\n       <MobileCard title=\"äººè„¸ç…§ç‰‡ (1-4å¼ )\" icon=\"friends-o\" inset>\r\n"
                },
                {
                    "date": 1752394180249,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -16,70 +16,9 @@\n     @download=\"handleDownload\"\r\n     @upload-change=\"handleUploadChange\"\r\n     ref=\"templateRef\"\r\n   />\r\n-    <!-- è¾“å…¥åŒºåŸŸ -->\r\n-    <template #inputs>\r\n-      <!-- äººè„¸ç…§ç‰‡ä¸Šä¼  -->\r\n-      <MobileCard title=\"äººè„¸ç…§ç‰‡ (1-4å¼ )\" icon=\"friends-o\" inset>\r\n-        <VantMultiImageUpload\r\n-          v-model=\"facePhotos\"\r\n-          :max-count=\"4\"\r\n-          :min-count=\"1\"\r\n-          upload-text=\"æ·»åŠ äººè„¸\"\r\n-          :disabled=\"isLoading\"\r\n-          :tips=\"[\r\n-            'æ”¯æŒ JPGã€PNG æ ¼å¼',\r\n-            'å»ºè®®å°ºå¯¸ 512x512 ä»¥ä¸Š',\r\n-            'äººè„¸æ¸…æ™°ã€æ­£é¢æ•ˆæœæ›´ä½³',\r\n-            'å¯ä¸€æ¬¡é€‰æ‹©å¤šå¼ ç…§ç‰‡'\r\n-          ]\"\r\n-          @change=\"handleFacePhotosChange\"\r\n-        />\r\n-      </MobileCard>\r\n-\r\n-      <!-- ç›®æ ‡å›¾ç‰‡ä¸Šä¼  -->\r\n-      <MobileCard title=\"ç›®æ ‡å›¾ç‰‡\" icon=\"photo-o\" inset>\r\n-        <VantImageUpload\r\n-          v-model=\"targetImage\"\r\n-          upload-text=\"é€‰æ‹©ç›®æ ‡å›¾ç‰‡\"\r\n-          description=\"ä¸Šä¼ éœ€è¦æ¢è„¸çš„ç›®æ ‡å›¾ç‰‡\"\r\n-          upload-icon=\"photograph\"\r\n-          :disabled=\"isLoading\"\r\n-          :tips=\"[\r\n-            'æ”¯æŒ JPGã€PNG æ ¼å¼',\r\n-            'å»ºè®®å°ºå¯¸ 512x512 ä»¥ä¸Š',\r\n-            'å›¾ç‰‡æ¸…æ™°åº¦å½±å“æ¢è„¸æ•ˆæœ'\r\n-          ]\"\r\n-          @change=\"handleTargetImageChange\"\r\n-        />\r\n-      </MobileCard>\r\n-    </template>\r\n-\r\n-    <!-- ä¸Šä¼ æç¤º -->\r\n-    <template #upload-tips>\r\n-      <div class=\"upload-status\">\r\n-        <div class=\"status-item\">\r\n-          <van-icon\r\n-            :name=\"facePhotos.length > 0 ? 'friends' : 'friends-o'\"\r\n-            :color=\"facePhotos.length > 0 ? 'var(--van-success-color)' : 'var(--van-text-color-3)'\"\r\n-            size=\"16\"\r\n-          />\r\n-          <span :class=\"{ 'text-success': facePhotos.length > 0 }\">\r\n-            å·²ä¸Šä¼  {{ facePhotos.length }}/4 å¼ äººè„¸ç…§ç‰‡\r\n-          </span>\r\n         </div>\r\n-\r\n-        <div class=\"status-item\">\r\n-          <van-icon\r\n-            :name=\"targetImage ? 'photo' : 'photo-o'\"\r\n-            :color=\"targetImage ? 'var(--van-success-color)' : 'var(--van-text-color-3)'\"\r\n-            size=\"16\"\r\n-          />\r\n-          <span :class=\"{ 'text-success': targetImage }\">\r\n-            {{ targetImage ? 'ç›®æ ‡å›¾ç‰‡å·²ä¸Šä¼ ' : 'è¯·ä¸Šä¼ ç›®æ ‡å›¾ç‰‡' }}\r\n-          </span>\r\n-        </div>\r\n       </div>\r\n     </template>\r\n \r\n     <!-- ç»“æœå±•ç¤º -->\r\n"
                },
                {
                    "date": 1752394205680,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -16,47 +16,19 @@\n     @download=\"handleDownload\"\r\n     @upload-change=\"handleUploadChange\"\r\n     ref=\"templateRef\"\r\n   />\r\n-        </div>\r\n-      </div>\r\n-    </template>\r\n-\r\n-    <!-- ç»“æœå±•ç¤º -->\r\n-    <template #result=\"{ result }\">\r\n-      <VantImageComparison\r\n-        :original-image=\"targetImageForComparison\"\r\n-        :result-image=\"result\"\r\n-        :process-info=\"{\r\n-          promptId,\r\n-          processingTime,\r\n-          timestamp: Date.now(),\r\n-          model: 'FaceSwap v3.0'\r\n-        }\"\r\n-        @reset=\"resetProcess\"\r\n-        @download=\"handleDownload\"\r\n-      />\r\n-    </template>\r\n-  </AIProcessingTemplate>\r\n </template>\r\n \r\n <script setup>\r\n import { ref, computed, onMounted, onUnmounted } from 'vue'\r\n import { Toast } from 'vant'\r\n import { Users } from 'lucide-vue-next'\r\n-import {\r\n-  AIProcessingTemplate,\r\n-  MobileCard,\r\n-  VantImageUpload,\r\n-  VantMultiImageUpload,\r\n-  VantImageComparison\r\n-} from '../components/mobile'\r\n+import { UnifiedImageProcessingTemplate } from '../components/mobile'\r\n import { FaceSwapIcon } from '../components/icons'\r\n-\r\n-// é™æ€å¯¼å…¥ComfyUIæœåŠ¡\r\n import { processFaceSwapImage } from '../services/comfyui.js'\r\n \r\n-console.log('FaceSwapç»„ä»¶å·²åŠ è½½ï¼ŒComfyUIæœåŠ¡å·²å¯¼å…¥')\r\n+console.log('FaceSwapUnifiedç»„ä»¶å·²åŠ è½½ï¼ŒComfyUIæœåŠ¡å·²å¯¼å…¥')\r\n \r\n // å“åº”å¼æ•°æ®\r\n const facePhotos = ref([]) // äººè„¸ç…§ç‰‡æ•°ç»„ï¼ˆ1-4å¼ ï¼Œè‡ªåŠ¨è¡¥é½åˆ°4å¼ ï¼‰\r\n const targetImage = ref(null) // ç›®æ ‡å›¾ç‰‡ï¼ˆç”¨äºä¸Šä¼ ï¼‰\r\n"
                },
                {
                    "date": 1752394237239,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -29,55 +29,48 @@\n \r\n console.log('FaceSwapUnifiedç»„ä»¶å·²åŠ è½½ï¼ŒComfyUIæœåŠ¡å·²å¯¼å…¥')\r\n \r\n // å“åº”å¼æ•°æ®\r\n-const facePhotos = ref([]) // äººè„¸ç…§ç‰‡æ•°ç»„ï¼ˆ1-4å¼ ï¼Œè‡ªåŠ¨è¡¥é½åˆ°4å¼ ï¼‰\r\n-const targetImage = ref(null) // ç›®æ ‡å›¾ç‰‡ï¼ˆç”¨äºä¸Šä¼ ï¼‰\r\n-const targetImageForComparison = ref(null) // ç›®æ ‡å›¾ç‰‡ï¼ˆç”¨äºå¯¹æ¯”æ˜¾ç¤ºï¼‰\r\n-const resultImage = ref(null) // å¤„ç†ç»“æœ\r\n+const templateRef = ref(null)\r\n+const facePhotos = ref([])\r\n+const targetImage = ref(null)\r\n+const originalImageForComparison = ref(null)\r\n+const resultImage = ref(null)\r\n const isLoading = ref(false)\r\n const processingStatus = ref('')\r\n const promptId = ref('')\r\n const processingTime = ref('')\r\n const progressPercent = ref(0)\r\n-\r\n-// æ‹–æ‹½å¯¹æ¯”åŠŸèƒ½\r\n-const sliderPosition = ref(50)\r\n-const isDragging = ref(false)\r\n-const comparisonContainer = ref(null)\r\n const startTime = ref(null)\r\n \r\n-\r\n-\r\n-// ä½¿ç”¨VantUI Toastç³»ç»Ÿ\r\n-\r\n // è®¡ç®—å±æ€§\r\n-const uploadedFacePhotos = computed(() => {\r\n-  return facePhotos.value.length\r\n-})\r\n-\r\n const canProcess = computed(() => {\r\n-  return facePhotos.value.length === 4 && targetImage.value !== null\r\n+  return facePhotos.value.length > 0 && targetImage.value !== null\r\n })\r\n \r\n-// å¤„ç†äººè„¸ç…§ç‰‡ä¸Šä¼ ï¼ˆå¤šé€‰ï¼‰\r\n-const handleFacePhotosChange = (images, originalCount) => {\r\n-  facePhotos.value = images\r\n-  resultImage.value = null // æ¸…é™¤ä¹‹å‰çš„ç»“æœ\r\n+// å¤„ç†ä¸Šä¼ å˜åŒ–\r\n+const handleUploadChange = (panelId, data) => {\r\n+  console.log('ä¸Šä¼ å˜åŒ–:', panelId, data)\r\n \r\n-  if (originalCount > 0) {\r\n-    Toast.success(`å·²é€‰æ‹© ${originalCount} å¼ ç…§ç‰‡${originalCount < 4 ? 'ï¼Œè‡ªåŠ¨è¡¥é½è‡³4å¼ ' : ''}`)\r\n+  if (panelId === 'face-photos') {\r\n+    // å¤„ç†å¤šå›¾ä¸Šä¼ æ•°æ®\r\n+    facePhotos.value = Array.isArray(data) ? data.map(item => item.url || item) : []\r\n+    resultImage.value = null // æ¸…é™¤ä¹‹å‰çš„ç»“æœ\r\n+\r\n+    // è‡ªåŠ¨è¡¥é½åˆ°4å¼ ï¼ˆå¦‚æœéœ€è¦çš„è¯ï¼‰\r\n+    while (facePhotos.value.length < 4 && facePhotos.value.length > 0) {\r\n+      facePhotos.value.push(facePhotos.value[facePhotos.value.length - 1])\r\n+    }\r\n+\r\n+    if (data.length > 0) {\r\n+      Toast.success(`å·²é€‰æ‹© ${data.length} å¼ ç…§ç‰‡${data.length < 4 ? 'ï¼Œè‡ªåŠ¨è¡¥é½è‡³4å¼ ' : ''}`)\r\n+    }\r\n+  } else if (panelId === 'target-image') {\r\n+    targetImage.value = data\r\n+    resultImage.value = null // æ¸…é™¤ä¹‹å‰çš„ç»“æœ\r\n   }\r\n }\r\n \r\n-// å¤„ç†ç›®æ ‡å›¾ç‰‡ä¸Šä¼ \r\n-const handleTargetImageChange = (imageData, file) => {\r\n-  targetImage.value = imageData\r\n-  resultImage.value = null // æ¸…é™¤ä¹‹å‰çš„ç»“æœ\r\n-}\r\n-\r\n-// ToaståŠŸèƒ½å·²ç§»è‡³useToastç»„åˆå¼å‡½æ•°\r\n-\r\n // å¤„ç†å›¾ç‰‡\r\n const processImages = async () => {\r\n   if (!canProcess.value) return\r\n \r\n"
                },
                {
                    "date": 1752394274113,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -71,9 +71,12 @@\n }\r\n \r\n // å¤„ç†å›¾ç‰‡\r\n const processImages = async () => {\r\n-  if (!canProcess.value) return\r\n+  if (!canProcess.value) {\r\n+    Toast.fail('è¯·å…ˆä¸Šä¼ äººè„¸ç…§ç‰‡å’Œç›®æ ‡å›¾ç‰‡')\r\n+    return\r\n+  }\r\n \r\n   isLoading.value = true\r\n   processingStatus.value = 'æ­£åœ¨åŠ è½½æœåŠ¡...'\r\n   progressPercent.value = 10\r\n@@ -81,10 +84,8 @@\n \r\n   try {\r\n     console.log('ğŸš€ å¼€å§‹æé€Ÿæ¢è„¸å¤„ç†')\r\n \r\n-    // ComfyUIæœåŠ¡å·²é™æ€å¯¼å…¥ï¼Œæ— éœ€åŠ¨æ€åŠ è½½\r\n-\r\n     processingStatus.value = 'æ­£åœ¨ä¸Šä¼ å›¾ç‰‡...'\r\n     progressPercent.value = 30\r\n \r\n     // è°ƒç”¨æ¢è„¸å¤„ç†æœåŠ¡\r\n@@ -99,18 +100,16 @@\n \r\n     if (result.success && result.imageUrl) {\r\n       resultImage.value = result.imageUrl\r\n       // ä¿å­˜ç›®æ ‡å›¾åƒç”¨äºå¯¹æ¯”ï¼ˆä½¿ç”¨æœåŠ¡å™¨è¿”å›çš„æˆ–åŸå§‹çš„ç›®æ ‡å›¾åƒï¼‰\r\n-      targetImageForComparison.value = result.targetImageUrl || targetImage.value\r\n+      originalImageForComparison.value = result.targetImageUrl || targetImage.value\r\n       promptId.value = result.promptId || ''\r\n \r\n       // è®¡ç®—å¤„ç†æ—¶é—´\r\n       const endTime = Date.now()\r\n       const duration = Math.round((endTime - startTime.value) / 1000)\r\n       processingTime.value = `${duration}ç§’`\r\n \r\n-\r\n-\r\n       // æ˜¾ç¤ºæˆåŠŸtoast\r\n       const pointsInfo = result.pointsConsumed ? `ï¼ˆæ¶ˆè€—${result.pointsConsumed}ç‚¹ï¼‰` : ''\r\n       Toast.success(`ğŸ‰ æ¢è„¸å®Œæˆï¼${pointsInfo}å¯ä»¥æ‹–æ‹½ä¸­é—´çº¿å¯¹æ¯”ç›®æ ‡å›¾åƒå’Œæ¢è„¸ç»“æœ`)\r\n       console.log('âœ… æ¢è„¸å¤„ç†å®Œæˆ')\r\n"
                },
                {
                    "date": 1752394303144,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -125,35 +125,46 @@\n     progressPercent.value = 0\r\n   }\r\n }\r\n \r\n+// é‡ç½®å¤„ç†\r\n+const resetProcess = () => {\r\n+  facePhotos.value = []\r\n+  targetImage.value = null\r\n+  originalImageForComparison.value = null\r\n+  resultImage.value = null\r\n+  processingStatus.value = ''\r\n+  promptId.value = ''\r\n+  processingTime.value = ''\r\n+\r\n+  // é‡ç½®æ¨¡æ¿å†…éƒ¨çŠ¶æ€\r\n+  if (templateRef.value) {\r\n+    const { uploadData } = templateRef.value\r\n+    if (uploadData['face-photos']) {\r\n+      uploadData['face-photos'] = []\r\n+    }\r\n+    if (uploadData['target-image']) {\r\n+      uploadData['target-image'] = null\r\n+    }\r\n+  }\r\n+\r\n+  Toast.success('å·²é‡ç½®ï¼Œå¯ä»¥é‡æ–°é€‰æ‹©å›¾ç‰‡')\r\n+}\r\n+\r\n // ä¸‹è½½ç»“æœ\r\n-const downloadResult = () => {\r\n-  if (!resultImage.value) return\r\n+const handleDownload = (imageUrl) => {\r\n+  if (!imageUrl) return\r\n \r\n   const link = document.createElement('a')\r\n-  link.href = resultImage.value\r\n+  link.href = imageUrl\r\n   link.download = `faceswap_result_${Date.now()}.png`\r\n   document.body.appendChild(link)\r\n   link.click()\r\n   document.body.removeChild(link)\r\n \r\n   Toast.success('å›¾ç‰‡ä¸‹è½½å·²å¼€å§‹')\r\n }\r\n \r\n-// é‡ç½®å¤„ç†\r\n-const resetProcess = () => {\r\n-  facePhotos.value = [null, null, null, null]\r\n-  targetImage.value = null\r\n-  targetImageForComparison.value = null\r\n-  resultImage.value = null\r\n-  processingStatus.value = ''\r\n-  promptId.value = ''\r\n-  processingTime.value = ''\r\n-  sliderPosition.value = 50\r\n-  Toast.success('å·²é‡ç½®ï¼Œå¯ä»¥é‡æ–°é€‰æ‹©å›¾ç‰‡')\r\n-}\r\n-\r\n // æ‹–æ‹½åŠŸèƒ½\r\n const startDrag = (e) => {\r\n   isDragging.value = true\r\n   document.addEventListener('mousemove', onDrag)\r\n"
                },
                {
                    "date": 1752394335550,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -163,66 +163,31 @@\n \r\n   Toast.success('å›¾ç‰‡ä¸‹è½½å·²å¼€å§‹')\r\n }\r\n \r\n-// æ‹–æ‹½åŠŸèƒ½\r\n-const startDrag = (e) => {\r\n-  isDragging.value = true\r\n-  document.addEventListener('mousemove', onDrag)\r\n-  document.addEventListener('mouseup', stopDrag)\r\n-  document.addEventListener('touchmove', onDrag)\r\n-  document.addEventListener('touchend', stopDrag)\r\n-  e.preventDefault()\r\n+// ç”¨æˆ·ç™»å½•æˆåŠŸå›è°ƒ\r\n+const handleUserLogin = (data) => {\r\n+  console.log('ç”¨æˆ·ç™»å½•æˆåŠŸ:', data)\r\n+  // å¯ä»¥åœ¨è¿™é‡Œè§¦å‘ä¸€äº›éœ€è¦ç™»å½•çŠ¶æ€çš„æ“ä½œ\r\n }\r\n \r\n-const onDrag = (e) => {\r\n-  if (!isDragging.value || !comparisonContainer.value) return\r\n-\r\n-  const rect = comparisonContainer.value.getBoundingClientRect()\r\n-  const clientX = e.clientX || (e.touches && e.touches[0].clientX)\r\n-  const x = clientX - rect.left\r\n-  const percentage = Math.max(0, Math.min(100, (x / rect.width) * 100))\r\n-  sliderPosition.value = percentage\r\n+// ç”¨æˆ·ç™»å‡ºå›è°ƒ\r\n+const handleUserLogout = () => {\r\n+  console.log('ç”¨æˆ·å·²ç™»å‡º')\r\n+  // å¯ä»¥åœ¨è¿™é‡Œæ¸…ç†ä¸€äº›ç”¨æˆ·ç›¸å…³çš„çŠ¶æ€\r\n }\r\n \r\n-const stopDrag = () => {\r\n-  isDragging.value = false\r\n-  document.removeEventListener('mousemove', onDrag)\r\n-  document.removeEventListener('mouseup', stopDrag)\r\n-  document.removeEventListener('touchmove', onDrag)\r\n-  document.removeEventListener('touchend', stopDrag)\r\n-}\r\n-\r\n-\r\n-\r\n // ç”Ÿå‘½å‘¨æœŸ\r\n onMounted(() => {\r\n   console.log('FaceSwapç»„ä»¶å·²æŒ‚è½½ï¼ŒComfyUIæœåŠ¡å·²å‡†å¤‡å°±ç»ª')\r\n })\r\n \r\n onUnmounted(() => {\r\n-  if (isDragging.value) {\r\n-    stopDrag()\r\n+  // æ¸…ç†å·¥ä½œ\r\n+  if (isLoading.value) {\r\n+    isLoading.value = false\r\n   }\r\n })\r\n-\r\n-// å¤„ç†ä¸‹è½½äº‹ä»¶\r\n-const handleDownload = (imageUrl) => {\r\n-  console.log('ä¸‹è½½å›¾ç‰‡:', imageUrl)\r\n-  Toast.success('å›¾ç‰‡ä¸‹è½½æˆåŠŸ')\r\n-}\r\n-\r\n-// ç”¨æˆ·ç™»å½•æˆåŠŸå›è°ƒ\r\n-const handleUserLogin = (data) => {\r\n-  console.log('ç”¨æˆ·ç™»å½•æˆåŠŸ:', data)\r\n-  // å¯ä»¥åœ¨è¿™é‡Œè§¦å‘ä¸€äº›éœ€è¦ç™»å½•çŠ¶æ€çš„æ“ä½œ\r\n-}\r\n-\r\n-// ç”¨æˆ·ç™»å‡ºå›è°ƒ\r\n-const handleUserLogout = () => {\r\n-  console.log('ç”¨æˆ·å·²ç™»å‡º')\r\n-  // å¯ä»¥åœ¨è¿™é‡Œæ¸…ç†ä¸€äº›ç”¨æˆ·ç›¸å…³çš„çŠ¶æ€\r\n-}\r\n </script>\r\n \r\n <style scoped>\r\n /* ä¸Šä¼ çŠ¶æ€æ ·å¼ */\r\n"
                },
                {
                    "date": 1752394357267,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -189,40 +189,26 @@\n })\r\n </script>\r\n \r\n <style scoped>\r\n-/* ä¸Šä¼ çŠ¶æ€æ ·å¼ */\r\n-.upload-status {\r\n-  display: flex;\r\n-  flex-direction: column;\r\n-  gap: 8px;\r\n-  padding: 12px;\r\n-  background: var(--van-background-2, #f7f8fa);\r\n-  border-radius: 6px;\r\n-}\r\n+/* è¿™é‡Œå¯ä»¥æ·»åŠ ç‰¹å®šäºæ¢è„¸åŠŸèƒ½çš„æ ·å¼ */\r\n+/* å¤§éƒ¨åˆ†æ ·å¼å·²ç»åœ¨ç»Ÿä¸€æ¨¡æ¿ä¸­å¤„ç† */\r\n \r\n-.status-item {\r\n-  display: flex;\r\n-  align-items: center;\r\n-  gap: 8px;\r\n-  font-size: 14px;\r\n-  color: var(--van-text-color-2, #646566);\r\n+/* å¦‚æœéœ€è¦è‡ªå®šä¹‰æ ·å¼ï¼Œå¯ä»¥åœ¨è¿™é‡Œæ·»åŠ  */\r\n+:deep(.unified-image-upload-panel) {\r\n+  /* è‡ªå®šä¹‰ä¸Šä¼ é¢æ¿æ ·å¼ */\r\n }\r\n \r\n-.text-success {\r\n-  color: var(--van-success-color, #07c160);\r\n+:deep(.multi-image-upload) {\r\n+  /* è‡ªå®šä¹‰å¤šå›¾ä¸Šä¼ æ ·å¼ */\r\n }\r\n \r\n /* ç§»åŠ¨ç«¯ä¼˜åŒ– */\r\n @media (max-width: 768px) {\r\n-  .status-item {\r\n-    font-size: 13px;\r\n-  }\r\n+  /* ç§»åŠ¨ç«¯ç‰¹å®šæ ·å¼ */\r\n }\r\n \r\n /* æ·±è‰²ä¸»é¢˜é€‚é… */\r\n @media (prefers-color-scheme: dark) {\r\n-  .upload-status {\r\n-    background: var(--van-background-2, #1e1e1e);\r\n-  }\r\n+  /* æ·±è‰²ä¸»é¢˜æ ·å¼ */\r\n }\r\n </style>\r\n"
                },
                {
                    "date": 1752898882542,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -25,8 +25,9 @@\n import { Users } from 'lucide-vue-next'\r\n import { UnifiedImageProcessingTemplate } from '../components/mobile'\r\n import { FaceSwapIcon } from '../components/icons'\r\n import { processFaceSwapImage } from '../services/comfyui.js'\r\n+import { handleError } from '../services/globalErrorHandler.js'\r\n \r\n console.log('FaceSwapUnifiedç»„ä»¶å·²åŠ è½½ï¼ŒComfyUIæœåŠ¡å·²å¯¼å…¥')\r\n \r\n // å“åº”å¼æ•°æ®\r\n"
                },
                {
                    "date": 1752898894652,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -118,9 +118,16 @@\n       throw new Error(result.error || 'æ¢è„¸å¤„ç†å¤±è´¥')\r\n     }\r\n   } catch (error) {\r\n     console.error('âŒ æ¢è„¸å¤„ç†å¤±è´¥:', error)\r\n-    Toast.fail(`æ¢è„¸å¤±è´¥: ${error.message}`)\r\n+\r\n+    // ä½¿ç”¨å…¨å±€é”™è¯¯å¤„ç†å™¨\r\n+    const isHandledGlobally = handleError(error, 'æ¢è„¸å¤„ç†')\r\n+\r\n+    // å¦‚æœæ²¡æœ‰è¢«å…¨å±€å¤„ç†ï¼Œåˆ™æ˜¾ç¤ºæ™®é€šé”™è¯¯æç¤º\r\n+    if (!isHandledGlobally) {\r\n+      Toast.fail(`æ¢è„¸å¤±è´¥: ${error.message}`)\r\n+    }\r\n   } finally {\r\n     isLoading.value = false\r\n     processingStatus.value = ''\r\n     progressPercent.value = 0\r\n"
                },
                {
                    "date": 1753532248122,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -4,9 +4,9 @@\n     :title-icon=\"FaceSwapIcon\"\r\n     title-icon-color=\"var(--van-warning-color)\"\r\n     :process-button-icon=\"Users\"\r\n     :is-processing=\"isLoading\"\r\n-    :progress=\"progressPercent\"\r\n+    :progress=\"0\"\r\n     :processing-info=\"{ promptId, processingTime }\"\r\n     :result-data=\"resultImage\"\r\n     :original-image-for-comparison=\"originalImageForComparison\"\r\n     @login=\"handleUserLogin\"\r\n"
                },
                {
                    "date": 1753532262203,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -78,25 +78,21 @@\n     return\r\n   }\r\n \r\n   isLoading.value = true\r\n-  processingStatus.value = 'æ­£åœ¨åŠ è½½æœåŠ¡...'\r\n-  progressPercent.value = 10\r\n+  processingStatus.value = 'æ­£åœ¨åˆå§‹åŒ–...'\r\n   startTime.value = Date.now()\r\n \r\n   try {\r\n     console.log('ğŸš€ å¼€å§‹æé€Ÿæ¢è„¸å¤„ç†')\r\n \r\n-    processingStatus.value = 'æ­£åœ¨ä¸Šä¼ å›¾ç‰‡...'\r\n-    progressPercent.value = 30\r\n-\r\n     // è°ƒç”¨æ¢è„¸å¤„ç†æœåŠ¡\r\n     const result = await processFaceSwapImage({\r\n       facePhotos: facePhotos.value,\r\n       targetImage: targetImage.value,\r\n-      onProgress: (status, percent) => {\r\n+      onProgress: (status) => {\r\n         processingStatus.value = status\r\n-        progressPercent.value = Math.max(progressPercent.value, percent)\r\n+        console.log(`ğŸ“Š å¤„ç†çŠ¶æ€: ${status}`)\r\n       }\r\n     })\r\n \r\n     if (result.success && result.imageUrl) {\r\n"
                },
                {
                    "date": 1753532871259,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -4,9 +4,9 @@\n     :title-icon=\"FaceSwapIcon\"\r\n     title-icon-color=\"var(--van-warning-color)\"\r\n     :process-button-icon=\"Users\"\r\n     :is-processing=\"isLoading\"\r\n-    :progress=\"0\"\r\n+    :progress=\"progressPercent\"\r\n     :processing-info=\"{ promptId, processingTime }\"\r\n     :result-data=\"resultImage\"\r\n     :original-image-for-comparison=\"originalImageForComparison\"\r\n     @login=\"handleUserLogin\"\r\n"
                },
                {
                    "date": 1753532882452,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -88,11 +88,12 @@\n     // è°ƒç”¨æ¢è„¸å¤„ç†æœåŠ¡\r\n     const result = await processFaceSwapImage({\r\n       facePhotos: facePhotos.value,\r\n       targetImage: targetImage.value,\r\n-      onProgress: (status) => {\r\n+      onProgress: (status, progress) => {\r\n         processingStatus.value = status\r\n-        console.log(`ğŸ“Š å¤„ç†çŠ¶æ€: ${status}`)\r\n+        progressPercent.value = progress || 0\r\n+        console.log(`ğŸ“Š å¤„ç†çŠ¶æ€: ${status}, è¿›åº¦: ${progress}%`)\r\n       }\r\n     })\r\n \r\n     if (result.success && result.imageUrl) {\r\n"
                },
                {
                    "date": 1753533645683,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -5,8 +5,9 @@\n     title-icon-color=\"var(--van-warning-color)\"\r\n     :process-button-icon=\"Users\"\r\n     :is-processing=\"isLoading\"\r\n     :progress=\"progressPercent\"\r\n+    :processing-description=\"processingStatus\"\r\n     :processing-info=\"{ promptId, processingTime }\"\r\n     :result-data=\"resultImage\"\r\n     :original-image-for-comparison=\"originalImageForComparison\"\r\n     @login=\"handleUserLogin\"\r\n"
                },
                {
                    "date": 1753539253072,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -109,9 +109,9 @@\n       processingTime.value = `${duration}ç§’`\r\n \r\n       // æ˜¾ç¤ºæˆåŠŸtoast\r\n       const pointsInfo = result.pointsConsumed ? `ï¼ˆæ¶ˆè€—${result.pointsConsumed}ç‚¹ï¼‰` : ''\r\n-      Toast.success(`ğŸ‰ æ¢è„¸å®Œæˆï¼${pointsInfo}å¯ä»¥æ‹–æ‹½ä¸­é—´çº¿å¯¹æ¯”ç›®æ ‡å›¾åƒå’Œæ¢è„¸ç»“æœ`)\r\n+      Toast.success(`ğŸ‰ æ¢è„¸å®Œæˆï¼${pointsInfo}`)\r\n       console.log('âœ… æ¢è„¸å¤„ç†å®Œæˆ')\r\n     } else {\r\n       throw new Error(result.error || 'æ¢è„¸å¤„ç†å¤±è´¥')\r\n     }\r\n"
                },
                {
                    "date": 1753540187243,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -4,8 +4,9 @@\n     :title-icon=\"FaceSwapIcon\"\r\n     title-icon-color=\"var(--van-warning-color)\"\r\n     :process-button-icon=\"Users\"\r\n     :is-processing=\"isLoading\"\r\n+    :can-process=\"canProcess\"\r\n     :progress=\"progressPercent\"\r\n     :processing-description=\"processingStatus\"\r\n     :processing-info=\"{ promptId, processingTime }\"\r\n     :result-data=\"resultImage\"\r\n"
                },
                {
                    "date": 1753540393173,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -4,9 +4,8 @@\n     :title-icon=\"FaceSwapIcon\"\r\n     title-icon-color=\"var(--van-warning-color)\"\r\n     :process-button-icon=\"Users\"\r\n     :is-processing=\"isLoading\"\r\n-    :can-process=\"canProcess\"\r\n     :progress=\"progressPercent\"\r\n     :processing-description=\"processingStatus\"\r\n     :processing-info=\"{ promptId, processingTime }\"\r\n     :result-data=\"resultImage\"\r\n"
                },
                {
                    "date": 1753543828013,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,8 +1,8 @@\n <template>\r\n   <UnifiedImageProcessingTemplate\r\n     function-id=\"face-swap\"\r\n-    :title-icon=\"FaceSwapIcon\"\r\n+    title-icon-name=\"face-swap\"\r\n     title-icon-color=\"var(--van-warning-color)\"\r\n     :process-button-icon=\"Users\"\r\n     :is-processing=\"isLoading\"\r\n     :progress=\"progressPercent\"\r\n"
                },
                {
                    "date": 1753543834857,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -24,9 +24,9 @@\n import { ref, computed, onMounted, onUnmounted } from 'vue'\r\n import { Toast } from 'vant'\r\n import { Users } from 'lucide-vue-next'\r\n import { UnifiedImageProcessingTemplate } from '../components/mobile'\r\n-import { FaceSwapIcon } from '../components/icons'\r\n+\r\n import { processFaceSwapImage } from '../services/comfyui.js'\r\n import { handleError } from '../services/globalErrorHandler.js'\r\n \r\n console.log('FaceSwapUnifiedç»„ä»¶å·²åŠ è½½ï¼ŒComfyUIæœåŠ¡å·²å¯¼å…¥')\r\n"
                },
                {
                    "date": 1753555570239,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -2,9 +2,9 @@\n   <UnifiedImageProcessingTemplate\r\n     function-id=\"face-swap\"\r\n     title-icon-name=\"face-swap\"\r\n     title-icon-color=\"var(--van-warning-color)\"\r\n-    :process-button-icon=\"Users\"\r\n+    process-button-icon-name=\"users\"\r\n     :is-processing=\"isLoading\"\r\n     :progress=\"progressPercent\"\r\n     :processing-description=\"processingStatus\"\r\n     :processing-info=\"{ promptId, processingTime }\"\r\n"
                },
                {
                    "date": 1753556101240,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -20,9 +20,9 @@\n   />\r\n </template>\r\n \r\n <script setup>\r\n-import { ref, computed, onMounted, onUnmounted } from 'vue'\r\n+import { ref, computed, onMounted, onUnmounted, nextTick } from 'vue'\r\n import { Toast } from 'vant'\r\n import { Users } from 'lucide-vue-next'\r\n import { UnifiedImageProcessingTemplate } from '../components/mobile'\r\n \r\n"
                },
                {
                    "date": 1753556111292,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -90,11 +90,14 @@\n     const result = await processFaceSwapImage({\r\n       facePhotos: facePhotos.value,\r\n       targetImage: targetImage.value,\r\n       onProgress: (status, progress) => {\r\n-        processingStatus.value = status\r\n-        progressPercent.value = progress || 0\r\n-        console.log(`ğŸ“Š å¤„ç†çŠ¶æ€: ${status}, è¿›åº¦: ${progress}%`)\r\n+        // ä½¿ç”¨ nextTick é¿å…é€’å½’æ›´æ–°\r\n+        nextTick(() => {\r\n+          processingStatus.value = status\r\n+          progressPercent.value = progress || 0\r\n+          console.log(`ğŸ“Š å¤„ç†çŠ¶æ€: ${status}, è¿›åº¦: ${progress}%`)\r\n+        })\r\n       }\r\n     })\r\n \r\n     if (result.success && result.imageUrl) {\r\n"
                },
                {
                    "date": 1753556172889,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -202,16 +202,9 @@\n /* è¿™é‡Œå¯ä»¥æ·»åŠ ç‰¹å®šäºæ¢è„¸åŠŸèƒ½çš„æ ·å¼ */\r\n /* å¤§éƒ¨åˆ†æ ·å¼å·²ç»åœ¨ç»Ÿä¸€æ¨¡æ¿ä¸­å¤„ç† */\r\n \r\n /* å¦‚æœéœ€è¦è‡ªå®šä¹‰æ ·å¼ï¼Œå¯ä»¥åœ¨è¿™é‡Œæ·»åŠ  */\r\n-:deep(.unified-image-upload-panel) {\r\n-  /* è‡ªå®šä¹‰ä¸Šä¼ é¢æ¿æ ·å¼ */\r\n-}\r\n \r\n-:deep(.multi-image-upload) {\r\n-  /* è‡ªå®šä¹‰å¤šå›¾ä¸Šä¼ æ ·å¼ */\r\n-}\r\n-\r\n /* ç§»åŠ¨ç«¯ä¼˜åŒ– */\r\n @media (max-width: 768px) {\r\n   /* ç§»åŠ¨ç«¯ç‰¹å®šæ ·å¼ */\r\n }\r\n"
                }
            ],
            "date": 1752348807217,
            "name": "Commit-0",
            "content": "<template>\r\n  <div class=\"feature-page\">\r\n    <!-- å³ä¸Šè§’ç”¨æˆ·ä¿¡æ¯ -->\r\n    <div class=\"top-corner\">\r\n      <UserInfo @login=\"handleUserLogin\" @logout=\"handleUserLogout\" />\r\n    </div>\r\n\r\n    <div class=\"container\">\r\n      <header class=\"page-header\">\r\n        <BackToHomeButton class=\"back-btn\" />\r\n        <h1 class=\"page-title\">\r\n          <FaceSwapIcon :size=\"32\" color=\"var(--warning-color)\" class=\"page-icon\" />\r\n          æé€Ÿæ¢è„¸\r\n        </h1>\r\n        <p class=\"page-description\">ä¸Šä¼ 4å¼ äººè„¸ç…§ç‰‡å’Œ1å¼ ç›®æ ‡å›¾ç‰‡ï¼ŒAIå°†ä¸ºæ‚¨æ™ºèƒ½æ¢è„¸</p>\r\n      </header>\r\n\r\n      <!-- ä½“éªŒç‚¹æ˜¾ç¤º -->\r\n      <PointsDisplay ref=\"pointsDisplayRef\" />\r\n\r\n      <main class=\"page-content\">\r\n        <div v-if=\"!resultImage\" class=\"upload-section\">\r\n          <!-- äººè„¸ç…§ç‰‡ä¸Šä¼ åŒºåŸŸ -->\r\n          <div class=\"face-photos-section\">\r\n            <h3 class=\"section-title\">\r\n              <FaceSwapIcon :size=\"20\" color=\"var(--primary-color)\" class=\"section-icon\" />\r\n              äººè„¸ç…§ç‰‡ (1-4å¼ )\r\n            </h3>\r\n            <!-- <p class=\"section-description\">ä¸€æ¬¡æ€§é€‰æ‹©1-4å¼ æ¸…æ™°çš„äººè„¸ç…§ç‰‡</p> -->\r\n\r\n            <MultiImageUpload\r\n              v-model=\"facePhotos\"\r\n              :disabled=\"isLoading\"\r\n              @change=\"handleFacePhotosChange\"\r\n            />\r\n          </div>\r\n\r\n          <!-- ç›®æ ‡å›¾ç‰‡ä¸Šä¼ åŒºåŸŸ -->\r\n          <div class=\"target-image-section\">\r\n            <h3 class=\"section-title\">\r\n              <Image :size=\"20\" color=\"var(--success-color)\" class=\"section-icon\" />\r\n              ç›®æ ‡å›¾ç‰‡\r\n            </h3>\r\n            <!-- <p class=\"section-description\">ä¸Šä¼ éœ€è¦æ¢è„¸çš„ç›®æ ‡å›¾ç‰‡</p> -->\r\n\r\n            <ImageUpload\r\n              v-model=\"targetImage\"\r\n              title=\"ä¸Šä¼ éœ€è¦æ¢è„¸çš„ç›®æ ‡å›¾ç‰‡\"\r\n              description=\"æ”¯æŒ JPGã€PNG æ ¼å¼ï¼Œå»ºè®®å°ºå¯¸ 512x512 ä»¥ä¸Š\"\r\n              icon=\"Image\"\r\n              :icon-size=\"48\"\r\n              :disabled=\"isLoading\"\r\n              @change=\"handleTargetImageChange\"\r\n            />\r\n          </div>\r\n\r\n          <!-- å¤„ç†æŒ‰é’® -->\r\n          <div v-if=\"canProcess && !isLoading\" class=\"action-section\">\r\n            <van-button\r\n              @click=\"processImages\"\r\n              type=\"primary\"\r\n              size=\"large\"\r\n              round\r\n              block\r\n              class=\"process-btn\"\r\n            >\r\n              <Users :size=\"20\" color=\"white\" class=\"btn-icon\" />\r\n              å¼€å§‹æ¢è„¸\r\n            </van-button>\r\n          </div>\r\n\r\n          <!-- ä¸Šä¼ æç¤º -->\r\n          <div v-else class=\"upload-tips\">\r\n            <div class=\"tip-item\">\r\n              <Image :size=\"16\" color=\"var(--primary-color)\" class=\"tip-icon\" />\r\n              <span>å·²ä¸Šä¼  {{ uploadedFacePhotos }}/4 å¼ äººè„¸ç…§ç‰‡</span>\r\n            </div>\r\n            <div class=\"tip-item\">\r\n              <Image :size=\"16\" color=\"var(--success-color)\" class=\"tip-icon\" />\r\n              <van-icon :name=\"targetImage ? 'success' : 'cross'\" size=\"16\" :color=\"targetImage ? 'var(--success-color)' : 'var(--error-color)'\" />\r\n              <span>ç›®æ ‡å›¾ç‰‡</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- å¤„ç†çŠ¶æ€ -->\r\n        <ProcessingStatus\r\n          v-if=\"isLoading\"\r\n          status=\"loading\"\r\n          title=\"æ­£åœ¨å¤„ç†æ¢è„¸...\"\r\n          description=\"è¯·è€å¿ƒç­‰å¾…ï¼Œå¤„ç†æ—¶é—´å¯èƒ½éœ€è¦å‡ åˆ†é’Ÿ\"\r\n          :progress=\"progressPercent\"\r\n          :prompt-id=\"promptId\"\r\n          :processing-time=\"processingTime\"\r\n        />\r\n\r\n        <!-- ç»“æœå±•ç¤ºåŒºåŸŸ -->\r\n        <ImageComparison\r\n          v-if=\"resultImage\"\r\n          :original-image=\"targetImageForComparison\"\r\n          :result-image=\"resultImage\"\r\n          @reset=\"resetProcess\"\r\n        />\r\n      </main>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, computed, onMounted, onUnmounted } from 'vue'\r\nimport { Toast } from 'vant'\r\nimport { Image } from 'lucide-vue-next'\r\nimport ImageUpload from '../components/ImageUpload.vue'\r\nimport MultiImageUpload from '../components/MultiImageUpload.vue'\r\nimport ProcessingStatus from '../components/ProcessingStatus.vue'\r\nimport ImageComparison from '../components/ImageComparison.vue'\r\nimport PointsDisplay from '../components/PointsDisplay.vue'\r\nimport UserInfo from '../components/UserInfo.vue'\r\nimport { FaceSwapIcon } from '../components/icons'\r\n\r\n// é™æ€å¯¼å…¥ComfyUIæœåŠ¡\r\nimport { processFaceSwapImage } from '../services/comfyui.js'\r\n\r\nconsole.log('FaceSwapç»„ä»¶å·²åŠ è½½ï¼ŒComfyUIæœåŠ¡å·²å¯¼å…¥')\r\n\r\n// å“åº”å¼æ•°æ®\r\nconst facePhotos = ref([]) // äººè„¸ç…§ç‰‡æ•°ç»„ï¼ˆ1-4å¼ ï¼Œè‡ªåŠ¨è¡¥é½åˆ°4å¼ ï¼‰\r\nconst targetImage = ref(null) // ç›®æ ‡å›¾ç‰‡ï¼ˆç”¨äºä¸Šä¼ ï¼‰\r\nconst targetImageForComparison = ref(null) // ç›®æ ‡å›¾ç‰‡ï¼ˆç”¨äºå¯¹æ¯”æ˜¾ç¤ºï¼‰\r\nconst resultImage = ref(null) // å¤„ç†ç»“æœ\r\nconst isLoading = ref(false)\r\nconst processingStatus = ref('')\r\nconst promptId = ref('')\r\nconst processingTime = ref('')\r\nconst progressPercent = ref(0)\r\n\r\n// æ‹–æ‹½å¯¹æ¯”åŠŸèƒ½\r\nconst sliderPosition = ref(50)\r\nconst isDragging = ref(false)\r\nconst comparisonContainer = ref(null)\r\nconst startTime = ref(null)\r\n\r\n// ä½“éªŒç‚¹ç»„ä»¶å¼•ç”¨\r\nconst pointsDisplayRef = ref(null)\r\n\r\n// ä½¿ç”¨VantUI Toastç³»ç»Ÿ\r\n\r\n// è®¡ç®—å±æ€§\r\nconst uploadedFacePhotos = computed(() => {\r\n  return facePhotos.value.length\r\n})\r\n\r\nconst canProcess = computed(() => {\r\n  return facePhotos.value.length === 4 && targetImage.value !== null\r\n})\r\n\r\n// å¤„ç†äººè„¸ç…§ç‰‡ä¸Šä¼ ï¼ˆå¤šé€‰ï¼‰\r\nconst handleFacePhotosChange = (images, originalCount) => {\r\n  facePhotos.value = images\r\n  resultImage.value = null // æ¸…é™¤ä¹‹å‰çš„ç»“æœ\r\n\r\n  if (originalCount > 0) {\r\n    Toast.success(`å·²é€‰æ‹© ${originalCount} å¼ ç…§ç‰‡${originalCount < 4 ? 'ï¼Œè‡ªåŠ¨è¡¥é½è‡³4å¼ ' : ''}`)\r\n  }\r\n}\r\n\r\n// å¤„ç†ç›®æ ‡å›¾ç‰‡ä¸Šä¼ \r\nconst handleTargetImageChange = (imageData, file) => {\r\n  targetImage.value = imageData\r\n  resultImage.value = null // æ¸…é™¤ä¹‹å‰çš„ç»“æœ\r\n}\r\n\r\n// ToaståŠŸèƒ½å·²ç§»è‡³useToastç»„åˆå¼å‡½æ•°\r\n\r\n// å¤„ç†å›¾ç‰‡\r\nconst processImages = async () => {\r\n  if (!canProcess.value) return\r\n\r\n  isLoading.value = true\r\n  processingStatus.value = 'æ­£åœ¨åŠ è½½æœåŠ¡...'\r\n  progressPercent.value = 10\r\n  startTime.value = Date.now()\r\n\r\n  try {\r\n    console.log('ğŸš€ å¼€å§‹æé€Ÿæ¢è„¸å¤„ç†')\r\n\r\n    // ComfyUIæœåŠ¡å·²é™æ€å¯¼å…¥ï¼Œæ— éœ€åŠ¨æ€åŠ è½½\r\n\r\n    processingStatus.value = 'æ­£åœ¨ä¸Šä¼ å›¾ç‰‡...'\r\n    progressPercent.value = 30\r\n\r\n    // è°ƒç”¨æ¢è„¸å¤„ç†æœåŠ¡\r\n    const result = await processFaceSwapImage({\r\n      facePhotos: facePhotos.value,\r\n      targetImage: targetImage.value,\r\n      onProgress: (status, percent) => {\r\n        processingStatus.value = status\r\n        progressPercent.value = Math.max(progressPercent.value, percent)\r\n      }\r\n    })\r\n\r\n    if (result.success && result.imageUrl) {\r\n      resultImage.value = result.imageUrl\r\n      // ä¿å­˜ç›®æ ‡å›¾åƒç”¨äºå¯¹æ¯”ï¼ˆä½¿ç”¨æœåŠ¡å™¨è¿”å›çš„æˆ–åŸå§‹çš„ç›®æ ‡å›¾åƒï¼‰\r\n      targetImageForComparison.value = result.targetImageUrl || targetImage.value\r\n      promptId.value = result.promptId || ''\r\n\r\n      // è®¡ç®—å¤„ç†æ—¶é—´\r\n      const endTime = Date.now()\r\n      const duration = Math.round((endTime - startTime.value) / 1000)\r\n      processingTime.value = `${duration}ç§’`\r\n\r\n      // æ›´æ–°ä½“éªŒç‚¹æ˜¾ç¤º\r\n      if (pointsDisplayRef.value) {\r\n        pointsDisplayRef.value.updatePointsStatus()\r\n      }\r\n\r\n      // æ˜¾ç¤ºæˆåŠŸtoast\r\n      const pointsInfo = result.pointsConsumed ? `ï¼ˆæ¶ˆè€—${result.pointsConsumed}ç‚¹ï¼‰` : ''\r\n      Toast.success(`ğŸ‰ æ¢è„¸å®Œæˆï¼${pointsInfo}å¯ä»¥æ‹–æ‹½ä¸­é—´çº¿å¯¹æ¯”ç›®æ ‡å›¾åƒå’Œæ¢è„¸ç»“æœ`)\r\n      console.log('âœ… æ¢è„¸å¤„ç†å®Œæˆ')\r\n    } else {\r\n      throw new Error(result.error || 'æ¢è„¸å¤„ç†å¤±è´¥')\r\n    }\r\n  } catch (error) {\r\n    console.error('âŒ æ¢è„¸å¤„ç†å¤±è´¥:', error)\r\n    Toast.fail(`æ¢è„¸å¤±è´¥: ${error.message}`)\r\n  } finally {\r\n    isLoading.value = false\r\n    processingStatus.value = ''\r\n    progressPercent.value = 0\r\n  }\r\n}\r\n\r\n// ä¸‹è½½ç»“æœ\r\nconst downloadResult = () => {\r\n  if (!resultImage.value) return\r\n\r\n  const link = document.createElement('a')\r\n  link.href = resultImage.value\r\n  link.download = `faceswap_result_${Date.now()}.png`\r\n  document.body.appendChild(link)\r\n  link.click()\r\n  document.body.removeChild(link)\r\n\r\n  Toast.success('å›¾ç‰‡ä¸‹è½½å·²å¼€å§‹')\r\n}\r\n\r\n// é‡ç½®å¤„ç†\r\nconst resetProcess = () => {\r\n  facePhotos.value = [null, null, null, null]\r\n  targetImage.value = null\r\n  targetImageForComparison.value = null\r\n  resultImage.value = null\r\n  processingStatus.value = ''\r\n  promptId.value = ''\r\n  processingTime.value = ''\r\n  sliderPosition.value = 50\r\n  Toast.success('å·²é‡ç½®ï¼Œå¯ä»¥é‡æ–°é€‰æ‹©å›¾ç‰‡')\r\n}\r\n\r\n// æ‹–æ‹½åŠŸèƒ½\r\nconst startDrag = (e) => {\r\n  isDragging.value = true\r\n  document.addEventListener('mousemove', onDrag)\r\n  document.addEventListener('mouseup', stopDrag)\r\n  document.addEventListener('touchmove', onDrag)\r\n  document.addEventListener('touchend', stopDrag)\r\n  e.preventDefault()\r\n}\r\n\r\nconst onDrag = (e) => {\r\n  if (!isDragging.value || !comparisonContainer.value) return\r\n\r\n  const rect = comparisonContainer.value.getBoundingClientRect()\r\n  const clientX = e.clientX || (e.touches && e.touches[0].clientX)\r\n  const x = clientX - rect.left\r\n  const percentage = Math.max(0, Math.min(100, (x / rect.width) * 100))\r\n  sliderPosition.value = percentage\r\n}\r\n\r\nconst stopDrag = () => {\r\n  isDragging.value = false\r\n  document.removeEventListener('mousemove', onDrag)\r\n  document.removeEventListener('mouseup', stopDrag)\r\n  document.removeEventListener('touchmove', onDrag)\r\n  document.removeEventListener('touchend', stopDrag)\r\n}\r\n\r\n\r\n\r\n// ç”Ÿå‘½å‘¨æœŸ\r\nonMounted(() => {\r\n  console.log('FaceSwapç»„ä»¶å·²æŒ‚è½½ï¼ŒComfyUIæœåŠ¡å·²å‡†å¤‡å°±ç»ª')\r\n})\r\n\r\nonUnmounted(() => {\r\n  if (isDragging.value) {\r\n    stopDrag()\r\n  }\r\n})\r\n\r\n// ç”¨æˆ·ç™»å½•æˆåŠŸå›è°ƒ\r\nconst handleUserLogin = (data) => {\r\n  console.log('ç”¨æˆ·ç™»å½•æˆåŠŸ:', data)\r\n  // å¯ä»¥åœ¨è¿™é‡Œè§¦å‘ä¸€äº›éœ€è¦ç™»å½•çŠ¶æ€çš„æ“ä½œ\r\n}\r\n\r\n// ç”¨æˆ·ç™»å‡ºå›è°ƒ\r\nconst handleUserLogout = () => {\r\n  console.log('ç”¨æˆ·å·²ç™»å‡º')\r\n  // å¯ä»¥åœ¨è¿™é‡Œæ¸…ç†ä¸€äº›ç”¨æˆ·ç›¸å…³çš„çŠ¶æ€\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.feature-page {\r\n  min-height: 100vh;\r\n  padding: 20px;\r\n  background: linear-gradient(135deg, var(--bg-primary) 0%, var(--bg-secondary) 100%);\r\n  position: relative;\r\n}\r\n\r\n/* å³ä¸Šè§’ç”¨æˆ·ä¿¡æ¯ */\r\n.top-corner {\r\n  position: fixed;\r\n  top: 20px;\r\n  right: 20px;\r\n  z-index: 1000;\r\n}\r\n\r\n.container {\r\n  max-width: 1000px;\r\n  margin: 0 auto;\r\n}\r\n\r\n.page-header {\r\n  text-align: center;\r\n  margin-bottom: 40px;\r\n}\r\n\r\n.page-title {\r\n  color: var(--text-color);\r\n  font-size: 2.5rem;\r\n  font-weight: 700;\r\n  margin-bottom: 12px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  gap: 16px;\r\n}\r\n\r\n.page-icon {\r\n  flex-shrink: 0;\r\n}\r\n\r\n.page-description {\r\n  color: var(--text-light);\r\n  font-size: 1.1rem;\r\n  margin: 0;\r\n  line-height: 1.5;\r\n}\r\n\r\n.section-title {\r\n  color: var(--text-color);\r\n  font-size: 1.3rem;\r\n  font-weight: 600;\r\n  margin-bottom: 12px;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 12px;\r\n}\r\n\r\n.section-icon {\r\n  flex-shrink: 0;\r\n}\r\n\r\n.section-description {\r\n  color: var(--text-light);\r\n  font-size: 0.95rem;\r\n  margin-bottom: 24px;\r\n  line-height: 1.5;\r\n}\r\n\r\n.face-photos-grid {\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\r\n  gap: 20px;\r\n  margin-bottom: 32px;\r\n}\r\n\r\n.upload-tips {\r\n  background: var(--bg-card);\r\n  border: 1px solid var(--border-color);\r\n  border-radius: 12px;\r\n  padding: 20px;\r\n  margin-top: 24px;\r\n}\r\n\r\n.tip-item {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 12px;\r\n  margin-bottom: 12px;\r\n  color: var(--text-light);\r\n  font-size: 0.95rem;\r\n}\r\n\r\n.tip-item:last-child {\r\n  margin-bottom: 0;\r\n}\r\n\r\n.tip-icon {\r\n  flex-shrink: 0;\r\n}\r\n\r\n.process-btn {\r\n  margin-top: 24px;\r\n}\r\n\r\n.process-btn .van-button__content {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  gap: 8px;\r\n}\r\n\r\n.loading-icon,\r\n.btn-icon {\r\n  flex-shrink: 0;\r\n}\r\n\r\n.back-btn {\r\n  display: inline-flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n  color: rgba(255, 255, 255, 0.9);\r\n  text-decoration: none;\r\n  font-size: 1rem;\r\n  margin-bottom: 20px;\r\n  transition: var(--transition);\r\n}\r\n\r\n.back-btn:hover {\r\n  color: white;\r\n  transform: translateX(-4px);\r\n}\r\n\r\n.back-icon {\r\n  font-size: 1.2rem;\r\n}\r\n\r\n.page-title {\r\n  font-size: 3rem;\r\n  color: white;\r\n  margin-bottom: 16px;\r\n  text-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);\r\n}\r\n\r\n.page-icon {\r\n  margin-right: 16px;\r\n}\r\n\r\n.page-description {\r\n  font-size: 1.2rem;\r\n  color: rgba(255, 255, 255, 0.8);\r\n}\r\n\r\n.page-content {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 40px;\r\n}\r\n\r\n.upload-section {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 40px;\r\n}\r\n\r\n/* äººè„¸ç…§ç‰‡åŒºåŸŸæ ·å¼ */\r\n.face-photos-section, .target-image-section {\r\n  background: var(--bg-card);\r\n  border: 1px solid var(--border-color);\r\n  border-radius: 20px;\r\n  padding: 32px;\r\n  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);\r\n}\r\n\r\n.section-title {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 12px;\r\n  font-size: 1.5rem;\r\n  color: var(--text-color);\r\n  margin-bottom: 16px;\r\n}\r\n\r\n.section-icon {\r\n  font-size: 1.8rem;\r\n}\r\n\r\n.section-description {\r\n  color: var(--text-light);\r\n  margin-bottom: 24px;\r\n  line-height: 1.6;\r\n}\r\n\r\n/* äººè„¸ç…§ç‰‡ç½‘æ ¼æ ·å¼å·²ç§»è‡³ MultiImageUpload ç»„ä»¶ */\r\n\r\n/* äººè„¸ç…§ç‰‡ç›¸å…³æ ·å¼å·²ç§»è‡³ MultiImageUpload ç»„ä»¶ */\r\n\r\n.target-image-card {\r\n  max-width: 400px;\r\n  margin: 0 auto;\r\n  background: var(--bg-dark-light);\r\n  border: 1px solid var(--border-color);\r\n  border-radius: 16px;\r\n  overflow: hidden;\r\n  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.3);\r\n  transition: var(--transition);\r\n}\r\n\r\n.target-image-card:hover {\r\n  border-color: var(--primary-color);\r\n  box-shadow: 0 12px 32px rgba(0, 0, 0, 0.4);\r\n}\r\n\r\n.target-image-area {\r\n  display: block;\r\n  cursor: pointer;\r\n  min-height: 300px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  flex-direction: column;\r\n  padding: 32px;\r\n}\r\n\r\n.target-image-placeholder {\r\n  text-align: center;\r\n  color: var(--text-light);\r\n}\r\n\r\n.target-image-placeholder h3 {\r\n  margin: 16px 0 12px;\r\n  color: var(--text-color);\r\n  font-size: 1.2rem;\r\n}\r\n\r\n.target-image-placeholder p {\r\n  font-size: 0.9rem;\r\n  margin: 0;\r\n  line-height: 1.5;\r\n}\r\n\r\n.target-image-preview {\r\n  position: relative;\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n\r\n/* ä¸Šä¼ æç¤ºæ ·å¼å·²ç§»è‡³ shared.css */\r\n\r\n/* å¤„ç†çŠ¶æ€æ ·å¼å·²ç§»è‡³ shared.css */\r\n\r\n.hidden {\r\n  display: none;\r\n}\r\n\r\n.image-preview {\r\n  position: relative;\r\n  border-radius: 12px;\r\n  overflow: hidden;\r\n}\r\n\r\n.preview-image {\r\n  max-width: 100%;\r\n  max-height: 200px;\r\n  border-radius: 12px;\r\n  display: block;\r\n}\r\n\r\n.image-overlay {\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  background: rgba(0, 0, 0, 0.7);\r\n  color: white;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  opacity: 0;\r\n  transition: var(--transition);\r\n}\r\n\r\n.image-preview:hover .image-overlay {\r\n  opacity: 1;\r\n}\r\n\r\n.upload-grid {\r\n  display: grid;\r\n  grid-template-columns: 1fr auto 1fr;\r\n  gap: 32px;\r\n  align-items: center;\r\n  margin-bottom: 32px;\r\n}\r\n\r\n.upload-card {\r\n  background: var(--bg-card);\r\n  border: 1px solid var(--border-color);\r\n  border-radius: 20px;\r\n  padding: 24px;\r\n  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);\r\n}\r\n\r\n.upload-title {\r\n  text-align: center;\r\n  margin-bottom: 16px;\r\n  color: var(--text-color);\r\n  font-size: 1.2rem;\r\n}\r\n\r\n.upload-area {\r\n  display: block;\r\n  cursor: pointer;\r\n  border: 3px dashed var(--border-color);\r\n  border-radius: 16px;\r\n  padding: 32px 16px;\r\n  text-align: center;\r\n  transition: var(--transition);\r\n  min-height: 250px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  flex-direction: column;\r\n}\r\n\r\n.upload-area:hover {\r\n  border-color: var(--primary-color);\r\n  background: rgba(102, 126, 234, 0.05);\r\n}\r\n\r\n.upload-placeholder p {\r\n  margin: 12px 0 4px;\r\n  color: var(--text-color);\r\n  font-weight: 600;\r\n}\r\n\r\n.upload-hint {\r\n  font-size: 0.85rem;\r\n  color: var(--text-light);\r\n}\r\n\r\n.upload-icon {\r\n  font-size: 3rem;\r\n  margin-bottom: 8px;\r\n}\r\n\r\n.swap-arrow {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  background: rgba(255, 255, 255, 0.9);\r\n  border-radius: 50%;\r\n  width: 60px;\r\n  height: 60px;\r\n  box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.arrow-icon {\r\n  font-size: 1.5rem;\r\n  color: var(--primary-color);\r\n  font-weight: bold;\r\n}\r\n\r\n.action-section {\r\n  text-align: center;\r\n}\r\n\r\n.swap-options {\r\n  display: flex;\r\n  justify-content: center;\r\n  gap: 32px;\r\n  margin-bottom: 24px;\r\n  background: var(--bg-card);\r\n  border: 1px solid var(--border-color);\r\n  padding: 20px;\r\n  border-radius: 12px;\r\n}\r\n\r\n.option-group label {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n  color: var(--text-color);\r\n  font-weight: 500;\r\n  cursor: pointer;\r\n}\r\n\r\n.option-group input[type=\"checkbox\"] {\r\n  width: 18px;\r\n  height: 18px;\r\n  accent-color: var(--primary-color);\r\n}\r\n\r\n.swap-btn {\r\n  font-size: 1.1rem;\r\n  padding: 16px 32px;\r\n  min-width: 200px;\r\n}\r\n\r\n.result-section {\r\n  display: flex;\r\n  justify-content: center;\r\n}\r\n\r\n.result-card {\r\n  background: var(--bg-card);\r\n  border: 1px solid var(--border-color);\r\n  border-radius: 20px;\r\n  padding: 32px;\r\n  text-align: center;\r\n  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);\r\n  max-width: 800px;\r\n  width: 100%;\r\n}\r\n\r\n.result-title {\r\n  font-size: 1.5rem;\r\n  margin-bottom: 24px;\r\n  color: var(--text-color);\r\n}\r\n\r\n.result-comparison {\r\n  display: grid;\r\n  grid-template-columns: 1fr auto 1fr;\r\n  gap: 24px;\r\n  align-items: center;\r\n  margin: 24px 0;\r\n}\r\n\r\n.comparison-item {\r\n  text-align: center;\r\n}\r\n\r\n.comparison-item h4 {\r\n  margin-bottom: 12px;\r\n  color: var(--text-color);\r\n}\r\n\r\n.comparison-image {\r\n  max-width: 100%;\r\n  max-height: 300px;\r\n  border-radius: 12px;\r\n  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);\r\n}\r\n\r\n.comparison-arrow {\r\n  font-size: 2rem;\r\n  color: var(--primary-color);\r\n  font-weight: bold;\r\n}\r\n\r\n/* ç»“æœå±•ç¤ºæ ·å¼ */\r\n.result-container {\r\n  background: var(--bg-card);\r\n  border: 1px solid var(--border-color);\r\n  border-radius: 20px;\r\n  padding: 32px;\r\n  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);\r\n}\r\n\r\n.comparison-container {\r\n  position: relative;\r\n  margin: 24px 0;\r\n  border-radius: 16px;\r\n  overflow: hidden;\r\n  box-shadow: 0 12px 32px rgba(0, 0, 0, 0.15);\r\n  user-select: none;\r\n  background: #f8f9fa;\r\n  width: 100%;\r\n  height: 80vh;\r\n  min-height: 700px;\r\n  max-height: 900px;\r\n}\r\n\r\n.comparison-wrapper {\r\n  position: relative;\r\n  width: 100%;\r\n  height: 100%;\r\n  overflow: hidden;\r\n  background: var(--bg-dark);\r\n}\r\n\r\n.image-before, .image-after {\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n\r\n.comparison-image {\r\n  max-width: 100%;\r\n  max-height: 100%;\r\n  width: auto;\r\n  height: auto;\r\n  object-fit: contain;\r\n  object-position: center;\r\n  display: block;\r\n}\r\n\r\n.image-label {\r\n  position: absolute;\r\n  top: 16px;\r\n  left: 16px;\r\n  background: rgba(0, 0, 0, 0.7);\r\n  color: white;\r\n  padding: 8px 16px;\r\n  border-radius: 20px;\r\n  font-size: 0.9rem;\r\n  font-weight: 500;\r\n}\r\n\r\n.slider-handle {\r\n  position: absolute;\r\n  top: 0;\r\n  bottom: 0;\r\n  width: 4px;\r\n  cursor: ew-resize;\r\n  z-index: 10;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n\r\n.slider-line {\r\n  width: 4px;\r\n  height: 100%;\r\n  background: white;\r\n  box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);\r\n}\r\n\r\n.slider-button {\r\n  position: absolute;\r\n  background: white;\r\n  border-radius: 50%;\r\n  width: 40px;\r\n  height: 40px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  font-size: 1.2rem;\r\n  color: var(--primary-color);\r\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);\r\n  cursor: ew-resize;\r\n  user-select: none;\r\n}\r\n\r\n.result-actions {\r\n  display: flex;\r\n  gap: 16px;\r\n  justify-content: center;\r\n  margin-top: 24px;\r\n}\r\n\r\n/* å¤„ç†ä¿¡æ¯æ ·å¼ */\r\n.process-info {\r\n  display: flex;\r\n  gap: 24px;\r\n  justify-content: center;\r\n  flex-wrap: wrap;\r\n}\r\n\r\n/* æŒ‰é’®æ ·å¼å·²ç§»è‡³AppButtonç»„ä»¶ */\r\n\r\n@media (max-width: 768px) {\r\n  .page-title {\r\n    font-size: 2rem;\r\n  }\r\n\r\n  .face-photos-grid {\r\n    grid-template-columns: repeat(2, 1fr);\r\n    gap: 16px;\r\n  }\r\n\r\n  .comparison-container {\r\n    height: 60vh;\r\n    min-height: 400px;\r\n    max-height: 600px;\r\n    margin: 16px 0;\r\n  }\r\n\r\n  .result-actions {\r\n    flex-direction: column;\r\n    gap: 12px;\r\n  }\r\n\r\n  .process-info {\r\n    flex-direction: column;\r\n    gap: 16px;\r\n    text-align: center;\r\n  }\r\n\r\n  .upload-tips {\r\n    padding: 16px;\r\n  }\r\n\r\n  .tip-item {\r\n    font-size: 1rem;\r\n  }\r\n}\r\n</style>\r\n"
        }
    ]
}