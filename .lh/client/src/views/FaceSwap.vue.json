{
    "sourceFile": "client/src/views/FaceSwap.vue",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 50,
            "patches": [
                {
                    "date": 1752348807217,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1752348821426,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -115,8 +115,9 @@\n import ProcessingStatus from '../components/ProcessingStatus.vue'\r\n import ImageComparison from '../components/ImageComparison.vue'\r\n import PointsDisplay from '../components/PointsDisplay.vue'\r\n import UserInfo from '../components/UserInfo.vue'\r\n+import BackToHomeButton from '../components/BackToHomeButton.vue'\r\n import { FaceSwapIcon } from '../components/icons'\r\n \r\n // 静态导入ComfyUI服务\r\n import { processFaceSwapImage } from '../services/comfyui.js'\r\n"
                },
                {
                    "date": 1752351589068,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,23 +1,21 @@\n <template>\r\n-  <div class=\"feature-page\">\r\n+  <div class=\"mobile-page\">\r\n     <!-- 右上角用户信息 -->\r\n     <div class=\"top-corner\">\r\n       <UserInfo @login=\"handleUserLogin\" @logout=\"handleUserLogout\" />\r\n     </div>\r\n \r\n-    <div class=\"container\">\r\n-      <header class=\"page-header\">\r\n-        <BackToHomeButton class=\"back-btn\" />\r\n-        <h1 class=\"page-title\">\r\n-          <FaceSwapIcon :size=\"32\" color=\"var(--warning-color)\" class=\"page-icon\" />\r\n-          极速换脸\r\n-        </h1>\r\n-        <p class=\"page-description\">上传4张人脸照片和1张目标图片，AI将为您智能换脸</p>\r\n+    <div class=\"mobile-container\">\r\n+      <header class=\"mobile-header\">\r\n+        <BackToHomeButton class=\"mobile-header-back\" />\r\n+        <h1 class=\"mobile-header-title\">极速换脸</h1>\r\n+        <div></div>\r\n       </header>\r\n \r\n       <!-- 体验点显示 -->\r\n-      <PointsDisplay ref=\"pointsDisplayRef\" />\r\n+      <div class=\"mobile-content\">\r\n+        <PointsDisplay ref=\"pointsDisplayRef\" />\r\n \r\n       <main class=\"page-content\">\r\n         <div v-if=\"!resultImage\" class=\"upload-section\">\r\n           <!-- 人脸照片上传区域 -->\r\n"
                },
                {
                    "date": 1752352751828,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -14,10 +14,8 @@\n \r\n       <!-- 体验点显示 -->\r\n       <div class=\"mobile-content\">\r\n         <PointsDisplay ref=\"pointsDisplayRef\" />\r\n-\r\n-      <main class=\"page-content\">\r\n         <div v-if=\"!resultImage\" class=\"upload-section\">\r\n           <!-- 人脸照片上传区域 -->\r\n           <div class=\"face-photos-section\">\r\n             <h3 class=\"section-title\">\r\n"
                },
                {
                    "date": 1752353188970,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -96,9 +96,9 @@\n           :original-image=\"targetImageForComparison\"\r\n           :result-image=\"resultImage\"\r\n           @reset=\"resetProcess\"\r\n         />\r\n-      </main>\r\n+      </div>\r\n     </div>\r\n   </div>\r\n </template>\r\n \r\n"
                },
                {
                    "date": 1752354037622,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,21 +1,25 @@\n <template>\r\n-  <div class=\"mobile-page\">\r\n+  <div class=\"feature-page\">\r\n     <!-- 右上角用户信息 -->\r\n     <div class=\"top-corner\">\r\n       <UserInfo @login=\"handleUserLogin\" @logout=\"handleUserLogout\" />\r\n     </div>\r\n \r\n-    <div class=\"mobile-container\">\r\n-      <header class=\"mobile-header\">\r\n-        <BackToHomeButton class=\"mobile-header-back\" />\r\n-        <h1 class=\"mobile-header-title\">极速换脸</h1>\r\n-        <div></div>\r\n+    <div class=\"container\">\r\n+      <header class=\"page-header\">\r\n+        <BackToHomeButton class=\"back-btn\" />\r\n+        <h1 class=\"page-title\">\r\n+          <FaceSwapIcon :size=\"32\" color=\"var(--warning-color)\" class=\"page-icon\" />\r\n+          极速换脸\r\n+        </h1>\r\n+        <p class=\"page-description\">上传4张人脸照片和1张目标图片，AI将为您智能换脸</p>\r\n       </header>\r\n \r\n       <!-- 体验点显示 -->\r\n-      <div class=\"mobile-content\">\r\n-        <PointsDisplay ref=\"pointsDisplayRef\" />\r\n+      <PointsDisplay ref=\"pointsDisplayRef\" />\r\n+\r\n+      <main class=\"page-content\">\r\n         <div v-if=\"!resultImage\" class=\"upload-section\">\r\n           <!-- 人脸照片上传区域 -->\r\n           <div class=\"face-photos-section\">\r\n             <h3 class=\"section-title\">\r\n@@ -96,9 +100,9 @@\n           :original-image=\"targetImageForComparison\"\r\n           :result-image=\"resultImage\"\r\n           @reset=\"resetProcess\"\r\n         />\r\n-      </div>\r\n+      </main>\r\n     </div>\r\n   </div>\r\n </template>\r\n \r\n"
                },
                {
                    "date": 1752370230331,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,24 +1,23 @@\n <template>\r\n-  <div class=\"feature-page\">\r\n-    <!-- 右上角用户信息 -->\r\n-    <div class=\"top-corner\">\r\n-      <UserInfo @login=\"handleUserLogin\" @logout=\"handleUserLogout\" />\r\n-    </div>\r\n+  <MobileLayout\r\n+    title=\"极速换脸\"\r\n+    :show-back=\"true\"\r\n+    :show-tabbar=\"true\"\r\n+    @login=\"handleUserLogin\"\r\n+    @logout=\"handleUserLogout\"\r\n+  >\r\n+    <!-- 页面描述 -->\r\n+    <MobileCard\r\n+      title=\"极速换脸\"\r\n+      subtitle=\"上传4张人脸照片和1张目标图片，AI将为您智能换脸\"\r\n+      icon=\"user-circle-o\"\r\n+      variant=\"warning\"\r\n+    />\r\n \r\n-    <div class=\"container\">\r\n-      <header class=\"page-header\">\r\n-        <BackToHomeButton class=\"back-btn\" />\r\n-        <h1 class=\"page-title\">\r\n-          <FaceSwapIcon :size=\"32\" color=\"var(--warning-color)\" class=\"page-icon\" />\r\n-          极速换脸\r\n-        </h1>\r\n-        <p class=\"page-description\">上传4张人脸照片和1张目标图片，AI将为您智能换脸</p>\r\n-      </header>\r\n+    <!-- 体验点显示 -->\r\n+    <PointsDisplay ref=\"pointsDisplayRef\" />\r\n \r\n-      <!-- 体验点显示 -->\r\n-      <PointsDisplay ref=\"pointsDisplayRef\" />\r\n-\r\n       <main class=\"page-content\">\r\n         <div v-if=\"!resultImage\" class=\"upload-section\">\r\n           <!-- 人脸照片上传区域 -->\r\n           <div class=\"face-photos-section\">\r\n"
                },
                {
                    "date": 1752370256300,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -16,44 +16,42 @@\n \r\n     <!-- 体验点显示 -->\r\n     <PointsDisplay ref=\"pointsDisplayRef\" />\r\n \r\n-      <main class=\"page-content\">\r\n-        <div v-if=\"!resultImage\" class=\"upload-section\">\r\n-          <!-- 人脸照片上传区域 -->\r\n-          <div class=\"face-photos-section\">\r\n-            <h3 class=\"section-title\">\r\n-              <FaceSwapIcon :size=\"20\" color=\"var(--primary-color)\" class=\"section-icon\" />\r\n-              人脸照片 (1-4张)\r\n-            </h3>\r\n-            <!-- <p class=\"section-description\">一次性选择1-4张清晰的人脸照片</p> -->\r\n+    <!-- 上传区域 -->\r\n+    <div v-if=\"!resultImage\">\r\n+      <!-- 人脸照片上传 -->\r\n+      <MobileCard\r\n+        title=\"人脸照片 (1-4张)\"\r\n+        subtitle=\"一次性选择1-4张清晰的人脸照片\"\r\n+        icon=\"user-circle-o\"\r\n+        variant=\"primary\"\r\n+      >\r\n+        <MultiImageUpload\r\n+          v-model=\"facePhotos\"\r\n+          :disabled=\"isLoading\"\r\n+          @change=\"handleFacePhotosChange\"\r\n+        />\r\n+      </MobileCard>\r\n \r\n-            <MultiImageUpload\r\n-              v-model=\"facePhotos\"\r\n-              :disabled=\"isLoading\"\r\n-              @change=\"handleFacePhotosChange\"\r\n-            />\r\n-          </div>\r\n+      <!-- 目标图片上传 -->\r\n+      <MobileCard\r\n+        title=\"目标图片\"\r\n+        subtitle=\"上传需要换脸的目标图片\"\r\n+        icon=\"photo-o\"\r\n+        variant=\"success\"\r\n+      >\r\n+        <ImageUpload\r\n+          v-model=\"targetImage\"\r\n+          title=\"上传需要换脸的目标图片\"\r\n+          description=\"支持 JPG、PNG 格式，建议尺寸 512x512 以上\"\r\n+          icon=\"Image\"\r\n+          :icon-size=\"48\"\r\n+          :disabled=\"isLoading\"\r\n+          @change=\"handleTargetImageChange\"\r\n+        />\r\n+      </MobileCard>\r\n \r\n-          <!-- 目标图片上传区域 -->\r\n-          <div class=\"target-image-section\">\r\n-            <h3 class=\"section-title\">\r\n-              <Image :size=\"20\" color=\"var(--success-color)\" class=\"section-icon\" />\r\n-              目标图片\r\n-            </h3>\r\n-            <!-- <p class=\"section-description\">上传需要换脸的目标图片</p> -->\r\n-\r\n-            <ImageUpload\r\n-              v-model=\"targetImage\"\r\n-              title=\"上传需要换脸的目标图片\"\r\n-              description=\"支持 JPG、PNG 格式，建议尺寸 512x512 以上\"\r\n-              icon=\"Image\"\r\n-              :icon-size=\"48\"\r\n-              :disabled=\"isLoading\"\r\n-              @change=\"handleTargetImageChange\"\r\n-            />\r\n-          </div>\r\n-\r\n           <!-- 处理按钮 -->\r\n           <div v-if=\"canProcess && !isLoading\" class=\"action-section\">\r\n             <van-button\r\n               @click=\"processImages\"\r\n"
                },
                {
                    "date": 1752370290215,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -50,55 +50,68 @@\n           @change=\"handleTargetImageChange\"\r\n         />\r\n       </MobileCard>\r\n \r\n-          <!-- 处理按钮 -->\r\n-          <div v-if=\"canProcess && !isLoading\" class=\"action-section\">\r\n-            <van-button\r\n-              @click=\"processImages\"\r\n-              type=\"primary\"\r\n-              size=\"large\"\r\n-              round\r\n-              block\r\n-              class=\"process-btn\"\r\n-            >\r\n-              <Users :size=\"20\" color=\"white\" class=\"btn-icon\" />\r\n-              开始换脸\r\n-            </van-button>\r\n-          </div>\r\n+      <!-- 处理按钮 -->\r\n+      <MobileCard v-if=\"canProcess && !isLoading\">\r\n+        <van-button\r\n+          @click=\"processImages\"\r\n+          type=\"primary\"\r\n+          size=\"large\"\r\n+          round\r\n+          block\r\n+          class=\"process-btn\"\r\n+        >\r\n+          <Users :size=\"20\" color=\"white\" class=\"btn-icon\" />\r\n+          开始换脸\r\n+        </van-button>\r\n+      </MobileCard>\r\n \r\n-          <!-- 上传提示 -->\r\n-          <div v-else class=\"upload-tips\">\r\n-            <div class=\"tip-item\">\r\n-              <Image :size=\"16\" color=\"var(--primary-color)\" class=\"tip-icon\" />\r\n-              <span>已上传 {{ uploadedFacePhotos }}/4 张人脸照片</span>\r\n-            </div>\r\n-            <div class=\"tip-item\">\r\n-              <Image :size=\"16\" color=\"var(--success-color)\" class=\"tip-icon\" />\r\n-              <van-icon :name=\"targetImage ? 'success' : 'cross'\" size=\"16\" :color=\"targetImage ? 'var(--success-color)' : 'var(--error-color)'\" />\r\n-              <span>目标图片</span>\r\n-            </div>\r\n+      <!-- 上传提示 -->\r\n+      <MobileCard v-else title=\"上传进度\" subtitle=\"请完成所有图片上传\" variant=\"default\">\r\n+        <div class=\"upload-status\">\r\n+          <div class=\"status-item\">\r\n+            <van-icon name=\"photo-o\" size=\"16\" color=\"var(--van-primary-color)\" />\r\n+            <span>已上传 {{ uploadedFacePhotos }}/4 张人脸照片</span>\r\n+            <van-icon\r\n+              :name=\"uploadedFacePhotos > 0 ? 'success' : 'cross'\"\r\n+              size=\"16\"\r\n+              :color=\"uploadedFacePhotos > 0 ? 'var(--van-success-color)' : 'var(--van-text-color-3)'\"\r\n+            />\r\n           </div>\r\n+          <div class=\"status-item\">\r\n+            <van-icon name=\"photo-o\" size=\"16\" color=\"var(--van-success-color)\" />\r\n+            <span>目标图片</span>\r\n+            <van-icon\r\n+              :name=\"targetImage ? 'success' : 'cross'\"\r\n+              size=\"16\"\r\n+              :color=\"targetImage ? 'var(--van-success-color)' : 'var(--van-text-color-3)'\"\r\n+            />\r\n+          </div>\r\n         </div>\r\n+      </MobileCard>\r\n+    </div>\r\n \r\n-        <!-- 处理状态 -->\r\n-        <ProcessingStatus\r\n-          v-if=\"isLoading\"\r\n-          status=\"loading\"\r\n-          title=\"正在处理换脸...\"\r\n-          description=\"请耐心等待，处理时间可能需要几分钟\"\r\n-          :progress=\"progressPercent\"\r\n-          :prompt-id=\"promptId\"\r\n-          :processing-time=\"processingTime\"\r\n-        />\r\n+    <!-- 处理状态 -->\r\n+    <MobileCard v-if=\"isLoading\" variant=\"primary\">\r\n+      <ProcessingStatus\r\n+        status=\"loading\"\r\n+        title=\"正在处理换脸...\"\r\n+        description=\"请耐心等待，处理时间可能需要几分钟\"\r\n+        :progress=\"progressPercent\"\r\n+        :prompt-id=\"promptId\"\r\n+        :processing-time=\"processingTime\"\r\n+      />\r\n+    </MobileCard>\r\n \r\n-        <!-- 结果展示区域 -->\r\n-        <ImageComparison\r\n-          v-if=\"resultImage\"\r\n-          :original-image=\"targetImageForComparison\"\r\n-          :result-image=\"resultImage\"\r\n-          @reset=\"resetProcess\"\r\n-        />\r\n+    <!-- 结果展示 -->\r\n+    <MobileCard v-if=\"resultImage\" title=\"换脸结果\" subtitle=\"对比查看换脸效果\" variant=\"success\">\r\n+      <ImageComparison\r\n+        :original-image=\"targetImageForComparison\"\r\n+        :result-image=\"resultImage\"\r\n+        @reset=\"resetProcess\"\r\n+      />\r\n+    </MobileCard>\r\n       </main>\r\n     </div>\r\n   </div>\r\n </template>\r\n"
                },
                {
                    "date": 1752370310387,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -109,12 +109,9 @@\n         :original-image=\"targetImageForComparison\"\r\n         :result-image=\"resultImage\"\r\n         @reset=\"resetProcess\"\r\n       />\r\n-    </MobileCard>\r\n-      </main>\r\n-    </div>\r\n-  </div>\r\n+  </MobileLayout>\r\n </template>\r\n \r\n <script setup>\r\n import { ref, computed, onMounted, onUnmounted } from 'vue'\r\n"
                },
                {
                    "date": 1752370327465,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -115,16 +115,16 @@\n \r\n <script setup>\r\n import { ref, computed, onMounted, onUnmounted } from 'vue'\r\n import { Toast } from 'vant'\r\n-import { Image } from 'lucide-vue-next'\r\n+import { Users } from 'lucide-vue-next'\r\n+import MobileLayout from '../components/MobileLayout.vue'\r\n+import MobileCard from '../components/MobileCard.vue'\r\n import ImageUpload from '../components/ImageUpload.vue'\r\n import MultiImageUpload from '../components/MultiImageUpload.vue'\r\n import ProcessingStatus from '../components/ProcessingStatus.vue'\r\n import ImageComparison from '../components/ImageComparison.vue'\r\n import PointsDisplay from '../components/PointsDisplay.vue'\r\n-import UserInfo from '../components/UserInfo.vue'\r\n-import BackToHomeButton from '../components/BackToHomeButton.vue'\r\n import { FaceSwapIcon } from '../components/icons'\r\n \r\n // 静态导入ComfyUI服务\r\n import { processFaceSwapImage } from '../services/comfyui.js'\r\n"
                },
                {
                    "date": 1752370398826,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -923,5 +923,28 @@\n   .tip-item {\r\n     font-size: 1rem;\r\n   }\r\n }\r\n+\r\n+/* 上传状态样式 */\r\n+.upload-status {\r\n+  display: flex;\r\n+  flex-direction: column;\r\n+  gap: 12px;\r\n+}\r\n+\r\n+.status-item {\r\n+  display: flex;\r\n+  align-items: center;\r\n+  gap: 12px;\r\n+  padding: 12px;\r\n+  background: rgba(255, 255, 255, 0.05);\r\n+  border-radius: 8px;\r\n+  border: 1px solid var(--van-border-color);\r\n+}\r\n+\r\n+.status-item span {\r\n+  flex: 1;\r\n+  font-size: 14px;\r\n+  color: var(--van-text-color);\r\n+}\r\n </style>\r\n"
                },
                {
                    "date": 1752371340211,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -109,8 +109,12 @@\n         :original-image=\"targetImageForComparison\"\r\n         :result-image=\"resultImage\"\r\n         @reset=\"resetProcess\"\r\n       />\r\n+    </MobileCard>\r\n+\r\n+    <!-- 底部导航 -->\r\n+    <MobileTabbar />\r\n   </MobileLayout>\r\n </template>\r\n \r\n <script setup>\r\n"
                },
                {
                    "date": 1752371357018,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -122,8 +122,9 @@\n import { Toast } from 'vant'\r\n import { Users } from 'lucide-vue-next'\r\n import MobileLayout from '../components/MobileLayout.vue'\r\n import MobileCard from '../components/MobileCard.vue'\r\n+import MobileTabbar from '../components/MobileTabbar.vue'\r\n import ImageUpload from '../components/ImageUpload.vue'\r\n import MultiImageUpload from '../components/MultiImageUpload.vue'\r\n import ProcessingStatus from '../components/ProcessingStatus.vue'\r\n import ImageComparison from '../components/ImageComparison.vue'\r\n"
                },
                {
                    "date": 1752373221579,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -128,9 +128,8 @@\n import MultiImageUpload from '../components/MultiImageUpload.vue'\r\n import ProcessingStatus from '../components/ProcessingStatus.vue'\r\n import ImageComparison from '../components/ImageComparison.vue'\r\n import PointsDisplay from '../components/PointsDisplay.vue'\r\n-import { FaceSwapIcon } from '../components/icons'\r\n \r\n // 静态导入ComfyUI服务\r\n import { processFaceSwapImage } from '../services/comfyui.js'\r\n \r\n"
                },
                {
                    "date": 1752373807414,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,135 +1,124 @@\n <template>\r\n-  <MobileLayout\r\n-    title=\"极速换脸\"\r\n-    :show-back=\"true\"\r\n-    :show-tabbar=\"true\"\r\n-    @login=\"handleUserLogin\"\r\n-    @logout=\"handleUserLogout\"\r\n-  >\r\n-    <!-- 页面描述 -->\r\n-    <MobileCard\r\n-      title=\"极速换脸\"\r\n-      subtitle=\"上传4张人脸照片和1张目标图片，AI将为您智能换脸\"\r\n-      icon=\"user-circle-o\"\r\n-      variant=\"warning\"\r\n-    />\r\n+  <div class=\"feature-page\">\r\n+    <!-- 右上角用户信息 -->\r\n+    <div class=\"top-corner\">\r\n+      <UserInfo @login=\"handleUserLogin\" @logout=\"handleUserLogout\" />\r\n+    </div>\r\n \r\n-    <!-- 体验点显示 -->\r\n-    <PointsDisplay ref=\"pointsDisplayRef\" />\r\n+    <div class=\"container\">\r\n+      <header class=\"page-header\">\r\n+        <BackToHomeButton class=\"back-btn\" />\r\n+        <h1 class=\"page-title\">\r\n+          <FaceSwapIcon :size=\"32\" color=\"var(--warning-color)\" class=\"page-icon\" />\r\n+          极速换脸\r\n+        </h1>\r\n+        <p class=\"page-description\">上传4张人脸照片和1张目标图片，AI将为您智能换脸</p>\r\n+      </header>\r\n \r\n-    <!-- 上传区域 -->\r\n-    <div v-if=\"!resultImage\">\r\n-      <!-- 人脸照片上传 -->\r\n-      <MobileCard\r\n-        title=\"人脸照片 (1-4张)\"\r\n-        subtitle=\"一次性选择1-4张清晰的人脸照片\"\r\n-        icon=\"user-circle-o\"\r\n-        variant=\"primary\"\r\n-      >\r\n-        <MultiImageUpload\r\n-          v-model=\"facePhotos\"\r\n-          :disabled=\"isLoading\"\r\n-          @change=\"handleFacePhotosChange\"\r\n-        />\r\n-      </MobileCard>\r\n+      <!-- 体验点显示 -->\r\n+      <PointsDisplay ref=\"pointsDisplayRef\" />\r\n \r\n-      <!-- 目标图片上传 -->\r\n-      <MobileCard\r\n-        title=\"目标图片\"\r\n-        subtitle=\"上传需要换脸的目标图片\"\r\n-        icon=\"photo-o\"\r\n-        variant=\"success\"\r\n-      >\r\n-        <ImageUpload\r\n-          v-model=\"targetImage\"\r\n-          title=\"上传需要换脸的目标图片\"\r\n-          description=\"支持 JPG、PNG 格式，建议尺寸 512x512 以上\"\r\n-          icon=\"Image\"\r\n-          :icon-size=\"48\"\r\n-          :disabled=\"isLoading\"\r\n-          @change=\"handleTargetImageChange\"\r\n-        />\r\n-      </MobileCard>\r\n+      <main class=\"page-content\">\r\n+        <div v-if=\"!resultImage\" class=\"upload-section\">\r\n+          <!-- 人脸照片上传区域 -->\r\n+          <div class=\"face-photos-section\">\r\n+            <h3 class=\"section-title\">\r\n+              <FaceSwapIcon :size=\"20\" color=\"var(--primary-color)\" class=\"section-icon\" />\r\n+              人脸照片 (1-4张)\r\n+            </h3>\r\n+            <!-- <p class=\"section-description\">一次性选择1-4张清晰的人脸照片</p> -->\r\n \r\n-      <!-- 处理按钮 -->\r\n-      <MobileCard v-if=\"canProcess && !isLoading\">\r\n-        <van-button\r\n-          @click=\"processImages\"\r\n-          type=\"primary\"\r\n-          size=\"large\"\r\n-          round\r\n-          block\r\n-          class=\"process-btn\"\r\n-        >\r\n-          <Users :size=\"20\" color=\"white\" class=\"btn-icon\" />\r\n-          开始换脸\r\n-        </van-button>\r\n-      </MobileCard>\r\n-\r\n-      <!-- 上传提示 -->\r\n-      <MobileCard v-else title=\"上传进度\" subtitle=\"请完成所有图片上传\" variant=\"default\">\r\n-        <div class=\"upload-status\">\r\n-          <div class=\"status-item\">\r\n-            <van-icon name=\"photo-o\" size=\"16\" color=\"var(--van-primary-color)\" />\r\n-            <span>已上传 {{ uploadedFacePhotos }}/4 张人脸照片</span>\r\n-            <van-icon\r\n-              :name=\"uploadedFacePhotos > 0 ? 'success' : 'cross'\"\r\n-              size=\"16\"\r\n-              :color=\"uploadedFacePhotos > 0 ? 'var(--van-success-color)' : 'var(--van-text-color-3)'\"\r\n+            <MultiImageUpload\r\n+              v-model=\"facePhotos\"\r\n+              :disabled=\"isLoading\"\r\n+              @change=\"handleFacePhotosChange\"\r\n             />\r\n           </div>\r\n-          <div class=\"status-item\">\r\n-            <van-icon name=\"photo-o\" size=\"16\" color=\"var(--van-success-color)\" />\r\n-            <span>目标图片</span>\r\n-            <van-icon\r\n-              :name=\"targetImage ? 'success' : 'cross'\"\r\n-              size=\"16\"\r\n-              :color=\"targetImage ? 'var(--van-success-color)' : 'var(--van-text-color-3)'\"\r\n+\r\n+          <!-- 目标图片上传区域 -->\r\n+          <div class=\"target-image-section\">\r\n+            <h3 class=\"section-title\">\r\n+              <Image :size=\"20\" color=\"var(--success-color)\" class=\"section-icon\" />\r\n+              目标图片\r\n+            </h3>\r\n+            <!-- <p class=\"section-description\">上传需要换脸的目标图片</p> -->\r\n+\r\n+            <ImageUpload\r\n+              v-model=\"targetImage\"\r\n+              title=\"上传需要换脸的目标图片\"\r\n+              description=\"支持 JPG、PNG 格式，建议尺寸 512x512 以上\"\r\n+              icon=\"Image\"\r\n+              :icon-size=\"48\"\r\n+              :disabled=\"isLoading\"\r\n+              @change=\"handleTargetImageChange\"\r\n             />\r\n           </div>\r\n+\r\n+          <!-- 处理按钮 -->\r\n+          <div v-if=\"canProcess && !isLoading\" class=\"action-section\">\r\n+            <van-button\r\n+              @click=\"processImages\"\r\n+              type=\"primary\"\r\n+              size=\"large\"\r\n+              round\r\n+              block\r\n+              class=\"process-btn\"\r\n+            >\r\n+              <Users :size=\"20\" color=\"white\" class=\"btn-icon\" />\r\n+              开始换脸\r\n+            </van-button>\r\n+          </div>\r\n+\r\n+          <!-- 上传提示 -->\r\n+          <div v-else class=\"upload-tips\">\r\n+            <div class=\"tip-item\">\r\n+              <Image :size=\"16\" color=\"var(--primary-color)\" class=\"tip-icon\" />\r\n+              <span>已上传 {{ uploadedFacePhotos }}/4 张人脸照片</span>\r\n+            </div>\r\n+            <div class=\"tip-item\">\r\n+              <Image :size=\"16\" color=\"var(--success-color)\" class=\"tip-icon\" />\r\n+              <van-icon :name=\"targetImage ? 'success' : 'cross'\" size=\"16\" :color=\"targetImage ? 'var(--success-color)' : 'var(--error-color)'\" />\r\n+              <span>目标图片</span>\r\n+            </div>\r\n+          </div>\r\n         </div>\r\n-      </MobileCard>\r\n-    </div>\r\n \r\n-    <!-- 处理状态 -->\r\n-    <MobileCard v-if=\"isLoading\" variant=\"primary\">\r\n-      <ProcessingStatus\r\n-        status=\"loading\"\r\n-        title=\"正在处理换脸...\"\r\n-        description=\"请耐心等待，处理时间可能需要几分钟\"\r\n-        :progress=\"progressPercent\"\r\n-        :prompt-id=\"promptId\"\r\n-        :processing-time=\"processingTime\"\r\n-      />\r\n-    </MobileCard>\r\n+        <!-- 处理状态 -->\r\n+        <ProcessingStatus\r\n+          v-if=\"isLoading\"\r\n+          status=\"loading\"\r\n+          title=\"正在处理换脸...\"\r\n+          description=\"请耐心等待，处理时间可能需要几分钟\"\r\n+          :progress=\"progressPercent\"\r\n+          :prompt-id=\"promptId\"\r\n+          :processing-time=\"processingTime\"\r\n+        />\r\n \r\n-    <!-- 结果展示 -->\r\n-    <MobileCard v-if=\"resultImage\" title=\"换脸结果\" subtitle=\"对比查看换脸效果\" variant=\"success\">\r\n-      <ImageComparison\r\n-        :original-image=\"targetImageForComparison\"\r\n-        :result-image=\"resultImage\"\r\n-        @reset=\"resetProcess\"\r\n-      />\r\n-    </MobileCard>\r\n-\r\n-    <!-- 底部导航 -->\r\n-    <MobileTabbar />\r\n-  </MobileLayout>\r\n+        <!-- 结果展示区域 -->\r\n+        <ImageComparison\r\n+          v-if=\"resultImage\"\r\n+          :original-image=\"targetImageForComparison\"\r\n+          :result-image=\"resultImage\"\r\n+          @reset=\"resetProcess\"\r\n+        />\r\n+      </main>\r\n+    </div>\r\n+  </div>\r\n </template>\r\n \r\n <script setup>\r\n import { ref, computed, onMounted, onUnmounted } from 'vue'\r\n import { Toast } from 'vant'\r\n-import { Users } from 'lucide-vue-next'\r\n-import MobileLayout from '../components/MobileLayout.vue'\r\n-import MobileCard from '../components/MobileCard.vue'\r\n-import MobileTabbar from '../components/MobileTabbar.vue'\r\n+import { Image } from 'lucide-vue-next'\r\n import ImageUpload from '../components/ImageUpload.vue'\r\n import MultiImageUpload from '../components/MultiImageUpload.vue'\r\n import ProcessingStatus from '../components/ProcessingStatus.vue'\r\n import ImageComparison from '../components/ImageComparison.vue'\r\n import PointsDisplay from '../components/PointsDisplay.vue'\r\n+import UserInfo from '../components/UserInfo.vue'\r\n+import BackToHomeButton from '../components/BackToHomeButton.vue'\r\n+import { FaceSwapIcon } from '../components/icons'\r\n \r\n // 静态导入ComfyUI服务\r\n import { processFaceSwapImage } from '../services/comfyui.js'\r\n \r\n@@ -927,28 +916,5 @@\n   .tip-item {\r\n     font-size: 1rem;\r\n   }\r\n }\r\n-\r\n-/* 上传状态样式 */\r\n-.upload-status {\r\n-  display: flex;\r\n-  flex-direction: column;\r\n-  gap: 12px;\r\n-}\r\n-\r\n-.status-item {\r\n-  display: flex;\r\n-  align-items: center;\r\n-  gap: 12px;\r\n-  padding: 12px;\r\n-  background: rgba(255, 255, 255, 0.05);\r\n-  border-radius: 8px;\r\n-  border: 1px solid var(--van-border-color);\r\n-}\r\n-\r\n-.status-item span {\r\n-  flex: 1;\r\n-  font-size: 14px;\r\n-  color: var(--van-text-color);\r\n-}\r\n </style>\r\n"
                },
                {
                    "date": 1752374951510,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -14,11 +14,8 @@\n         </h1>\r\n         <p class=\"page-description\">上传4张人脸照片和1张目标图片，AI将为您智能换脸</p>\r\n       </header>\r\n \r\n-      <!-- 体验点显示 -->\r\n-      <PointsDisplay ref=\"pointsDisplayRef\" />\r\n-\r\n       <main class=\"page-content\">\r\n         <div v-if=\"!resultImage\" class=\"upload-section\">\r\n           <!-- 人脸照片上传区域 -->\r\n           <div class=\"face-photos-section\">\r\n"
                },
                {
                    "date": 1752374978088,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -110,9 +110,8 @@\n import ImageUpload from '../components/ImageUpload.vue'\r\n import MultiImageUpload from '../components/MultiImageUpload.vue'\r\n import ProcessingStatus from '../components/ProcessingStatus.vue'\r\n import ImageComparison from '../components/ImageComparison.vue'\r\n-import PointsDisplay from '../components/PointsDisplay.vue'\r\n import UserInfo from '../components/UserInfo.vue'\r\n import BackToHomeButton from '../components/BackToHomeButton.vue'\r\n import { FaceSwapIcon } from '../components/icons'\r\n \r\n"
                },
                {
                    "date": 1752375004010,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -136,11 +136,10 @@\n const isDragging = ref(false)\r\n const comparisonContainer = ref(null)\r\n const startTime = ref(null)\r\n \r\n-// 体验点组件引用\r\n-const pointsDisplayRef = ref(null)\r\n \r\n+\r\n // 使用VantUI Toast系统\r\n \r\n // 计算属性\r\n const uploadedFacePhotos = computed(() => {\r\n"
                },
                {
                    "date": 1752375016371,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -205,13 +205,10 @@\n       const endTime = Date.now()\r\n       const duration = Math.round((endTime - startTime.value) / 1000)\r\n       processingTime.value = `${duration}秒`\r\n \r\n-      // 更新体验点显示\r\n-      if (pointsDisplayRef.value) {\r\n-        pointsDisplayRef.value.updatePointsStatus()\r\n-      }\r\n \r\n+\r\n       // 显示成功toast\r\n       const pointsInfo = result.pointsConsumed ? `（消耗${result.pointsConsumed}点）` : ''\r\n       Toast.success(`🎉 换脸完成！${pointsInfo}可以拖拽中间线对比目标图像和换脸结果`)\r\n       console.log('✅ 换脸处理完成')\r\n"
                },
                {
                    "date": 1752375077075,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,14 +1,15 @@\n <template>\r\n   <div class=\"feature-page\">\r\n-    <!-- 右上角用户信息 -->\r\n-    <div class=\"top-corner\">\r\n-      <UserInfo @login=\"handleUserLogin\" @logout=\"handleUserLogout\" />\r\n-    </div>\r\n+    <!-- 顶部导航 -->\r\n+    <TopNavigation\r\n+      title=\"极速换脸\"\r\n+      @login=\"handleUserLogin\"\r\n+      @logout=\"handleUserLogout\"\r\n+    />\r\n \r\n     <div class=\"container\">\r\n       <header class=\"page-header\">\r\n-        <BackToHomeButton class=\"back-btn\" />\r\n         <h1 class=\"page-title\">\r\n           <FaceSwapIcon :size=\"32\" color=\"var(--warning-color)\" class=\"page-icon\" />\r\n           极速换脸\r\n         </h1>\r\n"
                },
                {
                    "date": 1752375090665,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -111,10 +111,9 @@\n import ImageUpload from '../components/ImageUpload.vue'\r\n import MultiImageUpload from '../components/MultiImageUpload.vue'\r\n import ProcessingStatus from '../components/ProcessingStatus.vue'\r\n import ImageComparison from '../components/ImageComparison.vue'\r\n-import UserInfo from '../components/UserInfo.vue'\r\n-import BackToHomeButton from '../components/BackToHomeButton.vue'\r\n+import TopNavigation from '../components/TopNavigation.vue'\r\n import { FaceSwapIcon } from '../components/icons'\r\n \r\n // 静态导入ComfyUI服务\r\n import { processFaceSwapImage } from '../services/comfyui.js'\r\n"
                },
                {
                    "date": 1752375262925,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -309,20 +309,13 @@\n <style scoped>\r\n .feature-page {\r\n   min-height: 100vh;\r\n   padding: 20px;\r\n+  padding-top: 80px; /* 为固定导航栏留出空间 */\r\n   background: linear-gradient(135deg, var(--bg-primary) 0%, var(--bg-secondary) 100%);\r\n   position: relative;\r\n }\r\n \r\n-/* 右上角用户信息 */\r\n-.top-corner {\r\n-  position: fixed;\r\n-  top: 20px;\r\n-  right: 20px;\r\n-  z-index: 1000;\r\n-}\r\n-\r\n .container {\r\n   max-width: 1000px;\r\n   margin: 0 auto;\r\n }\r\n"
                },
                {
                    "date": 1752383881717,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,105 +1,106 @@\n <template>\r\n-  <div class=\"feature-page\">\r\n-    <!-- 顶部导航 -->\r\n-    <TopNavigation\r\n-      title=\"极速换脸\"\r\n-      @login=\"handleUserLogin\"\r\n-      @logout=\"handleUserLogout\"\r\n-    />\r\n+  <AIProcessingTemplate\r\n+    title=\"极速换脸\"\r\n+    description=\"上传人脸照片和目标图片，AI智能换脸\"\r\n+    :title-icon=\"FaceSwapIcon\"\r\n+    title-icon-color=\"var(--van-warning-color)\"\r\n+    :is-processing=\"isLoading\"\r\n+    :can-process=\"canProcess\"\r\n+    :show-upload-tips=\"!canProcess\"\r\n+    process-button-text=\"开始换脸\"\r\n+    :process-button-icon=\"Users\"\r\n+    :progress=\"progressPercent\"\r\n+    processing-title=\"正在处理换脸...\"\r\n+    processing-description=\"请耐心等待，处理时间可能需要几分钟\"\r\n+    :processing-info=\"{ promptId, processingTime }\"\r\n+    :result-data=\"resultImage\"\r\n+    @login=\"handleUserLogin\"\r\n+    @logout=\"handleUserLogout\"\r\n+    @process=\"processImages\"\r\n+  >\r\n+    <!-- 输入区域 -->\r\n+    <template #inputs>\r\n+      <!-- 人脸照片上传 -->\r\n+      <MobileCard title=\"人脸照片 (1-4张)\" icon=\"friends-o\" inset>\r\n+        <VantMultiImageUpload\r\n+          v-model=\"facePhotos\"\r\n+          :max-count=\"4\"\r\n+          :min-count=\"1\"\r\n+          upload-text=\"添加人脸\"\r\n+          :disabled=\"isLoading\"\r\n+          :tips=\"[\r\n+            '支持 JPG、PNG 格式',\r\n+            '建议尺寸 512x512 以上',\r\n+            '人脸清晰、正面效果更佳',\r\n+            '可一次选择多张照片'\r\n+          ]\"\r\n+          @change=\"handleFacePhotosChange\"\r\n+        />\r\n+      </MobileCard>\r\n \r\n-    <div class=\"container\">\r\n-      <header class=\"page-header\">\r\n-        <h1 class=\"page-title\">\r\n-          <FaceSwapIcon :size=\"32\" color=\"var(--warning-color)\" class=\"page-icon\" />\r\n-          极速换脸\r\n-        </h1>\r\n-        <p class=\"page-description\">上传4张人脸照片和1张目标图片，AI将为您智能换脸</p>\r\n-      </header>\r\n+      <!-- 目标图片上传 -->\r\n+      <MobileCard title=\"目标图片\" icon=\"photo-o\" inset>\r\n+        <VantImageUpload\r\n+          v-model=\"targetImage\"\r\n+          upload-text=\"选择目标图片\"\r\n+          description=\"上传需要换脸的目标图片\"\r\n+          upload-icon=\"photograph\"\r\n+          :disabled=\"isLoading\"\r\n+          :tips=\"[\r\n+            '支持 JPG、PNG 格式',\r\n+            '建议尺寸 512x512 以上',\r\n+            '图片清晰度影响换脸效果'\r\n+          ]\"\r\n+          @change=\"handleTargetImageChange\"\r\n+        />\r\n+      </MobileCard>\r\n+    </template>\r\n \r\n-      <main class=\"page-content\">\r\n-        <div v-if=\"!resultImage\" class=\"upload-section\">\r\n-          <!-- 人脸照片上传区域 -->\r\n-          <div class=\"face-photos-section\">\r\n-            <h3 class=\"section-title\">\r\n-              <FaceSwapIcon :size=\"20\" color=\"var(--primary-color)\" class=\"section-icon\" />\r\n-              人脸照片 (1-4张)\r\n-            </h3>\r\n-            <!-- <p class=\"section-description\">一次性选择1-4张清晰的人脸照片</p> -->\r\n+    <!-- 上传提示 -->\r\n+    <template #upload-tips>\r\n+      <div class=\"upload-status\">\r\n+        <div class=\"status-item\">\r\n+          <van-icon\r\n+            :name=\"facePhotos.length > 0 ? 'friends' : 'friends-o'\"\r\n+            :color=\"facePhotos.length > 0 ? 'var(--van-success-color)' : 'var(--van-text-color-3)'\"\r\n+            size=\"16\"\r\n+          />\r\n+          <span :class=\"{ 'text-success': facePhotos.length > 0 }\">\r\n+            已上传 {{ facePhotos.length }}/4 张人脸照片\r\n+          </span>\r\n+        </div>\r\n \r\n-            <MultiImageUpload\r\n-              v-model=\"facePhotos\"\r\n-              :disabled=\"isLoading\"\r\n-              @change=\"handleFacePhotosChange\"\r\n-            />\r\n-          </div>\r\n-\r\n-          <!-- 目标图片上传区域 -->\r\n-          <div class=\"target-image-section\">\r\n-            <h3 class=\"section-title\">\r\n-              <Image :size=\"20\" color=\"var(--success-color)\" class=\"section-icon\" />\r\n-              目标图片\r\n-            </h3>\r\n-            <!-- <p class=\"section-description\">上传需要换脸的目标图片</p> -->\r\n-\r\n-            <ImageUpload\r\n-              v-model=\"targetImage\"\r\n-              title=\"上传需要换脸的目标图片\"\r\n-              description=\"支持 JPG、PNG 格式，建议尺寸 512x512 以上\"\r\n-              icon=\"Image\"\r\n-              :icon-size=\"48\"\r\n-              :disabled=\"isLoading\"\r\n-              @change=\"handleTargetImageChange\"\r\n-            />\r\n-          </div>\r\n-\r\n-          <!-- 处理按钮 -->\r\n-          <div v-if=\"canProcess && !isLoading\" class=\"action-section\">\r\n-            <van-button\r\n-              @click=\"processImages\"\r\n-              type=\"primary\"\r\n-              size=\"large\"\r\n-              round\r\n-              block\r\n-              class=\"process-btn\"\r\n-            >\r\n-              <Users :size=\"20\" color=\"white\" class=\"btn-icon\" />\r\n-              开始换脸\r\n-            </van-button>\r\n-          </div>\r\n-\r\n-          <!-- 上传提示 -->\r\n-          <div v-else class=\"upload-tips\">\r\n-            <div class=\"tip-item\">\r\n-              <Image :size=\"16\" color=\"var(--primary-color)\" class=\"tip-icon\" />\r\n-              <span>已上传 {{ uploadedFacePhotos }}/4 张人脸照片</span>\r\n-            </div>\r\n-            <div class=\"tip-item\">\r\n-              <Image :size=\"16\" color=\"var(--success-color)\" class=\"tip-icon\" />\r\n-              <van-icon :name=\"targetImage ? 'success' : 'cross'\" size=\"16\" :color=\"targetImage ? 'var(--success-color)' : 'var(--error-color)'\" />\r\n-              <span>目标图片</span>\r\n-            </div>\r\n-          </div>\r\n+        <div class=\"status-item\">\r\n+          <van-icon\r\n+            :name=\"targetImage ? 'photo' : 'photo-o'\"\r\n+            :color=\"targetImage ? 'var(--van-success-color)' : 'var(--van-text-color-3)'\"\r\n+            size=\"16\"\r\n+          />\r\n+          <span :class=\"{ 'text-success': targetImage }\">\r\n+            {{ targetImage ? '目标图片已上传' : '请上传目标图片' }}\r\n+          </span>\r\n         </div>\r\n+      </div>\r\n+    </template>\r\n \r\n-        <!-- 处理状态 -->\r\n-        <ProcessingStatus\r\n-          v-if=\"isLoading\"\r\n-          status=\"loading\"\r\n-          title=\"正在处理换脸...\"\r\n-          description=\"请耐心等待，处理时间可能需要几分钟\"\r\n-          :progress=\"progressPercent\"\r\n-          :prompt-id=\"promptId\"\r\n-          :processing-time=\"processingTime\"\r\n+    <!-- 结果展示 -->\r\n+    <template #result=\"{ result }\">\r\n+      <VantImageComparison\r\n+        :original-image=\"targetImageForComparison\"\r\n+        :result-image=\"result\"\r\n+        :process-info=\"{\r\n+          promptId,\r\n+          processingTime,\r\n+          timestamp: Date.now(),\r\n+          model: 'FaceSwap v3.0'\r\n+        }\"\r\n+        @reset=\"resetProcess\"\r\n+        @download=\"handleDownload\"\r\n+      />\r\n+    </template>\r\n+  </AIProcessingTemplate>\r\n         />\r\n-\r\n-        <!-- 结果展示区域 -->\r\n-        <ImageComparison\r\n-          v-if=\"resultImage\"\r\n-          :original-image=\"targetImageForComparison\"\r\n-          :result-image=\"resultImage\"\r\n-          @reset=\"resetProcess\"\r\n-        />\r\n       </main>\r\n     </div>\r\n   </div>\r\n </template>\r\n"
                },
                {
                    "date": 1752383913104,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -98,23 +98,21 @@\n         @download=\"handleDownload\"\r\n       />\r\n     </template>\r\n   </AIProcessingTemplate>\r\n-        />\r\n-      </main>\r\n-    </div>\r\n-  </div>\r\n </template>\r\n \r\n <script setup>\r\n import { ref, computed, onMounted, onUnmounted } from 'vue'\r\n import { Toast } from 'vant'\r\n-import { Image } from 'lucide-vue-next'\r\n-import ImageUpload from '../components/ImageUpload.vue'\r\n-import MultiImageUpload from '../components/MultiImageUpload.vue'\r\n-import ProcessingStatus from '../components/ProcessingStatus.vue'\r\n-import ImageComparison from '../components/ImageComparison.vue'\r\n-import TopNavigation from '../components/TopNavigation.vue'\r\n+import { Users } from 'lucide-vue-next'\r\n+import {\r\n+  AIProcessingTemplate,\r\n+  MobileCard,\r\n+  VantImageUpload,\r\n+  VantMultiImageUpload,\r\n+  VantImageComparison\r\n+} from '../components/mobile'\r\n import { FaceSwapIcon } from '../components/icons'\r\n \r\n // 静态导入ComfyUI服务\r\n import { processFaceSwapImage } from '../services/comfyui.js'\r\n"
                },
                {
                    "date": 1752383939511,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -291,8 +291,14 @@\n     stopDrag()\r\n   }\r\n })\r\n \r\n+// 处理下载事件\r\n+const handleDownload = (imageUrl) => {\r\n+  console.log('下载图片:', imageUrl)\r\n+  Toast.success('图片下载成功')\r\n+}\r\n+\r\n // 用户登录成功回调\r\n const handleUserLogin = (data) => {\r\n   console.log('用户登录成功:', data)\r\n   // 可以在这里触发一些需要登录状态的操作\r\n"
                },
                {
                    "date": 1752384015602,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -311,600 +311,40 @@\n }\r\n </script>\r\n \r\n <style scoped>\r\n-.feature-page {\r\n-  min-height: 100vh;\r\n-  padding: 20px;\r\n-  padding-top: 80px; /* 为固定导航栏留出空间 */\r\n-  background: linear-gradient(135deg, var(--bg-primary) 0%, var(--bg-secondary) 100%);\r\n-  position: relative;\r\n-}\r\n-\r\n-.container {\r\n-  max-width: 1000px;\r\n-  margin: 0 auto;\r\n-}\r\n-\r\n-.page-header {\r\n-  text-align: center;\r\n-  margin-bottom: 40px;\r\n-}\r\n-\r\n-.page-title {\r\n-  color: var(--text-color);\r\n-  font-size: 2.5rem;\r\n-  font-weight: 700;\r\n-  margin-bottom: 12px;\r\n+/* 上传状态样式 */\r\n+.upload-status {\r\n   display: flex;\r\n-  align-items: center;\r\n-  justify-content: center;\r\n-  gap: 16px;\r\n-}\r\n-\r\n-.page-icon {\r\n-  flex-shrink: 0;\r\n-}\r\n-\r\n-.page-description {\r\n-  color: var(--text-light);\r\n-  font-size: 1.1rem;\r\n-  margin: 0;\r\n-  line-height: 1.5;\r\n-}\r\n-\r\n-.section-title {\r\n-  color: var(--text-color);\r\n-  font-size: 1.3rem;\r\n-  font-weight: 600;\r\n-  margin-bottom: 12px;\r\n-  display: flex;\r\n-  align-items: center;\r\n-  gap: 12px;\r\n-}\r\n-\r\n-.section-icon {\r\n-  flex-shrink: 0;\r\n-}\r\n-\r\n-.section-description {\r\n-  color: var(--text-light);\r\n-  font-size: 0.95rem;\r\n-  margin-bottom: 24px;\r\n-  line-height: 1.5;\r\n-}\r\n-\r\n-.face-photos-grid {\r\n-  display: grid;\r\n-  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\r\n-  gap: 20px;\r\n-  margin-bottom: 32px;\r\n-}\r\n-\r\n-.upload-tips {\r\n-  background: var(--bg-card);\r\n-  border: 1px solid var(--border-color);\r\n-  border-radius: 12px;\r\n-  padding: 20px;\r\n-  margin-top: 24px;\r\n-}\r\n-\r\n-.tip-item {\r\n-  display: flex;\r\n-  align-items: center;\r\n-  gap: 12px;\r\n-  margin-bottom: 12px;\r\n-  color: var(--text-light);\r\n-  font-size: 0.95rem;\r\n-}\r\n-\r\n-.tip-item:last-child {\r\n-  margin-bottom: 0;\r\n-}\r\n-\r\n-.tip-icon {\r\n-  flex-shrink: 0;\r\n-}\r\n-\r\n-.process-btn {\r\n-  margin-top: 24px;\r\n-}\r\n-\r\n-.process-btn .van-button__content {\r\n-  display: flex;\r\n-  align-items: center;\r\n-  justify-content: center;\r\n+  flex-direction: column;\r\n   gap: 8px;\r\n+  padding: 12px;\r\n+  background: var(--van-background-2, #f7f8fa);\r\n+  border-radius: 6px;\r\n }\r\n \r\n-.loading-icon,\r\n-.btn-icon {\r\n-  flex-shrink: 0;\r\n-}\r\n-\r\n-.back-btn {\r\n-  display: inline-flex;\r\n-  align-items: center;\r\n-  gap: 8px;\r\n-  color: rgba(255, 255, 255, 0.9);\r\n-  text-decoration: none;\r\n-  font-size: 1rem;\r\n-  margin-bottom: 20px;\r\n-  transition: var(--transition);\r\n-}\r\n-\r\n-.back-btn:hover {\r\n-  color: white;\r\n-  transform: translateX(-4px);\r\n-}\r\n-\r\n-.back-icon {\r\n-  font-size: 1.2rem;\r\n-}\r\n-\r\n-.page-title {\r\n-  font-size: 3rem;\r\n-  color: white;\r\n-  margin-bottom: 16px;\r\n-  text-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);\r\n-}\r\n-\r\n-.page-icon {\r\n-  margin-right: 16px;\r\n-}\r\n-\r\n-.page-description {\r\n-  font-size: 1.2rem;\r\n-  color: rgba(255, 255, 255, 0.8);\r\n-}\r\n-\r\n-.page-content {\r\n+.status-item {\r\n   display: flex;\r\n-  flex-direction: column;\r\n-  gap: 40px;\r\n-}\r\n-\r\n-.upload-section {\r\n-  display: flex;\r\n-  flex-direction: column;\r\n-  gap: 40px;\r\n-}\r\n-\r\n-/* 人脸照片区域样式 */\r\n-.face-photos-section, .target-image-section {\r\n-  background: var(--bg-card);\r\n-  border: 1px solid var(--border-color);\r\n-  border-radius: 20px;\r\n-  padding: 32px;\r\n-  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);\r\n-}\r\n-\r\n-.section-title {\r\n-  display: flex;\r\n   align-items: center;\r\n-  gap: 12px;\r\n-  font-size: 1.5rem;\r\n-  color: var(--text-color);\r\n-  margin-bottom: 16px;\r\n-}\r\n-\r\n-.section-icon {\r\n-  font-size: 1.8rem;\r\n-}\r\n-\r\n-.section-description {\r\n-  color: var(--text-light);\r\n-  margin-bottom: 24px;\r\n-  line-height: 1.6;\r\n-}\r\n-\r\n-/* 人脸照片网格样式已移至 MultiImageUpload 组件 */\r\n-\r\n-/* 人脸照片相关样式已移至 MultiImageUpload 组件 */\r\n-\r\n-.target-image-card {\r\n-  max-width: 400px;\r\n-  margin: 0 auto;\r\n-  background: var(--bg-dark-light);\r\n-  border: 1px solid var(--border-color);\r\n-  border-radius: 16px;\r\n-  overflow: hidden;\r\n-  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.3);\r\n-  transition: var(--transition);\r\n-}\r\n-\r\n-.target-image-card:hover {\r\n-  border-color: var(--primary-color);\r\n-  box-shadow: 0 12px 32px rgba(0, 0, 0, 0.4);\r\n-}\r\n-\r\n-.target-image-area {\r\n-  display: block;\r\n-  cursor: pointer;\r\n-  min-height: 300px;\r\n-  display: flex;\r\n-  align-items: center;\r\n-  justify-content: center;\r\n-  flex-direction: column;\r\n-  padding: 32px;\r\n-}\r\n-\r\n-.target-image-placeholder {\r\n-  text-align: center;\r\n-  color: var(--text-light);\r\n-}\r\n-\r\n-.target-image-placeholder h3 {\r\n-  margin: 16px 0 12px;\r\n-  color: var(--text-color);\r\n-  font-size: 1.2rem;\r\n-}\r\n-\r\n-.target-image-placeholder p {\r\n-  font-size: 0.9rem;\r\n-  margin: 0;\r\n-  line-height: 1.5;\r\n-}\r\n-\r\n-.target-image-preview {\r\n-  position: relative;\r\n-  width: 100%;\r\n-  height: 100%;\r\n-}\r\n-\r\n-/* 上传提示样式已移至 shared.css */\r\n-\r\n-/* 处理状态样式已移至 shared.css */\r\n-\r\n-.hidden {\r\n-  display: none;\r\n-}\r\n-\r\n-.image-preview {\r\n-  position: relative;\r\n-  border-radius: 12px;\r\n-  overflow: hidden;\r\n-}\r\n-\r\n-.preview-image {\r\n-  max-width: 100%;\r\n-  max-height: 200px;\r\n-  border-radius: 12px;\r\n-  display: block;\r\n-}\r\n-\r\n-.image-overlay {\r\n-  position: absolute;\r\n-  top: 0;\r\n-  left: 0;\r\n-  right: 0;\r\n-  bottom: 0;\r\n-  background: rgba(0, 0, 0, 0.7);\r\n-  color: white;\r\n-  display: flex;\r\n-  align-items: center;\r\n-  justify-content: center;\r\n-  opacity: 0;\r\n-  transition: var(--transition);\r\n-}\r\n-\r\n-.image-preview:hover .image-overlay {\r\n-  opacity: 1;\r\n-}\r\n-\r\n-.upload-grid {\r\n-  display: grid;\r\n-  grid-template-columns: 1fr auto 1fr;\r\n-  gap: 32px;\r\n-  align-items: center;\r\n-  margin-bottom: 32px;\r\n-}\r\n-\r\n-.upload-card {\r\n-  background: var(--bg-card);\r\n-  border: 1px solid var(--border-color);\r\n-  border-radius: 20px;\r\n-  padding: 24px;\r\n-  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);\r\n-}\r\n-\r\n-.upload-title {\r\n-  text-align: center;\r\n-  margin-bottom: 16px;\r\n-  color: var(--text-color);\r\n-  font-size: 1.2rem;\r\n-}\r\n-\r\n-.upload-area {\r\n-  display: block;\r\n-  cursor: pointer;\r\n-  border: 3px dashed var(--border-color);\r\n-  border-radius: 16px;\r\n-  padding: 32px 16px;\r\n-  text-align: center;\r\n-  transition: var(--transition);\r\n-  min-height: 250px;\r\n-  display: flex;\r\n-  align-items: center;\r\n-  justify-content: center;\r\n-  flex-direction: column;\r\n-}\r\n-\r\n-.upload-area:hover {\r\n-  border-color: var(--primary-color);\r\n-  background: rgba(102, 126, 234, 0.05);\r\n-}\r\n-\r\n-.upload-placeholder p {\r\n-  margin: 12px 0 4px;\r\n-  color: var(--text-color);\r\n-  font-weight: 600;\r\n-}\r\n-\r\n-.upload-hint {\r\n-  font-size: 0.85rem;\r\n-  color: var(--text-light);\r\n-}\r\n-\r\n-.upload-icon {\r\n-  font-size: 3rem;\r\n-  margin-bottom: 8px;\r\n-}\r\n-\r\n-.swap-arrow {\r\n-  display: flex;\r\n-  align-items: center;\r\n-  justify-content: center;\r\n-  background: rgba(255, 255, 255, 0.9);\r\n-  border-radius: 50%;\r\n-  width: 60px;\r\n-  height: 60px;\r\n-  box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);\r\n-}\r\n-\r\n-.arrow-icon {\r\n-  font-size: 1.5rem;\r\n-  color: var(--primary-color);\r\n-  font-weight: bold;\r\n-}\r\n-\r\n-.action-section {\r\n-  text-align: center;\r\n-}\r\n-\r\n-.swap-options {\r\n-  display: flex;\r\n-  justify-content: center;\r\n-  gap: 32px;\r\n-  margin-bottom: 24px;\r\n-  background: var(--bg-card);\r\n-  border: 1px solid var(--border-color);\r\n-  padding: 20px;\r\n-  border-radius: 12px;\r\n-}\r\n-\r\n-.option-group label {\r\n-  display: flex;\r\n-  align-items: center;\r\n   gap: 8px;\r\n-  color: var(--text-color);\r\n-  font-weight: 500;\r\n-  cursor: pointer;\r\n+  font-size: 14px;\r\n+  color: var(--van-text-color-2, #646566);\r\n }\r\n \r\n-.option-group input[type=\"checkbox\"] {\r\n-  width: 18px;\r\n-  height: 18px;\r\n-  accent-color: var(--primary-color);\r\n+.text-success {\r\n+  color: var(--van-success-color, #07c160);\r\n }\r\n \r\n-.swap-btn {\r\n-  font-size: 1.1rem;\r\n-  padding: 16px 32px;\r\n-  min-width: 200px;\r\n-}\r\n-\r\n-.result-section {\r\n-  display: flex;\r\n-  justify-content: center;\r\n-}\r\n-\r\n-.result-card {\r\n-  background: var(--bg-card);\r\n-  border: 1px solid var(--border-color);\r\n-  border-radius: 20px;\r\n-  padding: 32px;\r\n-  text-align: center;\r\n-  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);\r\n-  max-width: 800px;\r\n-  width: 100%;\r\n-}\r\n-\r\n-.result-title {\r\n-  font-size: 1.5rem;\r\n-  margin-bottom: 24px;\r\n-  color: var(--text-color);\r\n-}\r\n-\r\n-.result-comparison {\r\n-  display: grid;\r\n-  grid-template-columns: 1fr auto 1fr;\r\n-  gap: 24px;\r\n-  align-items: center;\r\n-  margin: 24px 0;\r\n-}\r\n-\r\n-.comparison-item {\r\n-  text-align: center;\r\n-}\r\n-\r\n-.comparison-item h4 {\r\n-  margin-bottom: 12px;\r\n-  color: var(--text-color);\r\n-}\r\n-\r\n-.comparison-image {\r\n-  max-width: 100%;\r\n-  max-height: 300px;\r\n-  border-radius: 12px;\r\n-  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);\r\n-}\r\n-\r\n-.comparison-arrow {\r\n-  font-size: 2rem;\r\n-  color: var(--primary-color);\r\n-  font-weight: bold;\r\n-}\r\n-\r\n-/* 结果展示样式 */\r\n-.result-container {\r\n-  background: var(--bg-card);\r\n-  border: 1px solid var(--border-color);\r\n-  border-radius: 20px;\r\n-  padding: 32px;\r\n-  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);\r\n-}\r\n-\r\n-.comparison-container {\r\n-  position: relative;\r\n-  margin: 24px 0;\r\n-  border-radius: 16px;\r\n-  overflow: hidden;\r\n-  box-shadow: 0 12px 32px rgba(0, 0, 0, 0.15);\r\n-  user-select: none;\r\n-  background: #f8f9fa;\r\n-  width: 100%;\r\n-  height: 80vh;\r\n-  min-height: 700px;\r\n-  max-height: 900px;\r\n-}\r\n-\r\n-.comparison-wrapper {\r\n-  position: relative;\r\n-  width: 100%;\r\n-  height: 100%;\r\n-  overflow: hidden;\r\n-  background: var(--bg-dark);\r\n-}\r\n-\r\n-.image-before, .image-after {\r\n-  position: absolute;\r\n-  top: 0;\r\n-  left: 0;\r\n-  width: 100%;\r\n-  height: 100%;\r\n-  display: flex;\r\n-  align-items: center;\r\n-  justify-content: center;\r\n-}\r\n-\r\n-.comparison-image {\r\n-  max-width: 100%;\r\n-  max-height: 100%;\r\n-  width: auto;\r\n-  height: auto;\r\n-  object-fit: contain;\r\n-  object-position: center;\r\n-  display: block;\r\n-}\r\n-\r\n-.image-label {\r\n-  position: absolute;\r\n-  top: 16px;\r\n-  left: 16px;\r\n-  background: rgba(0, 0, 0, 0.7);\r\n-  color: white;\r\n-  padding: 8px 16px;\r\n-  border-radius: 20px;\r\n-  font-size: 0.9rem;\r\n-  font-weight: 500;\r\n-}\r\n-\r\n-.slider-handle {\r\n-  position: absolute;\r\n-  top: 0;\r\n-  bottom: 0;\r\n-  width: 4px;\r\n-  cursor: ew-resize;\r\n-  z-index: 10;\r\n-  display: flex;\r\n-  align-items: center;\r\n-  justify-content: center;\r\n-}\r\n-\r\n-.slider-line {\r\n-  width: 4px;\r\n-  height: 100%;\r\n-  background: white;\r\n-  box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);\r\n-}\r\n-\r\n-.slider-button {\r\n-  position: absolute;\r\n-  background: white;\r\n-  border-radius: 50%;\r\n-  width: 40px;\r\n-  height: 40px;\r\n-  display: flex;\r\n-  align-items: center;\r\n-  justify-content: center;\r\n-  font-size: 1.2rem;\r\n-  color: var(--primary-color);\r\n-  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);\r\n-  cursor: ew-resize;\r\n-  user-select: none;\r\n-}\r\n-\r\n-.result-actions {\r\n-  display: flex;\r\n-  gap: 16px;\r\n-  justify-content: center;\r\n-  margin-top: 24px;\r\n-}\r\n-\r\n-/* 处理信息样式 */\r\n-.process-info {\r\n-  display: flex;\r\n-  gap: 24px;\r\n-  justify-content: center;\r\n-  flex-wrap: wrap;\r\n-}\r\n-\r\n-/* 按钮样式已移至AppButton组件 */\r\n-\r\n+/* 移动端优化 */\r\n @media (max-width: 768px) {\r\n-  .page-title {\r\n-    font-size: 2rem;\r\n+  .status-item {\r\n+    font-size: 13px;\r\n   }\r\n+}\r\n \r\n-  .face-photos-grid {\r\n-    grid-template-columns: repeat(2, 1fr);\r\n-    gap: 16px;\r\n+/* 深色主题适配 */\r\n+@media (prefers-color-scheme: dark) {\r\n+  .upload-status {\r\n+    background: var(--van-background-2, #1e1e1e);\r\n   }\r\n-\r\n-  .comparison-container {\r\n-    height: 60vh;\r\n-    min-height: 400px;\r\n-    max-height: 600px;\r\n-    margin: 16px 0;\r\n-  }\r\n-\r\n-  .result-actions {\r\n-    flex-direction: column;\r\n-    gap: 12px;\r\n-  }\r\n-\r\n-  .process-info {\r\n-    flex-direction: column;\r\n-    gap: 16px;\r\n-    text-align: center;\r\n-  }\r\n-\r\n-  .upload-tips {\r\n-    padding: 16px;\r\n-  }\r\n-\r\n-  .tip-item {\r\n-    font-size: 1rem;\r\n-  }\r\n }\r\n </style>\r\n"
                },
                {
                    "date": 1752394149545,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,24 +1,23 @@\n <template>\r\n-  <AIProcessingTemplate\r\n-    title=\"极速换脸\"\r\n-    description=\"上传人脸照片和目标图片，AI智能换脸\"\r\n+  <UnifiedImageProcessingTemplate\r\n+    function-id=\"face-swap\"\r\n     :title-icon=\"FaceSwapIcon\"\r\n     title-icon-color=\"var(--van-warning-color)\"\r\n+    :process-button-icon=\"Users\"\r\n     :is-processing=\"isLoading\"\r\n-    :can-process=\"canProcess\"\r\n-    :show-upload-tips=\"!canProcess\"\r\n-    process-button-text=\"开始换脸\"\r\n-    :process-button-icon=\"Users\"\r\n     :progress=\"progressPercent\"\r\n-    processing-title=\"正在处理换脸...\"\r\n-    processing-description=\"请耐心等待，处理时间可能需要几分钟\"\r\n     :processing-info=\"{ promptId, processingTime }\"\r\n     :result-data=\"resultImage\"\r\n+    :original-image-for-comparison=\"originalImageForComparison\"\r\n     @login=\"handleUserLogin\"\r\n     @logout=\"handleUserLogout\"\r\n     @process=\"processImages\"\r\n-  >\r\n+    @reset=\"resetProcess\"\r\n+    @download=\"handleDownload\"\r\n+    @upload-change=\"handleUploadChange\"\r\n+    ref=\"templateRef\"\r\n+  />\r\n     <!-- 输入区域 -->\r\n     <template #inputs>\r\n       <!-- 人脸照片上传 -->\r\n       <MobileCard title=\"人脸照片 (1-4张)\" icon=\"friends-o\" inset>\r\n"
                },
                {
                    "date": 1752394180249,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -16,70 +16,9 @@\n     @download=\"handleDownload\"\r\n     @upload-change=\"handleUploadChange\"\r\n     ref=\"templateRef\"\r\n   />\r\n-    <!-- 输入区域 -->\r\n-    <template #inputs>\r\n-      <!-- 人脸照片上传 -->\r\n-      <MobileCard title=\"人脸照片 (1-4张)\" icon=\"friends-o\" inset>\r\n-        <VantMultiImageUpload\r\n-          v-model=\"facePhotos\"\r\n-          :max-count=\"4\"\r\n-          :min-count=\"1\"\r\n-          upload-text=\"添加人脸\"\r\n-          :disabled=\"isLoading\"\r\n-          :tips=\"[\r\n-            '支持 JPG、PNG 格式',\r\n-            '建议尺寸 512x512 以上',\r\n-            '人脸清晰、正面效果更佳',\r\n-            '可一次选择多张照片'\r\n-          ]\"\r\n-          @change=\"handleFacePhotosChange\"\r\n-        />\r\n-      </MobileCard>\r\n-\r\n-      <!-- 目标图片上传 -->\r\n-      <MobileCard title=\"目标图片\" icon=\"photo-o\" inset>\r\n-        <VantImageUpload\r\n-          v-model=\"targetImage\"\r\n-          upload-text=\"选择目标图片\"\r\n-          description=\"上传需要换脸的目标图片\"\r\n-          upload-icon=\"photograph\"\r\n-          :disabled=\"isLoading\"\r\n-          :tips=\"[\r\n-            '支持 JPG、PNG 格式',\r\n-            '建议尺寸 512x512 以上',\r\n-            '图片清晰度影响换脸效果'\r\n-          ]\"\r\n-          @change=\"handleTargetImageChange\"\r\n-        />\r\n-      </MobileCard>\r\n-    </template>\r\n-\r\n-    <!-- 上传提示 -->\r\n-    <template #upload-tips>\r\n-      <div class=\"upload-status\">\r\n-        <div class=\"status-item\">\r\n-          <van-icon\r\n-            :name=\"facePhotos.length > 0 ? 'friends' : 'friends-o'\"\r\n-            :color=\"facePhotos.length > 0 ? 'var(--van-success-color)' : 'var(--van-text-color-3)'\"\r\n-            size=\"16\"\r\n-          />\r\n-          <span :class=\"{ 'text-success': facePhotos.length > 0 }\">\r\n-            已上传 {{ facePhotos.length }}/4 张人脸照片\r\n-          </span>\r\n         </div>\r\n-\r\n-        <div class=\"status-item\">\r\n-          <van-icon\r\n-            :name=\"targetImage ? 'photo' : 'photo-o'\"\r\n-            :color=\"targetImage ? 'var(--van-success-color)' : 'var(--van-text-color-3)'\"\r\n-            size=\"16\"\r\n-          />\r\n-          <span :class=\"{ 'text-success': targetImage }\">\r\n-            {{ targetImage ? '目标图片已上传' : '请上传目标图片' }}\r\n-          </span>\r\n-        </div>\r\n       </div>\r\n     </template>\r\n \r\n     <!-- 结果展示 -->\r\n"
                },
                {
                    "date": 1752394205680,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -16,47 +16,19 @@\n     @download=\"handleDownload\"\r\n     @upload-change=\"handleUploadChange\"\r\n     ref=\"templateRef\"\r\n   />\r\n-        </div>\r\n-      </div>\r\n-    </template>\r\n-\r\n-    <!-- 结果展示 -->\r\n-    <template #result=\"{ result }\">\r\n-      <VantImageComparison\r\n-        :original-image=\"targetImageForComparison\"\r\n-        :result-image=\"result\"\r\n-        :process-info=\"{\r\n-          promptId,\r\n-          processingTime,\r\n-          timestamp: Date.now(),\r\n-          model: 'FaceSwap v3.0'\r\n-        }\"\r\n-        @reset=\"resetProcess\"\r\n-        @download=\"handleDownload\"\r\n-      />\r\n-    </template>\r\n-  </AIProcessingTemplate>\r\n </template>\r\n \r\n <script setup>\r\n import { ref, computed, onMounted, onUnmounted } from 'vue'\r\n import { Toast } from 'vant'\r\n import { Users } from 'lucide-vue-next'\r\n-import {\r\n-  AIProcessingTemplate,\r\n-  MobileCard,\r\n-  VantImageUpload,\r\n-  VantMultiImageUpload,\r\n-  VantImageComparison\r\n-} from '../components/mobile'\r\n+import { UnifiedImageProcessingTemplate } from '../components/mobile'\r\n import { FaceSwapIcon } from '../components/icons'\r\n-\r\n-// 静态导入ComfyUI服务\r\n import { processFaceSwapImage } from '../services/comfyui.js'\r\n \r\n-console.log('FaceSwap组件已加载，ComfyUI服务已导入')\r\n+console.log('FaceSwapUnified组件已加载，ComfyUI服务已导入')\r\n \r\n // 响应式数据\r\n const facePhotos = ref([]) // 人脸照片数组（1-4张，自动补齐到4张）\r\n const targetImage = ref(null) // 目标图片（用于上传）\r\n"
                },
                {
                    "date": 1752394237239,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -29,55 +29,48 @@\n \r\n console.log('FaceSwapUnified组件已加载，ComfyUI服务已导入')\r\n \r\n // 响应式数据\r\n-const facePhotos = ref([]) // 人脸照片数组（1-4张，自动补齐到4张）\r\n-const targetImage = ref(null) // 目标图片（用于上传）\r\n-const targetImageForComparison = ref(null) // 目标图片（用于对比显示）\r\n-const resultImage = ref(null) // 处理结果\r\n+const templateRef = ref(null)\r\n+const facePhotos = ref([])\r\n+const targetImage = ref(null)\r\n+const originalImageForComparison = ref(null)\r\n+const resultImage = ref(null)\r\n const isLoading = ref(false)\r\n const processingStatus = ref('')\r\n const promptId = ref('')\r\n const processingTime = ref('')\r\n const progressPercent = ref(0)\r\n-\r\n-// 拖拽对比功能\r\n-const sliderPosition = ref(50)\r\n-const isDragging = ref(false)\r\n-const comparisonContainer = ref(null)\r\n const startTime = ref(null)\r\n \r\n-\r\n-\r\n-// 使用VantUI Toast系统\r\n-\r\n // 计算属性\r\n-const uploadedFacePhotos = computed(() => {\r\n-  return facePhotos.value.length\r\n-})\r\n-\r\n const canProcess = computed(() => {\r\n-  return facePhotos.value.length === 4 && targetImage.value !== null\r\n+  return facePhotos.value.length > 0 && targetImage.value !== null\r\n })\r\n \r\n-// 处理人脸照片上传（多选）\r\n-const handleFacePhotosChange = (images, originalCount) => {\r\n-  facePhotos.value = images\r\n-  resultImage.value = null // 清除之前的结果\r\n+// 处理上传变化\r\n+const handleUploadChange = (panelId, data) => {\r\n+  console.log('上传变化:', panelId, data)\r\n \r\n-  if (originalCount > 0) {\r\n-    Toast.success(`已选择 ${originalCount} 张照片${originalCount < 4 ? '，自动补齐至4张' : ''}`)\r\n+  if (panelId === 'face-photos') {\r\n+    // 处理多图上传数据\r\n+    facePhotos.value = Array.isArray(data) ? data.map(item => item.url || item) : []\r\n+    resultImage.value = null // 清除之前的结果\r\n+\r\n+    // 自动补齐到4张（如果需要的话）\r\n+    while (facePhotos.value.length < 4 && facePhotos.value.length > 0) {\r\n+      facePhotos.value.push(facePhotos.value[facePhotos.value.length - 1])\r\n+    }\r\n+\r\n+    if (data.length > 0) {\r\n+      Toast.success(`已选择 ${data.length} 张照片${data.length < 4 ? '，自动补齐至4张' : ''}`)\r\n+    }\r\n+  } else if (panelId === 'target-image') {\r\n+    targetImage.value = data\r\n+    resultImage.value = null // 清除之前的结果\r\n   }\r\n }\r\n \r\n-// 处理目标图片上传\r\n-const handleTargetImageChange = (imageData, file) => {\r\n-  targetImage.value = imageData\r\n-  resultImage.value = null // 清除之前的结果\r\n-}\r\n-\r\n-// Toast功能已移至useToast组合式函数\r\n-\r\n // 处理图片\r\n const processImages = async () => {\r\n   if (!canProcess.value) return\r\n \r\n"
                },
                {
                    "date": 1752394274113,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -71,9 +71,12 @@\n }\r\n \r\n // 处理图片\r\n const processImages = async () => {\r\n-  if (!canProcess.value) return\r\n+  if (!canProcess.value) {\r\n+    Toast.fail('请先上传人脸照片和目标图片')\r\n+    return\r\n+  }\r\n \r\n   isLoading.value = true\r\n   processingStatus.value = '正在加载服务...'\r\n   progressPercent.value = 10\r\n@@ -81,10 +84,8 @@\n \r\n   try {\r\n     console.log('🚀 开始极速换脸处理')\r\n \r\n-    // ComfyUI服务已静态导入，无需动态加载\r\n-\r\n     processingStatus.value = '正在上传图片...'\r\n     progressPercent.value = 30\r\n \r\n     // 调用换脸处理服务\r\n@@ -99,18 +100,16 @@\n \r\n     if (result.success && result.imageUrl) {\r\n       resultImage.value = result.imageUrl\r\n       // 保存目标图像用于对比（使用服务器返回的或原始的目标图像）\r\n-      targetImageForComparison.value = result.targetImageUrl || targetImage.value\r\n+      originalImageForComparison.value = result.targetImageUrl || targetImage.value\r\n       promptId.value = result.promptId || ''\r\n \r\n       // 计算处理时间\r\n       const endTime = Date.now()\r\n       const duration = Math.round((endTime - startTime.value) / 1000)\r\n       processingTime.value = `${duration}秒`\r\n \r\n-\r\n-\r\n       // 显示成功toast\r\n       const pointsInfo = result.pointsConsumed ? `（消耗${result.pointsConsumed}点）` : ''\r\n       Toast.success(`🎉 换脸完成！${pointsInfo}可以拖拽中间线对比目标图像和换脸结果`)\r\n       console.log('✅ 换脸处理完成')\r\n"
                },
                {
                    "date": 1752394303144,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -125,35 +125,46 @@\n     progressPercent.value = 0\r\n   }\r\n }\r\n \r\n+// 重置处理\r\n+const resetProcess = () => {\r\n+  facePhotos.value = []\r\n+  targetImage.value = null\r\n+  originalImageForComparison.value = null\r\n+  resultImage.value = null\r\n+  processingStatus.value = ''\r\n+  promptId.value = ''\r\n+  processingTime.value = ''\r\n+\r\n+  // 重置模板内部状态\r\n+  if (templateRef.value) {\r\n+    const { uploadData } = templateRef.value\r\n+    if (uploadData['face-photos']) {\r\n+      uploadData['face-photos'] = []\r\n+    }\r\n+    if (uploadData['target-image']) {\r\n+      uploadData['target-image'] = null\r\n+    }\r\n+  }\r\n+\r\n+  Toast.success('已重置，可以重新选择图片')\r\n+}\r\n+\r\n // 下载结果\r\n-const downloadResult = () => {\r\n-  if (!resultImage.value) return\r\n+const handleDownload = (imageUrl) => {\r\n+  if (!imageUrl) return\r\n \r\n   const link = document.createElement('a')\r\n-  link.href = resultImage.value\r\n+  link.href = imageUrl\r\n   link.download = `faceswap_result_${Date.now()}.png`\r\n   document.body.appendChild(link)\r\n   link.click()\r\n   document.body.removeChild(link)\r\n \r\n   Toast.success('图片下载已开始')\r\n }\r\n \r\n-// 重置处理\r\n-const resetProcess = () => {\r\n-  facePhotos.value = [null, null, null, null]\r\n-  targetImage.value = null\r\n-  targetImageForComparison.value = null\r\n-  resultImage.value = null\r\n-  processingStatus.value = ''\r\n-  promptId.value = ''\r\n-  processingTime.value = ''\r\n-  sliderPosition.value = 50\r\n-  Toast.success('已重置，可以重新选择图片')\r\n-}\r\n-\r\n // 拖拽功能\r\n const startDrag = (e) => {\r\n   isDragging.value = true\r\n   document.addEventListener('mousemove', onDrag)\r\n"
                },
                {
                    "date": 1752394335550,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -163,66 +163,31 @@\n \r\n   Toast.success('图片下载已开始')\r\n }\r\n \r\n-// 拖拽功能\r\n-const startDrag = (e) => {\r\n-  isDragging.value = true\r\n-  document.addEventListener('mousemove', onDrag)\r\n-  document.addEventListener('mouseup', stopDrag)\r\n-  document.addEventListener('touchmove', onDrag)\r\n-  document.addEventListener('touchend', stopDrag)\r\n-  e.preventDefault()\r\n+// 用户登录成功回调\r\n+const handleUserLogin = (data) => {\r\n+  console.log('用户登录成功:', data)\r\n+  // 可以在这里触发一些需要登录状态的操作\r\n }\r\n \r\n-const onDrag = (e) => {\r\n-  if (!isDragging.value || !comparisonContainer.value) return\r\n-\r\n-  const rect = comparisonContainer.value.getBoundingClientRect()\r\n-  const clientX = e.clientX || (e.touches && e.touches[0].clientX)\r\n-  const x = clientX - rect.left\r\n-  const percentage = Math.max(0, Math.min(100, (x / rect.width) * 100))\r\n-  sliderPosition.value = percentage\r\n+// 用户登出回调\r\n+const handleUserLogout = () => {\r\n+  console.log('用户已登出')\r\n+  // 可以在这里清理一些用户相关的状态\r\n }\r\n \r\n-const stopDrag = () => {\r\n-  isDragging.value = false\r\n-  document.removeEventListener('mousemove', onDrag)\r\n-  document.removeEventListener('mouseup', stopDrag)\r\n-  document.removeEventListener('touchmove', onDrag)\r\n-  document.removeEventListener('touchend', stopDrag)\r\n-}\r\n-\r\n-\r\n-\r\n // 生命周期\r\n onMounted(() => {\r\n   console.log('FaceSwap组件已挂载，ComfyUI服务已准备就绪')\r\n })\r\n \r\n onUnmounted(() => {\r\n-  if (isDragging.value) {\r\n-    stopDrag()\r\n+  // 清理工作\r\n+  if (isLoading.value) {\r\n+    isLoading.value = false\r\n   }\r\n })\r\n-\r\n-// 处理下载事件\r\n-const handleDownload = (imageUrl) => {\r\n-  console.log('下载图片:', imageUrl)\r\n-  Toast.success('图片下载成功')\r\n-}\r\n-\r\n-// 用户登录成功回调\r\n-const handleUserLogin = (data) => {\r\n-  console.log('用户登录成功:', data)\r\n-  // 可以在这里触发一些需要登录状态的操作\r\n-}\r\n-\r\n-// 用户登出回调\r\n-const handleUserLogout = () => {\r\n-  console.log('用户已登出')\r\n-  // 可以在这里清理一些用户相关的状态\r\n-}\r\n </script>\r\n \r\n <style scoped>\r\n /* 上传状态样式 */\r\n"
                },
                {
                    "date": 1752394357267,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -189,40 +189,26 @@\n })\r\n </script>\r\n \r\n <style scoped>\r\n-/* 上传状态样式 */\r\n-.upload-status {\r\n-  display: flex;\r\n-  flex-direction: column;\r\n-  gap: 8px;\r\n-  padding: 12px;\r\n-  background: var(--van-background-2, #f7f8fa);\r\n-  border-radius: 6px;\r\n-}\r\n+/* 这里可以添加特定于换脸功能的样式 */\r\n+/* 大部分样式已经在统一模板中处理 */\r\n \r\n-.status-item {\r\n-  display: flex;\r\n-  align-items: center;\r\n-  gap: 8px;\r\n-  font-size: 14px;\r\n-  color: var(--van-text-color-2, #646566);\r\n+/* 如果需要自定义样式，可以在这里添加 */\r\n+:deep(.unified-image-upload-panel) {\r\n+  /* 自定义上传面板样式 */\r\n }\r\n \r\n-.text-success {\r\n-  color: var(--van-success-color, #07c160);\r\n+:deep(.multi-image-upload) {\r\n+  /* 自定义多图上传样式 */\r\n }\r\n \r\n /* 移动端优化 */\r\n @media (max-width: 768px) {\r\n-  .status-item {\r\n-    font-size: 13px;\r\n-  }\r\n+  /* 移动端特定样式 */\r\n }\r\n \r\n /* 深色主题适配 */\r\n @media (prefers-color-scheme: dark) {\r\n-  .upload-status {\r\n-    background: var(--van-background-2, #1e1e1e);\r\n-  }\r\n+  /* 深色主题样式 */\r\n }\r\n </style>\r\n"
                },
                {
                    "date": 1752898882542,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -25,8 +25,9 @@\n import { Users } from 'lucide-vue-next'\r\n import { UnifiedImageProcessingTemplate } from '../components/mobile'\r\n import { FaceSwapIcon } from '../components/icons'\r\n import { processFaceSwapImage } from '../services/comfyui.js'\r\n+import { handleError } from '../services/globalErrorHandler.js'\r\n \r\n console.log('FaceSwapUnified组件已加载，ComfyUI服务已导入')\r\n \r\n // 响应式数据\r\n"
                },
                {
                    "date": 1752898894652,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -118,9 +118,16 @@\n       throw new Error(result.error || '换脸处理失败')\r\n     }\r\n   } catch (error) {\r\n     console.error('❌ 换脸处理失败:', error)\r\n-    Toast.fail(`换脸失败: ${error.message}`)\r\n+\r\n+    // 使用全局错误处理器\r\n+    const isHandledGlobally = handleError(error, '换脸处理')\r\n+\r\n+    // 如果没有被全局处理，则显示普通错误提示\r\n+    if (!isHandledGlobally) {\r\n+      Toast.fail(`换脸失败: ${error.message}`)\r\n+    }\r\n   } finally {\r\n     isLoading.value = false\r\n     processingStatus.value = ''\r\n     progressPercent.value = 0\r\n"
                },
                {
                    "date": 1753532248122,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -4,9 +4,9 @@\n     :title-icon=\"FaceSwapIcon\"\r\n     title-icon-color=\"var(--van-warning-color)\"\r\n     :process-button-icon=\"Users\"\r\n     :is-processing=\"isLoading\"\r\n-    :progress=\"progressPercent\"\r\n+    :progress=\"0\"\r\n     :processing-info=\"{ promptId, processingTime }\"\r\n     :result-data=\"resultImage\"\r\n     :original-image-for-comparison=\"originalImageForComparison\"\r\n     @login=\"handleUserLogin\"\r\n"
                },
                {
                    "date": 1753532262203,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -78,25 +78,21 @@\n     return\r\n   }\r\n \r\n   isLoading.value = true\r\n-  processingStatus.value = '正在加载服务...'\r\n-  progressPercent.value = 10\r\n+  processingStatus.value = '正在初始化...'\r\n   startTime.value = Date.now()\r\n \r\n   try {\r\n     console.log('🚀 开始极速换脸处理')\r\n \r\n-    processingStatus.value = '正在上传图片...'\r\n-    progressPercent.value = 30\r\n-\r\n     // 调用换脸处理服务\r\n     const result = await processFaceSwapImage({\r\n       facePhotos: facePhotos.value,\r\n       targetImage: targetImage.value,\r\n-      onProgress: (status, percent) => {\r\n+      onProgress: (status) => {\r\n         processingStatus.value = status\r\n-        progressPercent.value = Math.max(progressPercent.value, percent)\r\n+        console.log(`📊 处理状态: ${status}`)\r\n       }\r\n     })\r\n \r\n     if (result.success && result.imageUrl) {\r\n"
                },
                {
                    "date": 1753532871259,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -4,9 +4,9 @@\n     :title-icon=\"FaceSwapIcon\"\r\n     title-icon-color=\"var(--van-warning-color)\"\r\n     :process-button-icon=\"Users\"\r\n     :is-processing=\"isLoading\"\r\n-    :progress=\"0\"\r\n+    :progress=\"progressPercent\"\r\n     :processing-info=\"{ promptId, processingTime }\"\r\n     :result-data=\"resultImage\"\r\n     :original-image-for-comparison=\"originalImageForComparison\"\r\n     @login=\"handleUserLogin\"\r\n"
                },
                {
                    "date": 1753532882452,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -88,11 +88,12 @@\n     // 调用换脸处理服务\r\n     const result = await processFaceSwapImage({\r\n       facePhotos: facePhotos.value,\r\n       targetImage: targetImage.value,\r\n-      onProgress: (status) => {\r\n+      onProgress: (status, progress) => {\r\n         processingStatus.value = status\r\n-        console.log(`📊 处理状态: ${status}`)\r\n+        progressPercent.value = progress || 0\r\n+        console.log(`📊 处理状态: ${status}, 进度: ${progress}%`)\r\n       }\r\n     })\r\n \r\n     if (result.success && result.imageUrl) {\r\n"
                },
                {
                    "date": 1753533645683,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -5,8 +5,9 @@\n     title-icon-color=\"var(--van-warning-color)\"\r\n     :process-button-icon=\"Users\"\r\n     :is-processing=\"isLoading\"\r\n     :progress=\"progressPercent\"\r\n+    :processing-description=\"processingStatus\"\r\n     :processing-info=\"{ promptId, processingTime }\"\r\n     :result-data=\"resultImage\"\r\n     :original-image-for-comparison=\"originalImageForComparison\"\r\n     @login=\"handleUserLogin\"\r\n"
                },
                {
                    "date": 1753539253072,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -109,9 +109,9 @@\n       processingTime.value = `${duration}秒`\r\n \r\n       // 显示成功toast\r\n       const pointsInfo = result.pointsConsumed ? `（消耗${result.pointsConsumed}点）` : ''\r\n-      Toast.success(`🎉 换脸完成！${pointsInfo}可以拖拽中间线对比目标图像和换脸结果`)\r\n+      Toast.success(`🎉 换脸完成！${pointsInfo}`)\r\n       console.log('✅ 换脸处理完成')\r\n     } else {\r\n       throw new Error(result.error || '换脸处理失败')\r\n     }\r\n"
                },
                {
                    "date": 1753540187243,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -4,8 +4,9 @@\n     :title-icon=\"FaceSwapIcon\"\r\n     title-icon-color=\"var(--van-warning-color)\"\r\n     :process-button-icon=\"Users\"\r\n     :is-processing=\"isLoading\"\r\n+    :can-process=\"canProcess\"\r\n     :progress=\"progressPercent\"\r\n     :processing-description=\"processingStatus\"\r\n     :processing-info=\"{ promptId, processingTime }\"\r\n     :result-data=\"resultImage\"\r\n"
                },
                {
                    "date": 1753540393173,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -4,9 +4,8 @@\n     :title-icon=\"FaceSwapIcon\"\r\n     title-icon-color=\"var(--van-warning-color)\"\r\n     :process-button-icon=\"Users\"\r\n     :is-processing=\"isLoading\"\r\n-    :can-process=\"canProcess\"\r\n     :progress=\"progressPercent\"\r\n     :processing-description=\"processingStatus\"\r\n     :processing-info=\"{ promptId, processingTime }\"\r\n     :result-data=\"resultImage\"\r\n"
                },
                {
                    "date": 1753543828013,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,8 +1,8 @@\n <template>\r\n   <UnifiedImageProcessingTemplate\r\n     function-id=\"face-swap\"\r\n-    :title-icon=\"FaceSwapIcon\"\r\n+    title-icon-name=\"face-swap\"\r\n     title-icon-color=\"var(--van-warning-color)\"\r\n     :process-button-icon=\"Users\"\r\n     :is-processing=\"isLoading\"\r\n     :progress=\"progressPercent\"\r\n"
                },
                {
                    "date": 1753543834857,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -24,9 +24,9 @@\n import { ref, computed, onMounted, onUnmounted } from 'vue'\r\n import { Toast } from 'vant'\r\n import { Users } from 'lucide-vue-next'\r\n import { UnifiedImageProcessingTemplate } from '../components/mobile'\r\n-import { FaceSwapIcon } from '../components/icons'\r\n+\r\n import { processFaceSwapImage } from '../services/comfyui.js'\r\n import { handleError } from '../services/globalErrorHandler.js'\r\n \r\n console.log('FaceSwapUnified组件已加载，ComfyUI服务已导入')\r\n"
                },
                {
                    "date": 1753555570239,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -2,9 +2,9 @@\n   <UnifiedImageProcessingTemplate\r\n     function-id=\"face-swap\"\r\n     title-icon-name=\"face-swap\"\r\n     title-icon-color=\"var(--van-warning-color)\"\r\n-    :process-button-icon=\"Users\"\r\n+    process-button-icon-name=\"users\"\r\n     :is-processing=\"isLoading\"\r\n     :progress=\"progressPercent\"\r\n     :processing-description=\"processingStatus\"\r\n     :processing-info=\"{ promptId, processingTime }\"\r\n"
                },
                {
                    "date": 1753556101240,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -20,9 +20,9 @@\n   />\r\n </template>\r\n \r\n <script setup>\r\n-import { ref, computed, onMounted, onUnmounted } from 'vue'\r\n+import { ref, computed, onMounted, onUnmounted, nextTick } from 'vue'\r\n import { Toast } from 'vant'\r\n import { Users } from 'lucide-vue-next'\r\n import { UnifiedImageProcessingTemplate } from '../components/mobile'\r\n \r\n"
                },
                {
                    "date": 1753556111292,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -90,11 +90,14 @@\n     const result = await processFaceSwapImage({\r\n       facePhotos: facePhotos.value,\r\n       targetImage: targetImage.value,\r\n       onProgress: (status, progress) => {\r\n-        processingStatus.value = status\r\n-        progressPercent.value = progress || 0\r\n-        console.log(`📊 处理状态: ${status}, 进度: ${progress}%`)\r\n+        // 使用 nextTick 避免递归更新\r\n+        nextTick(() => {\r\n+          processingStatus.value = status\r\n+          progressPercent.value = progress || 0\r\n+          console.log(`📊 处理状态: ${status}, 进度: ${progress}%`)\r\n+        })\r\n       }\r\n     })\r\n \r\n     if (result.success && result.imageUrl) {\r\n"
                },
                {
                    "date": 1753556172889,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -202,16 +202,9 @@\n /* 这里可以添加特定于换脸功能的样式 */\r\n /* 大部分样式已经在统一模板中处理 */\r\n \r\n /* 如果需要自定义样式，可以在这里添加 */\r\n-:deep(.unified-image-upload-panel) {\r\n-  /* 自定义上传面板样式 */\r\n-}\r\n \r\n-:deep(.multi-image-upload) {\r\n-  /* 自定义多图上传样式 */\r\n-}\r\n-\r\n /* 移动端优化 */\r\n @media (max-width: 768px) {\r\n   /* 移动端特定样式 */\r\n }\r\n"
                }
            ],
            "date": 1752348807217,
            "name": "Commit-0",
            "content": "<template>\r\n  <div class=\"feature-page\">\r\n    <!-- 右上角用户信息 -->\r\n    <div class=\"top-corner\">\r\n      <UserInfo @login=\"handleUserLogin\" @logout=\"handleUserLogout\" />\r\n    </div>\r\n\r\n    <div class=\"container\">\r\n      <header class=\"page-header\">\r\n        <BackToHomeButton class=\"back-btn\" />\r\n        <h1 class=\"page-title\">\r\n          <FaceSwapIcon :size=\"32\" color=\"var(--warning-color)\" class=\"page-icon\" />\r\n          极速换脸\r\n        </h1>\r\n        <p class=\"page-description\">上传4张人脸照片和1张目标图片，AI将为您智能换脸</p>\r\n      </header>\r\n\r\n      <!-- 体验点显示 -->\r\n      <PointsDisplay ref=\"pointsDisplayRef\" />\r\n\r\n      <main class=\"page-content\">\r\n        <div v-if=\"!resultImage\" class=\"upload-section\">\r\n          <!-- 人脸照片上传区域 -->\r\n          <div class=\"face-photos-section\">\r\n            <h3 class=\"section-title\">\r\n              <FaceSwapIcon :size=\"20\" color=\"var(--primary-color)\" class=\"section-icon\" />\r\n              人脸照片 (1-4张)\r\n            </h3>\r\n            <!-- <p class=\"section-description\">一次性选择1-4张清晰的人脸照片</p> -->\r\n\r\n            <MultiImageUpload\r\n              v-model=\"facePhotos\"\r\n              :disabled=\"isLoading\"\r\n              @change=\"handleFacePhotosChange\"\r\n            />\r\n          </div>\r\n\r\n          <!-- 目标图片上传区域 -->\r\n          <div class=\"target-image-section\">\r\n            <h3 class=\"section-title\">\r\n              <Image :size=\"20\" color=\"var(--success-color)\" class=\"section-icon\" />\r\n              目标图片\r\n            </h3>\r\n            <!-- <p class=\"section-description\">上传需要换脸的目标图片</p> -->\r\n\r\n            <ImageUpload\r\n              v-model=\"targetImage\"\r\n              title=\"上传需要换脸的目标图片\"\r\n              description=\"支持 JPG、PNG 格式，建议尺寸 512x512 以上\"\r\n              icon=\"Image\"\r\n              :icon-size=\"48\"\r\n              :disabled=\"isLoading\"\r\n              @change=\"handleTargetImageChange\"\r\n            />\r\n          </div>\r\n\r\n          <!-- 处理按钮 -->\r\n          <div v-if=\"canProcess && !isLoading\" class=\"action-section\">\r\n            <van-button\r\n              @click=\"processImages\"\r\n              type=\"primary\"\r\n              size=\"large\"\r\n              round\r\n              block\r\n              class=\"process-btn\"\r\n            >\r\n              <Users :size=\"20\" color=\"white\" class=\"btn-icon\" />\r\n              开始换脸\r\n            </van-button>\r\n          </div>\r\n\r\n          <!-- 上传提示 -->\r\n          <div v-else class=\"upload-tips\">\r\n            <div class=\"tip-item\">\r\n              <Image :size=\"16\" color=\"var(--primary-color)\" class=\"tip-icon\" />\r\n              <span>已上传 {{ uploadedFacePhotos }}/4 张人脸照片</span>\r\n            </div>\r\n            <div class=\"tip-item\">\r\n              <Image :size=\"16\" color=\"var(--success-color)\" class=\"tip-icon\" />\r\n              <van-icon :name=\"targetImage ? 'success' : 'cross'\" size=\"16\" :color=\"targetImage ? 'var(--success-color)' : 'var(--error-color)'\" />\r\n              <span>目标图片</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- 处理状态 -->\r\n        <ProcessingStatus\r\n          v-if=\"isLoading\"\r\n          status=\"loading\"\r\n          title=\"正在处理换脸...\"\r\n          description=\"请耐心等待，处理时间可能需要几分钟\"\r\n          :progress=\"progressPercent\"\r\n          :prompt-id=\"promptId\"\r\n          :processing-time=\"processingTime\"\r\n        />\r\n\r\n        <!-- 结果展示区域 -->\r\n        <ImageComparison\r\n          v-if=\"resultImage\"\r\n          :original-image=\"targetImageForComparison\"\r\n          :result-image=\"resultImage\"\r\n          @reset=\"resetProcess\"\r\n        />\r\n      </main>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, computed, onMounted, onUnmounted } from 'vue'\r\nimport { Toast } from 'vant'\r\nimport { Image } from 'lucide-vue-next'\r\nimport ImageUpload from '../components/ImageUpload.vue'\r\nimport MultiImageUpload from '../components/MultiImageUpload.vue'\r\nimport ProcessingStatus from '../components/ProcessingStatus.vue'\r\nimport ImageComparison from '../components/ImageComparison.vue'\r\nimport PointsDisplay from '../components/PointsDisplay.vue'\r\nimport UserInfo from '../components/UserInfo.vue'\r\nimport { FaceSwapIcon } from '../components/icons'\r\n\r\n// 静态导入ComfyUI服务\r\nimport { processFaceSwapImage } from '../services/comfyui.js'\r\n\r\nconsole.log('FaceSwap组件已加载，ComfyUI服务已导入')\r\n\r\n// 响应式数据\r\nconst facePhotos = ref([]) // 人脸照片数组（1-4张，自动补齐到4张）\r\nconst targetImage = ref(null) // 目标图片（用于上传）\r\nconst targetImageForComparison = ref(null) // 目标图片（用于对比显示）\r\nconst resultImage = ref(null) // 处理结果\r\nconst isLoading = ref(false)\r\nconst processingStatus = ref('')\r\nconst promptId = ref('')\r\nconst processingTime = ref('')\r\nconst progressPercent = ref(0)\r\n\r\n// 拖拽对比功能\r\nconst sliderPosition = ref(50)\r\nconst isDragging = ref(false)\r\nconst comparisonContainer = ref(null)\r\nconst startTime = ref(null)\r\n\r\n// 体验点组件引用\r\nconst pointsDisplayRef = ref(null)\r\n\r\n// 使用VantUI Toast系统\r\n\r\n// 计算属性\r\nconst uploadedFacePhotos = computed(() => {\r\n  return facePhotos.value.length\r\n})\r\n\r\nconst canProcess = computed(() => {\r\n  return facePhotos.value.length === 4 && targetImage.value !== null\r\n})\r\n\r\n// 处理人脸照片上传（多选）\r\nconst handleFacePhotosChange = (images, originalCount) => {\r\n  facePhotos.value = images\r\n  resultImage.value = null // 清除之前的结果\r\n\r\n  if (originalCount > 0) {\r\n    Toast.success(`已选择 ${originalCount} 张照片${originalCount < 4 ? '，自动补齐至4张' : ''}`)\r\n  }\r\n}\r\n\r\n// 处理目标图片上传\r\nconst handleTargetImageChange = (imageData, file) => {\r\n  targetImage.value = imageData\r\n  resultImage.value = null // 清除之前的结果\r\n}\r\n\r\n// Toast功能已移至useToast组合式函数\r\n\r\n// 处理图片\r\nconst processImages = async () => {\r\n  if (!canProcess.value) return\r\n\r\n  isLoading.value = true\r\n  processingStatus.value = '正在加载服务...'\r\n  progressPercent.value = 10\r\n  startTime.value = Date.now()\r\n\r\n  try {\r\n    console.log('🚀 开始极速换脸处理')\r\n\r\n    // ComfyUI服务已静态导入，无需动态加载\r\n\r\n    processingStatus.value = '正在上传图片...'\r\n    progressPercent.value = 30\r\n\r\n    // 调用换脸处理服务\r\n    const result = await processFaceSwapImage({\r\n      facePhotos: facePhotos.value,\r\n      targetImage: targetImage.value,\r\n      onProgress: (status, percent) => {\r\n        processingStatus.value = status\r\n        progressPercent.value = Math.max(progressPercent.value, percent)\r\n      }\r\n    })\r\n\r\n    if (result.success && result.imageUrl) {\r\n      resultImage.value = result.imageUrl\r\n      // 保存目标图像用于对比（使用服务器返回的或原始的目标图像）\r\n      targetImageForComparison.value = result.targetImageUrl || targetImage.value\r\n      promptId.value = result.promptId || ''\r\n\r\n      // 计算处理时间\r\n      const endTime = Date.now()\r\n      const duration = Math.round((endTime - startTime.value) / 1000)\r\n      processingTime.value = `${duration}秒`\r\n\r\n      // 更新体验点显示\r\n      if (pointsDisplayRef.value) {\r\n        pointsDisplayRef.value.updatePointsStatus()\r\n      }\r\n\r\n      // 显示成功toast\r\n      const pointsInfo = result.pointsConsumed ? `（消耗${result.pointsConsumed}点）` : ''\r\n      Toast.success(`🎉 换脸完成！${pointsInfo}可以拖拽中间线对比目标图像和换脸结果`)\r\n      console.log('✅ 换脸处理完成')\r\n    } else {\r\n      throw new Error(result.error || '换脸处理失败')\r\n    }\r\n  } catch (error) {\r\n    console.error('❌ 换脸处理失败:', error)\r\n    Toast.fail(`换脸失败: ${error.message}`)\r\n  } finally {\r\n    isLoading.value = false\r\n    processingStatus.value = ''\r\n    progressPercent.value = 0\r\n  }\r\n}\r\n\r\n// 下载结果\r\nconst downloadResult = () => {\r\n  if (!resultImage.value) return\r\n\r\n  const link = document.createElement('a')\r\n  link.href = resultImage.value\r\n  link.download = `faceswap_result_${Date.now()}.png`\r\n  document.body.appendChild(link)\r\n  link.click()\r\n  document.body.removeChild(link)\r\n\r\n  Toast.success('图片下载已开始')\r\n}\r\n\r\n// 重置处理\r\nconst resetProcess = () => {\r\n  facePhotos.value = [null, null, null, null]\r\n  targetImage.value = null\r\n  targetImageForComparison.value = null\r\n  resultImage.value = null\r\n  processingStatus.value = ''\r\n  promptId.value = ''\r\n  processingTime.value = ''\r\n  sliderPosition.value = 50\r\n  Toast.success('已重置，可以重新选择图片')\r\n}\r\n\r\n// 拖拽功能\r\nconst startDrag = (e) => {\r\n  isDragging.value = true\r\n  document.addEventListener('mousemove', onDrag)\r\n  document.addEventListener('mouseup', stopDrag)\r\n  document.addEventListener('touchmove', onDrag)\r\n  document.addEventListener('touchend', stopDrag)\r\n  e.preventDefault()\r\n}\r\n\r\nconst onDrag = (e) => {\r\n  if (!isDragging.value || !comparisonContainer.value) return\r\n\r\n  const rect = comparisonContainer.value.getBoundingClientRect()\r\n  const clientX = e.clientX || (e.touches && e.touches[0].clientX)\r\n  const x = clientX - rect.left\r\n  const percentage = Math.max(0, Math.min(100, (x / rect.width) * 100))\r\n  sliderPosition.value = percentage\r\n}\r\n\r\nconst stopDrag = () => {\r\n  isDragging.value = false\r\n  document.removeEventListener('mousemove', onDrag)\r\n  document.removeEventListener('mouseup', stopDrag)\r\n  document.removeEventListener('touchmove', onDrag)\r\n  document.removeEventListener('touchend', stopDrag)\r\n}\r\n\r\n\r\n\r\n// 生命周期\r\nonMounted(() => {\r\n  console.log('FaceSwap组件已挂载，ComfyUI服务已准备就绪')\r\n})\r\n\r\nonUnmounted(() => {\r\n  if (isDragging.value) {\r\n    stopDrag()\r\n  }\r\n})\r\n\r\n// 用户登录成功回调\r\nconst handleUserLogin = (data) => {\r\n  console.log('用户登录成功:', data)\r\n  // 可以在这里触发一些需要登录状态的操作\r\n}\r\n\r\n// 用户登出回调\r\nconst handleUserLogout = () => {\r\n  console.log('用户已登出')\r\n  // 可以在这里清理一些用户相关的状态\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.feature-page {\r\n  min-height: 100vh;\r\n  padding: 20px;\r\n  background: linear-gradient(135deg, var(--bg-primary) 0%, var(--bg-secondary) 100%);\r\n  position: relative;\r\n}\r\n\r\n/* 右上角用户信息 */\r\n.top-corner {\r\n  position: fixed;\r\n  top: 20px;\r\n  right: 20px;\r\n  z-index: 1000;\r\n}\r\n\r\n.container {\r\n  max-width: 1000px;\r\n  margin: 0 auto;\r\n}\r\n\r\n.page-header {\r\n  text-align: center;\r\n  margin-bottom: 40px;\r\n}\r\n\r\n.page-title {\r\n  color: var(--text-color);\r\n  font-size: 2.5rem;\r\n  font-weight: 700;\r\n  margin-bottom: 12px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  gap: 16px;\r\n}\r\n\r\n.page-icon {\r\n  flex-shrink: 0;\r\n}\r\n\r\n.page-description {\r\n  color: var(--text-light);\r\n  font-size: 1.1rem;\r\n  margin: 0;\r\n  line-height: 1.5;\r\n}\r\n\r\n.section-title {\r\n  color: var(--text-color);\r\n  font-size: 1.3rem;\r\n  font-weight: 600;\r\n  margin-bottom: 12px;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 12px;\r\n}\r\n\r\n.section-icon {\r\n  flex-shrink: 0;\r\n}\r\n\r\n.section-description {\r\n  color: var(--text-light);\r\n  font-size: 0.95rem;\r\n  margin-bottom: 24px;\r\n  line-height: 1.5;\r\n}\r\n\r\n.face-photos-grid {\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\r\n  gap: 20px;\r\n  margin-bottom: 32px;\r\n}\r\n\r\n.upload-tips {\r\n  background: var(--bg-card);\r\n  border: 1px solid var(--border-color);\r\n  border-radius: 12px;\r\n  padding: 20px;\r\n  margin-top: 24px;\r\n}\r\n\r\n.tip-item {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 12px;\r\n  margin-bottom: 12px;\r\n  color: var(--text-light);\r\n  font-size: 0.95rem;\r\n}\r\n\r\n.tip-item:last-child {\r\n  margin-bottom: 0;\r\n}\r\n\r\n.tip-icon {\r\n  flex-shrink: 0;\r\n}\r\n\r\n.process-btn {\r\n  margin-top: 24px;\r\n}\r\n\r\n.process-btn .van-button__content {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  gap: 8px;\r\n}\r\n\r\n.loading-icon,\r\n.btn-icon {\r\n  flex-shrink: 0;\r\n}\r\n\r\n.back-btn {\r\n  display: inline-flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n  color: rgba(255, 255, 255, 0.9);\r\n  text-decoration: none;\r\n  font-size: 1rem;\r\n  margin-bottom: 20px;\r\n  transition: var(--transition);\r\n}\r\n\r\n.back-btn:hover {\r\n  color: white;\r\n  transform: translateX(-4px);\r\n}\r\n\r\n.back-icon {\r\n  font-size: 1.2rem;\r\n}\r\n\r\n.page-title {\r\n  font-size: 3rem;\r\n  color: white;\r\n  margin-bottom: 16px;\r\n  text-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);\r\n}\r\n\r\n.page-icon {\r\n  margin-right: 16px;\r\n}\r\n\r\n.page-description {\r\n  font-size: 1.2rem;\r\n  color: rgba(255, 255, 255, 0.8);\r\n}\r\n\r\n.page-content {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 40px;\r\n}\r\n\r\n.upload-section {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 40px;\r\n}\r\n\r\n/* 人脸照片区域样式 */\r\n.face-photos-section, .target-image-section {\r\n  background: var(--bg-card);\r\n  border: 1px solid var(--border-color);\r\n  border-radius: 20px;\r\n  padding: 32px;\r\n  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);\r\n}\r\n\r\n.section-title {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 12px;\r\n  font-size: 1.5rem;\r\n  color: var(--text-color);\r\n  margin-bottom: 16px;\r\n}\r\n\r\n.section-icon {\r\n  font-size: 1.8rem;\r\n}\r\n\r\n.section-description {\r\n  color: var(--text-light);\r\n  margin-bottom: 24px;\r\n  line-height: 1.6;\r\n}\r\n\r\n/* 人脸照片网格样式已移至 MultiImageUpload 组件 */\r\n\r\n/* 人脸照片相关样式已移至 MultiImageUpload 组件 */\r\n\r\n.target-image-card {\r\n  max-width: 400px;\r\n  margin: 0 auto;\r\n  background: var(--bg-dark-light);\r\n  border: 1px solid var(--border-color);\r\n  border-radius: 16px;\r\n  overflow: hidden;\r\n  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.3);\r\n  transition: var(--transition);\r\n}\r\n\r\n.target-image-card:hover {\r\n  border-color: var(--primary-color);\r\n  box-shadow: 0 12px 32px rgba(0, 0, 0, 0.4);\r\n}\r\n\r\n.target-image-area {\r\n  display: block;\r\n  cursor: pointer;\r\n  min-height: 300px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  flex-direction: column;\r\n  padding: 32px;\r\n}\r\n\r\n.target-image-placeholder {\r\n  text-align: center;\r\n  color: var(--text-light);\r\n}\r\n\r\n.target-image-placeholder h3 {\r\n  margin: 16px 0 12px;\r\n  color: var(--text-color);\r\n  font-size: 1.2rem;\r\n}\r\n\r\n.target-image-placeholder p {\r\n  font-size: 0.9rem;\r\n  margin: 0;\r\n  line-height: 1.5;\r\n}\r\n\r\n.target-image-preview {\r\n  position: relative;\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n\r\n/* 上传提示样式已移至 shared.css */\r\n\r\n/* 处理状态样式已移至 shared.css */\r\n\r\n.hidden {\r\n  display: none;\r\n}\r\n\r\n.image-preview {\r\n  position: relative;\r\n  border-radius: 12px;\r\n  overflow: hidden;\r\n}\r\n\r\n.preview-image {\r\n  max-width: 100%;\r\n  max-height: 200px;\r\n  border-radius: 12px;\r\n  display: block;\r\n}\r\n\r\n.image-overlay {\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  background: rgba(0, 0, 0, 0.7);\r\n  color: white;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  opacity: 0;\r\n  transition: var(--transition);\r\n}\r\n\r\n.image-preview:hover .image-overlay {\r\n  opacity: 1;\r\n}\r\n\r\n.upload-grid {\r\n  display: grid;\r\n  grid-template-columns: 1fr auto 1fr;\r\n  gap: 32px;\r\n  align-items: center;\r\n  margin-bottom: 32px;\r\n}\r\n\r\n.upload-card {\r\n  background: var(--bg-card);\r\n  border: 1px solid var(--border-color);\r\n  border-radius: 20px;\r\n  padding: 24px;\r\n  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);\r\n}\r\n\r\n.upload-title {\r\n  text-align: center;\r\n  margin-bottom: 16px;\r\n  color: var(--text-color);\r\n  font-size: 1.2rem;\r\n}\r\n\r\n.upload-area {\r\n  display: block;\r\n  cursor: pointer;\r\n  border: 3px dashed var(--border-color);\r\n  border-radius: 16px;\r\n  padding: 32px 16px;\r\n  text-align: center;\r\n  transition: var(--transition);\r\n  min-height: 250px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  flex-direction: column;\r\n}\r\n\r\n.upload-area:hover {\r\n  border-color: var(--primary-color);\r\n  background: rgba(102, 126, 234, 0.05);\r\n}\r\n\r\n.upload-placeholder p {\r\n  margin: 12px 0 4px;\r\n  color: var(--text-color);\r\n  font-weight: 600;\r\n}\r\n\r\n.upload-hint {\r\n  font-size: 0.85rem;\r\n  color: var(--text-light);\r\n}\r\n\r\n.upload-icon {\r\n  font-size: 3rem;\r\n  margin-bottom: 8px;\r\n}\r\n\r\n.swap-arrow {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  background: rgba(255, 255, 255, 0.9);\r\n  border-radius: 50%;\r\n  width: 60px;\r\n  height: 60px;\r\n  box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.arrow-icon {\r\n  font-size: 1.5rem;\r\n  color: var(--primary-color);\r\n  font-weight: bold;\r\n}\r\n\r\n.action-section {\r\n  text-align: center;\r\n}\r\n\r\n.swap-options {\r\n  display: flex;\r\n  justify-content: center;\r\n  gap: 32px;\r\n  margin-bottom: 24px;\r\n  background: var(--bg-card);\r\n  border: 1px solid var(--border-color);\r\n  padding: 20px;\r\n  border-radius: 12px;\r\n}\r\n\r\n.option-group label {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n  color: var(--text-color);\r\n  font-weight: 500;\r\n  cursor: pointer;\r\n}\r\n\r\n.option-group input[type=\"checkbox\"] {\r\n  width: 18px;\r\n  height: 18px;\r\n  accent-color: var(--primary-color);\r\n}\r\n\r\n.swap-btn {\r\n  font-size: 1.1rem;\r\n  padding: 16px 32px;\r\n  min-width: 200px;\r\n}\r\n\r\n.result-section {\r\n  display: flex;\r\n  justify-content: center;\r\n}\r\n\r\n.result-card {\r\n  background: var(--bg-card);\r\n  border: 1px solid var(--border-color);\r\n  border-radius: 20px;\r\n  padding: 32px;\r\n  text-align: center;\r\n  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);\r\n  max-width: 800px;\r\n  width: 100%;\r\n}\r\n\r\n.result-title {\r\n  font-size: 1.5rem;\r\n  margin-bottom: 24px;\r\n  color: var(--text-color);\r\n}\r\n\r\n.result-comparison {\r\n  display: grid;\r\n  grid-template-columns: 1fr auto 1fr;\r\n  gap: 24px;\r\n  align-items: center;\r\n  margin: 24px 0;\r\n}\r\n\r\n.comparison-item {\r\n  text-align: center;\r\n}\r\n\r\n.comparison-item h4 {\r\n  margin-bottom: 12px;\r\n  color: var(--text-color);\r\n}\r\n\r\n.comparison-image {\r\n  max-width: 100%;\r\n  max-height: 300px;\r\n  border-radius: 12px;\r\n  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);\r\n}\r\n\r\n.comparison-arrow {\r\n  font-size: 2rem;\r\n  color: var(--primary-color);\r\n  font-weight: bold;\r\n}\r\n\r\n/* 结果展示样式 */\r\n.result-container {\r\n  background: var(--bg-card);\r\n  border: 1px solid var(--border-color);\r\n  border-radius: 20px;\r\n  padding: 32px;\r\n  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);\r\n}\r\n\r\n.comparison-container {\r\n  position: relative;\r\n  margin: 24px 0;\r\n  border-radius: 16px;\r\n  overflow: hidden;\r\n  box-shadow: 0 12px 32px rgba(0, 0, 0, 0.15);\r\n  user-select: none;\r\n  background: #f8f9fa;\r\n  width: 100%;\r\n  height: 80vh;\r\n  min-height: 700px;\r\n  max-height: 900px;\r\n}\r\n\r\n.comparison-wrapper {\r\n  position: relative;\r\n  width: 100%;\r\n  height: 100%;\r\n  overflow: hidden;\r\n  background: var(--bg-dark);\r\n}\r\n\r\n.image-before, .image-after {\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n\r\n.comparison-image {\r\n  max-width: 100%;\r\n  max-height: 100%;\r\n  width: auto;\r\n  height: auto;\r\n  object-fit: contain;\r\n  object-position: center;\r\n  display: block;\r\n}\r\n\r\n.image-label {\r\n  position: absolute;\r\n  top: 16px;\r\n  left: 16px;\r\n  background: rgba(0, 0, 0, 0.7);\r\n  color: white;\r\n  padding: 8px 16px;\r\n  border-radius: 20px;\r\n  font-size: 0.9rem;\r\n  font-weight: 500;\r\n}\r\n\r\n.slider-handle {\r\n  position: absolute;\r\n  top: 0;\r\n  bottom: 0;\r\n  width: 4px;\r\n  cursor: ew-resize;\r\n  z-index: 10;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n\r\n.slider-line {\r\n  width: 4px;\r\n  height: 100%;\r\n  background: white;\r\n  box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);\r\n}\r\n\r\n.slider-button {\r\n  position: absolute;\r\n  background: white;\r\n  border-radius: 50%;\r\n  width: 40px;\r\n  height: 40px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  font-size: 1.2rem;\r\n  color: var(--primary-color);\r\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);\r\n  cursor: ew-resize;\r\n  user-select: none;\r\n}\r\n\r\n.result-actions {\r\n  display: flex;\r\n  gap: 16px;\r\n  justify-content: center;\r\n  margin-top: 24px;\r\n}\r\n\r\n/* 处理信息样式 */\r\n.process-info {\r\n  display: flex;\r\n  gap: 24px;\r\n  justify-content: center;\r\n  flex-wrap: wrap;\r\n}\r\n\r\n/* 按钮样式已移至AppButton组件 */\r\n\r\n@media (max-width: 768px) {\r\n  .page-title {\r\n    font-size: 2rem;\r\n  }\r\n\r\n  .face-photos-grid {\r\n    grid-template-columns: repeat(2, 1fr);\r\n    gap: 16px;\r\n  }\r\n\r\n  .comparison-container {\r\n    height: 60vh;\r\n    min-height: 400px;\r\n    max-height: 600px;\r\n    margin: 16px 0;\r\n  }\r\n\r\n  .result-actions {\r\n    flex-direction: column;\r\n    gap: 12px;\r\n  }\r\n\r\n  .process-info {\r\n    flex-direction: column;\r\n    gap: 16px;\r\n    text-align: center;\r\n  }\r\n\r\n  .upload-tips {\r\n    padding: 16px;\r\n  }\r\n\r\n  .tip-item {\r\n    font-size: 1rem;\r\n  }\r\n}\r\n</style>\r\n"
        }
    ]
}