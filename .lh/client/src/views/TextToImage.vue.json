{
    "sourceFile": "client/src/views/TextToImage.vue",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 33,
            "patches": [
                {
                    "date": 1752348844192,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1752348866738,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -111,8 +111,9 @@\n \r\n <script setup>\r\n import { ref } from 'vue'\r\n import UserInfo from '../components/UserInfo.vue'\r\n+import BackToHomeButton from '../components/BackToHomeButton.vue'\r\n // import { comfyApi } from '../services/api.js'\r\n \r\n const prompt = ref('')\r\n const resultImage = ref(null)\r\n"
                },
                {
                    "date": 1752351626026,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,22 +1,19 @@\n <template>\r\n-  <div class=\"feature-page\">\r\n+  <div class=\"mobile-page\">\r\n     <!-- 右上角用户信息 -->\r\n     <div class=\"top-corner\">\r\n       <UserInfo @login=\"handleUserLogin\" @logout=\"handleUserLogout\" />\r\n     </div>\r\n \r\n-    <div class=\"container\">\r\n-      <header class=\"page-header\">\r\n-        <BackToHomeButton class=\"back-btn\" />\r\n-        <h1 class=\"page-title\">\r\n-          <van-icon name=\"photo-o\" size=\"32\" color=\"#07c160\" class=\"page-icon\" />\r\n-          文生图\r\n-        </h1>\r\n-        <p class=\"page-description\">输入文字描述，AI为您生成精美图像</p>\r\n+    <div class=\"mobile-container\">\r\n+      <header class=\"mobile-header\">\r\n+        <BackToHomeButton class=\"mobile-header-back\" />\r\n+        <h1 class=\"mobile-header-title\">文生图</h1>\r\n+        <div></div>\r\n       </header>\r\n \r\n-      <main class=\"page-content\">\r\n+      <div class=\"mobile-content\">\r\n         <div class=\"input-section\">\r\n           <div class=\"input-card\">\r\n             <h3 class=\"input-title\">描述您想要的图像</h3>\r\n             <textarea\r\n"
                },
                {
                    "date": 1752352792501,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -12,10 +12,9 @@\n         <div></div>\r\n       </header>\r\n \r\n       <div class=\"mobile-content\">\r\n-        <div class=\"input-section\">\r\n-          <div class=\"input-card\">\r\n+        <div class=\"mobile-card\">\r\n             <h3 class=\"input-title\">描述您想要的图像</h3>\r\n             <textarea\r\n               v-model=\"prompt\"\r\n               placeholder=\"请详细描述您想要生成的图像，例如：一只橙色的猫坐在窗台上，窗外是蓝天白云，阳光透过窗户洒在猫咪身上，画面温馨美好，高清摄影风格\"\r\n"
                },
                {
                    "date": 1752352823037,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -71,13 +71,11 @@\n               class=\"generate-btn\"\r\n             >\r\n               {{ isLoading ? '生成中...' : '生成图像' }}\r\n             </van-button>\r\n-          </div>\r\n         </div>\r\n \r\n-        <div v-if=\"resultImage\" class=\"result-section\">\r\n-          <div class=\"result-card\">\r\n+        <div v-if=\"resultImage\" class=\"mobile-card mobile-mt-3\">\r\n             <h3 class=\"result-title\">生成结果</h3>\r\n             <div class=\"result-image-container\">\r\n               <img :src=\"resultImage\" alt=\"生成图像\" class=\"result-image\">\r\n             </div>\r\n"
                },
                {
                    "date": 1752352847498,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -95,11 +95,10 @@\n               <button @click=\"generateAgain\" class=\"btn btn-secondary\">\r\n                 重新生成\r\n               </button>\r\n             </div>\r\n-          </div>\r\n         </div>\r\n-      </main>\r\n+      </div>\r\n     </div>\r\n   </div>\r\n </template>\r\n \r\n"
                },
                {
                    "date": 1752354037796,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,20 +1,24 @@\n <template>\r\n-  <div class=\"mobile-page\">\r\n+  <div class=\"feature-page\">\r\n     <!-- 右上角用户信息 -->\r\n     <div class=\"top-corner\">\r\n       <UserInfo @login=\"handleUserLogin\" @logout=\"handleUserLogout\" />\r\n     </div>\r\n \r\n-    <div class=\"mobile-container\">\r\n-      <header class=\"mobile-header\">\r\n-        <BackToHomeButton class=\"mobile-header-back\" />\r\n-        <h1 class=\"mobile-header-title\">文生图</h1>\r\n-        <div></div>\r\n+    <div class=\"container\">\r\n+      <header class=\"page-header\">\r\n+        <BackToHomeButton class=\"back-btn\" />\r\n+        <h1 class=\"page-title\">\r\n+          <van-icon name=\"photo-o\" size=\"32\" color=\"#07c160\" class=\"page-icon\" />\r\n+          文生图\r\n+        </h1>\r\n+        <p class=\"page-description\">输入文字描述，AI为您生成精美图像</p>\r\n       </header>\r\n \r\n-      <div class=\"mobile-content\">\r\n-        <div class=\"mobile-card\">\r\n+      <main class=\"page-content\">\r\n+        <div class=\"input-section\">\r\n+          <div class=\"input-card\">\r\n             <h3 class=\"input-title\">描述您想要的图像</h3>\r\n             <textarea\r\n               v-model=\"prompt\"\r\n               placeholder=\"请详细描述您想要生成的图像，例如：一只橙色的猫坐在窗台上，窗外是蓝天白云，阳光透过窗户洒在猫咪身上，画面温馨美好，高清摄影风格\"\r\n@@ -71,11 +75,13 @@\n               class=\"generate-btn\"\r\n             >\r\n               {{ isLoading ? '生成中...' : '生成图像' }}\r\n             </van-button>\r\n+          </div>\r\n         </div>\r\n \r\n-        <div v-if=\"resultImage\" class=\"mobile-card mobile-mt-3\">\r\n+        <div v-if=\"resultImage\" class=\"result-section\">\r\n+          <div class=\"result-card\">\r\n             <h3 class=\"result-title\">生成结果</h3>\r\n             <div class=\"result-image-container\">\r\n               <img :src=\"resultImage\" alt=\"生成图像\" class=\"result-image\">\r\n             </div>\r\n@@ -95,10 +101,11 @@\n               <button @click=\"generateAgain\" class=\"btn btn-secondary\">\r\n                 重新生成\r\n               </button>\r\n             </div>\r\n+          </div>\r\n         </div>\r\n-      </div>\r\n+      </main>\r\n     </div>\r\n   </div>\r\n </template>\r\n \r\n"
                },
                {
                    "date": 1752370430166,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,21 +1,20 @@\n <template>\r\n-  <div class=\"feature-page\">\r\n-    <!-- 右上角用户信息 -->\r\n-    <div class=\"top-corner\">\r\n-      <UserInfo @login=\"handleUserLogin\" @logout=\"handleUserLogout\" />\r\n-    </div>\r\n+  <MobileLayout\r\n+    title=\"文生图\"\r\n+    :show-back=\"true\"\r\n+    :show-tabbar=\"true\"\r\n+    @login=\"handleUserLogin\"\r\n+    @logout=\"handleUserLogout\"\r\n+  >\r\n+    <!-- 页面描述 -->\r\n+    <MobileCard\r\n+      title=\"文生图\"\r\n+      subtitle=\"输入文字描述，AI为您生成精美图像\"\r\n+      icon=\"edit\"\r\n+      variant=\"success\"\r\n+    />\r\n \r\n-    <div class=\"container\">\r\n-      <header class=\"page-header\">\r\n-        <BackToHomeButton class=\"back-btn\" />\r\n-        <h1 class=\"page-title\">\r\n-          <van-icon name=\"photo-o\" size=\"32\" color=\"#07c160\" class=\"page-icon\" />\r\n-          文生图\r\n-        </h1>\r\n-        <p class=\"page-description\">输入文字描述，AI为您生成精美图像</p>\r\n-      </header>\r\n-\r\n       <main class=\"page-content\">\r\n         <div class=\"input-section\">\r\n           <div class=\"input-card\">\r\n             <h3 class=\"input-title\">描述您想要的图像</h3>\r\n"
                },
                {
                    "date": 1752370461631,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -13,52 +13,74 @@\n       icon=\"edit\"\r\n       variant=\"success\"\r\n     />\r\n \r\n-      <main class=\"page-content\">\r\n-        <div class=\"input-section\">\r\n-          <div class=\"input-card\">\r\n-            <h3 class=\"input-title\">描述您想要的图像</h3>\r\n-            <textarea\r\n-              v-model=\"prompt\"\r\n-              placeholder=\"请详细描述您想要生成的图像，例如：一只橙色的猫坐在窗台上，窗外是蓝天白云，阳光透过窗户洒在猫咪身上，画面温馨美好，高清摄影风格\"\r\n-              rows=\"6\"\r\n-              class=\"prompt-input\"\r\n-              :disabled=\"isLoading\"\r\n-            ></textarea>\r\n+    <!-- 输入区域 -->\r\n+    <MobileCard\r\n+      title=\"描述您想要的图像\"\r\n+      subtitle=\"详细描述能生成更好的效果\"\r\n+      icon=\"edit\"\r\n+      variant=\"default\"\r\n+    >\r\n+      <van-field\r\n+        v-model=\"prompt\"\r\n+        type=\"textarea\"\r\n+        placeholder=\"请详细描述您想要生成的图像，例如：一只橙色的猫坐在窗台上，窗外是蓝天白云，阳光透过窗户洒在猫咪身上，画面温馨美好，高清摄影风格\"\r\n+        rows=\"4\"\r\n+        autosize\r\n+        :disabled=\"isLoading\"\r\n+        show-word-limit\r\n+        maxlength=\"500\"\r\n+      />\r\n \r\n-            <div class=\"prompt-examples\">\r\n-              <h4>示例提示词：</h4>\r\n-              <div class=\"examples\">\r\n-                <button\r\n-                  v-for=\"example in examples\"\r\n-                  :key=\"example\"\r\n-                  @click=\"prompt = example\"\r\n-                  class=\"example-btn\"\r\n-                  :disabled=\"isLoading\"\r\n-                >\r\n-                  {{ example }}\r\n-                </button>\r\n-              </div>\r\n-            </div>\r\n+      <!-- 示例提示词 -->\r\n+      <div class=\"prompt-examples\">\r\n+        <div class=\"examples-title\">示例提示词：</div>\r\n+        <div class=\"examples-grid\">\r\n+          <van-button\r\n+            v-for=\"example in examples\"\r\n+            :key=\"example\"\r\n+            @click=\"prompt = example\"\r\n+            type=\"default\"\r\n+            size=\"small\"\r\n+            plain\r\n+            :disabled=\"isLoading\"\r\n+            class=\"example-btn\"\r\n+          >\r\n+            {{ example }}\r\n+          </van-button>\r\n+        </div>\r\n+      </div>\r\n+    </MobileCard>\r\n \r\n-            <div class=\"generation-options\">\r\n-              <div class=\"option-group\">\r\n-                <label>图像尺寸：</label>\r\n-                <select v-model=\"imageSize\" class=\"size-select\" :disabled=\"isLoading\">\r\n-                  <option value=\"512x512\">512x512 (正方形)</option>\r\n-                  <option value=\"768x512\">768x512 (横向)</option>\r\n-                  <option value=\"512x768\">512x768 (纵向)</option>\r\n-                  <option value=\"1024x1024\">1024x1024 (高清正方形)</option>\r\n-                </select>\r\n-              </div>\r\n+    <!-- 生成选项 -->\r\n+    <MobileCard\r\n+      title=\"生成选项\"\r\n+      subtitle=\"选择图像尺寸和风格\"\r\n+      icon=\"setting-o\"\r\n+      variant=\"default\"\r\n+    >\r\n+      <div class=\"options-grid\">\r\n+        <div class=\"option-item\">\r\n+          <div class=\"option-label\">图像尺寸</div>\r\n+          <van-field\r\n+            v-model=\"imageSize\"\r\n+            is-link\r\n+            readonly\r\n+            @click=\"showSizePicker = true\"\r\n+            placeholder=\"选择尺寸\"\r\n+          />\r\n+        </div>\r\n \r\n-              <div class=\"option-group\">\r\n-                <label>生成风格：</label>\r\n-                <select v-model=\"style\" class=\"style-select\" :disabled=\"isLoading\">\r\n-                  <option value=\"realistic\">写实风格</option>\r\n-                  <option value=\"anime\">动漫风格</option>\r\n-                  <option value=\"artistic\">艺术风格</option>\r\n+        <div class=\"option-item\">\r\n+          <div class=\"option-label\">生成风格</div>\r\n+          <van-field\r\n+            v-model=\"style\"\r\n+            is-link\r\n+            readonly\r\n+            @click=\"showStylePicker = true\"\r\n+            placeholder=\"选择风格\"\r\n+          />\r\n                   <option value=\"photography\">摄影风格</option>\r\n                 </select>\r\n               </div>\r\n             </div>\r\n"
                },
                {
                    "date": 1752370492129,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -78,47 +78,60 @@\n             is-link\r\n             readonly\r\n             @click=\"showStylePicker = true\"\r\n             placeholder=\"选择风格\"\r\n-          />\r\n-                  <option value=\"photography\">摄影风格</option>\r\n-                </select>\r\n-              </div>\r\n-            </div>\r\n+        </div>\r\n+      </div>\r\n+    </MobileCard>\r\n \r\n-            <van-button\r\n-              @click=\"generateImage\"\r\n-              :disabled=\"isLoading || !prompt.trim()\"\r\n-              type=\"primary\"\r\n-              size=\"large\"\r\n-              round\r\n-              :loading=\"isLoading\"\r\n-              icon=\"photo-o\"\r\n-              class=\"generate-btn\"\r\n-            >\r\n-              {{ isLoading ? '生成中...' : '生成图像' }}\r\n-            </van-button>\r\n-          </div>\r\n+    <!-- 生成按钮 -->\r\n+    <MobileCard>\r\n+      <van-button\r\n+        @click=\"generateImage\"\r\n+        :disabled=\"isLoading || !prompt.trim()\"\r\n+        type=\"primary\"\r\n+        size=\"large\"\r\n+        round\r\n+        block\r\n+        :loading=\"isLoading\"\r\n+        icon=\"photo-o\"\r\n+        class=\"generate-btn\"\r\n+      >\r\n+        {{ isLoading ? '生成中...' : '生成图像' }}\r\n+      </van-button>\r\n+    </MobileCard>\r\n+\r\n+    <!-- 生成结果 -->\r\n+    <MobileCard v-if=\"resultImage\" title=\"生成结果\" subtitle=\"您的AI创作作品\" variant=\"success\">\r\n+      <div class=\"result-image-container\">\r\n+        <img :src=\"resultImage\" alt=\"生成图像\" class=\"result-image\">\r\n+      </div>\r\n+\r\n+      <div class=\"result-info\">\r\n+        <div class=\"info-item\">\r\n+          <span class=\"info-label\">提示词:</span>\r\n+          <span class=\"info-value\">{{ usedPrompt }}</span>\r\n         </div>\r\n+        <div class=\"info-item\">\r\n+          <span class=\"info-label\">尺寸:</span>\r\n+          <span class=\"info-value\">{{ imageSize }}</span>\r\n+        </div>\r\n+        <div class=\"info-item\">\r\n+          <span class=\"info-label\">风格:</span>\r\n+          <span class=\"info-value\">{{ getStyleName(style) }}</span>\r\n+        </div>\r\n+      </div>\r\n \r\n-        <div v-if=\"resultImage\" class=\"result-section\">\r\n-          <div class=\"result-card\">\r\n-            <h3 class=\"result-title\">生成结果</h3>\r\n-            <div class=\"result-image-container\">\r\n-              <img :src=\"resultImage\" alt=\"生成图像\" class=\"result-image\">\r\n-            </div>\r\n-            <div class=\"result-info\">\r\n-              <p><strong>提示词：</strong>{{ usedPrompt }}</p>\r\n-              <p><strong>尺寸：</strong>{{ imageSize }}</p>\r\n-              <p><strong>风格：</strong>{{ getStyleName(style) }}</p>\r\n-            </div>\r\n-            <div class=\"result-actions\">\r\n-              <a\r\n-                :href=\"resultImage\"\r\n-                download=\"text-to-image-result.jpg\"\r\n-                class=\"btn btn-primary download-btn\"\r\n-              >\r\n-                下载图片\r\n+      <template #footer>\r\n+        <van-button\r\n+          type=\"primary\"\r\n+          size=\"large\"\r\n+          round\r\n+          block\r\n+          @click=\"downloadImage\"\r\n+          icon=\"down\"\r\n+        >\r\n+          下载图片\r\n               </a>\r\n               <button @click=\"generateAgain\" class=\"btn btn-secondary\">\r\n                 重新生成\r\n               </button>\r\n"
                },
                {
                    "date": 1752370515886,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -129,19 +129,39 @@\n           block\r\n           @click=\"downloadImage\"\r\n           icon=\"down\"\r\n         >\r\n-          下载图片\r\n-              </a>\r\n-              <button @click=\"generateAgain\" class=\"btn btn-secondary\">\r\n-                重新生成\r\n-              </button>\r\n-            </div>\r\n-          </div>\r\n-        </div>\r\n-      </main>\r\n-    </div>\r\n-  </div>\r\n+        </van-button>\r\n+        <van-button\r\n+          @click=\"generateAgain\"\r\n+          type=\"default\"\r\n+          size=\"large\"\r\n+          round\r\n+          block\r\n+          style=\"margin-top: 12px;\"\r\n+        >\r\n+          重新生成\r\n+        </van-button>\r\n+      </template>\r\n+    </MobileCard>\r\n+\r\n+    <!-- 选择器弹窗 -->\r\n+    <van-popup v-model:show=\"showSizePicker\" position=\"bottom\">\r\n+      <van-picker\r\n+        :columns=\"sizeOptions\"\r\n+        @confirm=\"onSizeConfirm\"\r\n+        @cancel=\"showSizePicker = false\"\r\n+      />\r\n+    </van-popup>\r\n+\r\n+    <van-popup v-model:show=\"showStylePicker\" position=\"bottom\">\r\n+      <van-picker\r\n+        :columns=\"styleOptions\"\r\n+        @confirm=\"onStyleConfirm\"\r\n+        @cancel=\"showStylePicker = false\"\r\n+      />\r\n+    </van-popup>\r\n+  </MobileLayout>\r\n </template>\r\n \r\n <script setup>\r\n import { ref } from 'vue'\r\n"
                },
                {
                    "date": 1752370530876,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -164,10 +164,11 @@\n </template>\r\n \r\n <script setup>\r\n import { ref } from 'vue'\r\n-import UserInfo from '../components/UserInfo.vue'\r\n-import BackToHomeButton from '../components/BackToHomeButton.vue'\r\n+import { Toast } from 'vant'\r\n+import MobileLayout from '../components/MobileLayout.vue'\r\n+import MobileCard from '../components/MobileCard.vue'\r\n // import { comfyApi } from '../services/api.js'\r\n \r\n const prompt = ref('')\r\n const resultImage = ref(null)\r\n"
                },
                {
                    "date": 1752370558755,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -176,8 +176,27 @@\n const usedPrompt = ref('')\r\n const imageSize = ref('512x512')\r\n const style = ref('realistic')\r\n \r\n+// 选择器状态\r\n+const showSizePicker = ref(false)\r\n+const showStylePicker = ref(false)\r\n+\r\n+// 选择器选项\r\n+const sizeOptions = [\r\n+  { text: '512x512 (正方形)', value: '512x512' },\r\n+  { text: '768x512 (横向)', value: '768x512' },\r\n+  { text: '512x768 (纵向)', value: '512x768' },\r\n+  { text: '1024x1024 (高清正方形)', value: '1024x1024' }\r\n+]\r\n+\r\n+const styleOptions = [\r\n+  { text: '写实风格', value: 'realistic' },\r\n+  { text: '动漫风格', value: 'anime' },\r\n+  { text: '艺术风格', value: 'artistic' },\r\n+  { text: '摄影风格', value: 'photography' }\r\n+]\r\n+\r\n const examples = [\r\n   '一只可爱的小猫咪在花园里玩耍，阳光明媚',\r\n   '未来科技城市的夜景，霓虹灯闪烁',\r\n   '古代中国山水画风格的风景，水墨画效果',\r\n"
                },
                {
                    "date": 1752370582676,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -228,8 +228,30 @@\n const generateAgain = () => {\r\n   generateImage()\r\n }\r\n \r\n+// 选择器确认方法\r\n+const onSizeConfirm = ({ selectedOptions }) => {\r\n+  imageSize.value = selectedOptions[0].value\r\n+  showSizePicker.value = false\r\n+}\r\n+\r\n+const onStyleConfirm = ({ selectedOptions }) => {\r\n+  style.value = selectedOptions[0].value\r\n+  showStylePicker.value = false\r\n+}\r\n+\r\n+// 下载图片\r\n+const downloadImage = () => {\r\n+  if (resultImage.value) {\r\n+    const link = document.createElement('a')\r\n+    link.href = resultImage.value\r\n+    link.download = 'text-to-image-result.jpg'\r\n+    link.click()\r\n+    Toast.success('图片下载成功')\r\n+  }\r\n+}\r\n+\r\n const getStyleName = (styleValue) => {\r\n   const styleMap = {\r\n     realistic: '写实风格',\r\n     anime: '动漫风格',\r\n"
                },
                {
                    "date": 1752370608085,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -274,15 +274,96 @@\n }\r\n </script>\r\n \r\n <style scoped>\r\n-.feature-page {\r\n-  min-height: 100vh;\r\n-  padding: 20px;\r\n-  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\r\n-  position: relative;\r\n+/* 文生图移动端样式 */\r\n+.prompt-examples {\r\n+  margin-top: 16px;\r\n }\r\n \r\n+.examples-title {\r\n+  font-size: 14px;\r\n+  color: var(--van-text-color-2);\r\n+  margin-bottom: 12px;\r\n+}\r\n+\r\n+.examples-grid {\r\n+  display: flex;\r\n+  flex-wrap: wrap;\r\n+  gap: 8px;\r\n+}\r\n+\r\n+.example-btn {\r\n+  font-size: 12px !important;\r\n+  padding: 6px 12px !important;\r\n+  white-space: nowrap;\r\n+}\r\n+\r\n+.options-grid {\r\n+  display: flex;\r\n+  flex-direction: column;\r\n+  gap: 16px;\r\n+}\r\n+\r\n+.option-item {\r\n+  display: flex;\r\n+  flex-direction: column;\r\n+  gap: 8px;\r\n+}\r\n+\r\n+.option-label {\r\n+  font-size: 14px;\r\n+  font-weight: 500;\r\n+  color: var(--van-text-color);\r\n+}\r\n+\r\n+.result-image-container {\r\n+  margin: 16px 0;\r\n+  text-align: center;\r\n+}\r\n+\r\n+.result-image {\r\n+  max-width: 100%;\r\n+  height: auto;\r\n+  border-radius: 12px;\r\n+  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);\r\n+}\r\n+\r\n+.result-info {\r\n+  display: flex;\r\n+  flex-direction: column;\r\n+  gap: 12px;\r\n+  margin: 16px 0;\r\n+}\r\n+\r\n+.info-item {\r\n+  display: flex;\r\n+  justify-content: space-between;\r\n+  align-items: flex-start;\r\n+  padding: 8px 0;\r\n+  border-bottom: 1px solid var(--van-border-color);\r\n+}\r\n+\r\n+.info-item:last-child {\r\n+  border-bottom: none;\r\n+}\r\n+\r\n+.info-label {\r\n+  font-size: 14px;\r\n+  color: var(--van-text-color-2);\r\n+  font-weight: 500;\r\n+  min-width: 60px;\r\n+}\r\n+\r\n+.info-value {\r\n+  font-size: 14px;\r\n+  color: var(--van-text-color);\r\n+  text-align: right;\r\n+  flex: 1;\r\n+  word-break: break-word;\r\n+}\r\n+}\r\n+\r\n /* 右上角用户信息 */\r\n .top-corner {\r\n   position: fixed;\r\n   top: 20px;\r\n"
                },
                {
                    "date": 1752370631758,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -360,45 +360,9 @@\n   text-align: right;\r\n   flex: 1;\r\n   word-break: break-word;\r\n }\r\n-}\r\n-\r\n-/* 右上角用户信息 */\r\n-.top-corner {\r\n-  position: fixed;\r\n-  top: 20px;\r\n-  right: 20px;\r\n-  z-index: 1000;\r\n-}\r\n-\r\n-.container {\r\n-  max-width: 1000px;\r\n-  margin: 0 auto;\r\n-}\r\n-\r\n-.page-header {\r\n-  text-align: center;\r\n-  margin-bottom: 40px;\r\n-}\r\n-\r\n-.back-btn {\r\n-  display: inline-flex;\r\n-  align-items: center;\r\n-  gap: 8px;\r\n-  color: rgba(255, 255, 255, 0.9);\r\n-  text-decoration: none;\r\n-  font-size: 1rem;\r\n-  margin-bottom: 20px;\r\n-  transition: var(--transition);\r\n-}\r\n-\r\n-.back-btn:hover {\r\n-  color: white;\r\n-  transform: translateX(-4px);\r\n-}\r\n-\r\n-.back-icon {\r\n+</style>\r\n   font-size: 1.2rem;\r\n }\r\n \r\n .page-title {\r\n"
                },
                {
                    "date": 1752371371076,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -159,8 +159,11 @@\n         @confirm=\"onStyleConfirm\"\r\n         @cancel=\"showStylePicker = false\"\r\n       />\r\n     </van-popup>\r\n+\r\n+    <!-- 底部导航 -->\r\n+    <MobileTabbar />\r\n   </MobileLayout>\r\n </template>\r\n \r\n <script setup>\r\n"
                },
                {
                    "date": 1752371386014,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -170,8 +170,9 @@\n import { ref } from 'vue'\r\n import { Toast } from 'vant'\r\n import MobileLayout from '../components/MobileLayout.vue'\r\n import MobileCard from '../components/MobileCard.vue'\r\n+import MobileTabbar from '../components/MobileTabbar.vue'\r\n // import { comfyApi } from '../services/api.js'\r\n \r\n const prompt = ref('')\r\n const resultImage = ref(null)\r\n"
                },
                {
                    "date": 1752373807668,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,178 +1,119 @@\n <template>\r\n-  <MobileLayout\r\n-    title=\"文生图\"\r\n-    :show-back=\"true\"\r\n-    :show-tabbar=\"true\"\r\n-    @login=\"handleUserLogin\"\r\n-    @logout=\"handleUserLogout\"\r\n-  >\r\n-    <!-- 页面描述 -->\r\n-    <MobileCard\r\n-      title=\"文生图\"\r\n-      subtitle=\"输入文字描述，AI为您生成精美图像\"\r\n-      icon=\"edit\"\r\n-      variant=\"success\"\r\n-    />\r\n+  <div class=\"feature-page\">\r\n+    <!-- 右上角用户信息 -->\r\n+    <div class=\"top-corner\">\r\n+      <UserInfo @login=\"handleUserLogin\" @logout=\"handleUserLogout\" />\r\n+    </div>\r\n \r\n-    <!-- 输入区域 -->\r\n-    <MobileCard\r\n-      title=\"描述您想要的图像\"\r\n-      subtitle=\"详细描述能生成更好的效果\"\r\n-      icon=\"edit\"\r\n-      variant=\"default\"\r\n-    >\r\n-      <van-field\r\n-        v-model=\"prompt\"\r\n-        type=\"textarea\"\r\n-        placeholder=\"请详细描述您想要生成的图像，例如：一只橙色的猫坐在窗台上，窗外是蓝天白云，阳光透过窗户洒在猫咪身上，画面温馨美好，高清摄影风格\"\r\n-        rows=\"4\"\r\n-        autosize\r\n-        :disabled=\"isLoading\"\r\n-        show-word-limit\r\n-        maxlength=\"500\"\r\n-      />\r\n+    <div class=\"container\">\r\n+      <header class=\"page-header\">\r\n+        <BackToHomeButton class=\"back-btn\" />\r\n+        <h1 class=\"page-title\">\r\n+          <van-icon name=\"photo-o\" size=\"32\" color=\"#07c160\" class=\"page-icon\" />\r\n+          文生图\r\n+        </h1>\r\n+        <p class=\"page-description\">输入文字描述，AI为您生成精美图像</p>\r\n+      </header>\r\n \r\n-      <!-- 示例提示词 -->\r\n-      <div class=\"prompt-examples\">\r\n-        <div class=\"examples-title\">示例提示词：</div>\r\n-        <div class=\"examples-grid\">\r\n-          <van-button\r\n-            v-for=\"example in examples\"\r\n-            :key=\"example\"\r\n-            @click=\"prompt = example\"\r\n-            type=\"default\"\r\n-            size=\"small\"\r\n-            plain\r\n-            :disabled=\"isLoading\"\r\n-            class=\"example-btn\"\r\n-          >\r\n-            {{ example }}\r\n-          </van-button>\r\n-        </div>\r\n-      </div>\r\n-    </MobileCard>\r\n+      <main class=\"page-content\">\r\n+        <div class=\"input-section\">\r\n+          <div class=\"input-card\">\r\n+            <h3 class=\"input-title\">描述您想要的图像</h3>\r\n+            <textarea\r\n+              v-model=\"prompt\"\r\n+              placeholder=\"请详细描述您想要生成的图像，例如：一只橙色的猫坐在窗台上，窗外是蓝天白云，阳光透过窗户洒在猫咪身上，画面温馨美好，高清摄影风格\"\r\n+              rows=\"6\"\r\n+              class=\"prompt-input\"\r\n+              :disabled=\"isLoading\"\r\n+            ></textarea>\r\n \r\n-    <!-- 生成选项 -->\r\n-    <MobileCard\r\n-      title=\"生成选项\"\r\n-      subtitle=\"选择图像尺寸和风格\"\r\n-      icon=\"setting-o\"\r\n-      variant=\"default\"\r\n-    >\r\n-      <div class=\"options-grid\">\r\n-        <div class=\"option-item\">\r\n-          <div class=\"option-label\">图像尺寸</div>\r\n-          <van-field\r\n-            v-model=\"imageSize\"\r\n-            is-link\r\n-            readonly\r\n-            @click=\"showSizePicker = true\"\r\n-            placeholder=\"选择尺寸\"\r\n-          />\r\n-        </div>\r\n+            <div class=\"prompt-examples\">\r\n+              <h4>示例提示词：</h4>\r\n+              <div class=\"examples\">\r\n+                <button\r\n+                  v-for=\"example in examples\"\r\n+                  :key=\"example\"\r\n+                  @click=\"prompt = example\"\r\n+                  class=\"example-btn\"\r\n+                  :disabled=\"isLoading\"\r\n+                >\r\n+                  {{ example }}\r\n+                </button>\r\n+              </div>\r\n+            </div>\r\n \r\n-        <div class=\"option-item\">\r\n-          <div class=\"option-label\">生成风格</div>\r\n-          <van-field\r\n-            v-model=\"style\"\r\n-            is-link\r\n-            readonly\r\n-            @click=\"showStylePicker = true\"\r\n-            placeholder=\"选择风格\"\r\n-        </div>\r\n-      </div>\r\n-    </MobileCard>\r\n+            <div class=\"generation-options\">\r\n+              <div class=\"option-group\">\r\n+                <label>图像尺寸：</label>\r\n+                <select v-model=\"imageSize\" class=\"size-select\" :disabled=\"isLoading\">\r\n+                  <option value=\"512x512\">512x512 (正方形)</option>\r\n+                  <option value=\"768x512\">768x512 (横向)</option>\r\n+                  <option value=\"512x768\">512x768 (纵向)</option>\r\n+                  <option value=\"1024x1024\">1024x1024 (高清正方形)</option>\r\n+                </select>\r\n+              </div>\r\n \r\n-    <!-- 生成按钮 -->\r\n-    <MobileCard>\r\n-      <van-button\r\n-        @click=\"generateImage\"\r\n-        :disabled=\"isLoading || !prompt.trim()\"\r\n-        type=\"primary\"\r\n-        size=\"large\"\r\n-        round\r\n-        block\r\n-        :loading=\"isLoading\"\r\n-        icon=\"photo-o\"\r\n-        class=\"generate-btn\"\r\n-      >\r\n-        {{ isLoading ? '生成中...' : '生成图像' }}\r\n-      </van-button>\r\n-    </MobileCard>\r\n+              <div class=\"option-group\">\r\n+                <label>生成风格：</label>\r\n+                <select v-model=\"style\" class=\"style-select\" :disabled=\"isLoading\">\r\n+                  <option value=\"realistic\">写实风格</option>\r\n+                  <option value=\"anime\">动漫风格</option>\r\n+                  <option value=\"artistic\">艺术风格</option>\r\n+                  <option value=\"photography\">摄影风格</option>\r\n+                </select>\r\n+              </div>\r\n+            </div>\r\n \r\n-    <!-- 生成结果 -->\r\n-    <MobileCard v-if=\"resultImage\" title=\"生成结果\" subtitle=\"您的AI创作作品\" variant=\"success\">\r\n-      <div class=\"result-image-container\">\r\n-        <img :src=\"resultImage\" alt=\"生成图像\" class=\"result-image\">\r\n-      </div>\r\n+            <van-button\r\n+              @click=\"generateImage\"\r\n+              :disabled=\"isLoading || !prompt.trim()\"\r\n+              type=\"primary\"\r\n+              size=\"large\"\r\n+              round\r\n+              :loading=\"isLoading\"\r\n+              icon=\"photo-o\"\r\n+              class=\"generate-btn\"\r\n+            >\r\n+              {{ isLoading ? '生成中...' : '生成图像' }}\r\n+            </van-button>\r\n+          </div>\r\n+        </div>\r\n \r\n-      <div class=\"result-info\">\r\n-        <div class=\"info-item\">\r\n-          <span class=\"info-label\">提示词:</span>\r\n-          <span class=\"info-value\">{{ usedPrompt }}</span>\r\n+        <div v-if=\"resultImage\" class=\"result-section\">\r\n+          <div class=\"result-card\">\r\n+            <h3 class=\"result-title\">生成结果</h3>\r\n+            <div class=\"result-image-container\">\r\n+              <img :src=\"resultImage\" alt=\"生成图像\" class=\"result-image\">\r\n+            </div>\r\n+            <div class=\"result-info\">\r\n+              <p><strong>提示词：</strong>{{ usedPrompt }}</p>\r\n+              <p><strong>尺寸：</strong>{{ imageSize }}</p>\r\n+              <p><strong>风格：</strong>{{ getStyleName(style) }}</p>\r\n+            </div>\r\n+            <div class=\"result-actions\">\r\n+              <a\r\n+                :href=\"resultImage\"\r\n+                download=\"text-to-image-result.jpg\"\r\n+                class=\"btn btn-primary download-btn\"\r\n+              >\r\n+                下载图片\r\n+              </a>\r\n+              <button @click=\"generateAgain\" class=\"btn btn-secondary\">\r\n+                重新生成\r\n+              </button>\r\n+            </div>\r\n+          </div>\r\n         </div>\r\n-        <div class=\"info-item\">\r\n-          <span class=\"info-label\">尺寸:</span>\r\n-          <span class=\"info-value\">{{ imageSize }}</span>\r\n-        </div>\r\n-        <div class=\"info-item\">\r\n-          <span class=\"info-label\">风格:</span>\r\n-          <span class=\"info-value\">{{ getStyleName(style) }}</span>\r\n-        </div>\r\n-      </div>\r\n-\r\n-      <template #footer>\r\n-        <van-button\r\n-          type=\"primary\"\r\n-          size=\"large\"\r\n-          round\r\n-          block\r\n-          @click=\"downloadImage\"\r\n-          icon=\"down\"\r\n-        >\r\n-        </van-button>\r\n-        <van-button\r\n-          @click=\"generateAgain\"\r\n-          type=\"default\"\r\n-          size=\"large\"\r\n-          round\r\n-          block\r\n-          style=\"margin-top: 12px;\"\r\n-        >\r\n-          重新生成\r\n-        </van-button>\r\n-      </template>\r\n-    </MobileCard>\r\n-\r\n-    <!-- 选择器弹窗 -->\r\n-    <van-popup v-model:show=\"showSizePicker\" position=\"bottom\">\r\n-      <van-picker\r\n-        :columns=\"sizeOptions\"\r\n-        @confirm=\"onSizeConfirm\"\r\n-        @cancel=\"showSizePicker = false\"\r\n-      />\r\n-    </van-popup>\r\n-\r\n-    <van-popup v-model:show=\"showStylePicker\" position=\"bottom\">\r\n-      <van-picker\r\n-        :columns=\"styleOptions\"\r\n-        @confirm=\"onStyleConfirm\"\r\n-        @cancel=\"showStylePicker = false\"\r\n-      />\r\n-    </van-popup>\r\n-\r\n-    <!-- 底部导航 -->\r\n-    <MobileTabbar />\r\n-  </MobileLayout>\r\n+      </main>\r\n+    </div>\r\n+  </div>\r\n </template>\r\n \r\n <script setup>\r\n import { ref } from 'vue'\r\n-import { Toast } from 'vant'\r\n-import MobileLayout from '../components/MobileLayout.vue'\r\n-import MobileCard from '../components/MobileCard.vue'\r\n-import MobileTabbar from '../components/MobileTabbar.vue'\r\n+import UserInfo from '../components/UserInfo.vue'\r\n+import BackToHomeButton from '../components/BackToHomeButton.vue'\r\n // import { comfyApi } from '../services/api.js'\r\n \r\n const prompt = ref('')\r\n const resultImage = ref(null)\r\n@@ -180,27 +121,8 @@\n const usedPrompt = ref('')\r\n const imageSize = ref('512x512')\r\n const style = ref('realistic')\r\n \r\n-// 选择器状态\r\n-const showSizePicker = ref(false)\r\n-const showStylePicker = ref(false)\r\n-\r\n-// 选择器选项\r\n-const sizeOptions = [\r\n-  { text: '512x512 (正方形)', value: '512x512' },\r\n-  { text: '768x512 (横向)', value: '768x512' },\r\n-  { text: '512x768 (纵向)', value: '512x768' },\r\n-  { text: '1024x1024 (高清正方形)', value: '1024x1024' }\r\n-]\r\n-\r\n-const styleOptions = [\r\n-  { text: '写实风格', value: 'realistic' },\r\n-  { text: '动漫风格', value: 'anime' },\r\n-  { text: '艺术风格', value: 'artistic' },\r\n-  { text: '摄影风格', value: 'photography' }\r\n-]\r\n-\r\n const examples = [\r\n   '一只可爱的小猫咪在花园里玩耍，阳光明媚',\r\n   '未来科技城市的夜景，霓虹灯闪烁',\r\n   '古代中国山水画风格的风景，水墨画效果',\r\n@@ -232,30 +154,8 @@\n const generateAgain = () => {\r\n   generateImage()\r\n }\r\n \r\n-// 选择器确认方法\r\n-const onSizeConfirm = ({ selectedOptions }) => {\r\n-  imageSize.value = selectedOptions[0].value\r\n-  showSizePicker.value = false\r\n-}\r\n-\r\n-const onStyleConfirm = ({ selectedOptions }) => {\r\n-  style.value = selectedOptions[0].value\r\n-  showStylePicker.value = false\r\n-}\r\n-\r\n-// 下载图片\r\n-const downloadImage = () => {\r\n-  if (resultImage.value) {\r\n-    const link = document.createElement('a')\r\n-    link.href = resultImage.value\r\n-    link.download = 'text-to-image-result.jpg'\r\n-    link.click()\r\n-    Toast.success('图片下载成功')\r\n-  }\r\n-}\r\n-\r\n const getStyleName = (styleValue) => {\r\n   const styleMap = {\r\n     realistic: '写实风格',\r\n     anime: '动漫风格',\r\n@@ -278,95 +178,50 @@\n }\r\n </script>\r\n \r\n <style scoped>\r\n-/* 文生图移动端样式 */\r\n-.prompt-examples {\r\n-  margin-top: 16px;\r\n+.feature-page {\r\n+  min-height: 100vh;\r\n+  padding: 20px;\r\n+  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\r\n+  position: relative;\r\n }\r\n \r\n-.examples-title {\r\n-  font-size: 14px;\r\n-  color: var(--van-text-color-2);\r\n-  margin-bottom: 12px;\r\n+/* 右上角用户信息 */\r\n+.top-corner {\r\n+  position: fixed;\r\n+  top: 20px;\r\n+  right: 20px;\r\n+  z-index: 1000;\r\n }\r\n \r\n-.examples-grid {\r\n-  display: flex;\r\n-  flex-wrap: wrap;\r\n-  gap: 8px;\r\n+.container {\r\n+  max-width: 1000px;\r\n+  margin: 0 auto;\r\n }\r\n \r\n-.example-btn {\r\n-  font-size: 12px !important;\r\n-  padding: 6px 12px !important;\r\n-  white-space: nowrap;\r\n+.page-header {\r\n+  text-align: center;\r\n+  margin-bottom: 40px;\r\n }\r\n \r\n-.options-grid {\r\n-  display: flex;\r\n-  flex-direction: column;\r\n-  gap: 16px;\r\n-}\r\n-\r\n-.option-item {\r\n-  display: flex;\r\n-  flex-direction: column;\r\n+.back-btn {\r\n+  display: inline-flex;\r\n+  align-items: center;\r\n   gap: 8px;\r\n+  color: rgba(255, 255, 255, 0.9);\r\n+  text-decoration: none;\r\n+  font-size: 1rem;\r\n+  margin-bottom: 20px;\r\n+  transition: var(--transition);\r\n }\r\n \r\n-.option-label {\r\n-  font-size: 14px;\r\n-  font-weight: 500;\r\n-  color: var(--van-text-color);\r\n+.back-btn:hover {\r\n+  color: white;\r\n+  transform: translateX(-4px);\r\n }\r\n \r\n-.result-image-container {\r\n-  margin: 16px 0;\r\n-  text-align: center;\r\n-}\r\n-\r\n-.result-image {\r\n-  max-width: 100%;\r\n-  height: auto;\r\n-  border-radius: 12px;\r\n-  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);\r\n-}\r\n-\r\n-.result-info {\r\n-  display: flex;\r\n-  flex-direction: column;\r\n-  gap: 12px;\r\n-  margin: 16px 0;\r\n-}\r\n-\r\n-.info-item {\r\n-  display: flex;\r\n-  justify-content: space-between;\r\n-  align-items: flex-start;\r\n-  padding: 8px 0;\r\n-  border-bottom: 1px solid var(--van-border-color);\r\n-}\r\n-\r\n-.info-item:last-child {\r\n-  border-bottom: none;\r\n-}\r\n-\r\n-.info-label {\r\n-  font-size: 14px;\r\n-  color: var(--van-text-color-2);\r\n-  font-weight: 500;\r\n-  min-width: 60px;\r\n-}\r\n-\r\n-.info-value {\r\n-  font-size: 14px;\r\n-  color: var(--van-text-color);\r\n-  text-align: right;\r\n-  flex: 1;\r\n-  word-break: break-word;\r\n-}\r\n-</style>\r\n+.back-icon {\r\n   font-size: 1.2rem;\r\n }\r\n \r\n .page-title {\r\n"
                },
                {
                    "date": 1752375108950,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,14 +1,15 @@\n <template>\r\n   <div class=\"feature-page\">\r\n-    <!-- 右上角用户信息 -->\r\n-    <div class=\"top-corner\">\r\n-      <UserInfo @login=\"handleUserLogin\" @logout=\"handleUserLogout\" />\r\n-    </div>\r\n+    <!-- 顶部导航 -->\r\n+    <TopNavigation\r\n+      title=\"文生图\"\r\n+      @login=\"handleUserLogin\"\r\n+      @logout=\"handleUserLogout\"\r\n+    />\r\n \r\n     <div class=\"container\">\r\n       <header class=\"page-header\">\r\n-        <BackToHomeButton class=\"back-btn\" />\r\n         <h1 class=\"page-title\">\r\n           <van-icon name=\"photo-o\" size=\"32\" color=\"#07c160\" class=\"page-icon\" />\r\n           文生图\r\n         </h1>\r\n"
                },
                {
                    "date": 1752375124198,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -111,10 +111,9 @@\n </template>\r\n \r\n <script setup>\r\n import { ref } from 'vue'\r\n-import UserInfo from '../components/UserInfo.vue'\r\n-import BackToHomeButton from '../components/BackToHomeButton.vue'\r\n+import TopNavigation from '../components/TopNavigation.vue'\r\n // import { comfyApi } from '../services/api.js'\r\n \r\n const prompt = ref('')\r\n const resultImage = ref(null)\r\n"
                },
                {
                    "date": 1752375286521,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -181,20 +181,13 @@\n <style scoped>\r\n .feature-page {\r\n   min-height: 100vh;\r\n   padding: 20px;\r\n+  padding-top: 80px; /* 为固定导航栏留出空间 */\r\n   background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\r\n   position: relative;\r\n }\r\n \r\n-/* 右上角用户信息 */\r\n-.top-corner {\r\n-  position: fixed;\r\n-  top: 20px;\r\n-  right: 20px;\r\n-  z-index: 1000;\r\n-}\r\n-\r\n .container {\r\n   max-width: 1000px;\r\n   margin: 0 auto;\r\n }\r\n"
                },
                {
                    "date": 1752384071758,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,104 +1,139 @@\n <template>\r\n-  <div class=\"feature-page\">\r\n-    <!-- 顶部导航 -->\r\n-    <TopNavigation\r\n-      title=\"文生图\"\r\n-      @login=\"handleUserLogin\"\r\n-      @logout=\"handleUserLogout\"\r\n-    />\r\n+  <AIProcessingTemplate\r\n+    title=\"文生图\"\r\n+    description=\"输入文字描述，AI为您生成精美图像\"\r\n+    title-icon-name=\"photo-o\"\r\n+    title-icon-color=\"var(--van-success-color)\"\r\n+    :is-processing=\"isLoading\"\r\n+    :can-process=\"!!prompt.trim()\"\r\n+    :show-upload-tips=\"!prompt.trim()\"\r\n+    process-button-text=\"生成图像\"\r\n+    title-icon-name=\"photo-o\"\r\n+    :progress=\"progressPercent\"\r\n+    processing-title=\"正在生成图像...\"\r\n+    processing-description=\"请耐心等待，AI正在为您创作\"\r\n+    :processing-info=\"{ promptId, processingTime }\"\r\n+    :result-data=\"resultImage\"\r\n+    @login=\"handleUserLogin\"\r\n+    @logout=\"handleUserLogout\"\r\n+    @process=\"generateImage\"\r\n+  >\r\n+    <!-- 输入区域 -->\r\n+    <template #inputs>\r\n+      <VantTextInput\r\n+        v-model=\"prompt\"\r\n+        title=\"描述您想要的图像\"\r\n+        placeholder=\"请详细描述您想要生成的图像，例如：一只橙色的猫坐在窗台上，窗外是蓝天白云，阳光透过窗户洒在猫咪身上，画面温馨美好，高清摄影风格\"\r\n+        :rows=\"6\"\r\n+        :max-length=\"500\"\r\n+        :disabled=\"isLoading\"\r\n+        :show-examples=\"true\"\r\n+        :examples=\"examples\"\r\n+        :show-options=\"true\"\r\n+        :options=\"generationOptions\"\r\n+        v-model:option-values=\"optionValues\"\r\n+        @change=\"handlePromptChange\"\r\n+        @option-change=\"handleOptionChange\"\r\n+      />\r\n+    </template>\r\n \r\n-    <div class=\"container\">\r\n-      <header class=\"page-header\">\r\n-        <h1 class=\"page-title\">\r\n-          <van-icon name=\"photo-o\" size=\"32\" color=\"#07c160\" class=\"page-icon\" />\r\n-          文生图\r\n-        </h1>\r\n-        <p class=\"page-description\">输入文字描述，AI为您生成精美图像</p>\r\n-      </header>\r\n+    <!-- 上传提示 -->\r\n+    <template #upload-tips>\r\n+      <div class=\"tip-item\">\r\n+        <van-icon\r\n+          name=\"edit\"\r\n+          color=\"var(--van-text-color-3)\"\r\n+          size=\"16\"\r\n+        />\r\n+        <span>请输入图像描述开始生成</span>\r\n+      </div>\r\n+    </template>\r\n \r\n-      <main class=\"page-content\">\r\n-        <div class=\"input-section\">\r\n-          <div class=\"input-card\">\r\n-            <h3 class=\"input-title\">描述您想要的图像</h3>\r\n-            <textarea\r\n-              v-model=\"prompt\"\r\n-              placeholder=\"请详细描述您想要生成的图像，例如：一只橙色的猫坐在窗台上，窗外是蓝天白云，阳光透过窗户洒在猫咪身上，画面温馨美好，高清摄影风格\"\r\n-              rows=\"6\"\r\n-              class=\"prompt-input\"\r\n-              :disabled=\"isLoading\"\r\n-            ></textarea>\r\n+    <!-- 结果展示 -->\r\n+    <template #result=\"{ result }\">\r\n+      <MobileCard title=\"生成结果\" inset>\r\n+        <!-- 生成的图像 -->\r\n+        <div class=\"result-image-container\">\r\n+          <van-image\r\n+            :src=\"result\"\r\n+            fit=\"cover\"\r\n+            :show-loading=\"true\"\r\n+            :show-error=\"true\"\r\n+            class=\"result-image\"\r\n+            @click=\"previewImage(result)\"\r\n+          >\r\n+            <template #loading>\r\n+              <van-loading type=\"spinner\" size=\"20\" />\r\n+            </template>\r\n+            <template #error>\r\n+              <van-icon name=\"photo-fail\" size=\"32\" />\r\n+            </template>\r\n+          </van-image>\r\n+        </div>\r\n \r\n-            <div class=\"prompt-examples\">\r\n-              <h4>示例提示词：</h4>\r\n-              <div class=\"examples\">\r\n-                <button\r\n-                  v-for=\"example in examples\"\r\n-                  :key=\"example\"\r\n-                  @click=\"prompt = example\"\r\n-                  class=\"example-btn\"\r\n-                  :disabled=\"isLoading\"\r\n-                >\r\n-                  {{ example }}\r\n-                </button>\r\n-              </div>\r\n-            </div>\r\n+        <!-- 生成信息 -->\r\n+        <van-cell-group inset>\r\n+          <van-cell\r\n+            title=\"提示词\"\r\n+            :value=\"usedPrompt\"\r\n+            icon=\"edit\"\r\n+            is-link\r\n+            @click=\"showPromptDetail\"\r\n+          />\r\n+          <van-cell\r\n+            title=\"图像尺寸\"\r\n+            :value=\"optionValues.imageSize || '512x512'\"\r\n+            icon=\"resize\"\r\n+          />\r\n+          <van-cell\r\n+            title=\"生成风格\"\r\n+            :value=\"getStyleName(optionValues.style || 'realistic')\"\r\n+            icon=\"brush-o\"\r\n+          />\r\n+          <van-cell\r\n+            v-if=\"processingTime\"\r\n+            title=\"生成时间\"\r\n+            :value=\"`${Math.floor(processingTime / 1000)}秒`\"\r\n+            icon=\"clock-o\"\r\n+          />\r\n+        </van-cell-group>\r\n \r\n-            <div class=\"generation-options\">\r\n-              <div class=\"option-group\">\r\n-                <label>图像尺寸：</label>\r\n-                <select v-model=\"imageSize\" class=\"size-select\" :disabled=\"isLoading\">\r\n-                  <option value=\"512x512\">512x512 (正方形)</option>\r\n-                  <option value=\"768x512\">768x512 (横向)</option>\r\n-                  <option value=\"512x768\">512x768 (纵向)</option>\r\n-                  <option value=\"1024x1024\">1024x1024 (高清正方形)</option>\r\n-                </select>\r\n-              </div>\r\n+        <!-- 操作按钮 -->\r\n+        <div class=\"result-actions\">\r\n+          <van-button\r\n+            type=\"primary\"\r\n+            size=\"small\"\r\n+            icon=\"down\"\r\n+            @click=\"downloadImage\"\r\n+            class=\"action-btn\"\r\n+          >\r\n+            下载图片\r\n+          </van-button>\r\n \r\n-              <div class=\"option-group\">\r\n-                <label>生成风格：</label>\r\n-                <select v-model=\"style\" class=\"style-select\" :disabled=\"isLoading\">\r\n-                  <option value=\"realistic\">写实风格</option>\r\n-                  <option value=\"anime\">动漫风格</option>\r\n-                  <option value=\"artistic\">艺术风格</option>\r\n-                  <option value=\"photography\">摄影风格</option>\r\n-                </select>\r\n-              </div>\r\n-            </div>\r\n+          <van-button\r\n+            type=\"default\"\r\n+            size=\"small\"\r\n+            icon=\"photo-o\"\r\n+            @click=\"previewImage(result)\"\r\n+            class=\"action-btn\"\r\n+          >\r\n+            预览图片\r\n+          </van-button>\r\n \r\n-            <van-button\r\n-              @click=\"generateImage\"\r\n-              :disabled=\"isLoading || !prompt.trim()\"\r\n-              type=\"primary\"\r\n-              size=\"large\"\r\n-              round\r\n-              :loading=\"isLoading\"\r\n-              icon=\"photo-o\"\r\n-              class=\"generate-btn\"\r\n-            >\r\n-              {{ isLoading ? '生成中...' : '生成图像' }}\r\n-            </van-button>\r\n-          </div>\r\n+          <van-button\r\n+            type=\"warning\"\r\n+            size=\"small\"\r\n+            icon=\"replay\"\r\n+            @click=\"resetGeneration\"\r\n+            class=\"action-btn\"\r\n+          >\r\n+            重新生成\r\n+          </van-button>\r\n         </div>\r\n-\r\n-        <div v-if=\"resultImage\" class=\"result-section\">\r\n-          <div class=\"result-card\">\r\n-            <h3 class=\"result-title\">生成结果</h3>\r\n-            <div class=\"result-image-container\">\r\n-              <img :src=\"resultImage\" alt=\"生成图像\" class=\"result-image\">\r\n-            </div>\r\n-            <div class=\"result-info\">\r\n-              <p><strong>提示词：</strong>{{ usedPrompt }}</p>\r\n-              <p><strong>尺寸：</strong>{{ imageSize }}</p>\r\n-              <p><strong>风格：</strong>{{ getStyleName(style) }}</p>\r\n-            </div>\r\n-            <div class=\"result-actions\">\r\n-              <a\r\n-                :href=\"resultImage\"\r\n-                download=\"text-to-image-result.jpg\"\r\n-                class=\"btn btn-primary download-btn\"\r\n-              >\r\n-                下载图片\r\n+      </MobileCard>\r\n+    </template>\r\n+  </AIProcessingTemplate>\r\n               </a>\r\n               <button @click=\"generateAgain\" class=\"btn btn-secondary\">\r\n                 重新生成\r\n               </button>\r\n"
                },
                {
                    "date": 1752384104608,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -132,40 +132,67 @@\n         </div>\r\n       </MobileCard>\r\n     </template>\r\n   </AIProcessingTemplate>\r\n-              </a>\r\n-              <button @click=\"generateAgain\" class=\"btn btn-secondary\">\r\n-                重新生成\r\n-              </button>\r\n-            </div>\r\n-          </div>\r\n-        </div>\r\n-      </main>\r\n-    </div>\r\n-  </div>\r\n </template>\r\n \r\n <script setup>\r\n import { ref } from 'vue'\r\n-import TopNavigation from '../components/TopNavigation.vue'\r\n-// import { comfyApi } from '../services/api.js'\r\n+import { ImagePreview, Toast } from 'vant'\r\n+import {\r\n+  AIProcessingTemplate,\r\n+  MobileCard,\r\n+  VantTextInput\r\n+} from '../components/mobile'\r\n \r\n+// 响应式数据\r\n const prompt = ref('')\r\n const resultImage = ref(null)\r\n const isLoading = ref(false)\r\n const usedPrompt = ref('')\r\n-const imageSize = ref('512x512')\r\n-const style = ref('realistic')\r\n+const progressPercent = ref(0)\r\n+const promptId = ref('')\r\n+const processingTime = ref(0)\r\n \r\n+// 配置选项\r\n+const optionValues = ref({\r\n+  imageSize: '512x512',\r\n+  style: 'realistic'\r\n+})\r\n+\r\n const examples = [\r\n   '一只可爱的小猫咪在花园里玩耍，阳光明媚',\r\n   '未来科技城市的夜景，霓虹灯闪烁',\r\n   '古代中国山水画风格的风景，水墨画效果',\r\n   '宇宙中的星云和行星，科幻风格',\r\n   '温馨的咖啡厅内景，暖色调灯光'\r\n ]\r\n \r\n+const generationOptions = [\r\n+  {\r\n+    key: 'imageSize',\r\n+    label: '图像尺寸',\r\n+    defaultValue: '512x512',\r\n+    options: [\r\n+      { text: '512x512 (正方形)', value: '512x512' },\r\n+      { text: '768x512 (横向)', value: '768x512' },\r\n+      { text: '512x768 (纵向)', value: '512x768' },\r\n+      { text: '1024x1024 (高清正方形)', value: '1024x1024' }\r\n+    ]\r\n+  },\r\n+  {\r\n+    key: 'style',\r\n+    label: '生成风格',\r\n+    defaultValue: 'realistic',\r\n+    options: [\r\n+      { text: '写实风格', value: 'realistic' },\r\n+      { text: '动漫风格', value: 'anime' },\r\n+      { text: '艺术风格', value: 'artistic' },\r\n+      { text: '摄影风格', value: 'photography' }\r\n+    ]\r\n+  }\r\n+]\r\n+\r\n const generateImage = async () => {\r\n   if (!prompt.value.trim()) return\r\n \r\n   isLoading.value = true\r\n"
                },
                {
                    "date": 1752384145780,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -191,33 +191,92 @@\n     ]\r\n   }\r\n ]\r\n \r\n+// 方法\r\n+const handlePromptChange = (value) => {\r\n+  console.log('提示词变化:', value)\r\n+}\r\n+\r\n+const handleOptionChange = (values) => {\r\n+  console.log('选项变化:', values)\r\n+}\r\n+\r\n const generateImage = async () => {\r\n   if (!prompt.value.trim()) return\r\n \r\n   isLoading.value = true\r\n   usedPrompt.value = prompt.value\r\n+  progressPercent.value = 0\r\n+  promptId.value = `txt2img_${Date.now()}`\r\n \r\n+  const startTime = Date.now()\r\n+\r\n   try {\r\n-    // 模拟文生图处理\r\n-    await new Promise(resolve => setTimeout(resolve, 3000))\r\n+    // 模拟生成进度\r\n+    progressPercent.value = 20\r\n+    await new Promise(resolve => setTimeout(resolve, 1000))\r\n \r\n+    progressPercent.value = 50\r\n+    await new Promise(resolve => setTimeout(resolve, 1000))\r\n+\r\n+    progressPercent.value = 80\r\n+    await new Promise(resolve => setTimeout(resolve, 1000))\r\n+\r\n     // 模拟生成结果 - 使用一个示例图片\r\n     resultImage.value = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTEyIiBoZWlnaHQ9IjUxMiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iNTEyIiBoZWlnaHQ9IjUxMiIgZmlsbD0iIzY2N2VlYSIvPjx0ZXh0IHg9IjI1NiIgeT0iMjU2IiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMjQiIGZpbGw9IndoaXRlIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBkeT0iLjNlbSI+6ZSA55Sf5Zu+PC90ZXh0Pjx0ZXh0IHg9IjI1NiIgeT0iMzAwIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTYiIGZpbGw9IndoaXRlIiBvcGFjaXR5PSIwLjgiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGR5PSIuM2VtIj7mqKHmi5/nu5PmnpwgKOW+heWQjuWunueOsClcPC90ZXh0Pjwvc3ZnPg=='\r\n \r\n+    progressPercent.value = 100\r\n+    processingTime.value = Date.now() - startTime\r\n+\r\n+    Toast.success('图像生成成功！')\r\n+\r\n   } catch (error) {\r\n     console.error('生成失败:', error)\r\n-    alert('生成失败，请重试')\r\n+    Toast.fail('生成失败，请重试')\r\n   } finally {\r\n     isLoading.value = false\r\n   }\r\n }\r\n \r\n-const generateAgain = () => {\r\n-  generateImage()\r\n+const resetGeneration = () => {\r\n+  prompt.value = ''\r\n+  resultImage.value = null\r\n+  usedPrompt.value = ''\r\n+  progressPercent.value = 0\r\n+  promptId.value = ''\r\n+  processingTime.value = 0\r\n+  Toast.success('已重置，可以重新生成')\r\n }\r\n \r\n+const previewImage = (imageUrl) => {\r\n+  ImagePreview({\r\n+    images: [imageUrl],\r\n+    showIndex: false,\r\n+    closeable: true\r\n+  })\r\n+}\r\n+\r\n+const downloadImage = async () => {\r\n+  try {\r\n+    const link = document.createElement('a')\r\n+    link.href = resultImage.value\r\n+    link.download = `text-to-image-${Date.now()}.jpg`\r\n+    document.body.appendChild(link)\r\n+    link.click()\r\n+    document.body.removeChild(link)\r\n+\r\n+    Toast.success('开始下载图片')\r\n+  } catch (error) {\r\n+    console.error('下载失败:', error)\r\n+    Toast.fail('下载失败，请重试')\r\n+  }\r\n+}\r\n+\r\n+const showPromptDetail = () => {\r\n+  Toast(usedPrompt.value)\r\n+}\r\n+\r\n const getStyleName = (styleValue) => {\r\n   const styleMap = {\r\n     realistic: '写实风格',\r\n     anime: '动漫风格',\r\n@@ -229,8 +288,19 @@\n \r\n // 用户登录成功回调\r\n const handleUserLogin = (data) => {\r\n   console.log('用户登录成功:', data)\r\n+}\r\n+\r\n+// 用户登出回调\r\n+const handleUserLogout = () => {\r\n+  console.log('用户已登出')\r\n+}\r\n+}\r\n+\r\n+// 用户登录成功回调\r\n+const handleUserLogin = (data) => {\r\n+  console.log('用户登录成功:', data)\r\n   // 可以在这里触发一些需要登录状态的操作\r\n }\r\n \r\n // 用户登出回调\r\n"
                },
                {
                    "date": 1752384366420,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -310,258 +310,46 @@\n }\r\n </script>\r\n \r\n <style scoped>\r\n-.feature-page {\r\n-  min-height: 100vh;\r\n-  padding: 20px;\r\n-  padding-top: 80px; /* 为固定导航栏留出空间 */\r\n-  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\r\n-  position: relative;\r\n-}\r\n-\r\n-.container {\r\n-  max-width: 1000px;\r\n-  margin: 0 auto;\r\n-}\r\n-\r\n-.page-header {\r\n-  text-align: center;\r\n-  margin-bottom: 40px;\r\n-}\r\n-\r\n-.back-btn {\r\n-  display: inline-flex;\r\n-  align-items: center;\r\n-  gap: 8px;\r\n-  color: rgba(255, 255, 255, 0.9);\r\n-  text-decoration: none;\r\n-  font-size: 1rem;\r\n-  margin-bottom: 20px;\r\n-  transition: var(--transition);\r\n-}\r\n-\r\n-.back-btn:hover {\r\n-  color: white;\r\n-  transform: translateX(-4px);\r\n-}\r\n-\r\n-.back-icon {\r\n-  font-size: 1.2rem;\r\n-}\r\n-\r\n-.page-title {\r\n-  font-size: 3rem;\r\n-  color: white;\r\n+/* 结果展示样式 */\r\n+.result-image-container {\r\n   margin-bottom: 16px;\r\n-  text-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);\r\n }\r\n \r\n-.page-icon {\r\n-  margin-right: 16px;\r\n-}\r\n-\r\n-.page-description {\r\n-  font-size: 1.2rem;\r\n-  color: rgba(255, 255, 255, 0.8);\r\n-}\r\n-\r\n-.page-content {\r\n-  display: flex;\r\n-  flex-direction: column;\r\n-  gap: 40px;\r\n-}\r\n-\r\n-.input-section {\r\n-  display: flex;\r\n-  justify-content: center;\r\n-}\r\n-\r\n-.input-card {\r\n-  background: rgba(255, 255, 255, 0.95);\r\n-  border-radius: 20px;\r\n-  padding: 32px;\r\n-  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);\r\n-  backdrop-filter: blur(10px);\r\n-  max-width: 800px;\r\n+.result-image {\r\n   width: 100%;\r\n+  border-radius: 8px;\r\n+  cursor: pointer;\r\n }\r\n \r\n-.input-title {\r\n-  font-size: 1.5rem;\r\n-  margin-bottom: 20px;\r\n-  color: var(--text-color);\r\n-  text-align: center;\r\n-}\r\n-\r\n-.prompt-input {\r\n-  width: 100%;\r\n-  padding: 16px;\r\n-  border: 2px solid #e1e5e9;\r\n-  border-radius: 12px;\r\n-  font-size: 16px;\r\n-  line-height: 1.5;\r\n-  resize: vertical;\r\n-  transition: var(--transition);\r\n-  font-family: inherit;\r\n-}\r\n-\r\n-.prompt-input:focus {\r\n-  outline: none;\r\n-  border-color: var(--primary-color);\r\n-  box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);\r\n-}\r\n-\r\n-.prompt-examples {\r\n-  margin: 24px 0;\r\n-}\r\n-\r\n-.prompt-examples h4 {\r\n-  margin-bottom: 12px;\r\n-  color: var(--text-color);\r\n-  font-size: 1rem;\r\n-}\r\n-\r\n-.examples {\r\n+.result-actions {\r\n   display: flex;\r\n+  gap: 8px;\r\n+  margin-top: 16px;\r\n   flex-wrap: wrap;\r\n-  gap: 8px;\r\n }\r\n \r\n-.example-btn {\r\n-  padding: 8px 16px;\r\n-  background: #f8f9fa;\r\n-  border: 1px solid #dee2e6;\r\n-  border-radius: 20px;\r\n-  font-size: 0.9rem;\r\n-  cursor: pointer;\r\n-  transition: var(--transition);\r\n+.action-btn {\r\n+  flex: 1;\r\n+  min-width: 0;\r\n }\r\n \r\n-.example-btn:hover {\r\n-  background: var(--primary-color);\r\n-  color: white;\r\n-  border-color: var(--primary-color);\r\n-}\r\n-\r\n-.generation-options {\r\n-  display: grid;\r\n-  grid-template-columns: 1fr 1fr;\r\n-  gap: 20px;\r\n-  margin: 24px 0;\r\n-}\r\n-\r\n-.option-group {\r\n+.tip-item {\r\n   display: flex;\r\n-  flex-direction: column;\r\n+  align-items: center;\r\n   gap: 8px;\r\n-}\r\n-\r\n-.option-group label {\r\n-  font-weight: 600;\r\n-  color: var(--text-color);\r\n-}\r\n-\r\n-.size-select, .style-select {\r\n-  padding: 10px 12px;\r\n-  border: 2px solid #e1e5e9;\r\n-  border-radius: 8px;\r\n   font-size: 14px;\r\n-  transition: var(--transition);\r\n+  color: var(--van-text-color-2, #646566);\r\n }\r\n \r\n-.size-select:focus, .style-select:focus {\r\n-  outline: none;\r\n-  border-color: var(--primary-color);\r\n-}\r\n-\r\n-.generate-btn {\r\n-  width: 100%;\r\n-  font-size: 1.1rem;\r\n-  padding: 16px;\r\n-  margin-top: 24px;\r\n-}\r\n-\r\n-.result-section {\r\n-  display: flex;\r\n-  justify-content: center;\r\n-}\r\n-\r\n-.result-card {\r\n-  background: rgba(255, 255, 255, 0.95);\r\n-  border-radius: 20px;\r\n-  padding: 32px;\r\n-  text-align: center;\r\n-  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);\r\n-  backdrop-filter: blur(10px);\r\n-  max-width: 600px;\r\n-  width: 100%;\r\n-}\r\n-\r\n-.result-title {\r\n-  font-size: 1.5rem;\r\n-  margin-bottom: 24px;\r\n-  color: var(--text-color);\r\n-}\r\n-\r\n-.result-image-container {\r\n-  margin-bottom: 24px;\r\n-}\r\n-\r\n-.result-image {\r\n-  max-width: 100%;\r\n-  max-height: 500px;\r\n-  border-radius: 12px;\r\n-  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);\r\n-}\r\n-\r\n-.result-info {\r\n-  background: #f8f9fa;\r\n-  padding: 16px;\r\n-  border-radius: 12px;\r\n-  margin: 20px 0;\r\n-  text-align: left;\r\n-}\r\n-\r\n-.result-info p {\r\n-  margin: 8px 0;\r\n-  color: var(--text-color);\r\n-}\r\n-\r\n-.result-actions {\r\n-  display: flex;\r\n-  gap: 16px;\r\n-  justify-content: center;\r\n-}\r\n-\r\n-.btn-secondary {\r\n-  background: #6c757d;\r\n-  color: white;\r\n-}\r\n-\r\n-.btn-secondary:hover {\r\n-  background: #5a6268;\r\n-  transform: translateY(-2px);\r\n-}\r\n-\r\n+/* 移动端优化 */\r\n @media (max-width: 768px) {\r\n-  .page-title {\r\n-    font-size: 2rem;\r\n+  .result-actions {\r\n+    gap: 6px;\r\n   }\r\n \r\n-  .generation-options {\r\n-    grid-template-columns: 1fr;\r\n+  .action-btn {\r\n+    font-size: 13px;\r\n   }\r\n-\r\n-  .examples {\r\n-    flex-direction: column;\r\n-  }\r\n-\r\n-  .example-btn {\r\n-    text-align: left;\r\n-  }\r\n-\r\n-  .result-actions {\r\n-    flex-direction: column;\r\n-  }\r\n }\r\n </style>\r\n"
                },
                {
                    "date": 1752394404770,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,24 +1,21 @@\n <template>\r\n-  <AIProcessingTemplate\r\n-    title=\"文生图\"\r\n-    description=\"输入文字描述，AI为您生成精美图像\"\r\n+  <UnifiedImageProcessingTemplate\r\n+    function-id=\"text-to-image\"\r\n     title-icon-name=\"photo-o\"\r\n     title-icon-color=\"var(--van-success-color)\"\r\n     :is-processing=\"isLoading\"\r\n-    :can-process=\"!!prompt.trim()\"\r\n-    :show-upload-tips=\"!prompt.trim()\"\r\n-    process-button-text=\"生成图像\"\r\n-    title-icon-name=\"photo-o\"\r\n     :progress=\"progressPercent\"\r\n-    processing-title=\"正在生成图像...\"\r\n-    processing-description=\"请耐心等待，AI正在为您创作\"\r\n     :processing-info=\"{ promptId, processingTime }\"\r\n     :result-data=\"resultImage\"\r\n     @login=\"handleUserLogin\"\r\n     @logout=\"handleUserLogout\"\r\n     @process=\"generateImage\"\r\n-  >\r\n+    @reset=\"resetProcess\"\r\n+    @download=\"handleDownload\"\r\n+    @input-change=\"handleInputChange\"\r\n+    ref=\"templateRef\"\r\n+  />\r\n     <!-- 输入区域 -->\r\n     <template #inputs>\r\n       <VantTextInput\r\n         v-model=\"prompt\"\r\n"
                },
                {
                    "date": 1752394432327,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -14,71 +14,8 @@\n     @download=\"handleDownload\"\r\n     @input-change=\"handleInputChange\"\r\n     ref=\"templateRef\"\r\n   />\r\n-    <!-- 输入区域 -->\r\n-    <template #inputs>\r\n-      <VantTextInput\r\n-        v-model=\"prompt\"\r\n-        title=\"描述您想要的图像\"\r\n-        placeholder=\"请详细描述您想要生成的图像，例如：一只橙色的猫坐在窗台上，窗外是蓝天白云，阳光透过窗户洒在猫咪身上，画面温馨美好，高清摄影风格\"\r\n-        :rows=\"6\"\r\n-        :max-length=\"500\"\r\n-        :disabled=\"isLoading\"\r\n-        :show-examples=\"true\"\r\n-        :examples=\"examples\"\r\n-        :show-options=\"true\"\r\n-        :options=\"generationOptions\"\r\n-        v-model:option-values=\"optionValues\"\r\n-        @change=\"handlePromptChange\"\r\n-        @option-change=\"handleOptionChange\"\r\n-      />\r\n-    </template>\r\n-\r\n-    <!-- 上传提示 -->\r\n-    <template #upload-tips>\r\n-      <div class=\"tip-item\">\r\n-        <van-icon\r\n-          name=\"edit\"\r\n-          color=\"var(--van-text-color-3)\"\r\n-          size=\"16\"\r\n-        />\r\n-        <span>请输入图像描述开始生成</span>\r\n-      </div>\r\n-    </template>\r\n-\r\n-    <!-- 结果展示 -->\r\n-    <template #result=\"{ result }\">\r\n-      <MobileCard title=\"生成结果\" inset>\r\n-        <!-- 生成的图像 -->\r\n-        <div class=\"result-image-container\">\r\n-          <van-image\r\n-            :src=\"result\"\r\n-            fit=\"cover\"\r\n-            :show-loading=\"true\"\r\n-            :show-error=\"true\"\r\n-            class=\"result-image\"\r\n-            @click=\"previewImage(result)\"\r\n-          >\r\n-            <template #loading>\r\n-              <van-loading type=\"spinner\" size=\"20\" />\r\n-            </template>\r\n-            <template #error>\r\n-              <van-icon name=\"photo-fail\" size=\"32\" />\r\n-            </template>\r\n-          </van-image>\r\n-        </div>\r\n-\r\n-        <!-- 生成信息 -->\r\n-        <van-cell-group inset>\r\n-          <van-cell\r\n-            title=\"提示词\"\r\n-            :value=\"usedPrompt\"\r\n-            icon=\"edit\"\r\n-            is-link\r\n-            @click=\"showPromptDetail\"\r\n-          />\r\n-          <van-cell\r\n             title=\"图像尺寸\"\r\n             :value=\"optionValues.imageSize || '512x512'\"\r\n             icon=\"resize\"\r\n           />\r\n"
                },
                {
                    "date": 1752394460209,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -13,52 +13,17 @@\n     @reset=\"resetProcess\"\r\n     @download=\"handleDownload\"\r\n     @input-change=\"handleInputChange\"\r\n     ref=\"templateRef\"\r\n-  />\r\n-            title=\"图像尺寸\"\r\n-            :value=\"optionValues.imageSize || '512x512'\"\r\n-            icon=\"resize\"\r\n-          />\r\n-          <van-cell\r\n-            title=\"生成风格\"\r\n-            :value=\"getStyleName(optionValues.style || 'realistic')\"\r\n-            icon=\"brush-o\"\r\n-          />\r\n-          <van-cell\r\n-            v-if=\"processingTime\"\r\n-            title=\"生成时间\"\r\n-            :value=\"`${Math.floor(processingTime / 1000)}秒`\"\r\n-            icon=\"clock-o\"\r\n-          />\r\n-        </van-cell-group>\r\n+</template>\r\n \r\n-        <!-- 操作按钮 -->\r\n-        <div class=\"result-actions\">\r\n-          <van-button\r\n-            type=\"primary\"\r\n-            size=\"small\"\r\n-            icon=\"down\"\r\n-            @click=\"downloadImage\"\r\n-            class=\"action-btn\"\r\n-          >\r\n-            下载图片\r\n-          </van-button>\r\n+<script setup>\r\n+import { ref, computed, onMounted, onUnmounted } from 'vue'\r\n+import { Toast } from 'vant'\r\n+import { UnifiedImageProcessingTemplate } from '../components/mobile'\r\n+import { processTextToImage } from '../services/comfyui.js'\r\n \r\n-          <van-button\r\n-            type=\"default\"\r\n-            size=\"small\"\r\n-            icon=\"photo-o\"\r\n-            @click=\"previewImage(result)\"\r\n-            class=\"action-btn\"\r\n-          >\r\n-            预览图片\r\n-          </van-button>\r\n-\r\n-          <van-button\r\n-            type=\"warning\"\r\n-            size=\"small\"\r\n-            icon=\"replay\"\r\n+console.log('TextToImageUnified组件已加载，ComfyUI服务已导入')\r\n             @click=\"resetGeneration\"\r\n             class=\"action-btn\"\r\n           >\r\n             重新生成\r\n"
                },
                {
                    "date": 1752394495156,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -22,64 +22,35 @@\n import { UnifiedImageProcessingTemplate } from '../components/mobile'\r\n import { processTextToImage } from '../services/comfyui.js'\r\n \r\n console.log('TextToImageUnified组件已加载，ComfyUI服务已导入')\r\n-            @click=\"resetGeneration\"\r\n-            class=\"action-btn\"\r\n-          >\r\n-            重新生成\r\n-          </van-button>\r\n-        </div>\r\n-      </MobileCard>\r\n-    </template>\r\n-  </AIProcessingTemplate>\r\n-</template>\r\n \r\n-<script setup>\r\n-import { ref } from 'vue'\r\n-import { ImagePreview, Toast } from 'vant'\r\n-import {\r\n-  AIProcessingTemplate,\r\n-  MobileCard,\r\n-  VantTextInput\r\n-} from '../components/mobile'\r\n-\r\n // 响应式数据\r\n+const templateRef = ref(null)\r\n const prompt = ref('')\r\n const resultImage = ref(null)\r\n const isLoading = ref(false)\r\n-const usedPrompt = ref('')\r\n+const processingStatus = ref('')\r\n+const promptId = ref('')\r\n+const processingTime = ref('')\r\n const progressPercent = ref(0)\r\n-const promptId = ref('')\r\n-const processingTime = ref(0)\r\n+const startTime = ref(null)\r\n \r\n-// 配置选项\r\n-const optionValues = ref({\r\n-  imageSize: '512x512',\r\n-  style: 'realistic'\r\n+// 计算属性\r\n+const canProcess = computed(() => {\r\n+  return prompt.value.trim().length > 0\r\n })\r\n \r\n-const examples = [\r\n-  '一只可爱的小猫咪在花园里玩耍，阳光明媚',\r\n-  '未来科技城市的夜景，霓虹灯闪烁',\r\n-  '古代中国山水画风格的风景，水墨画效果',\r\n-  '宇宙中的星云和行星，科幻风格',\r\n-  '温馨的咖啡厅内景，暖色调灯光'\r\n-]\r\n+// 处理输入变化\r\n+const handleInputChange = (panelId, data) => {\r\n+  console.log('输入变化:', panelId, data)\r\n \r\n-const generationOptions = [\r\n+  if (panelId === 'text-prompt') {\r\n+    prompt.value = data\r\n+    resultImage.value = null // 清除之前的结果\r\n+  }\r\n+}\r\n   {\r\n-    key: 'imageSize',\r\n-    label: '图像尺寸',\r\n-    defaultValue: '512x512',\r\n-    options: [\r\n-      { text: '512x512 (正方形)', value: '512x512' },\r\n-      { text: '768x512 (横向)', value: '768x512' },\r\n-      { text: '512x768 (纵向)', value: '512x768' },\r\n-      { text: '1024x1024 (高清正方形)', value: '1024x1024' }\r\n-    ]\r\n-  },\r\n-  {\r\n     key: 'style',\r\n     label: '生成风格',\r\n     defaultValue: 'realistic',\r\n     options: [\r\n"
                },
                {
                    "date": 1752394531962,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -48,57 +48,55 @@\n     prompt.value = data\r\n     resultImage.value = null // 清除之前的结果\r\n   }\r\n }\r\n-  {\r\n-    key: 'style',\r\n-    label: '生成风格',\r\n-    defaultValue: 'realistic',\r\n-    options: [\r\n-      { text: '写实风格', value: 'realistic' },\r\n-      { text: '动漫风格', value: 'anime' },\r\n-      { text: '艺术风格', value: 'artistic' },\r\n-      { text: '摄影风格', value: 'photography' }\r\n-    ]\r\n-  }\r\n-]\r\n \r\n-// 方法\r\n-const handlePromptChange = (value) => {\r\n-  console.log('提示词变化:', value)\r\n-}\r\n-\r\n-const handleOptionChange = (values) => {\r\n-  console.log('选项变化:', values)\r\n-}\r\n-\r\n+// 生成图像\r\n const generateImage = async () => {\r\n-  if (!prompt.value.trim()) return\r\n+  if (!canProcess.value) {\r\n+    Toast.fail('请先输入图像描述')\r\n+    return\r\n+  }\r\n \r\n   isLoading.value = true\r\n-  usedPrompt.value = prompt.value\r\n-  progressPercent.value = 0\r\n-  promptId.value = `txt2img_${Date.now()}`\r\n+  processingStatus.value = '正在加载服务...'\r\n+  progressPercent.value = 10\r\n+  startTime.value = Date.now()\r\n \r\n-  const startTime = Date.now()\r\n-\r\n   try {\r\n-    // 模拟生成进度\r\n-    progressPercent.value = 20\r\n-    await new Promise(resolve => setTimeout(resolve, 1000))\r\n+    console.log('🚀 开始文生图处理')\r\n \r\n-    progressPercent.value = 50\r\n-    await new Promise(resolve => setTimeout(resolve, 1000))\r\n+    processingStatus.value = '正在生成图像...'\r\n+    progressPercent.value = 30\r\n \r\n-    progressPercent.value = 80\r\n-    await new Promise(resolve => setTimeout(resolve, 1000))\r\n+    // 调用文生图处理服务\r\n+    const result = await processTextToImage({\r\n+      prompt: prompt.value.trim(),\r\n+      size: '512x512',\r\n+      style: 'realistic',\r\n+      onProgress: (status, percent) => {\r\n+        processingStatus.value = status\r\n+        progressPercent.value = Math.max(progressPercent.value, percent)\r\n+      }\r\n+    })\r\n \r\n-    // 模拟生成结果 - 使用一个示例图片\r\n-    resultImage.value = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTEyIiBoZWlnaHQ9IjUxMiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iNTEyIiBoZWlnaHQ9IjUxMiIgZmlsbD0iIzY2N2VlYSIvPjx0ZXh0IHg9IjI1NiIgeT0iMjU2IiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMjQiIGZpbGw9IndoaXRlIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBkeT0iLjNlbSI+6ZSA55Sf5Zu+PC90ZXh0Pjx0ZXh0IHg9IjI1NiIgeT0iMzAwIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTYiIGZpbGw9IndoaXRlIiBvcGFjaXR5PSIwLjgiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGR5PSIuM2VtIj7mqKHmi5/nu5PmnpwgKOW+heWQjuWunueOsClcPC90ZXh0Pjwvc3ZnPg=='\r\n+    if (result.success && result.imageUrl) {\r\n+      resultImage.value = result.imageUrl\r\n+      promptId.value = result.promptId || ''\r\n \r\n-    progressPercent.value = 100\r\n-    processingTime.value = Date.now() - startTime\r\n+      // 计算处理时间\r\n+      const endTime = Date.now()\r\n+      const duration = Math.round((endTime - startTime.value) / 1000)\r\n+      processingTime.value = `${duration}秒`\r\n \r\n+      // 显示成功toast\r\n+      const pointsInfo = result.pointsConsumed ? `（消耗${result.pointsConsumed}点）` : ''\r\n+      Toast.success(`🎉 图像生成完成！${pointsInfo}`)\r\n+      console.log('✅ 文生图处理完成')\r\n+    } else {\r\n+      throw new Error(result.error || '图像生成失败')\r\n+    }\r\n+\r\n     Toast.success('图像生成成功！')\r\n \r\n   } catch (error) {\r\n     console.error('生成失败:', error)\r\n"
                },
                {
                    "date": 1752394563629,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -94,61 +94,62 @@\n       console.log('✅ 文生图处理完成')\r\n     } else {\r\n       throw new Error(result.error || '图像生成失败')\r\n     }\r\n-\r\n-    Toast.success('图像生成成功！')\r\n-\r\n   } catch (error) {\r\n-    console.error('生成失败:', error)\r\n-    Toast.fail('生成失败，请重试')\r\n+    console.error('❌ 文生图处理失败:', error)\r\n+    Toast.fail(`生成失败: ${error.message}`)\r\n   } finally {\r\n     isLoading.value = false\r\n+    processingStatus.value = ''\r\n+    progressPercent.value = 0\r\n   }\r\n }\r\n \r\n-const resetGeneration = () => {\r\n+// 重置处理\r\n+const resetProcess = () => {\r\n   prompt.value = ''\r\n   resultImage.value = null\r\n-  usedPrompt.value = ''\r\n-  progressPercent.value = 0\r\n+  processingStatus.value = ''\r\n   promptId.value = ''\r\n-  processingTime.value = 0\r\n-  Toast.success('已重置，可以重新生成')\r\n-}\r\n+  processingTime.value = ''\r\n \r\n-const previewImage = (imageUrl) => {\r\n-  ImagePreview({\r\n-    images: [imageUrl],\r\n-    showIndex: false,\r\n-    closeable: true\r\n-  })\r\n+  // 重置模板内部状态\r\n+  if (templateRef.value) {\r\n+    const { inputData } = templateRef.value\r\n+    if (inputData['text-prompt']) {\r\n+      inputData['text-prompt'] = ''\r\n+    }\r\n+  }\r\n+\r\n+  Toast.success('已重置，可以重新输入描述')\r\n }\r\n \r\n-const downloadImage = async () => {\r\n-  try {\r\n-    const link = document.createElement('a')\r\n-    link.href = resultImage.value\r\n-    link.download = `text-to-image-${Date.now()}.jpg`\r\n-    document.body.appendChild(link)\r\n-    link.click()\r\n-    document.body.removeChild(link)\r\n+// 下载结果\r\n+const handleDownload = (imageUrl) => {\r\n+  if (!imageUrl) return\r\n \r\n-    Toast.success('开始下载图片')\r\n-  } catch (error) {\r\n-    console.error('下载失败:', error)\r\n-    Toast.fail('下载失败，请重试')\r\n-  }\r\n+  const link = document.createElement('a')\r\n+  link.href = imageUrl\r\n+  link.download = `text_to_image_result_${Date.now()}.png`\r\n+  document.body.appendChild(link)\r\n+  link.click()\r\n+  document.body.removeChild(link)\r\n+\r\n+  Toast.success('图片下载已开始')\r\n }\r\n \r\n-const showPromptDetail = () => {\r\n-  Toast(usedPrompt.value)\r\n+// 用户登录成功回调\r\n+const handleUserLogin = (data) => {\r\n+  console.log('用户登录成功:', data)\r\n+  // 可以在这里触发一些需要登录状态的操作\r\n }\r\n \r\n-const getStyleName = (styleValue) => {\r\n-  const styleMap = {\r\n-    realistic: '写实风格',\r\n-    anime: '动漫风格',\r\n+// 用户登出回调\r\n+const handleUserLogout = () => {\r\n+  console.log('用户已登出')\r\n+  // 可以在这里清理一些用户相关的状态\r\n+}\r\n     artistic: '艺术风格',\r\n     photography: '摄影风格'\r\n   }\r\n   return styleMap[styleValue] || styleValue\r\n"
                },
                {
                    "date": 1752394589177,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -148,36 +148,20 @@\n const handleUserLogout = () => {\r\n   console.log('用户已登出')\r\n   // 可以在这里清理一些用户相关的状态\r\n }\r\n-    artistic: '艺术风格',\r\n-    photography: '摄影风格'\r\n-  }\r\n-  return styleMap[styleValue] || styleValue\r\n-}\r\n \r\n-// 用户登录成功回调\r\n-const handleUserLogin = (data) => {\r\n-  console.log('用户登录成功:', data)\r\n-}\r\n+// 生命周期\r\n+onMounted(() => {\r\n+  console.log('TextToImage组件已挂载，ComfyUI服务已准备就绪')\r\n+})\r\n \r\n-// 用户登出回调\r\n-const handleUserLogout = () => {\r\n-  console.log('用户已登出')\r\n-}\r\n-}\r\n-\r\n-// 用户登录成功回调\r\n-const handleUserLogin = (data) => {\r\n-  console.log('用户登录成功:', data)\r\n-  // 可以在这里触发一些需要登录状态的操作\r\n-}\r\n-\r\n-// 用户登出回调\r\n-const handleUserLogout = () => {\r\n-  console.log('用户已登出')\r\n-  // 可以在这里清理一些用户相关的状态\r\n-}\r\n+onUnmounted(() => {\r\n+  // 清理工作\r\n+  if (isLoading.value) {\r\n+    isLoading.value = false\r\n+  }\r\n+})\r\n </script>\r\n \r\n <style scoped>\r\n /* 结果展示样式 */\r\n"
                },
                {
                    "date": 1752394608757,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -163,46 +163,30 @@\n })\r\n </script>\r\n \r\n <style scoped>\r\n-/* 结果展示样式 */\r\n-.result-image-container {\r\n-  margin-bottom: 16px;\r\n-}\r\n+/* 这里可以添加特定于文生图功能的样式 */\r\n+/* 大部分样式已经在统一模板中处理 */\r\n \r\n-.result-image {\r\n-  width: 100%;\r\n-  border-radius: 8px;\r\n-  cursor: pointer;\r\n+/* 如果需要自定义样式，可以在这里添加 */\r\n+:deep(.input-panel) {\r\n+  /* 自定义输入面板样式 */\r\n }\r\n \r\n-.result-actions {\r\n-  display: flex;\r\n-  gap: 8px;\r\n-  margin-top: 16px;\r\n-  flex-wrap: wrap;\r\n+:deep(.text-input) {\r\n+  /* 自定义文本输入样式 */\r\n }\r\n \r\n-.action-btn {\r\n-  flex: 1;\r\n-  min-width: 0;\r\n+:deep(.simple-result) {\r\n+  /* 自定义结果显示样式 */\r\n }\r\n \r\n-.tip-item {\r\n-  display: flex;\r\n-  align-items: center;\r\n-  gap: 8px;\r\n-  font-size: 14px;\r\n-  color: var(--van-text-color-2, #646566);\r\n-}\r\n-\r\n /* 移动端优化 */\r\n @media (max-width: 768px) {\r\n-  .result-actions {\r\n-    gap: 6px;\r\n-  }\r\n+  /* 移动端特定样式 */\r\n+}\r\n \r\n-  .action-btn {\r\n-    font-size: 13px;\r\n-  }\r\n+/* 深色主题适配 */\r\n+@media (prefers-color-scheme: dark) {\r\n+  /* 深色主题样式 */\r\n }\r\n </style>\r\n"
                }
            ],
            "date": 1752348844192,
            "name": "Commit-0",
            "content": "<template>\r\n  <div class=\"feature-page\">\r\n    <!-- 右上角用户信息 -->\r\n    <div class=\"top-corner\">\r\n      <UserInfo @login=\"handleUserLogin\" @logout=\"handleUserLogout\" />\r\n    </div>\r\n\r\n    <div class=\"container\">\r\n      <header class=\"page-header\">\r\n        <BackToHomeButton class=\"back-btn\" />\r\n        <h1 class=\"page-title\">\r\n          <van-icon name=\"photo-o\" size=\"32\" color=\"#07c160\" class=\"page-icon\" />\r\n          文生图\r\n        </h1>\r\n        <p class=\"page-description\">输入文字描述，AI为您生成精美图像</p>\r\n      </header>\r\n\r\n      <main class=\"page-content\">\r\n        <div class=\"input-section\">\r\n          <div class=\"input-card\">\r\n            <h3 class=\"input-title\">描述您想要的图像</h3>\r\n            <textarea\r\n              v-model=\"prompt\"\r\n              placeholder=\"请详细描述您想要生成的图像，例如：一只橙色的猫坐在窗台上，窗外是蓝天白云，阳光透过窗户洒在猫咪身上，画面温馨美好，高清摄影风格\"\r\n              rows=\"6\"\r\n              class=\"prompt-input\"\r\n              :disabled=\"isLoading\"\r\n            ></textarea>\r\n\r\n            <div class=\"prompt-examples\">\r\n              <h4>示例提示词：</h4>\r\n              <div class=\"examples\">\r\n                <button\r\n                  v-for=\"example in examples\"\r\n                  :key=\"example\"\r\n                  @click=\"prompt = example\"\r\n                  class=\"example-btn\"\r\n                  :disabled=\"isLoading\"\r\n                >\r\n                  {{ example }}\r\n                </button>\r\n              </div>\r\n            </div>\r\n\r\n            <div class=\"generation-options\">\r\n              <div class=\"option-group\">\r\n                <label>图像尺寸：</label>\r\n                <select v-model=\"imageSize\" class=\"size-select\" :disabled=\"isLoading\">\r\n                  <option value=\"512x512\">512x512 (正方形)</option>\r\n                  <option value=\"768x512\">768x512 (横向)</option>\r\n                  <option value=\"512x768\">512x768 (纵向)</option>\r\n                  <option value=\"1024x1024\">1024x1024 (高清正方形)</option>\r\n                </select>\r\n              </div>\r\n\r\n              <div class=\"option-group\">\r\n                <label>生成风格：</label>\r\n                <select v-model=\"style\" class=\"style-select\" :disabled=\"isLoading\">\r\n                  <option value=\"realistic\">写实风格</option>\r\n                  <option value=\"anime\">动漫风格</option>\r\n                  <option value=\"artistic\">艺术风格</option>\r\n                  <option value=\"photography\">摄影风格</option>\r\n                </select>\r\n              </div>\r\n            </div>\r\n\r\n            <van-button\r\n              @click=\"generateImage\"\r\n              :disabled=\"isLoading || !prompt.trim()\"\r\n              type=\"primary\"\r\n              size=\"large\"\r\n              round\r\n              :loading=\"isLoading\"\r\n              icon=\"photo-o\"\r\n              class=\"generate-btn\"\r\n            >\r\n              {{ isLoading ? '生成中...' : '生成图像' }}\r\n            </van-button>\r\n          </div>\r\n        </div>\r\n\r\n        <div v-if=\"resultImage\" class=\"result-section\">\r\n          <div class=\"result-card\">\r\n            <h3 class=\"result-title\">生成结果</h3>\r\n            <div class=\"result-image-container\">\r\n              <img :src=\"resultImage\" alt=\"生成图像\" class=\"result-image\">\r\n            </div>\r\n            <div class=\"result-info\">\r\n              <p><strong>提示词：</strong>{{ usedPrompt }}</p>\r\n              <p><strong>尺寸：</strong>{{ imageSize }}</p>\r\n              <p><strong>风格：</strong>{{ getStyleName(style) }}</p>\r\n            </div>\r\n            <div class=\"result-actions\">\r\n              <a\r\n                :href=\"resultImage\"\r\n                download=\"text-to-image-result.jpg\"\r\n                class=\"btn btn-primary download-btn\"\r\n              >\r\n                下载图片\r\n              </a>\r\n              <button @click=\"generateAgain\" class=\"btn btn-secondary\">\r\n                重新生成\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </main>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref } from 'vue'\r\nimport UserInfo from '../components/UserInfo.vue'\r\n// import { comfyApi } from '../services/api.js'\r\n\r\nconst prompt = ref('')\r\nconst resultImage = ref(null)\r\nconst isLoading = ref(false)\r\nconst usedPrompt = ref('')\r\nconst imageSize = ref('512x512')\r\nconst style = ref('realistic')\r\n\r\nconst examples = [\r\n  '一只可爱的小猫咪在花园里玩耍，阳光明媚',\r\n  '未来科技城市的夜景，霓虹灯闪烁',\r\n  '古代中国山水画风格的风景，水墨画效果',\r\n  '宇宙中的星云和行星，科幻风格',\r\n  '温馨的咖啡厅内景，暖色调灯光'\r\n]\r\n\r\nconst generateImage = async () => {\r\n  if (!prompt.value.trim()) return\r\n\r\n  isLoading.value = true\r\n  usedPrompt.value = prompt.value\r\n\r\n  try {\r\n    // 模拟文生图处理\r\n    await new Promise(resolve => setTimeout(resolve, 3000))\r\n\r\n    // 模拟生成结果 - 使用一个示例图片\r\n    resultImage.value = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTEyIiBoZWlnaHQ9IjUxMiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iNTEyIiBoZWlnaHQ9IjUxMiIgZmlsbD0iIzY2N2VlYSIvPjx0ZXh0IHg9IjI1NiIgeT0iMjU2IiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMjQiIGZpbGw9IndoaXRlIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBkeT0iLjNlbSI+6ZSA55Sf5Zu+PC90ZXh0Pjx0ZXh0IHg9IjI1NiIgeT0iMzAwIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTYiIGZpbGw9IndoaXRlIiBvcGFjaXR5PSIwLjgiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGR5PSIuM2VtIj7mqKHmi5/nu5PmnpwgKOW+heWQjuWunueOsClcPC90ZXh0Pjwvc3ZnPg=='\r\n\r\n  } catch (error) {\r\n    console.error('生成失败:', error)\r\n    alert('生成失败，请重试')\r\n  } finally {\r\n    isLoading.value = false\r\n  }\r\n}\r\n\r\nconst generateAgain = () => {\r\n  generateImage()\r\n}\r\n\r\nconst getStyleName = (styleValue) => {\r\n  const styleMap = {\r\n    realistic: '写实风格',\r\n    anime: '动漫风格',\r\n    artistic: '艺术风格',\r\n    photography: '摄影风格'\r\n  }\r\n  return styleMap[styleValue] || styleValue\r\n}\r\n\r\n// 用户登录成功回调\r\nconst handleUserLogin = (data) => {\r\n  console.log('用户登录成功:', data)\r\n  // 可以在这里触发一些需要登录状态的操作\r\n}\r\n\r\n// 用户登出回调\r\nconst handleUserLogout = () => {\r\n  console.log('用户已登出')\r\n  // 可以在这里清理一些用户相关的状态\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.feature-page {\r\n  min-height: 100vh;\r\n  padding: 20px;\r\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\r\n  position: relative;\r\n}\r\n\r\n/* 右上角用户信息 */\r\n.top-corner {\r\n  position: fixed;\r\n  top: 20px;\r\n  right: 20px;\r\n  z-index: 1000;\r\n}\r\n\r\n.container {\r\n  max-width: 1000px;\r\n  margin: 0 auto;\r\n}\r\n\r\n.page-header {\r\n  text-align: center;\r\n  margin-bottom: 40px;\r\n}\r\n\r\n.back-btn {\r\n  display: inline-flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n  color: rgba(255, 255, 255, 0.9);\r\n  text-decoration: none;\r\n  font-size: 1rem;\r\n  margin-bottom: 20px;\r\n  transition: var(--transition);\r\n}\r\n\r\n.back-btn:hover {\r\n  color: white;\r\n  transform: translateX(-4px);\r\n}\r\n\r\n.back-icon {\r\n  font-size: 1.2rem;\r\n}\r\n\r\n.page-title {\r\n  font-size: 3rem;\r\n  color: white;\r\n  margin-bottom: 16px;\r\n  text-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);\r\n}\r\n\r\n.page-icon {\r\n  margin-right: 16px;\r\n}\r\n\r\n.page-description {\r\n  font-size: 1.2rem;\r\n  color: rgba(255, 255, 255, 0.8);\r\n}\r\n\r\n.page-content {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 40px;\r\n}\r\n\r\n.input-section {\r\n  display: flex;\r\n  justify-content: center;\r\n}\r\n\r\n.input-card {\r\n  background: rgba(255, 255, 255, 0.95);\r\n  border-radius: 20px;\r\n  padding: 32px;\r\n  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);\r\n  backdrop-filter: blur(10px);\r\n  max-width: 800px;\r\n  width: 100%;\r\n}\r\n\r\n.input-title {\r\n  font-size: 1.5rem;\r\n  margin-bottom: 20px;\r\n  color: var(--text-color);\r\n  text-align: center;\r\n}\r\n\r\n.prompt-input {\r\n  width: 100%;\r\n  padding: 16px;\r\n  border: 2px solid #e1e5e9;\r\n  border-radius: 12px;\r\n  font-size: 16px;\r\n  line-height: 1.5;\r\n  resize: vertical;\r\n  transition: var(--transition);\r\n  font-family: inherit;\r\n}\r\n\r\n.prompt-input:focus {\r\n  outline: none;\r\n  border-color: var(--primary-color);\r\n  box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);\r\n}\r\n\r\n.prompt-examples {\r\n  margin: 24px 0;\r\n}\r\n\r\n.prompt-examples h4 {\r\n  margin-bottom: 12px;\r\n  color: var(--text-color);\r\n  font-size: 1rem;\r\n}\r\n\r\n.examples {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  gap: 8px;\r\n}\r\n\r\n.example-btn {\r\n  padding: 8px 16px;\r\n  background: #f8f9fa;\r\n  border: 1px solid #dee2e6;\r\n  border-radius: 20px;\r\n  font-size: 0.9rem;\r\n  cursor: pointer;\r\n  transition: var(--transition);\r\n}\r\n\r\n.example-btn:hover {\r\n  background: var(--primary-color);\r\n  color: white;\r\n  border-color: var(--primary-color);\r\n}\r\n\r\n.generation-options {\r\n  display: grid;\r\n  grid-template-columns: 1fr 1fr;\r\n  gap: 20px;\r\n  margin: 24px 0;\r\n}\r\n\r\n.option-group {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 8px;\r\n}\r\n\r\n.option-group label {\r\n  font-weight: 600;\r\n  color: var(--text-color);\r\n}\r\n\r\n.size-select, .style-select {\r\n  padding: 10px 12px;\r\n  border: 2px solid #e1e5e9;\r\n  border-radius: 8px;\r\n  font-size: 14px;\r\n  transition: var(--transition);\r\n}\r\n\r\n.size-select:focus, .style-select:focus {\r\n  outline: none;\r\n  border-color: var(--primary-color);\r\n}\r\n\r\n.generate-btn {\r\n  width: 100%;\r\n  font-size: 1.1rem;\r\n  padding: 16px;\r\n  margin-top: 24px;\r\n}\r\n\r\n.result-section {\r\n  display: flex;\r\n  justify-content: center;\r\n}\r\n\r\n.result-card {\r\n  background: rgba(255, 255, 255, 0.95);\r\n  border-radius: 20px;\r\n  padding: 32px;\r\n  text-align: center;\r\n  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);\r\n  backdrop-filter: blur(10px);\r\n  max-width: 600px;\r\n  width: 100%;\r\n}\r\n\r\n.result-title {\r\n  font-size: 1.5rem;\r\n  margin-bottom: 24px;\r\n  color: var(--text-color);\r\n}\r\n\r\n.result-image-container {\r\n  margin-bottom: 24px;\r\n}\r\n\r\n.result-image {\r\n  max-width: 100%;\r\n  max-height: 500px;\r\n  border-radius: 12px;\r\n  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);\r\n}\r\n\r\n.result-info {\r\n  background: #f8f9fa;\r\n  padding: 16px;\r\n  border-radius: 12px;\r\n  margin: 20px 0;\r\n  text-align: left;\r\n}\r\n\r\n.result-info p {\r\n  margin: 8px 0;\r\n  color: var(--text-color);\r\n}\r\n\r\n.result-actions {\r\n  display: flex;\r\n  gap: 16px;\r\n  justify-content: center;\r\n}\r\n\r\n.btn-secondary {\r\n  background: #6c757d;\r\n  color: white;\r\n}\r\n\r\n.btn-secondary:hover {\r\n  background: #5a6268;\r\n  transform: translateY(-2px);\r\n}\r\n\r\n@media (max-width: 768px) {\r\n  .page-title {\r\n    font-size: 2rem;\r\n  }\r\n\r\n  .generation-options {\r\n    grid-template-columns: 1fr;\r\n  }\r\n\r\n  .examples {\r\n    flex-direction: column;\r\n  }\r\n\r\n  .example-btn {\r\n    text-align: left;\r\n  }\r\n\r\n  .result-actions {\r\n    flex-direction: column;\r\n  }\r\n}\r\n</style>\r\n"
        }
    ]
}