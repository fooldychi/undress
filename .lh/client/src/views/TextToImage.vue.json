{
    "sourceFile": "client/src/views/TextToImage.vue",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 6,
            "patches": [
                {
                    "date": 1752348844192,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1752348866738,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -111,8 +111,9 @@\n \r\n <script setup>\r\n import { ref } from 'vue'\r\n import UserInfo from '../components/UserInfo.vue'\r\n+import BackToHomeButton from '../components/BackToHomeButton.vue'\r\n // import { comfyApi } from '../services/api.js'\r\n \r\n const prompt = ref('')\r\n const resultImage = ref(null)\r\n"
                },
                {
                    "date": 1752351626026,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,22 +1,19 @@\n <template>\r\n-  <div class=\"feature-page\">\r\n+  <div class=\"mobile-page\">\r\n     <!-- 右上角用户信息 -->\r\n     <div class=\"top-corner\">\r\n       <UserInfo @login=\"handleUserLogin\" @logout=\"handleUserLogout\" />\r\n     </div>\r\n \r\n-    <div class=\"container\">\r\n-      <header class=\"page-header\">\r\n-        <BackToHomeButton class=\"back-btn\" />\r\n-        <h1 class=\"page-title\">\r\n-          <van-icon name=\"photo-o\" size=\"32\" color=\"#07c160\" class=\"page-icon\" />\r\n-          文生图\r\n-        </h1>\r\n-        <p class=\"page-description\">输入文字描述，AI为您生成精美图像</p>\r\n+    <div class=\"mobile-container\">\r\n+      <header class=\"mobile-header\">\r\n+        <BackToHomeButton class=\"mobile-header-back\" />\r\n+        <h1 class=\"mobile-header-title\">文生图</h1>\r\n+        <div></div>\r\n       </header>\r\n \r\n-      <main class=\"page-content\">\r\n+      <div class=\"mobile-content\">\r\n         <div class=\"input-section\">\r\n           <div class=\"input-card\">\r\n             <h3 class=\"input-title\">描述您想要的图像</h3>\r\n             <textarea\r\n"
                },
                {
                    "date": 1752352792501,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -12,10 +12,9 @@\n         <div></div>\r\n       </header>\r\n \r\n       <div class=\"mobile-content\">\r\n-        <div class=\"input-section\">\r\n-          <div class=\"input-card\">\r\n+        <div class=\"mobile-card\">\r\n             <h3 class=\"input-title\">描述您想要的图像</h3>\r\n             <textarea\r\n               v-model=\"prompt\"\r\n               placeholder=\"请详细描述您想要生成的图像，例如：一只橙色的猫坐在窗台上，窗外是蓝天白云，阳光透过窗户洒在猫咪身上，画面温馨美好，高清摄影风格\"\r\n"
                },
                {
                    "date": 1752352823037,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -71,13 +71,11 @@\n               class=\"generate-btn\"\r\n             >\r\n               {{ isLoading ? '生成中...' : '生成图像' }}\r\n             </van-button>\r\n-          </div>\r\n         </div>\r\n \r\n-        <div v-if=\"resultImage\" class=\"result-section\">\r\n-          <div class=\"result-card\">\r\n+        <div v-if=\"resultImage\" class=\"mobile-card mobile-mt-3\">\r\n             <h3 class=\"result-title\">生成结果</h3>\r\n             <div class=\"result-image-container\">\r\n               <img :src=\"resultImage\" alt=\"生成图像\" class=\"result-image\">\r\n             </div>\r\n"
                },
                {
                    "date": 1752352847498,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -95,11 +95,10 @@\n               <button @click=\"generateAgain\" class=\"btn btn-secondary\">\r\n                 重新生成\r\n               </button>\r\n             </div>\r\n-          </div>\r\n         </div>\r\n-      </main>\r\n+      </div>\r\n     </div>\r\n   </div>\r\n </template>\r\n \r\n"
                },
                {
                    "date": 1752354037796,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,20 +1,24 @@\n <template>\r\n-  <div class=\"mobile-page\">\r\n+  <div class=\"feature-page\">\r\n     <!-- 右上角用户信息 -->\r\n     <div class=\"top-corner\">\r\n       <UserInfo @login=\"handleUserLogin\" @logout=\"handleUserLogout\" />\r\n     </div>\r\n \r\n-    <div class=\"mobile-container\">\r\n-      <header class=\"mobile-header\">\r\n-        <BackToHomeButton class=\"mobile-header-back\" />\r\n-        <h1 class=\"mobile-header-title\">文生图</h1>\r\n-        <div></div>\r\n+    <div class=\"container\">\r\n+      <header class=\"page-header\">\r\n+        <BackToHomeButton class=\"back-btn\" />\r\n+        <h1 class=\"page-title\">\r\n+          <van-icon name=\"photo-o\" size=\"32\" color=\"#07c160\" class=\"page-icon\" />\r\n+          文生图\r\n+        </h1>\r\n+        <p class=\"page-description\">输入文字描述，AI为您生成精美图像</p>\r\n       </header>\r\n \r\n-      <div class=\"mobile-content\">\r\n-        <div class=\"mobile-card\">\r\n+      <main class=\"page-content\">\r\n+        <div class=\"input-section\">\r\n+          <div class=\"input-card\">\r\n             <h3 class=\"input-title\">描述您想要的图像</h3>\r\n             <textarea\r\n               v-model=\"prompt\"\r\n               placeholder=\"请详细描述您想要生成的图像，例如：一只橙色的猫坐在窗台上，窗外是蓝天白云，阳光透过窗户洒在猫咪身上，画面温馨美好，高清摄影风格\"\r\n@@ -71,11 +75,13 @@\n               class=\"generate-btn\"\r\n             >\r\n               {{ isLoading ? '生成中...' : '生成图像' }}\r\n             </van-button>\r\n+          </div>\r\n         </div>\r\n \r\n-        <div v-if=\"resultImage\" class=\"mobile-card mobile-mt-3\">\r\n+        <div v-if=\"resultImage\" class=\"result-section\">\r\n+          <div class=\"result-card\">\r\n             <h3 class=\"result-title\">生成结果</h3>\r\n             <div class=\"result-image-container\">\r\n               <img :src=\"resultImage\" alt=\"生成图像\" class=\"result-image\">\r\n             </div>\r\n@@ -95,10 +101,11 @@\n               <button @click=\"generateAgain\" class=\"btn btn-secondary\">\r\n                 重新生成\r\n               </button>\r\n             </div>\r\n+          </div>\r\n         </div>\r\n-      </div>\r\n+      </main>\r\n     </div>\r\n   </div>\r\n </template>\r\n \r\n"
                }
            ],
            "date": 1752348844192,
            "name": "Commit-0",
            "content": "<template>\r\n  <div class=\"feature-page\">\r\n    <!-- 右上角用户信息 -->\r\n    <div class=\"top-corner\">\r\n      <UserInfo @login=\"handleUserLogin\" @logout=\"handleUserLogout\" />\r\n    </div>\r\n\r\n    <div class=\"container\">\r\n      <header class=\"page-header\">\r\n        <BackToHomeButton class=\"back-btn\" />\r\n        <h1 class=\"page-title\">\r\n          <van-icon name=\"photo-o\" size=\"32\" color=\"#07c160\" class=\"page-icon\" />\r\n          文生图\r\n        </h1>\r\n        <p class=\"page-description\">输入文字描述，AI为您生成精美图像</p>\r\n      </header>\r\n\r\n      <main class=\"page-content\">\r\n        <div class=\"input-section\">\r\n          <div class=\"input-card\">\r\n            <h3 class=\"input-title\">描述您想要的图像</h3>\r\n            <textarea\r\n              v-model=\"prompt\"\r\n              placeholder=\"请详细描述您想要生成的图像，例如：一只橙色的猫坐在窗台上，窗外是蓝天白云，阳光透过窗户洒在猫咪身上，画面温馨美好，高清摄影风格\"\r\n              rows=\"6\"\r\n              class=\"prompt-input\"\r\n              :disabled=\"isLoading\"\r\n            ></textarea>\r\n\r\n            <div class=\"prompt-examples\">\r\n              <h4>示例提示词：</h4>\r\n              <div class=\"examples\">\r\n                <button\r\n                  v-for=\"example in examples\"\r\n                  :key=\"example\"\r\n                  @click=\"prompt = example\"\r\n                  class=\"example-btn\"\r\n                  :disabled=\"isLoading\"\r\n                >\r\n                  {{ example }}\r\n                </button>\r\n              </div>\r\n            </div>\r\n\r\n            <div class=\"generation-options\">\r\n              <div class=\"option-group\">\r\n                <label>图像尺寸：</label>\r\n                <select v-model=\"imageSize\" class=\"size-select\" :disabled=\"isLoading\">\r\n                  <option value=\"512x512\">512x512 (正方形)</option>\r\n                  <option value=\"768x512\">768x512 (横向)</option>\r\n                  <option value=\"512x768\">512x768 (纵向)</option>\r\n                  <option value=\"1024x1024\">1024x1024 (高清正方形)</option>\r\n                </select>\r\n              </div>\r\n\r\n              <div class=\"option-group\">\r\n                <label>生成风格：</label>\r\n                <select v-model=\"style\" class=\"style-select\" :disabled=\"isLoading\">\r\n                  <option value=\"realistic\">写实风格</option>\r\n                  <option value=\"anime\">动漫风格</option>\r\n                  <option value=\"artistic\">艺术风格</option>\r\n                  <option value=\"photography\">摄影风格</option>\r\n                </select>\r\n              </div>\r\n            </div>\r\n\r\n            <van-button\r\n              @click=\"generateImage\"\r\n              :disabled=\"isLoading || !prompt.trim()\"\r\n              type=\"primary\"\r\n              size=\"large\"\r\n              round\r\n              :loading=\"isLoading\"\r\n              icon=\"photo-o\"\r\n              class=\"generate-btn\"\r\n            >\r\n              {{ isLoading ? '生成中...' : '生成图像' }}\r\n            </van-button>\r\n          </div>\r\n        </div>\r\n\r\n        <div v-if=\"resultImage\" class=\"result-section\">\r\n          <div class=\"result-card\">\r\n            <h3 class=\"result-title\">生成结果</h3>\r\n            <div class=\"result-image-container\">\r\n              <img :src=\"resultImage\" alt=\"生成图像\" class=\"result-image\">\r\n            </div>\r\n            <div class=\"result-info\">\r\n              <p><strong>提示词：</strong>{{ usedPrompt }}</p>\r\n              <p><strong>尺寸：</strong>{{ imageSize }}</p>\r\n              <p><strong>风格：</strong>{{ getStyleName(style) }}</p>\r\n            </div>\r\n            <div class=\"result-actions\">\r\n              <a\r\n                :href=\"resultImage\"\r\n                download=\"text-to-image-result.jpg\"\r\n                class=\"btn btn-primary download-btn\"\r\n              >\r\n                下载图片\r\n              </a>\r\n              <button @click=\"generateAgain\" class=\"btn btn-secondary\">\r\n                重新生成\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </main>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref } from 'vue'\r\nimport UserInfo from '../components/UserInfo.vue'\r\n// import { comfyApi } from '../services/api.js'\r\n\r\nconst prompt = ref('')\r\nconst resultImage = ref(null)\r\nconst isLoading = ref(false)\r\nconst usedPrompt = ref('')\r\nconst imageSize = ref('512x512')\r\nconst style = ref('realistic')\r\n\r\nconst examples = [\r\n  '一只可爱的小猫咪在花园里玩耍，阳光明媚',\r\n  '未来科技城市的夜景，霓虹灯闪烁',\r\n  '古代中国山水画风格的风景，水墨画效果',\r\n  '宇宙中的星云和行星，科幻风格',\r\n  '温馨的咖啡厅内景，暖色调灯光'\r\n]\r\n\r\nconst generateImage = async () => {\r\n  if (!prompt.value.trim()) return\r\n\r\n  isLoading.value = true\r\n  usedPrompt.value = prompt.value\r\n\r\n  try {\r\n    // 模拟文生图处理\r\n    await new Promise(resolve => setTimeout(resolve, 3000))\r\n\r\n    // 模拟生成结果 - 使用一个示例图片\r\n    resultImage.value = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTEyIiBoZWlnaHQ9IjUxMiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iNTEyIiBoZWlnaHQ9IjUxMiIgZmlsbD0iIzY2N2VlYSIvPjx0ZXh0IHg9IjI1NiIgeT0iMjU2IiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMjQiIGZpbGw9IndoaXRlIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBkeT0iLjNlbSI+6ZSA55Sf5Zu+PC90ZXh0Pjx0ZXh0IHg9IjI1NiIgeT0iMzAwIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTYiIGZpbGw9IndoaXRlIiBvcGFjaXR5PSIwLjgiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGR5PSIuM2VtIj7mqKHmi5/nu5PmnpwgKOW+heWQjuWunueOsClcPC90ZXh0Pjwvc3ZnPg=='\r\n\r\n  } catch (error) {\r\n    console.error('生成失败:', error)\r\n    alert('生成失败，请重试')\r\n  } finally {\r\n    isLoading.value = false\r\n  }\r\n}\r\n\r\nconst generateAgain = () => {\r\n  generateImage()\r\n}\r\n\r\nconst getStyleName = (styleValue) => {\r\n  const styleMap = {\r\n    realistic: '写实风格',\r\n    anime: '动漫风格',\r\n    artistic: '艺术风格',\r\n    photography: '摄影风格'\r\n  }\r\n  return styleMap[styleValue] || styleValue\r\n}\r\n\r\n// 用户登录成功回调\r\nconst handleUserLogin = (data) => {\r\n  console.log('用户登录成功:', data)\r\n  // 可以在这里触发一些需要登录状态的操作\r\n}\r\n\r\n// 用户登出回调\r\nconst handleUserLogout = () => {\r\n  console.log('用户已登出')\r\n  // 可以在这里清理一些用户相关的状态\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.feature-page {\r\n  min-height: 100vh;\r\n  padding: 20px;\r\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\r\n  position: relative;\r\n}\r\n\r\n/* 右上角用户信息 */\r\n.top-corner {\r\n  position: fixed;\r\n  top: 20px;\r\n  right: 20px;\r\n  z-index: 1000;\r\n}\r\n\r\n.container {\r\n  max-width: 1000px;\r\n  margin: 0 auto;\r\n}\r\n\r\n.page-header {\r\n  text-align: center;\r\n  margin-bottom: 40px;\r\n}\r\n\r\n.back-btn {\r\n  display: inline-flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n  color: rgba(255, 255, 255, 0.9);\r\n  text-decoration: none;\r\n  font-size: 1rem;\r\n  margin-bottom: 20px;\r\n  transition: var(--transition);\r\n}\r\n\r\n.back-btn:hover {\r\n  color: white;\r\n  transform: translateX(-4px);\r\n}\r\n\r\n.back-icon {\r\n  font-size: 1.2rem;\r\n}\r\n\r\n.page-title {\r\n  font-size: 3rem;\r\n  color: white;\r\n  margin-bottom: 16px;\r\n  text-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);\r\n}\r\n\r\n.page-icon {\r\n  margin-right: 16px;\r\n}\r\n\r\n.page-description {\r\n  font-size: 1.2rem;\r\n  color: rgba(255, 255, 255, 0.8);\r\n}\r\n\r\n.page-content {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 40px;\r\n}\r\n\r\n.input-section {\r\n  display: flex;\r\n  justify-content: center;\r\n}\r\n\r\n.input-card {\r\n  background: rgba(255, 255, 255, 0.95);\r\n  border-radius: 20px;\r\n  padding: 32px;\r\n  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);\r\n  backdrop-filter: blur(10px);\r\n  max-width: 800px;\r\n  width: 100%;\r\n}\r\n\r\n.input-title {\r\n  font-size: 1.5rem;\r\n  margin-bottom: 20px;\r\n  color: var(--text-color);\r\n  text-align: center;\r\n}\r\n\r\n.prompt-input {\r\n  width: 100%;\r\n  padding: 16px;\r\n  border: 2px solid #e1e5e9;\r\n  border-radius: 12px;\r\n  font-size: 16px;\r\n  line-height: 1.5;\r\n  resize: vertical;\r\n  transition: var(--transition);\r\n  font-family: inherit;\r\n}\r\n\r\n.prompt-input:focus {\r\n  outline: none;\r\n  border-color: var(--primary-color);\r\n  box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);\r\n}\r\n\r\n.prompt-examples {\r\n  margin: 24px 0;\r\n}\r\n\r\n.prompt-examples h4 {\r\n  margin-bottom: 12px;\r\n  color: var(--text-color);\r\n  font-size: 1rem;\r\n}\r\n\r\n.examples {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  gap: 8px;\r\n}\r\n\r\n.example-btn {\r\n  padding: 8px 16px;\r\n  background: #f8f9fa;\r\n  border: 1px solid #dee2e6;\r\n  border-radius: 20px;\r\n  font-size: 0.9rem;\r\n  cursor: pointer;\r\n  transition: var(--transition);\r\n}\r\n\r\n.example-btn:hover {\r\n  background: var(--primary-color);\r\n  color: white;\r\n  border-color: var(--primary-color);\r\n}\r\n\r\n.generation-options {\r\n  display: grid;\r\n  grid-template-columns: 1fr 1fr;\r\n  gap: 20px;\r\n  margin: 24px 0;\r\n}\r\n\r\n.option-group {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 8px;\r\n}\r\n\r\n.option-group label {\r\n  font-weight: 600;\r\n  color: var(--text-color);\r\n}\r\n\r\n.size-select, .style-select {\r\n  padding: 10px 12px;\r\n  border: 2px solid #e1e5e9;\r\n  border-radius: 8px;\r\n  font-size: 14px;\r\n  transition: var(--transition);\r\n}\r\n\r\n.size-select:focus, .style-select:focus {\r\n  outline: none;\r\n  border-color: var(--primary-color);\r\n}\r\n\r\n.generate-btn {\r\n  width: 100%;\r\n  font-size: 1.1rem;\r\n  padding: 16px;\r\n  margin-top: 24px;\r\n}\r\n\r\n.result-section {\r\n  display: flex;\r\n  justify-content: center;\r\n}\r\n\r\n.result-card {\r\n  background: rgba(255, 255, 255, 0.95);\r\n  border-radius: 20px;\r\n  padding: 32px;\r\n  text-align: center;\r\n  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);\r\n  backdrop-filter: blur(10px);\r\n  max-width: 600px;\r\n  width: 100%;\r\n}\r\n\r\n.result-title {\r\n  font-size: 1.5rem;\r\n  margin-bottom: 24px;\r\n  color: var(--text-color);\r\n}\r\n\r\n.result-image-container {\r\n  margin-bottom: 24px;\r\n}\r\n\r\n.result-image {\r\n  max-width: 100%;\r\n  max-height: 500px;\r\n  border-radius: 12px;\r\n  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);\r\n}\r\n\r\n.result-info {\r\n  background: #f8f9fa;\r\n  padding: 16px;\r\n  border-radius: 12px;\r\n  margin: 20px 0;\r\n  text-align: left;\r\n}\r\n\r\n.result-info p {\r\n  margin: 8px 0;\r\n  color: var(--text-color);\r\n}\r\n\r\n.result-actions {\r\n  display: flex;\r\n  gap: 16px;\r\n  justify-content: center;\r\n}\r\n\r\n.btn-secondary {\r\n  background: #6c757d;\r\n  color: white;\r\n}\r\n\r\n.btn-secondary:hover {\r\n  background: #5a6268;\r\n  transform: translateY(-2px);\r\n}\r\n\r\n@media (max-width: 768px) {\r\n  .page-title {\r\n    font-size: 2rem;\r\n  }\r\n\r\n  .generation-options {\r\n    grid-template-columns: 1fr;\r\n  }\r\n\r\n  .examples {\r\n    flex-direction: column;\r\n  }\r\n\r\n  .example-btn {\r\n    text-align: left;\r\n  }\r\n\r\n  .result-actions {\r\n    flex-direction: column;\r\n  }\r\n}\r\n</style>\r\n"
        }
    ]
}