{
    "sourceFile": "client/src/views/ClothesSwap.vue",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 71,
            "patches": [
                {
                    "date": 1752348776465,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1752348792279,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -88,8 +88,9 @@\n import ProcessingStatus from '../components/ProcessingStatus.vue'\r\n import ImageComparison from '../components/ImageComparison.vue'\r\n import PointsDisplay from '../components/PointsDisplay.vue'\r\n import UserInfo from '../components/UserInfo.vue'\r\n+import BackToHomeButton from '../components/BackToHomeButton.vue'\r\n \r\n import { UndressWomanIcon } from '../components/icons'\r\n \r\n // 静态导入ComfyUI服务\r\n"
                },
                {
                    "date": 1752350857925,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,23 +1,21 @@\n <template>\r\n-  <div class=\"feature-page\">\r\n+  <div class=\"mobile-page\">\r\n     <!-- 右上角用户信息 -->\r\n     <div class=\"top-corner\">\r\n       <UserInfo @login=\"handleUserLogin\" @logout=\"handleUserLogout\" />\r\n     </div>\r\n \r\n-    <div class=\"container\">\r\n-      <header class=\"page-header\">\r\n-        <BackToHomeButton class=\"back-btn\" />\r\n-        <h1 class=\"page-title\">\r\n-          <UndressWomanIcon :size=\"32\" color=\"var(--primary-color)\" class=\"page-icon\" />\r\n-          一键褪衣\r\n-        </h1>\r\n-        <p class=\"page-description\">上传人物照片，AI将为您智能移除服装</p>\r\n+    <div class=\"mobile-container\">\r\n+      <header class=\"mobile-header\">\r\n+        <BackToHomeButton class=\"mobile-header-back\" />\r\n+        <h1 class=\"mobile-header-title\">一键褪衣</h1>\r\n+        <div></div>\r\n       </header>\r\n \r\n       <!-- 体验点显示 -->\r\n-      <PointsDisplay ref=\"pointsDisplayRef\" />\r\n+      <div class=\"mobile-content\">\r\n+        <PointsDisplay ref=\"pointsDisplayRef\" />\r\n \r\n       <main class=\"page-content\">\r\n         <div v-if=\"!resultImage\" class=\"upload-section\">\r\n           <div class=\"target-image-section\">\r\n"
                },
                {
                    "date": 1752350880110,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -15,16 +15,14 @@\n       <!-- 体验点显示 -->\r\n       <div class=\"mobile-content\">\r\n         <PointsDisplay ref=\"pointsDisplayRef\" />\r\n \r\n-      <main class=\"page-content\">\r\n         <div v-if=\"!resultImage\" class=\"upload-section\">\r\n-          <div class=\"target-image-section\">\r\n-            <h3 class=\"section-title\">\r\n-              <UndressWomanIcon :size=\"20\" color=\"var(--primary-color)\" class=\"section-icon\" />\r\n+          <div class=\"mobile-card\">\r\n+            <h3 class=\"mobile-text-title mobile-mb-3\">\r\n+              <UndressWomanIcon :size=\"20\" color=\"var(--van-primary-color)\" class=\"section-icon\" />\r\n               上传人物照片\r\n             </h3>\r\n-            <!-- <p class=\"section-description\">上传需要换衣的人物照片</p> -->\r\n \r\n             <ImageUpload\r\n               v-model=\"selectedImage\"\r\n               title=\"选择人物照片\"\r\n"
                },
                {
                    "date": 1752350903750,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -34,31 +34,33 @@\n               @change=\"handleImageChange\"\r\n             />\r\n           </div>\r\n \r\n-          <div v-if=\"selectedImage\" class=\"action-section\">\r\n+          </div>\r\n+\r\n+          <div v-if=\"selectedImage\" class=\"mobile-card mobile-mt-3\">\r\n             <!-- 处理按钮 -->\r\n             <van-button\r\n               v-if=\"!isLoading && !resultImage\"\r\n               @click=\"processImage\"\r\n               type=\"primary\"\r\n               size=\"large\"\r\n               round\r\n               block\r\n-              class=\"process-btn\"\r\n+              class=\"mobile-button mobile-button-primary\"\r\n             >\r\n               <Shirt :size=\"20\" color=\"white\" class=\"btn-icon\" />\r\n               开始换衣\r\n             </van-button>\r\n           </div>\r\n         </div>\r\n \r\n         <!-- 处理状态 -->\r\n-        <ProcessingStatus\r\n-          v-if=\"isLoading\"\r\n-          status=\"loading\"\r\n-          title=\"正在处理换衣...\"\r\n-          description=\"请耐心等待，处理时间可能需要几分钟\"\r\n+        <div v-if=\"isLoading\" class=\"mobile-card\">\r\n+          <ProcessingStatus\r\n+            status=\"loading\"\r\n+            title=\"正在处理换衣...\"\r\n+            description=\"请耐心等待，处理时间可能需要几分钟\"\r\n           :progress=\"progressPercent\"\r\n           :prompt-id=\"promptId\"\r\n           :processing-time=\"processingTime\"\r\n         />\r\n"
                },
                {
                    "date": 1752350924657,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -62,21 +62,21 @@\n             description=\"请耐心等待，处理时间可能需要几分钟\"\r\n           :progress=\"progressPercent\"\r\n           :prompt-id=\"promptId\"\r\n           :processing-time=\"processingTime\"\r\n-        />\r\n+          />\r\n+        </div>\r\n \r\n         <!-- 结果展示 -->\r\n-        <ImageComparison\r\n-          v-if=\"resultImage\"\r\n-          :original-image=\"originalImageForComparison || selectedImage\"\r\n-          :result-image=\"resultImage\"\r\n-          @reset=\"resetProcess\"\r\n-        />\r\n-      </main>\r\n+        <div v-if=\"resultImage\" class=\"mobile-card\">\r\n+          <ImageComparison\r\n+            :original-image=\"originalImageForComparison || selectedImage\"\r\n+            :result-image=\"resultImage\"\r\n+            @reset=\"resetProcess\"\r\n+          />\r\n+        </div>\r\n+      </div>\r\n     </div>\r\n-\r\n-\r\n   </div>\r\n </template>\r\n \r\n <script setup>\r\n"
                },
                {
                    "date": 1752351017466,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -292,23 +292,24 @@\n }\r\n </script>\r\n \r\n <style scoped>\r\n-.feature-page {\r\n-  min-height: 100vh;\r\n-  padding: 20px;\r\n-  background: linear-gradient(135deg, var(--bg-primary) 0%, var(--bg-secondary) 100%);\r\n-  position: relative;\r\n-}\r\n-\r\n-/* 右上角用户信息 */\r\n+/* 移动端ClothesSwap页面样式 */\r\n .top-corner {\r\n   position: fixed;\r\n   top: 20px;\r\n   right: 20px;\r\n   z-index: 1000;\r\n }\r\n \r\n+.section-icon {\r\n+  margin-right: 8px;\r\n+}\r\n+\r\n+.btn-icon {\r\n+  margin-right: 8px;\r\n+}\r\n+\r\n .container {\r\n   max-width: 1000px;\r\n   margin: 0 auto;\r\n }\r\n"
                },
                {
                    "date": 1752351039019,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -307,48 +307,10 @@\n \r\n .btn-icon {\r\n   margin-right: 8px;\r\n }\r\n-\r\n-.container {\r\n-  max-width: 1000px;\r\n-  margin: 0 auto;\r\n-}\r\n-\r\n-.page-header {\r\n-  text-align: center;\r\n-  margin-bottom: 40px;\r\n-}\r\n-\r\n-.page-title {\r\n-  color: var(--text-color);\r\n-  font-size: 2.5rem;\r\n-  font-weight: 700;\r\n-  margin-bottom: 12px;\r\n+</style>\r\n   display: flex;\r\n-  align-items: center;\r\n-  justify-content: center;\r\n-  gap: 16px;\r\n-}\r\n-\r\n-.page-icon {\r\n-  flex-shrink: 0;\r\n-}\r\n-\r\n-.page-description {\r\n-  color: var(--text-light);\r\n-  font-size: 1.1rem;\r\n-  margin: 0;\r\n-  line-height: 1.5;\r\n-}\r\n-\r\n-.page-description {\r\n-  font-size: 1.2rem;\r\n-  color: rgba(255, 255, 255, 0.8);\r\n-}\r\n-\r\n-.page-content {\r\n-  display: flex;\r\n   flex-direction: column;\r\n   gap: 40px;\r\n }\r\n \r\n"
                },
                {
                    "date": 1752351061347,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -308,9 +308,8 @@\n .btn-icon {\r\n   margin-right: 8px;\r\n }\r\n </style>\r\n-  display: flex;\r\n   flex-direction: column;\r\n   gap: 40px;\r\n }\r\n \r\n"
                },
                {
                    "date": 1752351085434,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -308,9 +308,8 @@\n .btn-icon {\r\n   margin-right: 8px;\r\n }\r\n </style>\r\n-  flex-direction: column;\r\n   gap: 40px;\r\n }\r\n \r\n .upload-section {\r\n"
                },
                {
                    "date": 1752351111732,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -308,9 +308,8 @@\n .btn-icon {\r\n   margin-right: 8px;\r\n }\r\n </style>\r\n-  gap: 40px;\r\n }\r\n \r\n .upload-section {\r\n   display: flex;\r\n"
                },
                {
                    "date": 1752351136360,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -308,9 +308,8 @@\n .btn-icon {\r\n   margin-right: 8px;\r\n }\r\n </style>\r\n-}\r\n \r\n .upload-section {\r\n   display: flex;\r\n   flex-direction: column;\r\n"
                },
                {
                    "date": 1752351162649,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -308,10 +308,8 @@\n .btn-icon {\r\n   margin-right: 8px;\r\n }\r\n </style>\r\n-\r\n-.upload-section {\r\n   display: flex;\r\n   flex-direction: column;\r\n   gap: 40px;\r\n }\r\n"
                },
                {
                    "date": 1752351188728,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -308,9 +308,8 @@\n .btn-icon {\r\n   margin-right: 8px;\r\n }\r\n </style>\r\n-  display: flex;\r\n   flex-direction: column;\r\n   gap: 40px;\r\n }\r\n \r\n"
                },
                {
                    "date": 1752352727427,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -34,10 +34,8 @@\n               @change=\"handleImageChange\"\r\n             />\r\n           </div>\r\n \r\n-          </div>\r\n-\r\n           <div v-if=\"selectedImage\" class=\"mobile-card mobile-mt-3\">\r\n             <!-- 处理按钮 -->\r\n             <van-button\r\n               v-if=\"!isLoading && !resultImage\"\r\n"
                },
                {
                    "date": 1752353493510,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -305,9 +305,10 @@\n \r\n .btn-icon {\r\n   margin-right: 8px;\r\n }\r\n-</style>\r\n+\r\n+.upload-section {\r\n   flex-direction: column;\r\n   gap: 40px;\r\n }\r\n \r\n"
                },
                {
                    "date": 1752354037651,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,28 +1,32 @@\n <template>\r\n-  <div class=\"mobile-page\">\r\n+  <div class=\"feature-page\">\r\n     <!-- 右上角用户信息 -->\r\n     <div class=\"top-corner\">\r\n       <UserInfo @login=\"handleUserLogin\" @logout=\"handleUserLogout\" />\r\n     </div>\r\n \r\n-    <div class=\"mobile-container\">\r\n-      <header class=\"mobile-header\">\r\n-        <BackToHomeButton class=\"mobile-header-back\" />\r\n-        <h1 class=\"mobile-header-title\">一键褪衣</h1>\r\n-        <div></div>\r\n+    <div class=\"container\">\r\n+      <header class=\"page-header\">\r\n+        <BackToHomeButton class=\"back-btn\" />\r\n+        <h1 class=\"page-title\">\r\n+          <UndressWomanIcon :size=\"32\" color=\"var(--primary-color)\" class=\"page-icon\" />\r\n+          一键褪衣\r\n+        </h1>\r\n+        <p class=\"page-description\">上传人物照片，AI将为您智能移除服装</p>\r\n       </header>\r\n \r\n       <!-- 体验点显示 -->\r\n-      <div class=\"mobile-content\">\r\n-        <PointsDisplay ref=\"pointsDisplayRef\" />\r\n+      <PointsDisplay ref=\"pointsDisplayRef\" />\r\n \r\n+      <main class=\"page-content\">\r\n         <div v-if=\"!resultImage\" class=\"upload-section\">\r\n-          <div class=\"mobile-card\">\r\n-            <h3 class=\"mobile-text-title mobile-mb-3\">\r\n-              <UndressWomanIcon :size=\"20\" color=\"var(--van-primary-color)\" class=\"section-icon\" />\r\n+          <div class=\"target-image-section\">\r\n+            <h3 class=\"section-title\">\r\n+              <UndressWomanIcon :size=\"20\" color=\"var(--primary-color)\" class=\"section-icon\" />\r\n               上传人物照片\r\n             </h3>\r\n+            <!-- <p class=\"section-description\">上传需要换衣的人物照片</p> -->\r\n \r\n             <ImageUpload\r\n               v-model=\"selectedImage\"\r\n               title=\"选择人物照片\"\r\n@@ -34,47 +38,47 @@\n               @change=\"handleImageChange\"\r\n             />\r\n           </div>\r\n \r\n-          <div v-if=\"selectedImage\" class=\"mobile-card mobile-mt-3\">\r\n+          <div v-if=\"selectedImage\" class=\"action-section\">\r\n             <!-- 处理按钮 -->\r\n             <van-button\r\n               v-if=\"!isLoading && !resultImage\"\r\n               @click=\"processImage\"\r\n               type=\"primary\"\r\n               size=\"large\"\r\n               round\r\n               block\r\n-              class=\"mobile-button mobile-button-primary\"\r\n+              class=\"process-btn\"\r\n             >\r\n               <Shirt :size=\"20\" color=\"white\" class=\"btn-icon\" />\r\n               开始换衣\r\n             </van-button>\r\n           </div>\r\n         </div>\r\n \r\n         <!-- 处理状态 -->\r\n-        <div v-if=\"isLoading\" class=\"mobile-card\">\r\n-          <ProcessingStatus\r\n-            status=\"loading\"\r\n-            title=\"正在处理换衣...\"\r\n-            description=\"请耐心等待，处理时间可能需要几分钟\"\r\n+        <ProcessingStatus\r\n+          v-if=\"isLoading\"\r\n+          status=\"loading\"\r\n+          title=\"正在处理换衣...\"\r\n+          description=\"请耐心等待，处理时间可能需要几分钟\"\r\n           :progress=\"progressPercent\"\r\n           :prompt-id=\"promptId\"\r\n           :processing-time=\"processingTime\"\r\n-          />\r\n-        </div>\r\n+        />\r\n \r\n         <!-- 结果展示 -->\r\n-        <div v-if=\"resultImage\" class=\"mobile-card\">\r\n-          <ImageComparison\r\n-            :original-image=\"originalImageForComparison || selectedImage\"\r\n-            :result-image=\"resultImage\"\r\n-            @reset=\"resetProcess\"\r\n-          />\r\n-        </div>\r\n-      </div>\r\n+        <ImageComparison\r\n+          v-if=\"resultImage\"\r\n+          :original-image=\"originalImageForComparison || selectedImage\"\r\n+          :result-image=\"resultImage\"\r\n+          @reset=\"resetProcess\"\r\n+        />\r\n+      </main>\r\n     </div>\r\n+\r\n+\r\n   </div>\r\n </template>\r\n \r\n <script setup>\r\n@@ -290,25 +294,68 @@\n }\r\n </script>\r\n \r\n <style scoped>\r\n-/* 移动端ClothesSwap页面样式 */\r\n+.feature-page {\r\n+  min-height: 100vh;\r\n+  padding: 20px;\r\n+  background: linear-gradient(135deg, var(--bg-primary) 0%, var(--bg-secondary) 100%);\r\n+  position: relative;\r\n+}\r\n+\r\n+/* 右上角用户信息 */\r\n .top-corner {\r\n   position: fixed;\r\n   top: 20px;\r\n   right: 20px;\r\n   z-index: 1000;\r\n }\r\n \r\n-.section-icon {\r\n-  margin-right: 8px;\r\n+.container {\r\n+  max-width: 1000px;\r\n+  margin: 0 auto;\r\n }\r\n \r\n-.btn-icon {\r\n-  margin-right: 8px;\r\n+.page-header {\r\n+  text-align: center;\r\n+  margin-bottom: 40px;\r\n }\r\n \r\n+.page-title {\r\n+  color: var(--text-color);\r\n+  font-size: 2.5rem;\r\n+  font-weight: 700;\r\n+  margin-bottom: 12px;\r\n+  display: flex;\r\n+  align-items: center;\r\n+  justify-content: center;\r\n+  gap: 16px;\r\n+}\r\n+\r\n+.page-icon {\r\n+  flex-shrink: 0;\r\n+}\r\n+\r\n+.page-description {\r\n+  color: var(--text-light);\r\n+  font-size: 1.1rem;\r\n+  margin: 0;\r\n+  line-height: 1.5;\r\n+}\r\n+\r\n+.page-description {\r\n+  font-size: 1.2rem;\r\n+  color: rgba(255, 255, 255, 0.8);\r\n+}\r\n+\r\n+.page-content {\r\n+  display: flex;\r\n+  flex-direction: column;\r\n+  gap: 40px;\r\n+}\r\n+\r\n .upload-section {\r\n+  display: flex;\r\n   flex-direction: column;\r\n   gap: 40px;\r\n }\r\n \r\n"
                },
                {
                    "date": 1752354692573,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,21 +1,25 @@\n <template>\r\n-  <div class=\"feature-page\">\r\n-    <!-- 右上角用户信息 -->\r\n-    <div class=\"top-corner\">\r\n+  <MobileLayout\r\n+    title=\"一键褪衣\"\r\n+    title-icon=\"user-o\"\r\n+    :show-back-button=\"true\"\r\n+  >\r\n+    <template #header-right>\r\n       <UserInfo @login=\"handleUserLogin\" @logout=\"handleUserLogout\" />\r\n+    </template>\r\n+\r\n+    <!-- 功能介绍 -->\r\n+    <div class=\"mobile-card\">\r\n+      <div class=\"feature-intro\">\r\n+        <div class=\"intro-icon\">\r\n+          <UndressWomanIcon :size=\"32\" color=\"white\" />\r\n+        </div>\r\n+        <h2 class=\"intro-title\">一键褪衣</h2>\r\n+        <p class=\"intro-description\">上传人物照片，AI将为您智能移除服装</p>\r\n+      </div>\r\n     </div>\r\n \r\n-    <div class=\"container\">\r\n-      <header class=\"page-header\">\r\n-        <BackToHomeButton class=\"back-btn\" />\r\n-        <h1 class=\"page-title\">\r\n-          <UndressWomanIcon :size=\"32\" color=\"var(--primary-color)\" class=\"page-icon\" />\r\n-          一键褪衣\r\n-        </h1>\r\n-        <p class=\"page-description\">上传人物照片，AI将为您智能移除服装</p>\r\n-      </header>\r\n-\r\n       <!-- 体验点显示 -->\r\n       <PointsDisplay ref=\"pointsDisplayRef\" />\r\n \r\n       <main class=\"page-content\">\r\n"
                },
                {
                    "date": 1752354727891,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -18,31 +18,33 @@\n         <p class=\"intro-description\">上传人物照片，AI将为您智能移除服装</p>\r\n       </div>\r\n     </div>\r\n \r\n-      <!-- 体验点显示 -->\r\n+    <!-- 体验点显示 -->\r\n+    <div class=\"mobile-card\">\r\n       <PointsDisplay ref=\"pointsDisplayRef\" />\r\n+    </div>\r\n \r\n-      <main class=\"page-content\">\r\n-        <div v-if=\"!resultImage\" class=\"upload-section\">\r\n-          <div class=\"target-image-section\">\r\n-            <h3 class=\"section-title\">\r\n-              <UndressWomanIcon :size=\"20\" color=\"var(--primary-color)\" class=\"section-icon\" />\r\n-              上传人物照片\r\n-            </h3>\r\n-            <!-- <p class=\"section-description\">上传需要换衣的人物照片</p> -->\r\n+    <!-- 图片上传区域 -->\r\n+    <div v-if=\"!resultImage\" class=\"mobile-card\">\r\n+      <div class=\"mobile-card-header\">\r\n+        <h3 class=\"mobile-card-title\">\r\n+          <UndressWomanIcon :size=\"20\" color=\"var(--primary-color)\" />\r\n+          上传人物照片\r\n+        </h3>\r\n+      </div>\r\n \r\n-            <ImageUpload\r\n-              v-model=\"selectedImage\"\r\n-              title=\"选择人物照片\"\r\n-              description=\"支持 JPG、PNG 格式，建议尺寸 512x512 以上\"\r\n-              icon=\"Image\"\r\n-              :icon-size=\"48\"\r\n-              :min-height=\"300\"\r\n-              :disabled=\"isLoading\"\r\n-              @change=\"handleImageChange\"\r\n-            />\r\n-          </div>\r\n+      <ImageUpload\r\n+        v-model=\"selectedImage\"\r\n+        title=\"选择人物照片\"\r\n+        description=\"支持 JPG、PNG 格式，建议尺寸 512x512 以上\"\r\n+        icon=\"Image\"\r\n+        :icon-size=\"48\"\r\n+        :min-height=\"300\"\r\n+        :disabled=\"isLoading\"\r\n+        @change=\"handleImageChange\"\r\n+      />\r\n+    </div>\r\n \r\n           <div v-if=\"selectedImage\" class=\"action-section\">\r\n             <!-- 处理按钮 -->\r\n             <van-button\r\n"
                },
                {
                    "date": 1752354758219,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -44,24 +44,23 @@\n         @change=\"handleImageChange\"\r\n       />\r\n     </div>\r\n \r\n-          <div v-if=\"selectedImage\" class=\"action-section\">\r\n-            <!-- 处理按钮 -->\r\n-            <van-button\r\n-              v-if=\"!isLoading && !resultImage\"\r\n-              @click=\"processImage\"\r\n-              type=\"primary\"\r\n-              size=\"large\"\r\n-              round\r\n-              block\r\n-              class=\"process-btn\"\r\n-            >\r\n-              <Shirt :size=\"20\" color=\"white\" class=\"btn-icon\" />\r\n-              开始换衣\r\n-            </van-button>\r\n-          </div>\r\n-        </div>\r\n+    <!-- 操作按钮 -->\r\n+    <div v-if=\"selectedImage && !resultImage\" class=\"mobile-card\">\r\n+      <van-button\r\n+        v-if=\"!isLoading\"\r\n+        @click=\"processImage\"\r\n+        type=\"primary\"\r\n+        size=\"large\"\r\n+        round\r\n+        block\r\n+        class=\"mobile-btn mobile-btn-primary\"\r\n+      >\r\n+        <Shirt :size=\"20\" color=\"white\" class=\"btn-icon\" />\r\n+        开始换衣\r\n+      </van-button>\r\n+    </div>\r\n \r\n         <!-- 处理状态 -->\r\n         <ProcessingStatus\r\n           v-if=\"isLoading\"\r\n"
                },
                {
                    "date": 1752354797419,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -60,31 +60,36 @@\n         开始换衣\r\n       </van-button>\r\n     </div>\r\n \r\n-        <!-- 处理状态 -->\r\n-        <ProcessingStatus\r\n-          v-if=\"isLoading\"\r\n-          status=\"loading\"\r\n-          title=\"正在处理换衣...\"\r\n-          description=\"请耐心等待，处理时间可能需要几分钟\"\r\n-          :progress=\"progressPercent\"\r\n-          :prompt-id=\"promptId\"\r\n-          :processing-time=\"processingTime\"\r\n-        />\r\n-\r\n-        <!-- 结果展示 -->\r\n-        <ImageComparison\r\n-          v-if=\"resultImage\"\r\n-          :original-image=\"originalImageForComparison || selectedImage\"\r\n-          :result-image=\"resultImage\"\r\n-          @reset=\"resetProcess\"\r\n-        />\r\n-      </main>\r\n+    <!-- 处理状态 -->\r\n+    <div v-if=\"isLoading\" class=\"mobile-card\">\r\n+      <ProcessingStatus\r\n+        status=\"loading\"\r\n+        title=\"正在处理换衣...\"\r\n+        description=\"请耐心等待，处理时间可能需要几分钟\"\r\n+        :progress=\"progressPercent\"\r\n+        :prompt-id=\"promptId\"\r\n+        :processing-time=\"processingTime\"\r\n+      />\r\n     </div>\r\n \r\n+    <!-- 结果展示 -->\r\n+    <div v-if=\"resultImage\" class=\"mobile-card\">\r\n+      <div class=\"mobile-card-header\">\r\n+        <h3 class=\"mobile-card-title\">\r\n+          <van-icon name=\"photo-o\" size=\"20\" />\r\n+          处理结果\r\n+        </h3>\r\n+      </div>\r\n \r\n-  </div>\r\n+      <ImageComparison\r\n+        :original-image=\"originalImageForComparison || selectedImage\"\r\n+        :result-image=\"resultImage\"\r\n+        @reset=\"resetProcess\"\r\n+      />\r\n+    </div>\r\n+  </MobileLayout>\r\n </template>\r\n \r\n <script setup>\r\n import { ref, onMounted, onUnmounted } from 'vue'\r\n"
                },
                {
                    "date": 1752354811872,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -93,14 +93,15 @@\n \r\n <script setup>\r\n import { ref, onMounted, onUnmounted } from 'vue'\r\n import { Toast } from 'vant'\r\n+import { Shirt } from 'lucide-vue-next'\r\n+import MobileLayout from '../components/MobileLayout.vue'\r\n import ImageUpload from '../components/ImageUpload.vue'\r\n import ProcessingStatus from '../components/ProcessingStatus.vue'\r\n import ImageComparison from '../components/ImageComparison.vue'\r\n import PointsDisplay from '../components/PointsDisplay.vue'\r\n import UserInfo from '../components/UserInfo.vue'\r\n-import BackToHomeButton from '../components/BackToHomeButton.vue'\r\n \r\n import { UndressWomanIcon } from '../components/icons'\r\n \r\n // 静态导入ComfyUI服务\r\n"
                },
                {
                    "date": 1752354835522,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -795,9 +795,49 @@\n   justify-content: center;\r\n   gap: 8px;\r\n }\r\n \r\n+/* 移动端样式 */\r\n+.feature-intro {\r\n+  text-align: center;\r\n+  padding: 20px;\r\n+}\r\n+\r\n+.intro-icon {\r\n+  width: 64px;\r\n+  height: 64px;\r\n+  border-radius: 16px;\r\n+  background: var(--gradient-primary);\r\n+  display: flex;\r\n+  align-items: center;\r\n+  justify-content: center;\r\n+  margin: 0 auto 16px;\r\n+  box-shadow: var(--mobile-shadow-lg);\r\n+}\r\n+\r\n+.intro-title {\r\n+  font-size: 20px;\r\n+  font-weight: 600;\r\n+  color: var(--text-color);\r\n+  margin: 0 0 8px 0;\r\n+}\r\n+\r\n+.intro-description {\r\n+  font-size: 14px;\r\n+  color: var(--text-light);\r\n+  margin: 0;\r\n+  line-height: 1.5;\r\n+}\r\n+\r\n+.result-actions {\r\n+  margin-top: 20px;\r\n+}\r\n+\r\n .btn-icon {\r\n+  margin-right: 8px;\r\n+}\r\n+\r\n+.btn-icon {\r\n   flex-shrink: 0;\r\n }\r\n \r\n /* 动画已移至 shared.css */\r\n"
                },
                {
                    "date": 1752368903160,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,107 +1,96 @@\n <template>\r\n-  <MobileLayout\r\n-    title=\"一键褪衣\"\r\n-    title-icon=\"user-o\"\r\n-    :show-back-button=\"true\"\r\n-  >\r\n-    <template #header-right>\r\n+  <div class=\"feature-page\">\r\n+    <!-- 右上角用户信息 -->\r\n+    <div class=\"top-corner\">\r\n       <UserInfo @login=\"handleUserLogin\" @logout=\"handleUserLogout\" />\r\n-    </template>\r\n-\r\n-    <!-- 功能介绍 -->\r\n-    <div class=\"mobile-card\">\r\n-      <div class=\"feature-intro\">\r\n-        <div class=\"intro-icon\">\r\n-          <UndressWomanIcon :size=\"32\" color=\"white\" />\r\n-        </div>\r\n-        <h2 class=\"intro-title\">一键褪衣</h2>\r\n-        <p class=\"intro-description\">上传人物照片，AI将为您智能移除服装</p>\r\n-      </div>\r\n     </div>\r\n \r\n-    <!-- 体验点显示 -->\r\n-    <div class=\"mobile-card\">\r\n+    <div class=\"container\">\r\n+      <header class=\"page-header\">\r\n+        <BackToHomeButton class=\"back-btn\" />\r\n+        <h1 class=\"page-title\">\r\n+          <UndressWomanIcon :size=\"32\" color=\"var(--primary-color)\" class=\"page-icon\" />\r\n+          一键褪衣\r\n+        </h1>\r\n+        <p class=\"page-description\">上传人物照片，AI将为您智能移除服装</p>\r\n+      </header>\r\n+\r\n+      <!-- 体验点显示 -->\r\n       <PointsDisplay ref=\"pointsDisplayRef\" />\r\n-    </div>\r\n \r\n-    <!-- 图片上传区域 -->\r\n-    <div v-if=\"!resultImage\" class=\"mobile-card\">\r\n-      <div class=\"mobile-card-header\">\r\n-        <h3 class=\"mobile-card-title\">\r\n-          <UndressWomanIcon :size=\"20\" color=\"var(--primary-color)\" />\r\n-          上传人物照片\r\n-        </h3>\r\n-      </div>\r\n+      <main class=\"page-content\">\r\n+        <div v-if=\"!resultImage\" class=\"upload-section\">\r\n+          <div class=\"target-image-section\">\r\n+            <h3 class=\"section-title\">\r\n+              <UndressWomanIcon :size=\"20\" color=\"var(--primary-color)\" class=\"section-icon\" />\r\n+              上传人物照片\r\n+            </h3>\r\n+            <!-- <p class=\"section-description\">上传需要换衣的人物照片</p> -->\r\n \r\n-      <ImageUpload\r\n-        v-model=\"selectedImage\"\r\n-        title=\"选择人物照片\"\r\n-        description=\"支持 JPG、PNG 格式，建议尺寸 512x512 以上\"\r\n-        icon=\"Image\"\r\n-        :icon-size=\"48\"\r\n-        :min-height=\"300\"\r\n-        :disabled=\"isLoading\"\r\n-        @change=\"handleImageChange\"\r\n-      />\r\n-    </div>\r\n+            <ImageUpload\r\n+              v-model=\"selectedImage\"\r\n+              title=\"选择人物照片\"\r\n+              description=\"支持 JPG、PNG 格式，建议尺寸 512x512 以上\"\r\n+              icon=\"Image\"\r\n+              :icon-size=\"48\"\r\n+              :min-height=\"300\"\r\n+              :disabled=\"isLoading\"\r\n+              @change=\"handleImageChange\"\r\n+            />\r\n+          </div>\r\n \r\n-    <!-- 操作按钮 -->\r\n-    <div v-if=\"selectedImage && !resultImage\" class=\"mobile-card\">\r\n-      <van-button\r\n-        v-if=\"!isLoading\"\r\n-        @click=\"processImage\"\r\n-        type=\"primary\"\r\n-        size=\"large\"\r\n-        round\r\n-        block\r\n-        class=\"mobile-btn mobile-btn-primary\"\r\n-      >\r\n-        <Shirt :size=\"20\" color=\"white\" class=\"btn-icon\" />\r\n-        开始换衣\r\n-      </van-button>\r\n-    </div>\r\n+          <div v-if=\"selectedImage\" class=\"action-section\">\r\n+            <!-- 处理按钮 -->\r\n+            <van-button\r\n+              v-if=\"!isLoading && !resultImage\"\r\n+              @click=\"processImage\"\r\n+              type=\"primary\"\r\n+              size=\"large\"\r\n+              round\r\n+              block\r\n+              class=\"process-btn\"\r\n+            >\r\n+              <Shirt :size=\"20\" color=\"white\" class=\"btn-icon\" />\r\n+              开始换衣\r\n+            </van-button>\r\n+          </div>\r\n+        </div>\r\n \r\n-    <!-- 处理状态 -->\r\n-    <div v-if=\"isLoading\" class=\"mobile-card\">\r\n-      <ProcessingStatus\r\n-        status=\"loading\"\r\n-        title=\"正在处理换衣...\"\r\n-        description=\"请耐心等待，处理时间可能需要几分钟\"\r\n-        :progress=\"progressPercent\"\r\n-        :prompt-id=\"promptId\"\r\n-        :processing-time=\"processingTime\"\r\n-      />\r\n+        <!-- 处理状态 -->\r\n+        <ProcessingStatus\r\n+          v-if=\"isLoading\"\r\n+          status=\"loading\"\r\n+          title=\"正在处理换衣...\"\r\n+          description=\"请耐心等待，处理时间可能需要几分钟\"\r\n+          :progress=\"progressPercent\"\r\n+          :prompt-id=\"promptId\"\r\n+          :processing-time=\"processingTime\"\r\n+        />\r\n+\r\n+        <!-- 结果展示 -->\r\n+        <ImageComparison\r\n+          v-if=\"resultImage\"\r\n+          :original-image=\"originalImageForComparison || selectedImage\"\r\n+          :result-image=\"resultImage\"\r\n+          @reset=\"resetProcess\"\r\n+        />\r\n+      </main>\r\n     </div>\r\n \r\n-    <!-- 结果展示 -->\r\n-    <div v-if=\"resultImage\" class=\"mobile-card\">\r\n-      <div class=\"mobile-card-header\">\r\n-        <h3 class=\"mobile-card-title\">\r\n-          <van-icon name=\"photo-o\" size=\"20\" />\r\n-          处理结果\r\n-        </h3>\r\n-      </div>\r\n \r\n-      <ImageComparison\r\n-        :original-image=\"originalImageForComparison || selectedImage\"\r\n-        :result-image=\"resultImage\"\r\n-        @reset=\"resetProcess\"\r\n-      />\r\n-    </div>\r\n-  </MobileLayout>\r\n+  </div>\r\n </template>\r\n \r\n <script setup>\r\n import { ref, onMounted, onUnmounted } from 'vue'\r\n import { Toast } from 'vant'\r\n-import { Shirt } from 'lucide-vue-next'\r\n-import MobileLayout from '../components/MobileLayout.vue'\r\n import ImageUpload from '../components/ImageUpload.vue'\r\n import ProcessingStatus from '../components/ProcessingStatus.vue'\r\n import ImageComparison from '../components/ImageComparison.vue'\r\n import PointsDisplay from '../components/PointsDisplay.vue'\r\n import UserInfo from '../components/UserInfo.vue'\r\n+import BackToHomeButton from '../components/BackToHomeButton.vue'\r\n \r\n import { UndressWomanIcon } from '../components/icons'\r\n \r\n // 静态导入ComfyUI服务\r\n@@ -795,49 +784,9 @@\n   justify-content: center;\r\n   gap: 8px;\r\n }\r\n \r\n-/* 移动端样式 */\r\n-.feature-intro {\r\n-  text-align: center;\r\n-  padding: 20px;\r\n-}\r\n-\r\n-.intro-icon {\r\n-  width: 64px;\r\n-  height: 64px;\r\n-  border-radius: 16px;\r\n-  background: var(--gradient-primary);\r\n-  display: flex;\r\n-  align-items: center;\r\n-  justify-content: center;\r\n-  margin: 0 auto 16px;\r\n-  box-shadow: var(--mobile-shadow-lg);\r\n-}\r\n-\r\n-.intro-title {\r\n-  font-size: 20px;\r\n-  font-weight: 600;\r\n-  color: var(--text-color);\r\n-  margin: 0 0 8px 0;\r\n-}\r\n-\r\n-.intro-description {\r\n-  font-size: 14px;\r\n-  color: var(--text-light);\r\n-  margin: 0;\r\n-  line-height: 1.5;\r\n-}\r\n-\r\n-.result-actions {\r\n-  margin-top: 20px;\r\n-}\r\n-\r\n .btn-icon {\r\n-  margin-right: 8px;\r\n-}\r\n-\r\n-.btn-icon {\r\n   flex-shrink: 0;\r\n }\r\n \r\n /* 动画已移至 shared.css */\r\n"
                },
                {
                    "date": 1752370112013,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,24 +1,23 @@\n <template>\r\n-  <div class=\"feature-page\">\r\n-    <!-- 右上角用户信息 -->\r\n-    <div class=\"top-corner\">\r\n-      <UserInfo @login=\"handleUserLogin\" @logout=\"handleUserLogout\" />\r\n-    </div>\r\n+  <MobileLayout\r\n+    title=\"一键褪衣\"\r\n+    :show-back=\"true\"\r\n+    :show-tabbar=\"true\"\r\n+    @login=\"handleUserLogin\"\r\n+    @logout=\"handleUserLogout\"\r\n+  >\r\n+    <!-- 页面描述 -->\r\n+    <MobileCard\r\n+      title=\"一键褪衣\"\r\n+      subtitle=\"上传人物照片，AI将为您智能移除服装\"\r\n+      icon=\"photo-o\"\r\n+      variant=\"primary\"\r\n+    />\r\n \r\n-    <div class=\"container\">\r\n-      <header class=\"page-header\">\r\n-        <BackToHomeButton class=\"back-btn\" />\r\n-        <h1 class=\"page-title\">\r\n-          <UndressWomanIcon :size=\"32\" color=\"var(--primary-color)\" class=\"page-icon\" />\r\n-          一键褪衣\r\n-        </h1>\r\n-        <p class=\"page-description\">上传人物照片，AI将为您智能移除服装</p>\r\n-      </header>\r\n+    <!-- 体验点显示 -->\r\n+    <PointsDisplay ref=\"pointsDisplayRef\" />\r\n \r\n-      <!-- 体验点显示 -->\r\n-      <PointsDisplay ref=\"pointsDisplayRef\" />\r\n-\r\n       <main class=\"page-content\">\r\n         <div v-if=\"!resultImage\" class=\"upload-section\">\r\n           <div class=\"target-image-section\">\r\n             <h3 class=\"section-title\">\r\n"
                },
                {
                    "date": 1752370137642,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -16,46 +16,45 @@\n \r\n     <!-- 体验点显示 -->\r\n     <PointsDisplay ref=\"pointsDisplayRef\" />\r\n \r\n-      <main class=\"page-content\">\r\n-        <div v-if=\"!resultImage\" class=\"upload-section\">\r\n-          <div class=\"target-image-section\">\r\n-            <h3 class=\"section-title\">\r\n-              <UndressWomanIcon :size=\"20\" color=\"var(--primary-color)\" class=\"section-icon\" />\r\n-              上传人物照片\r\n-            </h3>\r\n-            <!-- <p class=\"section-description\">上传需要换衣的人物照片</p> -->\r\n+    <!-- 上传区域 -->\r\n+    <div v-if=\"!resultImage\">\r\n+      <MobileCard\r\n+        title=\"上传人物照片\"\r\n+        subtitle=\"支持 JPG、PNG 格式，建议尺寸 512x512 以上\"\r\n+        icon=\"photo-o\"\r\n+        variant=\"default\"\r\n+      >\r\n+        <ImageUpload\r\n+          v-model=\"selectedImage\"\r\n+          title=\"选择人物照片\"\r\n+          description=\"点击或拖拽上传图片\"\r\n+          icon=\"Image\"\r\n+          :icon-size=\"48\"\r\n+          :min-height=\"200\"\r\n+          :disabled=\"isLoading\"\r\n+          @change=\"handleImageChange\"\r\n+        />\r\n+      </MobileCard>\r\n \r\n-            <ImageUpload\r\n-              v-model=\"selectedImage\"\r\n-              title=\"选择人物照片\"\r\n-              description=\"支持 JPG、PNG 格式，建议尺寸 512x512 以上\"\r\n-              icon=\"Image\"\r\n-              :icon-size=\"48\"\r\n-              :min-height=\"300\"\r\n-              :disabled=\"isLoading\"\r\n-              @change=\"handleImageChange\"\r\n-            />\r\n-          </div>\r\n+      <!-- 处理按钮 -->\r\n+      <MobileCard v-if=\"selectedImage\">\r\n+        <van-button\r\n+          v-if=\"!isLoading && !resultImage\"\r\n+          @click=\"processImage\"\r\n+          type=\"primary\"\r\n+          size=\"large\"\r\n+          round\r\n+          block\r\n+          class=\"process-btn\"\r\n+        >\r\n+          <Shirt :size=\"20\" color=\"white\" class=\"btn-icon\" />\r\n+          开始换衣\r\n+        </van-button>\r\n+      </MobileCard>\r\n+    </div>\r\n \r\n-          <div v-if=\"selectedImage\" class=\"action-section\">\r\n-            <!-- 处理按钮 -->\r\n-            <van-button\r\n-              v-if=\"!isLoading && !resultImage\"\r\n-              @click=\"processImage\"\r\n-              type=\"primary\"\r\n-              size=\"large\"\r\n-              round\r\n-              block\r\n-              class=\"process-btn\"\r\n-            >\r\n-              <Shirt :size=\"20\" color=\"white\" class=\"btn-icon\" />\r\n-              开始换衣\r\n-            </van-button>\r\n-          </div>\r\n-        </div>\r\n-\r\n         <!-- 处理状态 -->\r\n         <ProcessingStatus\r\n           v-if=\"isLoading\"\r\n           status=\"loading\"\r\n"
                },
                {
                    "date": 1752370163417,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -53,31 +53,29 @@\n         </van-button>\r\n       </MobileCard>\r\n     </div>\r\n \r\n-        <!-- 处理状态 -->\r\n-        <ProcessingStatus\r\n-          v-if=\"isLoading\"\r\n-          status=\"loading\"\r\n-          title=\"正在处理换衣...\"\r\n-          description=\"请耐心等待，处理时间可能需要几分钟\"\r\n-          :progress=\"progressPercent\"\r\n-          :prompt-id=\"promptId\"\r\n-          :processing-time=\"processingTime\"\r\n-        />\r\n+    <!-- 处理状态 -->\r\n+    <MobileCard v-if=\"isLoading\" variant=\"primary\">\r\n+      <ProcessingStatus\r\n+        status=\"loading\"\r\n+        title=\"正在处理换衣...\"\r\n+        description=\"请耐心等待，处理时间可能需要几分钟\"\r\n+        :progress=\"progressPercent\"\r\n+        :prompt-id=\"promptId\"\r\n+        :processing-time=\"processingTime\"\r\n+      />\r\n+    </MobileCard>\r\n \r\n-        <!-- 结果展示 -->\r\n-        <ImageComparison\r\n-          v-if=\"resultImage\"\r\n-          :original-image=\"originalImageForComparison || selectedImage\"\r\n-          :result-image=\"resultImage\"\r\n-          @reset=\"resetProcess\"\r\n-        />\r\n-      </main>\r\n-    </div>\r\n-\r\n-\r\n-  </div>\r\n+    <!-- 结果展示 -->\r\n+    <MobileCard v-if=\"resultImage\" title=\"处理结果\" subtitle=\"对比查看换衣效果\" variant=\"success\">\r\n+      <ImageComparison\r\n+        :original-image=\"originalImageForComparison || selectedImage\"\r\n+        :result-image=\"resultImage\"\r\n+        @reset=\"resetProcess\"\r\n+      />\r\n+    </MobileCard>\r\n+  </MobileLayout>\r\n </template>\r\n \r\n <script setup>\r\n import { ref, onMounted, onUnmounted } from 'vue'\r\n"
                },
                {
                    "date": 1752370177722,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -79,14 +79,14 @@\n \r\n <script setup>\r\n import { ref, onMounted, onUnmounted } from 'vue'\r\n import { Toast } from 'vant'\r\n+import MobileLayout from '../components/MobileLayout.vue'\r\n+import MobileCard from '../components/MobileCard.vue'\r\n import ImageUpload from '../components/ImageUpload.vue'\r\n import ProcessingStatus from '../components/ProcessingStatus.vue'\r\n import ImageComparison from '../components/ImageComparison.vue'\r\n import PointsDisplay from '../components/PointsDisplay.vue'\r\n-import UserInfo from '../components/UserInfo.vue'\r\n-import BackToHomeButton from '../components/BackToHomeButton.vue'\r\n \r\n import { UndressWomanIcon } from '../components/icons'\r\n \r\n // 静态导入ComfyUI服务\r\n"
                },
                {
                    "date": 1752371296838,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -73,8 +73,11 @@\n         :result-image=\"resultImage\"\r\n         @reset=\"resetProcess\"\r\n       />\r\n     </MobileCard>\r\n+\r\n+    <!-- 底部导航 -->\r\n+    <MobileTabbar />\r\n   </MobileLayout>\r\n </template>\r\n \r\n <script setup>\r\n"
                },
                {
                    "date": 1752371312535,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -84,8 +84,9 @@\n import { ref, onMounted, onUnmounted } from 'vue'\r\n import { Toast } from 'vant'\r\n import MobileLayout from '../components/MobileLayout.vue'\r\n import MobileCard from '../components/MobileCard.vue'\r\n+import MobileTabbar from '../components/MobileTabbar.vue'\r\n import ImageUpload from '../components/ImageUpload.vue'\r\n import ProcessingStatus from '../components/ProcessingStatus.vue'\r\n import ImageComparison from '../components/ImageComparison.vue'\r\n import PointsDisplay from '../components/PointsDisplay.vue'\r\n"
                },
                {
                    "date": 1752373197458,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -89,11 +89,10 @@\n import ImageUpload from '../components/ImageUpload.vue'\r\n import ProcessingStatus from '../components/ProcessingStatus.vue'\r\n import ImageComparison from '../components/ImageComparison.vue'\r\n import PointsDisplay from '../components/PointsDisplay.vue'\r\n+import { Shirt } from 'lucide-vue-next'\r\n \r\n-import { UndressWomanIcon } from '../components/icons'\r\n-\r\n // 静态导入ComfyUI服务\r\n import { processUndressImage } from '../services/comfyui.js'\r\n \r\n console.log('ClothesSwap组件已加载，ComfyUI服务已导入')\r\n"
                },
                {
                    "date": 1752373807469,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,98 +1,99 @@\n <template>\r\n-  <MobileLayout\r\n-    title=\"一键褪衣\"\r\n-    :show-back=\"true\"\r\n-    :show-tabbar=\"true\"\r\n-    @login=\"handleUserLogin\"\r\n-    @logout=\"handleUserLogout\"\r\n-  >\r\n-    <!-- 页面描述 -->\r\n-    <MobileCard\r\n-      title=\"一键褪衣\"\r\n-      subtitle=\"上传人物照片，AI将为您智能移除服装\"\r\n-      icon=\"photo-o\"\r\n-      variant=\"primary\"\r\n-    />\r\n+  <div class=\"feature-page\">\r\n+    <!-- 右上角用户信息 -->\r\n+    <div class=\"top-corner\">\r\n+      <UserInfo @login=\"handleUserLogin\" @logout=\"handleUserLogout\" />\r\n+    </div>\r\n \r\n-    <!-- 体验点显示 -->\r\n-    <PointsDisplay ref=\"pointsDisplayRef\" />\r\n+    <div class=\"container\">\r\n+      <header class=\"page-header\">\r\n+        <BackToHomeButton class=\"back-btn\" />\r\n+        <h1 class=\"page-title\">\r\n+          <UndressWomanIcon :size=\"32\" color=\"var(--primary-color)\" class=\"page-icon\" />\r\n+          一键褪衣\r\n+        </h1>\r\n+        <p class=\"page-description\">上传人物照片，AI将为您智能移除服装</p>\r\n+      </header>\r\n \r\n-    <!-- 上传区域 -->\r\n-    <div v-if=\"!resultImage\">\r\n-      <MobileCard\r\n-        title=\"上传人物照片\"\r\n-        subtitle=\"支持 JPG、PNG 格式，建议尺寸 512x512 以上\"\r\n-        icon=\"photo-o\"\r\n-        variant=\"default\"\r\n-      >\r\n-        <ImageUpload\r\n-          v-model=\"selectedImage\"\r\n-          title=\"选择人物照片\"\r\n-          description=\"点击或拖拽上传图片\"\r\n-          icon=\"Image\"\r\n-          :icon-size=\"48\"\r\n-          :min-height=\"200\"\r\n-          :disabled=\"isLoading\"\r\n-          @change=\"handleImageChange\"\r\n+      <!-- 体验点显示 -->\r\n+      <PointsDisplay ref=\"pointsDisplayRef\" />\r\n+\r\n+      <main class=\"page-content\">\r\n+        <div v-if=\"!resultImage\" class=\"upload-section\">\r\n+          <div class=\"target-image-section\">\r\n+            <h3 class=\"section-title\">\r\n+              <UndressWomanIcon :size=\"20\" color=\"var(--primary-color)\" class=\"section-icon\" />\r\n+              上传人物照片\r\n+            </h3>\r\n+            <!-- <p class=\"section-description\">上传需要换衣的人物照片</p> -->\r\n+\r\n+            <ImageUpload\r\n+              v-model=\"selectedImage\"\r\n+              title=\"选择人物照片\"\r\n+              description=\"支持 JPG、PNG 格式，建议尺寸 512x512 以上\"\r\n+              icon=\"Image\"\r\n+              :icon-size=\"48\"\r\n+              :min-height=\"300\"\r\n+              :disabled=\"isLoading\"\r\n+              @change=\"handleImageChange\"\r\n+            />\r\n+          </div>\r\n+\r\n+          <div v-if=\"selectedImage\" class=\"action-section\">\r\n+            <!-- 处理按钮 -->\r\n+            <van-button\r\n+              v-if=\"!isLoading && !resultImage\"\r\n+              @click=\"processImage\"\r\n+              type=\"primary\"\r\n+              size=\"large\"\r\n+              round\r\n+              block\r\n+              class=\"process-btn\"\r\n+            >\r\n+              <Shirt :size=\"20\" color=\"white\" class=\"btn-icon\" />\r\n+              开始换衣\r\n+            </van-button>\r\n+          </div>\r\n+        </div>\r\n+\r\n+        <!-- 处理状态 -->\r\n+        <ProcessingStatus\r\n+          v-if=\"isLoading\"\r\n+          status=\"loading\"\r\n+          title=\"正在处理换衣...\"\r\n+          description=\"请耐心等待，处理时间可能需要几分钟\"\r\n+          :progress=\"progressPercent\"\r\n+          :prompt-id=\"promptId\"\r\n+          :processing-time=\"processingTime\"\r\n         />\r\n-      </MobileCard>\r\n \r\n-      <!-- 处理按钮 -->\r\n-      <MobileCard v-if=\"selectedImage\">\r\n-        <van-button\r\n-          v-if=\"!isLoading && !resultImage\"\r\n-          @click=\"processImage\"\r\n-          type=\"primary\"\r\n-          size=\"large\"\r\n-          round\r\n-          block\r\n-          class=\"process-btn\"\r\n-        >\r\n-          <Shirt :size=\"20\" color=\"white\" class=\"btn-icon\" />\r\n-          开始换衣\r\n-        </van-button>\r\n-      </MobileCard>\r\n+        <!-- 结果展示 -->\r\n+        <ImageComparison\r\n+          v-if=\"resultImage\"\r\n+          :original-image=\"originalImageForComparison || selectedImage\"\r\n+          :result-image=\"resultImage\"\r\n+          @reset=\"resetProcess\"\r\n+        />\r\n+      </main>\r\n     </div>\r\n \r\n-    <!-- 处理状态 -->\r\n-    <MobileCard v-if=\"isLoading\" variant=\"primary\">\r\n-      <ProcessingStatus\r\n-        status=\"loading\"\r\n-        title=\"正在处理换衣...\"\r\n-        description=\"请耐心等待，处理时间可能需要几分钟\"\r\n-        :progress=\"progressPercent\"\r\n-        :prompt-id=\"promptId\"\r\n-        :processing-time=\"processingTime\"\r\n-      />\r\n-    </MobileCard>\r\n \r\n-    <!-- 结果展示 -->\r\n-    <MobileCard v-if=\"resultImage\" title=\"处理结果\" subtitle=\"对比查看换衣效果\" variant=\"success\">\r\n-      <ImageComparison\r\n-        :original-image=\"originalImageForComparison || selectedImage\"\r\n-        :result-image=\"resultImage\"\r\n-        @reset=\"resetProcess\"\r\n-      />\r\n-    </MobileCard>\r\n-\r\n-    <!-- 底部导航 -->\r\n-    <MobileTabbar />\r\n-  </MobileLayout>\r\n+  </div>\r\n </template>\r\n \r\n <script setup>\r\n import { ref, onMounted, onUnmounted } from 'vue'\r\n import { Toast } from 'vant'\r\n-import MobileLayout from '../components/MobileLayout.vue'\r\n-import MobileCard from '../components/MobileCard.vue'\r\n-import MobileTabbar from '../components/MobileTabbar.vue'\r\n import ImageUpload from '../components/ImageUpload.vue'\r\n import ProcessingStatus from '../components/ProcessingStatus.vue'\r\n import ImageComparison from '../components/ImageComparison.vue'\r\n import PointsDisplay from '../components/PointsDisplay.vue'\r\n-import { Shirt } from 'lucide-vue-next'\r\n+import UserInfo from '../components/UserInfo.vue'\r\n+import BackToHomeButton from '../components/BackToHomeButton.vue'\r\n \r\n+import { UndressWomanIcon } from '../components/icons'\r\n+\r\n // 静态导入ComfyUI服务\r\n import { processUndressImage } from '../services/comfyui.js'\r\n \r\n console.log('ClothesSwap组件已加载，ComfyUI服务已导入')\r\n"
                },
                {
                    "date": 1752374871916,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -14,11 +14,8 @@\n         </h1>\r\n         <p class=\"page-description\">上传人物照片，AI将为您智能移除服装</p>\r\n       </header>\r\n \r\n-      <!-- 体验点显示 -->\r\n-      <PointsDisplay ref=\"pointsDisplayRef\" />\r\n-\r\n       <main class=\"page-content\">\r\n         <div v-if=\"!resultImage\" class=\"upload-section\">\r\n           <div class=\"target-image-section\">\r\n             <h3 class=\"section-title\">\r\n"
                },
                {
                    "date": 1752374890991,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -83,9 +83,8 @@\n import { Toast } from 'vant'\r\n import ImageUpload from '../components/ImageUpload.vue'\r\n import ProcessingStatus from '../components/ProcessingStatus.vue'\r\n import ImageComparison from '../components/ImageComparison.vue'\r\n-import PointsDisplay from '../components/PointsDisplay.vue'\r\n import UserInfo from '../components/UserInfo.vue'\r\n import BackToHomeButton from '../components/BackToHomeButton.vue'\r\n \r\n import { UndressWomanIcon } from '../components/icons'\r\n"
                },
                {
                    "date": 1752374919277,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -108,11 +108,10 @@\n const isDragging = ref(false)\r\n const comparisonContainer = ref(null)\r\n const startTime = ref(null)\r\n \r\n-// 体验点组件引用\r\n-const pointsDisplayRef = ref(null)\r\n \r\n+\r\n // 使用VantUI Toast系统\r\n \r\n const handleImageChange = (imageData, file) => {\r\n   selectedImage.value = imageData\r\n"
                },
                {
                    "date": 1752374932326,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -155,13 +155,10 @@\n         const duration = Math.round((Date.now() - startTime.value) / 1000)\r\n         processingTime.value = `${duration}秒`\r\n       }\r\n \r\n-      // 更新体验点显示\r\n-      if (pointsDisplayRef.value) {\r\n-        pointsDisplayRef.value.updatePointsStatus()\r\n-      }\r\n \r\n+\r\n       // 显示成功toast\r\n       const pointsInfo = result.pointsConsumed ? `（消耗${result.pointsConsumed}点）` : ''\r\n       Toast.success(`🎉 处理完成！${pointsInfo}可以拖拽中间线对比效果`)\r\n \r\n"
                },
                {
                    "date": 1752375048925,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,14 +1,15 @@\n <template>\r\n   <div class=\"feature-page\">\r\n-    <!-- 右上角用户信息 -->\r\n-    <div class=\"top-corner\">\r\n-      <UserInfo @login=\"handleUserLogin\" @logout=\"handleUserLogout\" />\r\n-    </div>\r\n+    <!-- 顶部导航 -->\r\n+    <TopNavigation\r\n+      title=\"一键褪衣\"\r\n+      @login=\"handleUserLogin\"\r\n+      @logout=\"handleUserLogout\"\r\n+    />\r\n \r\n     <div class=\"container\">\r\n       <header class=\"page-header\">\r\n-        <BackToHomeButton class=\"back-btn\" />\r\n         <h1 class=\"page-title\">\r\n           <UndressWomanIcon :size=\"32\" color=\"var(--primary-color)\" class=\"page-icon\" />\r\n           一键褪衣\r\n         </h1>\r\n"
                },
                {
                    "date": 1752375061976,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -84,10 +84,9 @@\n import { Toast } from 'vant'\r\n import ImageUpload from '../components/ImageUpload.vue'\r\n import ProcessingStatus from '../components/ProcessingStatus.vue'\r\n import ImageComparison from '../components/ImageComparison.vue'\r\n-import UserInfo from '../components/UserInfo.vue'\r\n-import BackToHomeButton from '../components/BackToHomeButton.vue'\r\n+import TopNavigation from '../components/TopNavigation.vue'\r\n \r\n import { UndressWomanIcon } from '../components/icons'\r\n \r\n // 静态导入ComfyUI服务\r\n"
                },
                {
                    "date": 1752375217495,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -289,8 +289,9 @@\n <style scoped>\r\n .feature-page {\r\n   min-height: 100vh;\r\n   padding: 20px;\r\n+  padding-top: 80px; /* 为固定导航栏留出空间 */\r\n   background: linear-gradient(135deg, var(--bg-primary) 0%, var(--bg-secondary) 100%);\r\n   position: relative;\r\n }\r\n \r\n"
                },
                {
                    "date": 1752375231325,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -294,16 +294,10 @@\n   background: linear-gradient(135deg, var(--bg-primary) 0%, var(--bg-secondary) 100%);\r\n   position: relative;\r\n }\r\n \r\n-/* 右上角用户信息 */\r\n-.top-corner {\r\n-  position: fixed;\r\n-  top: 20px;\r\n-  right: 20px;\r\n-  z-index: 1000;\r\n-}\r\n \r\n+\r\n .container {\r\n   max-width: 1000px;\r\n   margin: 0 auto;\r\n }\r\n"
                },
                {
                    "date": 1752381821698,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,83 +1,89 @@\n <template>\r\n-  <div class=\"feature-page\">\r\n-    <!-- 顶部导航 -->\r\n-    <TopNavigation\r\n-      title=\"一键褪衣\"\r\n-      @login=\"handleUserLogin\"\r\n-      @logout=\"handleUserLogout\"\r\n-    />\r\n+  <MobilePageContainer\r\n+    title=\"一键褪衣\"\r\n+    @login=\"handleUserLogin\"\r\n+    @logout=\"handleUserLogout\"\r\n+  >\r\n+    <!-- 页面头部 -->\r\n+    <template #header>\r\n+      <div class=\"page-header\">\r\n+        <div class=\"page-title\">\r\n+          <UndressWomanIcon :size=\"24\" color=\"var(--van-primary-color)\" />\r\n+          <span>上传人物照片，AI智能移除服装</span>\r\n+        </div>\r\n+      </div>\r\n+    </template>\r\n \r\n-    <div class=\"container\">\r\n-      <header class=\"page-header\">\r\n-        <h1 class=\"page-title\">\r\n-          <UndressWomanIcon :size=\"32\" color=\"var(--primary-color)\" class=\"page-icon\" />\r\n-          一键褪衣\r\n-        </h1>\r\n-        <p class=\"page-description\">上传人物照片，AI将为您智能移除服装</p>\r\n-      </header>\r\n+    <!-- 主要内容 -->\r\n+    <div v-if=\"!resultImage\" class=\"upload-section\">\r\n+      <!-- 图片上传卡片 -->\r\n+      <MobileCard\r\n+        title=\"选择人物照片\"\r\n+        icon=\"photo-o\"\r\n+        :inset=\"true\"\r\n+      >\r\n+        <ImageUpload\r\n+          v-model=\"selectedImage\"\r\n+          title=\"点击上传照片\"\r\n+          description=\"支持 JPG、PNG 格式，建议尺寸 512x512 以上\"\r\n+          icon=\"Image\"\r\n+          :icon-size=\"48\"\r\n+          :min-height=\"200\"\r\n+          :disabled=\"isLoading\"\r\n+          @change=\"handleImageChange\"\r\n+        />\r\n+      </MobileCard>\r\n \r\n-      <main class=\"page-content\">\r\n-        <div v-if=\"!resultImage\" class=\"upload-section\">\r\n-          <div class=\"target-image-section\">\r\n-            <h3 class=\"section-title\">\r\n-              <UndressWomanIcon :size=\"20\" color=\"var(--primary-color)\" class=\"section-icon\" />\r\n-              上传人物照片\r\n-            </h3>\r\n-            <!-- <p class=\"section-description\">上传需要换衣的人物照片</p> -->\r\n+      <!-- 操作按钮 -->\r\n+      <div v-if=\"selectedImage\" class=\"action-section\">\r\n+        <MobileActionButton\r\n+          v-if=\"!isLoading && !resultImage\"\r\n+          @click=\"processImage\"\r\n+          type=\"primary\"\r\n+          block\r\n+          variant=\"floating\"\r\n+          class=\"process-btn\"\r\n+        >\r\n+          <template #icon>\r\n+            <UndressWomanIcon :size=\"18\" color=\"white\" />\r\n+          </template>\r\n+          开始处理\r\n+        </MobileActionButton>\r\n+      </div>\r\n+    </div>\r\n \r\n-            <ImageUpload\r\n-              v-model=\"selectedImage\"\r\n-              title=\"选择人物照片\"\r\n-              description=\"支持 JPG、PNG 格式，建议尺寸 512x512 以上\"\r\n-              icon=\"Image\"\r\n-              :icon-size=\"48\"\r\n-              :min-height=\"300\"\r\n-              :disabled=\"isLoading\"\r\n-              @change=\"handleImageChange\"\r\n-            />\r\n+    <!-- 处理状态 -->\r\n+    <MobileStatusCard\r\n+      v-if=\"isLoading\"\r\n+      status=\"loading\"\r\n+      title=\"正在处理图片...\"\r\n+      description=\"请耐心等待，处理时间可能需要几分钟\"\r\n+      :progress=\"progressPercent\"\r\n+      :show-progress=\"true\"\r\n+    >\r\n+      <template #extra>\r\n+        <div class=\"processing-info\">\r\n+          <div v-if=\"promptId\" class=\"info-item\">\r\n+            <span class=\"info-label\">任务ID:</span>\r\n+            <span class=\"info-value\">{{ promptId }}</span>\r\n           </div>\r\n-\r\n-          <div v-if=\"selectedImage\" class=\"action-section\">\r\n-            <!-- 处理按钮 -->\r\n-            <van-button\r\n-              v-if=\"!isLoading && !resultImage\"\r\n-              @click=\"processImage\"\r\n-              type=\"primary\"\r\n-              size=\"large\"\r\n-              round\r\n-              block\r\n-              class=\"process-btn\"\r\n-            >\r\n-              <Shirt :size=\"20\" color=\"white\" class=\"btn-icon\" />\r\n-              开始换衣\r\n-            </van-button>\r\n+          <div v-if=\"processingTime > 0\" class=\"info-item\">\r\n+            <span class=\"info-label\">处理时间:</span>\r\n+            <span class=\"info-value\">{{ Math.floor(processingTime / 1000) }}秒</span>\r\n           </div>\r\n         </div>\r\n+      </template>\r\n+    </MobileStatusCard>\r\n \r\n-        <!-- 处理状态 -->\r\n-        <ProcessingStatus\r\n-          v-if=\"isLoading\"\r\n-          status=\"loading\"\r\n-          title=\"正在处理换衣...\"\r\n-          description=\"请耐心等待，处理时间可能需要几分钟\"\r\n-          :progress=\"progressPercent\"\r\n-          :prompt-id=\"promptId\"\r\n-          :processing-time=\"processingTime\"\r\n-        />\r\n-\r\n-        <!-- 结果展示 -->\r\n-        <ImageComparison\r\n-          v-if=\"resultImage\"\r\n-          :original-image=\"originalImageForComparison || selectedImage\"\r\n-          :result-image=\"resultImage\"\r\n-          @reset=\"resetProcess\"\r\n-        />\r\n-      </main>\r\n-    </div>\r\n-\r\n-\r\n-  </div>\r\n+    <!-- 结果展示 -->\r\n+    <ImageComparison\r\n+      v-if=\"resultImage\"\r\n+      :original-image=\"originalImageForComparison || selectedImage\"\r\n+      :result-image=\"resultImage\"\r\n+      @reset=\"resetProcess\"\r\n+    />\r\n+  </MobilePageContainer>\r\n </template>\r\n \r\n <script setup>\r\n import { ref, onMounted, onUnmounted } from 'vue'\r\n"
                },
                {
                    "date": 1752381840333,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -87,13 +87,11 @@\n \r\n <script setup>\r\n import { ref, onMounted, onUnmounted } from 'vue'\r\n import { Toast } from 'vant'\r\n+import { MobilePageContainer, MobileCard, MobileActionButton, MobileStatusCard } from '../components/mobile'\r\n import ImageUpload from '../components/ImageUpload.vue'\r\n-import ProcessingStatus from '../components/ProcessingStatus.vue'\r\n import ImageComparison from '../components/ImageComparison.vue'\r\n-import TopNavigation from '../components/TopNavigation.vue'\r\n-\r\n import { UndressWomanIcon } from '../components/icons'\r\n \r\n // 静态导入ComfyUI服务\r\n import { processUndressImage } from '../services/comfyui.js'\r\n"
                },
                {
                    "date": 1752381938698,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -290,18 +290,26 @@\n }\r\n </script>\r\n \r\n <style scoped>\r\n-.feature-page {\r\n-  min-height: 100vh;\r\n-  padding: 20px;\r\n-  padding-top: 80px; /* 为固定导航栏留出空间 */\r\n-  background: linear-gradient(135deg, var(--bg-primary) 0%, var(--bg-secondary) 100%);\r\n-  position: relative;\r\n+/* 页面头部样式 */\r\n+.page-header {\r\n+  text-align: center;\r\n+  padding: 8px 0;\r\n }\r\n \r\n+.page-title {\r\n+  display: flex;\r\n+  align-items: center;\r\n+  justify-content: center;\r\n+  gap: 8px;\r\n+  font-size: 16px;\r\n+  font-weight: 600;\r\n+  color: var(--van-text-color, #323233);\r\n+}\r\n \r\n \r\n+\r\n .container {\r\n   max-width: 1000px;\r\n   margin: 0 auto;\r\n }\r\n"
                },
                {
                    "date": 1752381956691,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -308,57 +308,23 @@\n }\r\n \r\n \r\n \r\n-.container {\r\n-  max-width: 1000px;\r\n-  margin: 0 auto;\r\n-}\r\n-\r\n-.page-header {\r\n-  text-align: center;\r\n-  margin-bottom: 40px;\r\n-}\r\n-\r\n-.page-title {\r\n-  color: var(--text-color);\r\n-  font-size: 2.5rem;\r\n-  font-weight: 700;\r\n-  margin-bottom: 12px;\r\n+/* 上传区域样式 */\r\n+.upload-section {\r\n   display: flex;\r\n-  align-items: center;\r\n-  justify-content: center;\r\n+  flex-direction: column;\r\n   gap: 16px;\r\n }\r\n \r\n-.page-icon {\r\n-  flex-shrink: 0;\r\n+.action-section {\r\n+  padding: 0 12px;\r\n }\r\n \r\n-.page-description {\r\n-  color: var(--text-light);\r\n-  font-size: 1.1rem;\r\n-  margin: 0;\r\n-  line-height: 1.5;\r\n+.process-btn {\r\n+  margin-top: 16px;\r\n }\r\n \r\n-.page-description {\r\n-  font-size: 1.2rem;\r\n-  color: rgba(255, 255, 255, 0.8);\r\n-}\r\n-\r\n-.page-content {\r\n-  display: flex;\r\n-  flex-direction: column;\r\n-  gap: 40px;\r\n-}\r\n-\r\n-.upload-section {\r\n-  display: flex;\r\n-  flex-direction: column;\r\n-  gap: 40px;\r\n-}\r\n-\r\n /* 目标图片区域样式 - 与换脸页面保持一致 */\r\n .target-image-section {\r\n   background: var(--bg-card);\r\n   border: 1px solid var(--border-color);\r\n"
                },
                {
                    "date": 1752381984150,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -323,51 +323,30 @@\n .process-btn {\r\n   margin-top: 16px;\r\n }\r\n \r\n-/* 目标图片区域样式 - 与换脸页面保持一致 */\r\n-.target-image-section {\r\n-  background: var(--bg-card);\r\n-  border: 1px solid var(--border-color);\r\n-  border-radius: 20px;\r\n-  padding: 32px;\r\n-  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);\r\n+/* 处理信息样式 */\r\n+.processing-info {\r\n+  margin-top: 12px;\r\n }\r\n \r\n-.section-title {\r\n+.info-item {\r\n   display: flex;\r\n+  justify-content: space-between;\r\n   align-items: center;\r\n-  gap: 12px;\r\n-  margin: 0 0 12px 0;\r\n-  font-size: 1.5rem;\r\n-  font-weight: 600;\r\n-  color: var(--text-color);\r\n+  padding: 4px 0;\r\n+  font-size: 14px;\r\n }\r\n \r\n-.section-icon {\r\n-  flex-shrink: 0;\r\n+.info-label {\r\n+  color: var(--van-text-color-2, #646566);\r\n }\r\n \r\n-.section-description {\r\n-  margin: 0 0 24px 0;\r\n-  color: var(--text-light);\r\n-  font-size: 1rem;\r\n-  line-height: 1.5;\r\n+.info-value {\r\n+  color: var(--van-text-color, #323233);\r\n+  font-weight: 500;\r\n }\r\n \r\n-.upload-card {\r\n-  background: var(--bg-card);\r\n-  border: 1px solid var(--border-color);\r\n-  border-radius: 20px;\r\n-  padding: 32px;\r\n-  box-shadow: var(--shadow);\r\n-  color: var(--text-color);\r\n-}\r\n-\r\n-.hidden {\r\n-  display: none;\r\n-}\r\n-\r\n .upload-area {\r\n   display: block;\r\n   cursor: pointer;\r\n   border: 3px dashed var(--border-color);\r\n"
                },
                {
                    "date": 1752382018590,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -345,110 +345,10 @@\n   color: var(--van-text-color, #323233);\r\n   font-weight: 500;\r\n }\r\n \r\n-.upload-area {\r\n-  display: block;\r\n-  cursor: pointer;\r\n-  border: 3px dashed var(--border-color);\r\n-  border-radius: 16px;\r\n-  padding: 40px;\r\n-  text-align: center;\r\n-  transition: var(--transition);\r\n-  min-width: 400px;\r\n-  min-height: 300px;\r\n-  display: flex;\r\n-  align-items: center;\r\n-  justify-content: center;\r\n-}\r\n \r\n-.upload-area:hover {\r\n-  border-color: var(--primary-color);\r\n-  background: rgba(102, 126, 234, 0.05);\r\n-}\r\n \r\n-.upload-placeholder h3 {\r\n-  margin: 16px 0 8px;\r\n-  color: var(--text-color);\r\n-}\r\n-\r\n-.upload-placeholder p {\r\n-  color: var(--text-light);\r\n-  font-size: 0.9rem;\r\n-}\r\n-\r\n-.upload-icon {\r\n-  font-size: 4rem;\r\n-  margin-bottom: 16px;\r\n-}\r\n-\r\n-.image-preview {\r\n-  position: relative;\r\n-  border-radius: 12px;\r\n-  overflow: hidden;\r\n-}\r\n-\r\n-/* 移除预览图片的高度限制，让ImageUpload组件自己控制 */\r\n-\r\n-.image-overlay {\r\n-  position: absolute;\r\n-  top: 0;\r\n-  left: 0;\r\n-  right: 0;\r\n-  bottom: 0;\r\n-  background: rgba(0, 0, 0, 0.7);\r\n-  color: white;\r\n-  display: flex;\r\n-  align-items: center;\r\n-  justify-content: center;\r\n-  opacity: 0;\r\n-  transition: var(--transition);\r\n-}\r\n-\r\n-.image-preview:hover .image-overlay {\r\n-  opacity: 1;\r\n-}\r\n-\r\n-.process-btn {\r\n-  font-size: 1.1rem;\r\n-  padding: 16px 32px;\r\n-  min-width: 200px;\r\n-}\r\n-\r\n-.status-message {\r\n-  margin-top: 16px;\r\n-  padding: 12px 16px;\r\n-  border-radius: 8px;\r\n-  background: rgba(76, 175, 80, 0.1);\r\n-  border: 1px solid rgba(76, 175, 80, 0.3);\r\n-  color: #2e7d32;\r\n-  font-size: 0.9rem;\r\n-  text-align: center;\r\n-}\r\n-\r\n-.status-message.error {\r\n-  background: rgba(244, 67, 54, 0.1);\r\n-  border-color: rgba(244, 67, 54, 0.3);\r\n-  color: #c62828;\r\n-}\r\n-\r\n-/* prompt-id样式已移至 shared.css */\r\n-\r\n-.result-section {\r\n-  display: flex;\r\n-  justify-content: center;\r\n-}\r\n-\r\n-.result-card {\r\n-  background: var(--bg-card);\r\n-  border: 1px solid var(--border-color);\r\n-  border-radius: 20px;\r\n-  padding: 32px;\r\n-  text-align: center;\r\n-  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);\r\n-  max-width: 600px;\r\n-}\r\n-\r\n .result-title {\r\n   font-size: 1.5rem;\r\n   margin-bottom: 24px;\r\n   color: var(--text-color);\r\n"
                },
                {
                    "date": 1752382068922,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -347,291 +347,6 @@\n }\r\n \r\n \r\n \r\n-.result-title {\r\n-  font-size: 1.5rem;\r\n-  margin-bottom: 24px;\r\n-  color: var(--text-color);\r\n-}\r\n \r\n-.result-image-container {\r\n-  margin-bottom: 24px;\r\n-}\r\n-\r\n-.result-image {\r\n-  max-width: 100%;\r\n-  max-height: 500px;\r\n-  border-radius: 12px;\r\n-  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);\r\n-}\r\n-\r\n-.result-actions {\r\n-  display: flex;\r\n-  gap: 16px;\r\n-  justify-content: center;\r\n-}\r\n-\r\n-.btn-secondary {\r\n-  background: #6c757d;\r\n-  color: white;\r\n-}\r\n-\r\n-.btn-secondary:hover {\r\n-  background: #5a6268;\r\n-  transform: translateY(-2px);\r\n-}\r\n-\r\n-/* 拖拽对比功能样式 */\r\n-.image-comparison-container {\r\n-  margin: 20px 0;\r\n-  border-radius: 12px;\r\n-  overflow: hidden;\r\n-  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);\r\n-}\r\n-\r\n-.comparison-wrapper {\r\n-  position: relative;\r\n-  width: 100%;\r\n-  height: 600px;\r\n-  overflow: hidden;\r\n-  cursor: col-resize;\r\n-  user-select: none;\r\n-  background: #000000; /* 改为黑色背景，避免白色间距 */\r\n-}\r\n-\r\n-.image-layer {\r\n-  position: absolute;\r\n-  top: 0;\r\n-  left: 0;\r\n-  width: 100%;\r\n-  height: 100%;\r\n-  display: flex;\r\n-  align-items: center;\r\n-  justify-content: center;\r\n-}\r\n-\r\n-.comparison-image {\r\n-  width: 100%;\r\n-  height: 100%;\r\n-  object-fit: cover; /* 改为cover，充满整个区域 */\r\n-  object-position: center;\r\n-  display: block;\r\n-}\r\n-\r\n-.result-layer {\r\n-  clip-path: inset(0 50% 0 0);\r\n-  transition: clip-path 0.1s ease-out;\r\n-}\r\n-\r\n-.image-label {\r\n-  position: absolute;\r\n-  top: 16px;\r\n-  padding: 8px 16px;\r\n-  background: rgba(0, 0, 0, 0.7);\r\n-  color: white;\r\n-  border-radius: 20px;\r\n-  font-size: 0.9rem;\r\n-  font-weight: 500;\r\n-  backdrop-filter: blur(10px);\r\n-  z-index: 10;\r\n-}\r\n-\r\n-.original-label {\r\n-  left: 16px;\r\n-}\r\n-\r\n-.result-label {\r\n-  right: 16px;\r\n-}\r\n-\r\n-.comparison-slider {\r\n-  position: absolute;\r\n-  top: 0;\r\n-  bottom: 0;\r\n-  width: 4px;\r\n-  background: white;\r\n-  cursor: col-resize;\r\n-  z-index: 20;\r\n-  transform: translateX(-2px);\r\n-  transition: left 0.1s ease-out;\r\n-}\r\n-\r\n-.slider-line {\r\n-  width: 100%;\r\n-  height: 100%;\r\n-  background: linear-gradient(to bottom,\r\n-    rgba(255, 255, 255, 0.8),\r\n-    rgba(255, 255, 255, 1),\r\n-    rgba(255, 255, 255, 0.8)\r\n-  );\r\n-  box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);\r\n-}\r\n-\r\n-.slider-handle {\r\n-  position: absolute;\r\n-  top: 50%;\r\n-  left: 50%;\r\n-  transform: translate(-50%, -50%);\r\n-  width: 40px;\r\n-  height: 40px;\r\n-  background: white;\r\n-  border-radius: 50%;\r\n-  display: flex;\r\n-  align-items: center;\r\n-  justify-content: center;\r\n-  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);\r\n-  cursor: col-resize;\r\n-}\r\n-\r\n-.slider-circle {\r\n-  width: 12px;\r\n-  height: 12px;\r\n-  background: #007bff;\r\n-  border-radius: 50%;\r\n-}\r\n-\r\n-.slider-arrow {\r\n-  position: absolute;\r\n-  color: #007bff;\r\n-  font-size: 12px;\r\n-  font-weight: bold;\r\n-}\r\n-\r\n-.slider-arrow.left {\r\n-  left: 6px;\r\n-}\r\n-\r\n-.slider-arrow.right {\r\n-  right: 6px;\r\n-}\r\n-\r\n-.slider-handle:hover {\r\n-  transform: translate(-50%, -50%) scale(1.1);\r\n-  box-shadow: 0 6px 16px rgba(0, 0, 0, 0.4);\r\n-}\r\n-\r\n-/* 处理信息样式 */\r\n-.process-info {\r\n-  margin-top: 20px;\r\n-  padding: 16px;\r\n-  background: rgba(255, 255, 255, 0.1);\r\n-  border-radius: 8px;\r\n-  display: flex;\r\n-  gap: 24px;\r\n-  flex-wrap: wrap;\r\n-}\r\n-\r\n-.info-item {\r\n-  display: flex;\r\n-  align-items: center;\r\n-  gap: 8px;\r\n-}\r\n-\r\n-.info-label {\r\n-  color: rgba(255, 255, 255, 0.8);\r\n-  font-size: 0.9rem;\r\n-}\r\n-\r\n-.info-value {\r\n-  color: white;\r\n-  font-weight: 500;\r\n-  font-family: monospace;\r\n-  background: rgba(255, 255, 255, 0.1);\r\n-  padding: 4px 8px;\r\n-  border-radius: 4px;\r\n-}\r\n-\r\n-/* 按钮样式已移至AppButton组件 */\r\n-\r\n-@media (max-width: 768px) {\r\n-  .page-title {\r\n-    font-size: 2rem;\r\n-  }\r\n-\r\n-  .upload-area {\r\n-    min-width: 300px;\r\n-    min-height: 250px;\r\n-    padding: 24px;\r\n-  }\r\n-\r\n-  .result-actions {\r\n-    flex-direction: column;\r\n-  }\r\n-\r\n-  .comparison-wrapper {\r\n-    height: 500px;\r\n-  }\r\n-\r\n-  .slider-handle {\r\n-    width: 36px;\r\n-    height: 36px;\r\n-  }\r\n-\r\n-  .slider-arrow {\r\n-    font-size: 10px;\r\n-  }\r\n-\r\n-  .process-info {\r\n-    flex-direction: column;\r\n-    gap: 12px;\r\n-  }\r\n-\r\n-  .toast {\r\n-    right: 20px;\r\n-    top: 20px;\r\n-  }\r\n-\r\n-  .toast-content {\r\n-    padding: 12px 16px;\r\n-  }\r\n-}\r\n-\r\n-/* VantUI组件样式覆盖 */\r\n-.processing-status {\r\n-  margin-top: 24px;\r\n-  padding: 20px;\r\n-  background: var(--bg-card);\r\n-  border: 1px solid var(--border-color);\r\n-  border-radius: 12px;\r\n-}\r\n-\r\n-.status-info {\r\n-  margin-top: 16px;\r\n-  text-align: center;\r\n-}\r\n-\r\n-.status-text {\r\n-  color: var(--text-color);\r\n-  font-size: 16px;\r\n-  margin-bottom: 12px;\r\n-}\r\n-\r\n-.process-details {\r\n-  display: flex;\r\n-  justify-content: center;\r\n-  gap: 20px;\r\n-  font-size: 14px;\r\n-  color: var(--text-light);\r\n-}\r\n-\r\n-.action-section {\r\n-  text-align: center;\r\n-}\r\n-\r\n-.process-btn {\r\n-  margin-top: 24px;\r\n-}\r\n-\r\n-.process-btn .van-button__content {\r\n-  display: flex;\r\n-  align-items: center;\r\n-  justify-content: center;\r\n-  gap: 8px;\r\n-}\r\n-\r\n-.btn-icon {\r\n-  flex-shrink: 0;\r\n-}\r\n-\r\n-/* 动画已移至 shared.css */\r\n </style>\r\n"
                },
                {
                    "date": 1752383759465,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,89 +1,64 @@\n <template>\r\n-  <MobilePageContainer\r\n+  <AIProcessingTemplate\r\n     title=\"一键褪衣\"\r\n+    description=\"上传人物照片，AI智能移除服装\"\r\n+    :title-icon=\"UndressWomanIcon\"\r\n+    title-icon-color=\"var(--van-primary-color)\"\r\n+    :is-processing=\"isLoading\"\r\n+    :can-process=\"!!selectedImage\"\r\n+    :show-upload-tips=\"!selectedImage\"\r\n+    process-button-text=\"开始处理\"\r\n+    :process-button-icon=\"UndressWomanIcon\"\r\n+    :progress=\"progressPercent\"\r\n+    processing-title=\"正在处理图片...\"\r\n+    processing-description=\"请耐心等待，处理时间可能需要几分钟\"\r\n+    :processing-info=\"{ promptId, processingTime }\"\r\n+    :result-data=\"resultImage\"\r\n     @login=\"handleUserLogin\"\r\n     @logout=\"handleUserLogout\"\r\n+    @process=\"processImage\"\r\n   >\r\n-    <!-- 页面头部 -->\r\n-    <template #header>\r\n-      <div class=\"page-header\">\r\n-        <div class=\"page-title\">\r\n-          <UndressWomanIcon :size=\"24\" color=\"var(--van-primary-color)\" />\r\n-          <span>上传人物照片，AI智能移除服装</span>\r\n-        </div>\r\n-      </div>\r\n+    <!-- 输入区域 -->\r\n+    <template #inputs>\r\n+      <VantImageUpload\r\n+        v-model=\"selectedImage\"\r\n+        upload-text=\"选择人物照片\"\r\n+        description=\"支持 JPG、PNG 格式，建议尺寸 512x512 以上\"\r\n+        upload-icon=\"photograph\"\r\n+        :disabled=\"isLoading\"\r\n+        @change=\"handleImageChange\"\r\n+      />\r\n     </template>\r\n \r\n-    <!-- 主要内容 -->\r\n-    <div v-if=\"!resultImage\" class=\"upload-section\">\r\n-      <!-- 图片上传卡片 -->\r\n-      <MobileCard\r\n-        title=\"选择人物照片\"\r\n-        icon=\"photo-o\"\r\n-        :inset=\"true\"\r\n-      >\r\n-        <ImageUpload\r\n-          v-model=\"selectedImage\"\r\n-          title=\"点击上传照片\"\r\n-          description=\"支持 JPG、PNG 格式，建议尺寸 512x512 以上\"\r\n-          icon=\"Image\"\r\n-          :icon-size=\"48\"\r\n-          :min-height=\"200\"\r\n-          :disabled=\"isLoading\"\r\n-          @change=\"handleImageChange\"\r\n+    <!-- 上传提示 -->\r\n+    <template #upload-tips>\r\n+      <div class=\"tip-item\">\r\n+        <van-icon\r\n+          name=\"photo-o\"\r\n+          color=\"var(--van-text-color-3)\"\r\n+          size=\"16\"\r\n         />\r\n-      </MobileCard>\r\n-\r\n-      <!-- 操作按钮 -->\r\n-      <div v-if=\"selectedImage\" class=\"action-section\">\r\n-        <MobileActionButton\r\n-          v-if=\"!isLoading && !resultImage\"\r\n-          @click=\"processImage\"\r\n-          type=\"primary\"\r\n-          block\r\n-          variant=\"floating\"\r\n-          class=\"process-btn\"\r\n-        >\r\n-          <template #icon>\r\n-            <UndressWomanIcon :size=\"18\" color=\"white\" />\r\n-          </template>\r\n-          开始处理\r\n-        </MobileActionButton>\r\n+        <span>请上传人物照片开始处理</span>\r\n       </div>\r\n-    </div>\r\n+    </template>\r\n \r\n-    <!-- 处理状态 -->\r\n-    <MobileStatusCard\r\n-      v-if=\"isLoading\"\r\n-      status=\"loading\"\r\n-      title=\"正在处理图片...\"\r\n-      description=\"请耐心等待，处理时间可能需要几分钟\"\r\n-      :progress=\"progressPercent\"\r\n-      :show-progress=\"true\"\r\n-    >\r\n-      <template #extra>\r\n-        <div class=\"processing-info\">\r\n-          <div v-if=\"promptId\" class=\"info-item\">\r\n-            <span class=\"info-label\">任务ID:</span>\r\n-            <span class=\"info-value\">{{ promptId }}</span>\r\n-          </div>\r\n-          <div v-if=\"processingTime > 0\" class=\"info-item\">\r\n-            <span class=\"info-label\">处理时间:</span>\r\n-            <span class=\"info-value\">{{ Math.floor(processingTime / 1000) }}秒</span>\r\n-          </div>\r\n-        </div>\r\n-      </template>\r\n-    </MobileStatusCard>\r\n-\r\n     <!-- 结果展示 -->\r\n-    <ImageComparison\r\n-      v-if=\"resultImage\"\r\n-      :original-image=\"originalImageForComparison || selectedImage\"\r\n-      :result-image=\"resultImage\"\r\n-      @reset=\"resetProcess\"\r\n-    />\r\n-  </MobilePageContainer>\r\n+    <template #result=\"{ result }\">\r\n+      <VantImageComparison\r\n+        :original-image=\"originalImageForComparison || selectedImage\"\r\n+        :result-image=\"result\"\r\n+        :process-info=\"{\r\n+          promptId,\r\n+          processingTime,\r\n+          timestamp: Date.now(),\r\n+          model: 'UndressAI v2.0'\r\n+        }\"\r\n+        @reset=\"resetProcess\"\r\n+        @download=\"handleDownload\"\r\n+      />\r\n+    </template>\r\n+  </AIProcessingTemplate>\r\n </template>\r\n \r\n <script setup>\r\n import { ref, onMounted, onUnmounted } from 'vue'\r\n"
                },
                {
                    "date": 1752383780725,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -62,11 +62,13 @@\n \r\n <script setup>\r\n import { ref, onMounted, onUnmounted } from 'vue'\r\n import { Toast } from 'vant'\r\n-import { MobilePageContainer, MobileCard, MobileActionButton, MobileStatusCard } from '../components/mobile'\r\n-import ImageUpload from '../components/ImageUpload.vue'\r\n-import ImageComparison from '../components/ImageComparison.vue'\r\n+import {\r\n+  AIProcessingTemplate,\r\n+  VantImageUpload,\r\n+  VantImageComparison\r\n+} from '../components/mobile'\r\n import { UndressWomanIcon } from '../components/icons'\r\n \r\n // 静态导入ComfyUI服务\r\n import { processUndressImage } from '../services/comfyui.js'\r\n"
                },
                {
                    "date": 1752383805511,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -217,8 +217,14 @@\n   link.click()\r\n   document.body.removeChild(link)\r\n }\r\n \r\n+// 处理下载事件\r\n+const handleDownload = (imageUrl) => {\r\n+  console.log('下载图片:', imageUrl)\r\n+  Toast.success('图片下载成功')\r\n+}\r\n+\r\n const resetProcess = () => {\r\n   selectedImage.value = null\r\n   resultImage.value = null\r\n   processingStatus.value = ''\r\n"
                },
                {
                    "date": 1752383831798,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -273,63 +273,17 @@\n }\r\n </script>\r\n \r\n <style scoped>\r\n-/* 页面头部样式 */\r\n-.page-header {\r\n-  text-align: center;\r\n-  padding: 8px 0;\r\n-}\r\n-\r\n-.page-title {\r\n+/* 上传提示样式 */\r\n+.tip-item {\r\n   display: flex;\r\n   align-items: center;\r\n-  justify-content: center;\r\n   gap: 8px;\r\n-  font-size: 16px;\r\n-  font-weight: 600;\r\n-  color: var(--van-text-color, #323233);\r\n-}\r\n-\r\n-\r\n-\r\n-/* 上传区域样式 */\r\n-.upload-section {\r\n-  display: flex;\r\n-  flex-direction: column;\r\n-  gap: 16px;\r\n-}\r\n-\r\n-.action-section {\r\n-  padding: 0 12px;\r\n-}\r\n-\r\n-.process-btn {\r\n-  margin-top: 16px;\r\n-}\r\n-\r\n-/* 处理信息样式 */\r\n-.processing-info {\r\n-  margin-top: 12px;\r\n-}\r\n-\r\n-.info-item {\r\n-  display: flex;\r\n-  justify-content: space-between;\r\n-  align-items: center;\r\n-  padding: 4px 0;\r\n   font-size: 14px;\r\n-}\r\n-\r\n-.info-label {\r\n   color: var(--van-text-color-2, #646566);\r\n }\r\n \r\n-.info-value {\r\n-  color: var(--van-text-color, #323233);\r\n-  font-weight: 500;\r\n+.text-success {\r\n+  color: var(--van-success-color, #07c160);\r\n }\r\n-\r\n-\r\n-\r\n-\r\n </style>\r\n"
                },
                {
                    "date": 1752393926735,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,64 +1,23 @@\n <template>\r\n-  <AIProcessingTemplate\r\n-    title=\"一键褪衣\"\r\n-    description=\"上传人物照片，AI智能移除服装\"\r\n+  <UnifiedImageProcessingTemplate\r\n+    function-id=\"clothes-swap\"\r\n     :title-icon=\"UndressWomanIcon\"\r\n     title-icon-color=\"var(--van-primary-color)\"\r\n+    :process-button-icon=\"UndressWomanIcon\"\r\n     :is-processing=\"isLoading\"\r\n-    :can-process=\"!!selectedImage\"\r\n-    :show-upload-tips=\"!selectedImage\"\r\n-    process-button-text=\"开始处理\"\r\n-    :process-button-icon=\"UndressWomanIcon\"\r\n     :progress=\"progressPercent\"\r\n-    processing-title=\"正在处理图片...\"\r\n-    processing-description=\"请耐心等待，处理时间可能需要几分钟\"\r\n     :processing-info=\"{ promptId, processingTime }\"\r\n     :result-data=\"resultImage\"\r\n+    :original-image-for-comparison=\"originalImageForComparison\"\r\n     @login=\"handleUserLogin\"\r\n     @logout=\"handleUserLogout\"\r\n     @process=\"processImage\"\r\n-  >\r\n-    <!-- 输入区域 -->\r\n-    <template #inputs>\r\n-      <VantImageUpload\r\n-        v-model=\"selectedImage\"\r\n-        upload-text=\"选择人物照片\"\r\n-        description=\"支持 JPG、PNG 格式，建议尺寸 512x512 以上\"\r\n-        upload-icon=\"photograph\"\r\n-        :disabled=\"isLoading\"\r\n-        @change=\"handleImageChange\"\r\n-      />\r\n-    </template>\r\n-\r\n-    <!-- 上传提示 -->\r\n-    <template #upload-tips>\r\n-      <div class=\"tip-item\">\r\n-        <van-icon\r\n-          name=\"photo-o\"\r\n-          color=\"var(--van-text-color-3)\"\r\n-          size=\"16\"\r\n-        />\r\n-        <span>请上传人物照片开始处理</span>\r\n-      </div>\r\n-    </template>\r\n-\r\n-    <!-- 结果展示 -->\r\n-    <template #result=\"{ result }\">\r\n-      <VantImageComparison\r\n-        :original-image=\"originalImageForComparison || selectedImage\"\r\n-        :result-image=\"result\"\r\n-        :process-info=\"{\r\n-          promptId,\r\n-          processingTime,\r\n-          timestamp: Date.now(),\r\n-          model: 'UndressAI v2.0'\r\n-        }\"\r\n-        @reset=\"resetProcess\"\r\n-        @download=\"handleDownload\"\r\n-      />\r\n-    </template>\r\n-  </AIProcessingTemplate>\r\n+    @reset=\"resetProcess\"\r\n+    @download=\"handleDownload\"\r\n+    @upload-change=\"handleUploadChange\"\r\n+    ref=\"templateRef\"\r\n+  />\r\n </template>\r\n \r\n <script setup>\r\n import { ref, onMounted, onUnmounted } from 'vue'\r\n"
                },
                {
                    "date": 1752393950131,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -21,33 +21,24 @@\n \r\n <script setup>\r\n import { ref, onMounted, onUnmounted } from 'vue'\r\n import { Toast } from 'vant'\r\n-import {\r\n-  AIProcessingTemplate,\r\n-  VantImageUpload,\r\n-  VantImageComparison\r\n-} from '../components/mobile'\r\n+import { UnifiedImageProcessingTemplate } from '../components/mobile'\r\n import { UndressWomanIcon } from '../components/icons'\r\n-\r\n-// 静态导入ComfyUI服务\r\n import { processUndressImage } from '../services/comfyui.js'\r\n \r\n console.log('ClothesSwap组件已加载，ComfyUI服务已导入')\r\n \r\n+// 响应式数据\r\n+const templateRef = ref(null)\r\n const selectedImage = ref(null)\r\n-const originalImageForComparison = ref(null) // 新增：用于对比的原图（节点49）\r\n+const originalImageForComparison = ref(null)\r\n const resultImage = ref(null)\r\n const isLoading = ref(false)\r\n const processingStatus = ref('')\r\n const promptId = ref('')\r\n const processingTime = ref('')\r\n-const progressPercent = ref(0) // 新增：处理进度百分比\r\n-\r\n-// 拖拽对比功能\r\n-const sliderPosition = ref(50) // 滑块位置百分比\r\n-const isDragging = ref(false)\r\n-const comparisonContainer = ref(null)\r\n+const progressPercent = ref(0)\r\n const startTime = ref(null)\r\n \r\n \r\n \r\n"
                },
                {
                    "date": 1752393976934,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -41,14 +41,16 @@\n const startTime = ref(null)\r\n \r\n \r\n \r\n-// 使用VantUI Toast系统\r\n+// 处理上传变化\r\n+const handleUploadChange = (panelId, data) => {\r\n+  console.log('上传变化:', panelId, data)\r\n \r\n-const handleImageChange = (imageData, file) => {\r\n-  selectedImage.value = imageData\r\n-  resultImage.value = null // 清除之前的结果\r\n-  // 不再自动处理，等待用户点击按钮\r\n+  if (panelId === 'main-image') {\r\n+    selectedImage.value = data\r\n+    resultImage.value = null // 清除之前的结果\r\n+  }\r\n }\r\n \r\n const processImage = async () => {\r\n   if (!selectedImage.value) return\r\n"
                },
                {
                    "date": 1752394008107,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -51,54 +51,52 @@\n     resultImage.value = null // 清除之前的结果\r\n   }\r\n }\r\n \r\n+// 处理图片\r\n const processImage = async () => {\r\n-  if (!selectedImage.value) return\r\n+  if (!selectedImage.value) {\r\n+    Toast.fail('请先上传人物照片')\r\n+    return\r\n+  }\r\n \r\n   isLoading.value = true\r\n   processingStatus.value = '正在加载服务...'\r\n   progressPercent.value = 10\r\n   startTime.value = Date.now()\r\n \r\n   try {\r\n-    console.log('🚀 开始一键换衣处理')\r\n+    console.log('🚀 开始一键褪衣处理')\r\n \r\n-    // ComfyUI服务已静态导入，无需动态加载\r\n-\r\n-    processingStatus.value = '开始处理图片...'\r\n+    processingStatus.value = '正在上传图片...'\r\n     progressPercent.value = 30\r\n \r\n-    // 调用真实的ComfyUI API\r\n-    processingStatus.value = '正在处理图片...'\r\n-    progressPercent.value = 50\r\n+    // 调用褪衣处理服务\r\n+    const result = await processUndressImage({\r\n+      image: selectedImage.value,\r\n+      onProgress: (status, percent) => {\r\n+        processingStatus.value = status\r\n+        progressPercent.value = Math.max(progressPercent.value, percent)\r\n+      }\r\n+    })\r\n \r\n-    const result = await processUndressImage(selectedImage.value)\r\n-    progressPercent.value = 90\r\n-\r\n-    if (result && result.success) {\r\n-      resultImage.value = result.resultImage\r\n-      // 设置用于对比的原图（优先使用节点49的图片，否则使用用户上传的图片）\r\n-      originalImageForComparison.value = result.originalImage || selectedImage.value\r\n+    if (result.success && result.imageUrl) {\r\n+      resultImage.value = result.imageUrl\r\n+      // 保存原图用于对比\r\n+      originalImageForComparison.value = result.originalImageUrl || selectedImage.value\r\n       promptId.value = result.promptId || ''\r\n-      processingStatus.value = '处理完成！'\r\n-      progressPercent.value = 100\r\n \r\n       // 计算处理时间\r\n-      if (startTime.value) {\r\n-        const duration = Math.round((Date.now() - startTime.value) / 1000)\r\n-        processingTime.value = `${duration}秒`\r\n-      }\r\n+      const endTime = Date.now()\r\n+      const duration = Math.round((endTime - startTime.value) / 1000)\r\n+      processingTime.value = `${duration}秒`\r\n \r\n-\r\n-\r\n       // 显示成功toast\r\n       const pointsInfo = result.pointsConsumed ? `（消耗${result.pointsConsumed}点）` : ''\r\n-      Toast.success(`🎉 处理完成！${pointsInfo}可以拖拽中间线对比效果`)\r\n-\r\n-      console.log('🎉 换衣处理成功')\r\n+      Toast.success(`🎉 处理完成！${pointsInfo}可以拖拽中间线对比原图和处理结果`)\r\n+      console.log('✅ 褪衣处理完成')\r\n     } else {\r\n-      throw new Error(result?.error || '处理失败')\r\n+      throw new Error(result.error || '褪衣处理失败')\r\n     }\r\n \r\n   } catch (error) {\r\n     console.error('❌ 处理失败:', error)\r\n"
                },
                {
                    "date": 1752394039363,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -98,33 +98,51 @@\n       throw new Error(result.error || '褪衣处理失败')\r\n     }\r\n \r\n   } catch (error) {\r\n-    console.error('❌ 处理失败:', error)\r\n-    processingStatus.value = `❌ 处理失败: ${error.message}`\r\n-    progressPercent.value = 0\r\n-\r\n-    // 显示用户友好的错误信息\r\n-    let errorMessage = '处理失败，请重试'\r\n-    if (error.message.includes('上传')) {\r\n-      errorMessage = '图片上传失败，请检查网络连接'\r\n-    } else if (error.message.includes('超时')) {\r\n-      errorMessage = '处理超时，请稍后重试'\r\n-    } else if (error.message.includes('工作流')) {\r\n-      errorMessage = '服务器处理失败，请稍后重试'\r\n-    } else if (error.message.includes('网络')) {\r\n-      errorMessage = '网络连接失败，请检查网络'\r\n-    } else if (error.message.includes('加载')) {\r\n-      errorMessage = '服务加载失败，请刷新页面重试'\r\n-    }\r\n-\r\n-    Toast.fail(errorMessage)\r\n+    console.error('❌ 褪衣处理失败:', error)\r\n+    Toast.fail(`处理失败: ${error.message}`)\r\n   } finally {\r\n     isLoading.value = false\r\n+    processingStatus.value = ''\r\n     progressPercent.value = 0\r\n   }\r\n }\r\n \r\n+// 重置处理\r\n+const resetProcess = () => {\r\n+  selectedImage.value = null\r\n+  originalImageForComparison.value = null\r\n+  resultImage.value = null\r\n+  processingStatus.value = ''\r\n+  promptId.value = ''\r\n+  processingTime.value = ''\r\n+\r\n+  // 重置模板内部状态\r\n+  if (templateRef.value) {\r\n+    const { uploadData } = templateRef.value\r\n+    if (uploadData['main-image']) {\r\n+      uploadData['main-image'] = null\r\n+    }\r\n+  }\r\n+\r\n+  Toast.success('已重置，可以重新选择图片')\r\n+}\r\n+\r\n+// 下载结果\r\n+const handleDownload = (imageUrl) => {\r\n+  if (!imageUrl) return\r\n+\r\n+  const link = document.createElement('a')\r\n+  link.href = imageUrl\r\n+  link.download = `clothes_swap_result_${Date.now()}.png`\r\n+  document.body.appendChild(link)\r\n+  link.click()\r\n+  document.body.removeChild(link)\r\n+\r\n+  Toast.success('图片下载已开始')\r\n+}\r\n+\r\n // Toast功能已移至useToast组合式函数\r\n \r\n // 拖拽对比功能\r\n const startDragging = (event) => {\r\n"
                },
                {
                    "date": 1752394067293,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -141,64 +141,20 @@\n \r\n   Toast.success('图片下载已开始')\r\n }\r\n \r\n-// Toast功能已移至useToast组合式函数\r\n-\r\n-// 拖拽对比功能\r\n-const startDragging = (event) => {\r\n-  event.preventDefault()\r\n-  isDragging.value = true\r\n-\r\n-  const moveHandler = (e) => {\r\n-    if (!isDragging.value || !comparisonContainer.value) return\r\n-\r\n-    const rect = comparisonContainer.value.getBoundingClientRect()\r\n-    const clientX = e.clientX || (e.touches && e.touches[0].clientX)\r\n-    const x = clientX - rect.left\r\n-    const percentage = Math.max(0, Math.min(100, (x / rect.width) * 100))\r\n-\r\n-    sliderPosition.value = percentage\r\n-  }\r\n-\r\n-  const stopDragging = () => {\r\n-    isDragging.value = false\r\n-    document.removeEventListener('mousemove', moveHandler)\r\n-    document.removeEventListener('mouseup', stopDragging)\r\n-    document.removeEventListener('touchmove', moveHandler)\r\n-    document.removeEventListener('touchend', stopDragging)\r\n-  }\r\n-\r\n-  document.addEventListener('mousemove', moveHandler)\r\n-  document.addEventListener('mouseup', stopDragging)\r\n-  document.addEventListener('touchmove', moveHandler)\r\n-  document.addEventListener('touchend', stopDragging)\r\n+// 用户登录成功回调\r\n+const handleUserLogin = (data) => {\r\n+  console.log('用户登录成功:', data)\r\n+  // 可以在这里触发一些需要登录状态的操作\r\n+  // 比如刷新积分信息等\r\n }\r\n \r\n-// 下载结果图片\r\n-const downloadResult = () => {\r\n-  if (!resultImage.value) return\r\n-\r\n-  const link = document.createElement('a')\r\n-  link.href = resultImage.value\r\n-  link.download = `clothes-swap-result-${Date.now()}.jpg`\r\n-  document.body.appendChild(link)\r\n-  link.click()\r\n-  document.body.removeChild(link)\r\n+// 用户登出回调\r\n+const handleUserLogout = () => {\r\n+  console.log('用户已登出')\r\n+  // 可以在这里清理一些用户相关的状态\r\n }\r\n-\r\n-// 处理下载事件\r\n-const handleDownload = (imageUrl) => {\r\n-  console.log('下载图片:', imageUrl)\r\n-  Toast.success('图片下载成功')\r\n-}\r\n-\r\n-const resetProcess = () => {\r\n-  selectedImage.value = null\r\n-  resultImage.value = null\r\n-  processingStatus.value = ''\r\n-  promptId.value = ''\r\n-  processingTime.value = ''\r\n   sliderPosition.value = 50\r\n   startTime.value = null\r\n \r\n   // 清除文件输入\r\n"
                },
                {
                    "date": 1752394092540,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -148,54 +148,19 @@\n   // 可以在这里触发一些需要登录状态的操作\r\n   // 比如刷新积分信息等\r\n }\r\n \r\n-// 用户登出回调\r\n-const handleUserLogout = () => {\r\n-  console.log('用户已登出')\r\n-  // 可以在这里清理一些用户相关的状态\r\n-}\r\n-  sliderPosition.value = 50\r\n-  startTime.value = null\r\n-\r\n-  // 清除文件输入\r\n-  const fileInput = document.getElementById('image-upload')\r\n-  if (fileInput) {\r\n-    fileInput.value = ''\r\n-  }\r\n-}\r\n-\r\n-// 键盘快捷键支持\r\n-const handleKeyPress = (event) => {\r\n-  if (!resultImage.value) return\r\n-\r\n-  if (event.key === 'ArrowLeft') {\r\n-    sliderPosition.value = Math.max(0, sliderPosition.value - 5)\r\n-  } else if (event.key === 'ArrowRight') {\r\n-    sliderPosition.value = Math.min(100, sliderPosition.value + 5)\r\n-  }\r\n-}\r\n-\r\n-// 生命周期钩子\r\n+// 生命周期\r\n onMounted(() => {\r\n-  document.addEventListener('keydown', handleKeyPress)\r\n+  console.log('ClothesSwap组件已挂载，ComfyUI服务已准备就绪')\r\n })\r\n \r\n onUnmounted(() => {\r\n-  document.removeEventListener('keydown', handleKeyPress)\r\n+  // 清理工作\r\n+  if (isLoading.value) {\r\n+    isLoading.value = false\r\n+  }\r\n })\r\n-\r\n-// 用户登录成功回调\r\n-const handleUserLogin = (data) => {\r\n-  console.log('用户登录成功:', data)\r\n-  // 可以在这里触发一些需要登录状态的操作\r\n-}\r\n-\r\n-// 用户登出回调\r\n-const handleUserLogout = () => {\r\n-  console.log('用户已登出')\r\n-  // 可以在这里清理一些用户相关的状态\r\n-}\r\n </script>\r\n \r\n <style scoped>\r\n /* 上传提示样式 */\r\n"
                },
                {
                    "date": 1752394109780,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -162,17 +162,26 @@\n })\r\n </script>\r\n \r\n <style scoped>\r\n-/* 上传提示样式 */\r\n-.tip-item {\r\n-  display: flex;\r\n-  align-items: center;\r\n-  gap: 8px;\r\n-  font-size: 14px;\r\n-  color: var(--van-text-color-2, #646566);\r\n+/* 这里可以添加特定于一键褪衣功能的样式 */\r\n+/* 大部分样式已经在统一模板中处理 */\r\n+\r\n+/* 如果需要自定义样式，可以在这里添加 */\r\n+:deep(.unified-image-upload-panel) {\r\n+  /* 自定义上传面板样式 */\r\n }\r\n \r\n-.text-success {\r\n-  color: var(--van-success-color, #07c160);\r\n+:deep(.single-image-upload) {\r\n+  /* 自定义单图上传样式 */\r\n }\r\n+\r\n+/* 移动端优化 */\r\n+@media (max-width: 768px) {\r\n+  /* 移动端特定样式 */\r\n+}\r\n+\r\n+/* 深色主题适配 */\r\n+@media (prefers-color-scheme: dark) {\r\n+  /* 深色主题样式 */\r\n+}\r\n </style>\r\n"
                },
                {
                    "date": 1752410734411,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -70,15 +70,9 @@\n     processingStatus.value = '正在上传图片...'\r\n     progressPercent.value = 30\r\n \r\n     // 调用褪衣处理服务\r\n-    const result = await processUndressImage({\r\n-      image: selectedImage.value,\r\n-      onProgress: (status, percent) => {\r\n-        processingStatus.value = status\r\n-        progressPercent.value = Math.max(progressPercent.value, percent)\r\n-      }\r\n-    })\r\n+    const result = await processUndressImage(selectedImage.value)\r\n \r\n     if (result.success && result.imageUrl) {\r\n       resultImage.value = result.imageUrl\r\n       // 保存原图用于对比\r\n"
                },
                {
                    "date": 1752410774343,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -72,12 +72,12 @@\n \r\n     // 调用褪衣处理服务\r\n     const result = await processUndressImage(selectedImage.value)\r\n \r\n-    if (result.success && result.imageUrl) {\r\n-      resultImage.value = result.imageUrl\r\n+    if (result.success && result.resultImage) {\r\n+      resultImage.value = result.resultImage\r\n       // 保存原图用于对比\r\n-      originalImageForComparison.value = result.originalImageUrl || selectedImage.value\r\n+      originalImageForComparison.value = result.originalImage || selectedImage.value\r\n       promptId.value = result.promptId || ''\r\n \r\n       // 计算处理时间\r\n       const endTime = Date.now()\r\n"
                },
                {
                    "date": 1752421368073,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -13,8 +13,9 @@\n     @logout=\"handleUserLogout\"\r\n     @process=\"processImage\"\r\n     @reset=\"resetProcess\"\r\n     @download=\"handleDownload\"\r\n+    @reprocess=\"handleReprocess\"\r\n     @upload-change=\"handleUploadChange\"\r\n     ref=\"templateRef\"\r\n   />\r\n </template>\r\n"
                },
                {
                    "date": 1752421383504,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -136,8 +136,23 @@\n \r\n   Toast.success('图片下载已开始')\r\n }\r\n \r\n+// 重新处理\r\n+const handleReprocess = () => {\r\n+  if (!selectedImage.value) {\r\n+    Toast.fail('请先选择图片')\r\n+    return\r\n+  }\r\n+\r\n+  // 清除之前的结果\r\n+  resultImage.value = null\r\n+  originalImageForComparison.value = null\r\n+\r\n+  // 重新开始处理\r\n+  processImage()\r\n+}\r\n+\r\n // 用户登录成功回调\r\n const handleUserLogin = (data) => {\r\n   console.log('用户登录成功:', data)\r\n   // 可以在这里触发一些需要登录状态的操作\r\n"
                },
                {
                    "date": 1752424389068,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -94,9 +94,20 @@\n     }\r\n \r\n   } catch (error) {\r\n     console.error('❌ 褪衣处理失败:', error)\r\n-    Toast.fail(`处理失败: ${error.message}`)\r\n+\r\n+    // 区分不同类型的错误\r\n+    let errorMessage = error.message\r\n+    if (errorMessage.includes('服务器返回非JSON响应')) {\r\n+      errorMessage = '后端服务连接异常，请检查服务器状态'\r\n+    } else if (errorMessage.includes('积分扣除失败')) {\r\n+      errorMessage = '图片处理成功，但积分扣除失败，请联系管理员'\r\n+    } else if (errorMessage.includes('网络连接异常')) {\r\n+      errorMessage = '网络连接异常，请检查网络后重试'\r\n+    }\r\n+\r\n+    Toast.fail(`处理失败: ${errorMessage}`)\r\n   } finally {\r\n     isLoading.value = false\r\n     processingStatus.value = ''\r\n     progressPercent.value = 0\r\n"
                },
                {
                    "date": 1752424930263,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -94,20 +94,9 @@\n     }\r\n \r\n   } catch (error) {\r\n     console.error('❌ 褪衣处理失败:', error)\r\n-\r\n-    // 区分不同类型的错误\r\n-    let errorMessage = error.message\r\n-    if (errorMessage.includes('服务器返回非JSON响应')) {\r\n-      errorMessage = '后端服务连接异常，请检查服务器状态'\r\n-    } else if (errorMessage.includes('积分扣除失败')) {\r\n-      errorMessage = '图片处理成功，但积分扣除失败，请联系管理员'\r\n-    } else if (errorMessage.includes('网络连接异常')) {\r\n-      errorMessage = '网络连接异常，请检查网络后重试'\r\n-    }\r\n-\r\n-    Toast.fail(`处理失败: ${errorMessage}`)\r\n+    Toast.fail(`处理失败: ${error.message}`)\r\n   } finally {\r\n     isLoading.value = false\r\n     processingStatus.value = ''\r\n     progressPercent.value = 0\r\n"
                },
                {
                    "date": 1752435791775,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -13,9 +13,9 @@\n     @logout=\"handleUserLogout\"\r\n     @process=\"processImage\"\r\n     @reset=\"resetProcess\"\r\n     @download=\"handleDownload\"\r\n-    @reprocess=\"handleReprocess\"\r\n+\r\n     @upload-change=\"handleUploadChange\"\r\n     ref=\"templateRef\"\r\n   />\r\n </template>\r\n"
                },
                {
                    "date": 1752435806920,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -136,23 +136,10 @@\n \r\n   Toast.success('图片下载已开始')\r\n }\r\n \r\n-// 重新处理\r\n-const handleReprocess = () => {\r\n-  if (!selectedImage.value) {\r\n-    Toast.fail('请先选择图片')\r\n-    return\r\n-  }\r\n \r\n-  // 清除之前的结果\r\n-  resultImage.value = null\r\n-  originalImageForComparison.value = null\r\n \r\n-  // 重新开始处理\r\n-  processImage()\r\n-}\r\n-\r\n // 用户登录成功回调\r\n const handleUserLogin = (data) => {\r\n   console.log('用户登录成功:', data)\r\n   // 可以在这里触发一些需要登录状态的操作\r\n"
                },
                {
                    "date": 1752465659548,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -60,22 +60,45 @@\n     return\r\n   }\r\n \r\n   isLoading.value = true\r\n-  processingStatus.value = '正在加载服务...'\r\n-  progressPercent.value = 10\r\n+  processingStatus.value = '正在初始化WebSocket连接...'\r\n+  progressPercent.value = 5\r\n   startTime.value = Date.now()\r\n \r\n   try {\r\n-    console.log('🚀 开始一键褪衣处理')\r\n+    console.log('🚀🚀🚀 开始一键褪衣处理 🚀🚀🚀')\r\n+    console.log('📱 前端界面已准备接收WebSocket实时更新')\r\n \r\n-    processingStatus.value = '正在上传图片...'\r\n-    progressPercent.value = 30\r\n+    processingStatus.value = '正在上传图片到ComfyUI...'\r\n+    progressPercent.value = 15\r\n \r\n-    // 调用褪衣处理服务\r\n-    const result = await processUndressImage(selectedImage.value)\r\n+    // 调用褪衣处理服务，传入进度回调函数\r\n+    const result = await processUndressImage(\r\n+      selectedImage.value,\r\n+      // 进度回调函数 - 接收WebSocket实时更新\r\n+      (status, progress) => {\r\n+        console.log('📈📈📈 收到WebSocket进度更新 📈📈📈')\r\n+        console.log(`状态: ${status}, 进度: ${progress}%`)\r\n \r\n+        // 更新前端显示\r\n+        processingStatus.value = status\r\n+        progressPercent.value = Math.max(progress, progressPercent.value) // 确保进度不倒退\r\n+\r\n+        // 显示明显的进度标记\r\n+        if (progress >= 100) {\r\n+          console.log('🎉🎉🎉 WebSocket报告任务完成! 🎉🎉🎉')\r\n+          processingStatus.value = '正在获取处理结果...'\r\n+        }\r\n+      }\r\n+    )\r\n+\r\n+    console.log('🎯🎯🎯 processUndressImage 函数返回结果 🎯🎯🎯')\r\n+    console.log('返回结果:', result)\r\n+\r\n     if (result.success && result.resultImage) {\r\n+      console.log('✅✅✅ 处理成功，显示结果 ✅✅✅')\r\n+\r\n       resultImage.value = result.resultImage\r\n       // 保存原图用于对比\r\n       originalImageForComparison.value = result.originalImage || selectedImage.value\r\n       promptId.value = result.promptId || ''\r\n@@ -87,20 +110,29 @@\n \r\n       // 显示成功toast\r\n       const pointsInfo = result.pointsConsumed ? `（消耗${result.pointsConsumed}点）` : ''\r\n       Toast.success(`🎉 处理完成！${pointsInfo}可以拖拽中间线对比原图和处理结果`)\r\n-      console.log('✅ 褪衣处理完成')\r\n+\r\n+      console.log('🎊🎊🎊 前端界面已更新，显示处理结果 🎊🎊🎊')\r\n+      console.log('✅ 褪衣处理完全完成')\r\n     } else {\r\n+      console.error('❌❌❌ 处理失败，结果无效 ❌❌❌')\r\n+      console.error('返回结果:', result)\r\n       throw new Error(result.error || '褪衣处理失败')\r\n     }\r\n \r\n   } catch (error) {\r\n-    console.error('❌ 褪衣处理失败:', error)\r\n+    console.error('❌❌❌ 褪衣处理失败 ❌❌❌', error)\r\n+    console.error('错误详情:', error.message)\r\n+    console.error('错误堆栈:', error.stack)\r\n+\r\n     Toast.fail(`处理失败: ${error.message}`)\r\n   } finally {\r\n     isLoading.value = false\r\n     processingStatus.value = ''\r\n     progressPercent.value = 0\r\n+\r\n+    console.log('🏁 处理流程结束，界面状态已重置')\r\n   }\r\n }\r\n \r\n // 重置处理\r\n"
                },
                {
                    "date": 1752467834372,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -65,10 +65,9 @@\n   progressPercent.value = 5\r\n   startTime.value = Date.now()\r\n \r\n   try {\r\n-    console.log('🚀🚀🚀 开始一键褪衣处理 🚀🚀🚀')\r\n-    console.log('📱 前端界面已准备接收WebSocket实时更新')\r\n+    console.log('🚀 开始一键褪衣处理')\r\n \r\n     processingStatus.value = '正在上传图片到ComfyUI...'\r\n     progressPercent.value = 15\r\n \r\n@@ -76,28 +75,21 @@\n     const result = await processUndressImage(\r\n       selectedImage.value,\r\n       // 进度回调函数 - 接收WebSocket实时更新\r\n       (status, progress) => {\r\n-        console.log('📈📈📈 收到WebSocket进度更新 📈📈📈')\r\n-        console.log(`状态: ${status}, 进度: ${progress}%`)\r\n-\r\n         // 更新前端显示\r\n         processingStatus.value = status\r\n         progressPercent.value = Math.max(progress, progressPercent.value) // 确保进度不倒退\r\n \r\n         // 显示明显的进度标记\r\n         if (progress >= 100) {\r\n-          console.log('🎉🎉🎉 WebSocket报告任务完成! 🎉🎉🎉')\r\n           processingStatus.value = '正在获取处理结果...'\r\n         }\r\n       }\r\n     )\r\n \r\n-    console.log('🎯🎯🎯 processUndressImage 函数返回结果 🎯🎯🎯')\r\n-    console.log('返回结果:', result)\r\n-\r\n     if (result.success && result.resultImage) {\r\n-      console.log('✅✅✅ 处理成功，显示结果 ✅✅✅')\r\n+      console.log('✅ 处理成功，显示结果')\r\n \r\n       resultImage.value = result.resultImage\r\n       // 保存原图用于对比\r\n       originalImageForComparison.value = result.originalImage || selectedImage.value\r\n@@ -111,13 +103,11 @@\n       // 显示成功toast\r\n       const pointsInfo = result.pointsConsumed ? `（消耗${result.pointsConsumed}点）` : ''\r\n       Toast.success(`🎉 处理完成！${pointsInfo}可以拖拽中间线对比原图和处理结果`)\r\n \r\n-      console.log('🎊🎊🎊 前端界面已更新，显示处理结果 🎊🎊🎊')\r\n-      console.log('✅ 褪衣处理完全完成')\r\n+      console.log('✅ 褪衣处理完成')\r\n     } else {\r\n-      console.error('❌❌❌ 处理失败，结果无效 ❌❌❌')\r\n-      console.error('返回结果:', result)\r\n+      console.error('❌ 处理失败，结果无效')\r\n       throw new Error(result.error || '褪衣处理失败')\r\n     }\r\n \r\n   } catch (error) {\r\n"
                },
                {
                    "date": 1752467853557,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -110,19 +110,14 @@\n       throw new Error(result.error || '褪衣处理失败')\r\n     }\r\n \r\n   } catch (error) {\r\n-    console.error('❌❌❌ 褪衣处理失败 ❌❌❌', error)\r\n-    console.error('错误详情:', error.message)\r\n-    console.error('错误堆栈:', error.stack)\r\n-\r\n+    console.error('❌ 褪衣处理失败:', error)\r\n     Toast.fail(`处理失败: ${error.message}`)\r\n   } finally {\r\n     isLoading.value = false\r\n     processingStatus.value = ''\r\n     progressPercent.value = 0\r\n-\r\n-    console.log('🏁 处理流程结束，界面状态已重置')\r\n   }\r\n }\r\n \r\n // 重置处理\r\n"
                },
                {
                    "date": 1752898819583,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -25,8 +25,9 @@\n import { Toast } from 'vant'\r\n import { UnifiedImageProcessingTemplate } from '../components/mobile'\r\n import { UndressWomanIcon } from '../components/icons'\r\n import { processUndressImage } from '../services/comfyui.js'\r\n+import { handleError } from '../services/globalErrorHandler.js'\r\n \r\n console.log('ClothesSwap组件已加载，ComfyUI服务已导入')\r\n \r\n // 响应式数据\r\n"
                },
                {
                    "date": 1752898831897,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -112,9 +112,16 @@\n     }\r\n \r\n   } catch (error) {\r\n     console.error('❌ 褪衣处理失败:', error)\r\n-    Toast.fail(`处理失败: ${error.message}`)\r\n+\r\n+    // 使用全局错误处理器\r\n+    const isHandledGlobally = handleError(error, '褪衣处理')\r\n+\r\n+    // 如果没有被全局处理，则显示普通错误提示\r\n+    if (!isHandledGlobally) {\r\n+      Toast.fail(`处理失败: ${error.message}`)\r\n+    }\r\n   } finally {\r\n     isLoading.value = false\r\n     processingStatus.value = ''\r\n     progressPercent.value = 0\r\n"
                }
            ],
            "date": 1752348776465,
            "name": "Commit-0",
            "content": "<template>\r\n  <div class=\"feature-page\">\r\n    <!-- 右上角用户信息 -->\r\n    <div class=\"top-corner\">\r\n      <UserInfo @login=\"handleUserLogin\" @logout=\"handleUserLogout\" />\r\n    </div>\r\n\r\n    <div class=\"container\">\r\n      <header class=\"page-header\">\r\n        <BackToHomeButton class=\"back-btn\" />\r\n        <h1 class=\"page-title\">\r\n          <UndressWomanIcon :size=\"32\" color=\"var(--primary-color)\" class=\"page-icon\" />\r\n          一键褪衣\r\n        </h1>\r\n        <p class=\"page-description\">上传人物照片，AI将为您智能移除服装</p>\r\n      </header>\r\n\r\n      <!-- 体验点显示 -->\r\n      <PointsDisplay ref=\"pointsDisplayRef\" />\r\n\r\n      <main class=\"page-content\">\r\n        <div v-if=\"!resultImage\" class=\"upload-section\">\r\n          <div class=\"target-image-section\">\r\n            <h3 class=\"section-title\">\r\n              <UndressWomanIcon :size=\"20\" color=\"var(--primary-color)\" class=\"section-icon\" />\r\n              上传人物照片\r\n            </h3>\r\n            <!-- <p class=\"section-description\">上传需要换衣的人物照片</p> -->\r\n\r\n            <ImageUpload\r\n              v-model=\"selectedImage\"\r\n              title=\"选择人物照片\"\r\n              description=\"支持 JPG、PNG 格式，建议尺寸 512x512 以上\"\r\n              icon=\"Image\"\r\n              :icon-size=\"48\"\r\n              :min-height=\"300\"\r\n              :disabled=\"isLoading\"\r\n              @change=\"handleImageChange\"\r\n            />\r\n          </div>\r\n\r\n          <div v-if=\"selectedImage\" class=\"action-section\">\r\n            <!-- 处理按钮 -->\r\n            <van-button\r\n              v-if=\"!isLoading && !resultImage\"\r\n              @click=\"processImage\"\r\n              type=\"primary\"\r\n              size=\"large\"\r\n              round\r\n              block\r\n              class=\"process-btn\"\r\n            >\r\n              <Shirt :size=\"20\" color=\"white\" class=\"btn-icon\" />\r\n              开始换衣\r\n            </van-button>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- 处理状态 -->\r\n        <ProcessingStatus\r\n          v-if=\"isLoading\"\r\n          status=\"loading\"\r\n          title=\"正在处理换衣...\"\r\n          description=\"请耐心等待，处理时间可能需要几分钟\"\r\n          :progress=\"progressPercent\"\r\n          :prompt-id=\"promptId\"\r\n          :processing-time=\"processingTime\"\r\n        />\r\n\r\n        <!-- 结果展示 -->\r\n        <ImageComparison\r\n          v-if=\"resultImage\"\r\n          :original-image=\"originalImageForComparison || selectedImage\"\r\n          :result-image=\"resultImage\"\r\n          @reset=\"resetProcess\"\r\n        />\r\n      </main>\r\n    </div>\r\n\r\n\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted, onUnmounted } from 'vue'\r\nimport { Toast } from 'vant'\r\nimport ImageUpload from '../components/ImageUpload.vue'\r\nimport ProcessingStatus from '../components/ProcessingStatus.vue'\r\nimport ImageComparison from '../components/ImageComparison.vue'\r\nimport PointsDisplay from '../components/PointsDisplay.vue'\r\nimport UserInfo from '../components/UserInfo.vue'\r\n\r\nimport { UndressWomanIcon } from '../components/icons'\r\n\r\n// 静态导入ComfyUI服务\r\nimport { processUndressImage } from '../services/comfyui.js'\r\n\r\nconsole.log('ClothesSwap组件已加载，ComfyUI服务已导入')\r\n\r\nconst selectedImage = ref(null)\r\nconst originalImageForComparison = ref(null) // 新增：用于对比的原图（节点49）\r\nconst resultImage = ref(null)\r\nconst isLoading = ref(false)\r\nconst processingStatus = ref('')\r\nconst promptId = ref('')\r\nconst processingTime = ref('')\r\nconst progressPercent = ref(0) // 新增：处理进度百分比\r\n\r\n// 拖拽对比功能\r\nconst sliderPosition = ref(50) // 滑块位置百分比\r\nconst isDragging = ref(false)\r\nconst comparisonContainer = ref(null)\r\nconst startTime = ref(null)\r\n\r\n// 体验点组件引用\r\nconst pointsDisplayRef = ref(null)\r\n\r\n// 使用VantUI Toast系统\r\n\r\nconst handleImageChange = (imageData, file) => {\r\n  selectedImage.value = imageData\r\n  resultImage.value = null // 清除之前的结果\r\n  // 不再自动处理，等待用户点击按钮\r\n}\r\n\r\nconst processImage = async () => {\r\n  if (!selectedImage.value) return\r\n\r\n  isLoading.value = true\r\n  processingStatus.value = '正在加载服务...'\r\n  progressPercent.value = 10\r\n  startTime.value = Date.now()\r\n\r\n  try {\r\n    console.log('🚀 开始一键换衣处理')\r\n\r\n    // ComfyUI服务已静态导入，无需动态加载\r\n\r\n    processingStatus.value = '开始处理图片...'\r\n    progressPercent.value = 30\r\n\r\n    // 调用真实的ComfyUI API\r\n    processingStatus.value = '正在处理图片...'\r\n    progressPercent.value = 50\r\n\r\n    const result = await processUndressImage(selectedImage.value)\r\n    progressPercent.value = 90\r\n\r\n    if (result && result.success) {\r\n      resultImage.value = result.resultImage\r\n      // 设置用于对比的原图（优先使用节点49的图片，否则使用用户上传的图片）\r\n      originalImageForComparison.value = result.originalImage || selectedImage.value\r\n      promptId.value = result.promptId || ''\r\n      processingStatus.value = '处理完成！'\r\n      progressPercent.value = 100\r\n\r\n      // 计算处理时间\r\n      if (startTime.value) {\r\n        const duration = Math.round((Date.now() - startTime.value) / 1000)\r\n        processingTime.value = `${duration}秒`\r\n      }\r\n\r\n      // 更新体验点显示\r\n      if (pointsDisplayRef.value) {\r\n        pointsDisplayRef.value.updatePointsStatus()\r\n      }\r\n\r\n      // 显示成功toast\r\n      const pointsInfo = result.pointsConsumed ? `（消耗${result.pointsConsumed}点）` : ''\r\n      Toast.success(`🎉 处理完成！${pointsInfo}可以拖拽中间线对比效果`)\r\n\r\n      console.log('🎉 换衣处理成功')\r\n    } else {\r\n      throw new Error(result?.error || '处理失败')\r\n    }\r\n\r\n  } catch (error) {\r\n    console.error('❌ 处理失败:', error)\r\n    processingStatus.value = `❌ 处理失败: ${error.message}`\r\n    progressPercent.value = 0\r\n\r\n    // 显示用户友好的错误信息\r\n    let errorMessage = '处理失败，请重试'\r\n    if (error.message.includes('上传')) {\r\n      errorMessage = '图片上传失败，请检查网络连接'\r\n    } else if (error.message.includes('超时')) {\r\n      errorMessage = '处理超时，请稍后重试'\r\n    } else if (error.message.includes('工作流')) {\r\n      errorMessage = '服务器处理失败，请稍后重试'\r\n    } else if (error.message.includes('网络')) {\r\n      errorMessage = '网络连接失败，请检查网络'\r\n    } else if (error.message.includes('加载')) {\r\n      errorMessage = '服务加载失败，请刷新页面重试'\r\n    }\r\n\r\n    Toast.fail(errorMessage)\r\n  } finally {\r\n    isLoading.value = false\r\n    progressPercent.value = 0\r\n  }\r\n}\r\n\r\n// Toast功能已移至useToast组合式函数\r\n\r\n// 拖拽对比功能\r\nconst startDragging = (event) => {\r\n  event.preventDefault()\r\n  isDragging.value = true\r\n\r\n  const moveHandler = (e) => {\r\n    if (!isDragging.value || !comparisonContainer.value) return\r\n\r\n    const rect = comparisonContainer.value.getBoundingClientRect()\r\n    const clientX = e.clientX || (e.touches && e.touches[0].clientX)\r\n    const x = clientX - rect.left\r\n    const percentage = Math.max(0, Math.min(100, (x / rect.width) * 100))\r\n\r\n    sliderPosition.value = percentage\r\n  }\r\n\r\n  const stopDragging = () => {\r\n    isDragging.value = false\r\n    document.removeEventListener('mousemove', moveHandler)\r\n    document.removeEventListener('mouseup', stopDragging)\r\n    document.removeEventListener('touchmove', moveHandler)\r\n    document.removeEventListener('touchend', stopDragging)\r\n  }\r\n\r\n  document.addEventListener('mousemove', moveHandler)\r\n  document.addEventListener('mouseup', stopDragging)\r\n  document.addEventListener('touchmove', moveHandler)\r\n  document.addEventListener('touchend', stopDragging)\r\n}\r\n\r\n// 下载结果图片\r\nconst downloadResult = () => {\r\n  if (!resultImage.value) return\r\n\r\n  const link = document.createElement('a')\r\n  link.href = resultImage.value\r\n  link.download = `clothes-swap-result-${Date.now()}.jpg`\r\n  document.body.appendChild(link)\r\n  link.click()\r\n  document.body.removeChild(link)\r\n}\r\n\r\nconst resetProcess = () => {\r\n  selectedImage.value = null\r\n  resultImage.value = null\r\n  processingStatus.value = ''\r\n  promptId.value = ''\r\n  processingTime.value = ''\r\n  sliderPosition.value = 50\r\n  startTime.value = null\r\n\r\n  // 清除文件输入\r\n  const fileInput = document.getElementById('image-upload')\r\n  if (fileInput) {\r\n    fileInput.value = ''\r\n  }\r\n}\r\n\r\n// 键盘快捷键支持\r\nconst handleKeyPress = (event) => {\r\n  if (!resultImage.value) return\r\n\r\n  if (event.key === 'ArrowLeft') {\r\n    sliderPosition.value = Math.max(0, sliderPosition.value - 5)\r\n  } else if (event.key === 'ArrowRight') {\r\n    sliderPosition.value = Math.min(100, sliderPosition.value + 5)\r\n  }\r\n}\r\n\r\n// 生命周期钩子\r\nonMounted(() => {\r\n  document.addEventListener('keydown', handleKeyPress)\r\n})\r\n\r\nonUnmounted(() => {\r\n  document.removeEventListener('keydown', handleKeyPress)\r\n})\r\n\r\n// 用户登录成功回调\r\nconst handleUserLogin = (data) => {\r\n  console.log('用户登录成功:', data)\r\n  // 可以在这里触发一些需要登录状态的操作\r\n}\r\n\r\n// 用户登出回调\r\nconst handleUserLogout = () => {\r\n  console.log('用户已登出')\r\n  // 可以在这里清理一些用户相关的状态\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.feature-page {\r\n  min-height: 100vh;\r\n  padding: 20px;\r\n  background: linear-gradient(135deg, var(--bg-primary) 0%, var(--bg-secondary) 100%);\r\n  position: relative;\r\n}\r\n\r\n/* 右上角用户信息 */\r\n.top-corner {\r\n  position: fixed;\r\n  top: 20px;\r\n  right: 20px;\r\n  z-index: 1000;\r\n}\r\n\r\n.container {\r\n  max-width: 1000px;\r\n  margin: 0 auto;\r\n}\r\n\r\n.page-header {\r\n  text-align: center;\r\n  margin-bottom: 40px;\r\n}\r\n\r\n.page-title {\r\n  color: var(--text-color);\r\n  font-size: 2.5rem;\r\n  font-weight: 700;\r\n  margin-bottom: 12px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  gap: 16px;\r\n}\r\n\r\n.page-icon {\r\n  flex-shrink: 0;\r\n}\r\n\r\n.page-description {\r\n  color: var(--text-light);\r\n  font-size: 1.1rem;\r\n  margin: 0;\r\n  line-height: 1.5;\r\n}\r\n\r\n.page-description {\r\n  font-size: 1.2rem;\r\n  color: rgba(255, 255, 255, 0.8);\r\n}\r\n\r\n.page-content {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 40px;\r\n}\r\n\r\n.upload-section {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 40px;\r\n}\r\n\r\n/* 目标图片区域样式 - 与换脸页面保持一致 */\r\n.target-image-section {\r\n  background: var(--bg-card);\r\n  border: 1px solid var(--border-color);\r\n  border-radius: 20px;\r\n  padding: 32px;\r\n  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);\r\n}\r\n\r\n.section-title {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 12px;\r\n  margin: 0 0 12px 0;\r\n  font-size: 1.5rem;\r\n  font-weight: 600;\r\n  color: var(--text-color);\r\n}\r\n\r\n.section-icon {\r\n  flex-shrink: 0;\r\n}\r\n\r\n.section-description {\r\n  margin: 0 0 24px 0;\r\n  color: var(--text-light);\r\n  font-size: 1rem;\r\n  line-height: 1.5;\r\n}\r\n\r\n.upload-card {\r\n  background: var(--bg-card);\r\n  border: 1px solid var(--border-color);\r\n  border-radius: 20px;\r\n  padding: 32px;\r\n  box-shadow: var(--shadow);\r\n  color: var(--text-color);\r\n}\r\n\r\n.hidden {\r\n  display: none;\r\n}\r\n\r\n.upload-area {\r\n  display: block;\r\n  cursor: pointer;\r\n  border: 3px dashed var(--border-color);\r\n  border-radius: 16px;\r\n  padding: 40px;\r\n  text-align: center;\r\n  transition: var(--transition);\r\n  min-width: 400px;\r\n  min-height: 300px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n\r\n.upload-area:hover {\r\n  border-color: var(--primary-color);\r\n  background: rgba(102, 126, 234, 0.05);\r\n}\r\n\r\n.upload-placeholder h3 {\r\n  margin: 16px 0 8px;\r\n  color: var(--text-color);\r\n}\r\n\r\n.upload-placeholder p {\r\n  color: var(--text-light);\r\n  font-size: 0.9rem;\r\n}\r\n\r\n.upload-icon {\r\n  font-size: 4rem;\r\n  margin-bottom: 16px;\r\n}\r\n\r\n.image-preview {\r\n  position: relative;\r\n  border-radius: 12px;\r\n  overflow: hidden;\r\n}\r\n\r\n/* 移除预览图片的高度限制，让ImageUpload组件自己控制 */\r\n\r\n.image-overlay {\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  background: rgba(0, 0, 0, 0.7);\r\n  color: white;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  opacity: 0;\r\n  transition: var(--transition);\r\n}\r\n\r\n.image-preview:hover .image-overlay {\r\n  opacity: 1;\r\n}\r\n\r\n.process-btn {\r\n  font-size: 1.1rem;\r\n  padding: 16px 32px;\r\n  min-width: 200px;\r\n}\r\n\r\n.status-message {\r\n  margin-top: 16px;\r\n  padding: 12px 16px;\r\n  border-radius: 8px;\r\n  background: rgba(76, 175, 80, 0.1);\r\n  border: 1px solid rgba(76, 175, 80, 0.3);\r\n  color: #2e7d32;\r\n  font-size: 0.9rem;\r\n  text-align: center;\r\n}\r\n\r\n.status-message.error {\r\n  background: rgba(244, 67, 54, 0.1);\r\n  border-color: rgba(244, 67, 54, 0.3);\r\n  color: #c62828;\r\n}\r\n\r\n/* prompt-id样式已移至 shared.css */\r\n\r\n.result-section {\r\n  display: flex;\r\n  justify-content: center;\r\n}\r\n\r\n.result-card {\r\n  background: var(--bg-card);\r\n  border: 1px solid var(--border-color);\r\n  border-radius: 20px;\r\n  padding: 32px;\r\n  text-align: center;\r\n  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);\r\n  max-width: 600px;\r\n}\r\n\r\n.result-title {\r\n  font-size: 1.5rem;\r\n  margin-bottom: 24px;\r\n  color: var(--text-color);\r\n}\r\n\r\n.result-image-container {\r\n  margin-bottom: 24px;\r\n}\r\n\r\n.result-image {\r\n  max-width: 100%;\r\n  max-height: 500px;\r\n  border-radius: 12px;\r\n  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);\r\n}\r\n\r\n.result-actions {\r\n  display: flex;\r\n  gap: 16px;\r\n  justify-content: center;\r\n}\r\n\r\n.btn-secondary {\r\n  background: #6c757d;\r\n  color: white;\r\n}\r\n\r\n.btn-secondary:hover {\r\n  background: #5a6268;\r\n  transform: translateY(-2px);\r\n}\r\n\r\n/* 拖拽对比功能样式 */\r\n.image-comparison-container {\r\n  margin: 20px 0;\r\n  border-radius: 12px;\r\n  overflow: hidden;\r\n  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);\r\n}\r\n\r\n.comparison-wrapper {\r\n  position: relative;\r\n  width: 100%;\r\n  height: 600px;\r\n  overflow: hidden;\r\n  cursor: col-resize;\r\n  user-select: none;\r\n  background: #000000; /* 改为黑色背景，避免白色间距 */\r\n}\r\n\r\n.image-layer {\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n\r\n.comparison-image {\r\n  width: 100%;\r\n  height: 100%;\r\n  object-fit: cover; /* 改为cover，充满整个区域 */\r\n  object-position: center;\r\n  display: block;\r\n}\r\n\r\n.result-layer {\r\n  clip-path: inset(0 50% 0 0);\r\n  transition: clip-path 0.1s ease-out;\r\n}\r\n\r\n.image-label {\r\n  position: absolute;\r\n  top: 16px;\r\n  padding: 8px 16px;\r\n  background: rgba(0, 0, 0, 0.7);\r\n  color: white;\r\n  border-radius: 20px;\r\n  font-size: 0.9rem;\r\n  font-weight: 500;\r\n  backdrop-filter: blur(10px);\r\n  z-index: 10;\r\n}\r\n\r\n.original-label {\r\n  left: 16px;\r\n}\r\n\r\n.result-label {\r\n  right: 16px;\r\n}\r\n\r\n.comparison-slider {\r\n  position: absolute;\r\n  top: 0;\r\n  bottom: 0;\r\n  width: 4px;\r\n  background: white;\r\n  cursor: col-resize;\r\n  z-index: 20;\r\n  transform: translateX(-2px);\r\n  transition: left 0.1s ease-out;\r\n}\r\n\r\n.slider-line {\r\n  width: 100%;\r\n  height: 100%;\r\n  background: linear-gradient(to bottom,\r\n    rgba(255, 255, 255, 0.8),\r\n    rgba(255, 255, 255, 1),\r\n    rgba(255, 255, 255, 0.8)\r\n  );\r\n  box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);\r\n}\r\n\r\n.slider-handle {\r\n  position: absolute;\r\n  top: 50%;\r\n  left: 50%;\r\n  transform: translate(-50%, -50%);\r\n  width: 40px;\r\n  height: 40px;\r\n  background: white;\r\n  border-radius: 50%;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);\r\n  cursor: col-resize;\r\n}\r\n\r\n.slider-circle {\r\n  width: 12px;\r\n  height: 12px;\r\n  background: #007bff;\r\n  border-radius: 50%;\r\n}\r\n\r\n.slider-arrow {\r\n  position: absolute;\r\n  color: #007bff;\r\n  font-size: 12px;\r\n  font-weight: bold;\r\n}\r\n\r\n.slider-arrow.left {\r\n  left: 6px;\r\n}\r\n\r\n.slider-arrow.right {\r\n  right: 6px;\r\n}\r\n\r\n.slider-handle:hover {\r\n  transform: translate(-50%, -50%) scale(1.1);\r\n  box-shadow: 0 6px 16px rgba(0, 0, 0, 0.4);\r\n}\r\n\r\n/* 处理信息样式 */\r\n.process-info {\r\n  margin-top: 20px;\r\n  padding: 16px;\r\n  background: rgba(255, 255, 255, 0.1);\r\n  border-radius: 8px;\r\n  display: flex;\r\n  gap: 24px;\r\n  flex-wrap: wrap;\r\n}\r\n\r\n.info-item {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n}\r\n\r\n.info-label {\r\n  color: rgba(255, 255, 255, 0.8);\r\n  font-size: 0.9rem;\r\n}\r\n\r\n.info-value {\r\n  color: white;\r\n  font-weight: 500;\r\n  font-family: monospace;\r\n  background: rgba(255, 255, 255, 0.1);\r\n  padding: 4px 8px;\r\n  border-radius: 4px;\r\n}\r\n\r\n/* 按钮样式已移至AppButton组件 */\r\n\r\n@media (max-width: 768px) {\r\n  .page-title {\r\n    font-size: 2rem;\r\n  }\r\n\r\n  .upload-area {\r\n    min-width: 300px;\r\n    min-height: 250px;\r\n    padding: 24px;\r\n  }\r\n\r\n  .result-actions {\r\n    flex-direction: column;\r\n  }\r\n\r\n  .comparison-wrapper {\r\n    height: 500px;\r\n  }\r\n\r\n  .slider-handle {\r\n    width: 36px;\r\n    height: 36px;\r\n  }\r\n\r\n  .slider-arrow {\r\n    font-size: 10px;\r\n  }\r\n\r\n  .process-info {\r\n    flex-direction: column;\r\n    gap: 12px;\r\n  }\r\n\r\n  .toast {\r\n    right: 20px;\r\n    top: 20px;\r\n  }\r\n\r\n  .toast-content {\r\n    padding: 12px 16px;\r\n  }\r\n}\r\n\r\n/* VantUI组件样式覆盖 */\r\n.processing-status {\r\n  margin-top: 24px;\r\n  padding: 20px;\r\n  background: var(--bg-card);\r\n  border: 1px solid var(--border-color);\r\n  border-radius: 12px;\r\n}\r\n\r\n.status-info {\r\n  margin-top: 16px;\r\n  text-align: center;\r\n}\r\n\r\n.status-text {\r\n  color: var(--text-color);\r\n  font-size: 16px;\r\n  margin-bottom: 12px;\r\n}\r\n\r\n.process-details {\r\n  display: flex;\r\n  justify-content: center;\r\n  gap: 20px;\r\n  font-size: 14px;\r\n  color: var(--text-light);\r\n}\r\n\r\n.action-section {\r\n  text-align: center;\r\n}\r\n\r\n.process-btn {\r\n  margin-top: 24px;\r\n}\r\n\r\n.process-btn .van-button__content {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  gap: 8px;\r\n}\r\n\r\n.btn-icon {\r\n  flex-shrink: 0;\r\n}\r\n\r\n/* 动画已移至 shared.css */\r\n</style>\r\n"
        }
    ]
}