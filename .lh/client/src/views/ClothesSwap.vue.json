{
    "sourceFile": "client/src/views/ClothesSwap.vue",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 23,
            "patches": [
                {
                    "date": 1752348776465,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1752348792279,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -88,8 +88,9 @@\n import ProcessingStatus from '../components/ProcessingStatus.vue'\r\n import ImageComparison from '../components/ImageComparison.vue'\r\n import PointsDisplay from '../components/PointsDisplay.vue'\r\n import UserInfo from '../components/UserInfo.vue'\r\n+import BackToHomeButton from '../components/BackToHomeButton.vue'\r\n \r\n import { UndressWomanIcon } from '../components/icons'\r\n \r\n // é™æ€å¯¼å…¥ComfyUIæœåŠ¡\r\n"
                },
                {
                    "date": 1752350857925,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,23 +1,21 @@\n <template>\r\n-  <div class=\"feature-page\">\r\n+  <div class=\"mobile-page\">\r\n     <!-- å³ä¸Šè§’ç”¨æˆ·ä¿¡æ¯ -->\r\n     <div class=\"top-corner\">\r\n       <UserInfo @login=\"handleUserLogin\" @logout=\"handleUserLogout\" />\r\n     </div>\r\n \r\n-    <div class=\"container\">\r\n-      <header class=\"page-header\">\r\n-        <BackToHomeButton class=\"back-btn\" />\r\n-        <h1 class=\"page-title\">\r\n-          <UndressWomanIcon :size=\"32\" color=\"var(--primary-color)\" class=\"page-icon\" />\r\n-          ä¸€é”®è¤ªè¡£\r\n-        </h1>\r\n-        <p class=\"page-description\">ä¸Šä¼ äººç‰©ç…§ç‰‡ï¼ŒAIå°†ä¸ºæ‚¨æ™ºèƒ½ç§»é™¤æœè£…</p>\r\n+    <div class=\"mobile-container\">\r\n+      <header class=\"mobile-header\">\r\n+        <BackToHomeButton class=\"mobile-header-back\" />\r\n+        <h1 class=\"mobile-header-title\">ä¸€é”®è¤ªè¡£</h1>\r\n+        <div></div>\r\n       </header>\r\n \r\n       <!-- ä½“éªŒç‚¹æ˜¾ç¤º -->\r\n-      <PointsDisplay ref=\"pointsDisplayRef\" />\r\n+      <div class=\"mobile-content\">\r\n+        <PointsDisplay ref=\"pointsDisplayRef\" />\r\n \r\n       <main class=\"page-content\">\r\n         <div v-if=\"!resultImage\" class=\"upload-section\">\r\n           <div class=\"target-image-section\">\r\n"
                },
                {
                    "date": 1752350880110,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -15,16 +15,14 @@\n       <!-- ä½“éªŒç‚¹æ˜¾ç¤º -->\r\n       <div class=\"mobile-content\">\r\n         <PointsDisplay ref=\"pointsDisplayRef\" />\r\n \r\n-      <main class=\"page-content\">\r\n         <div v-if=\"!resultImage\" class=\"upload-section\">\r\n-          <div class=\"target-image-section\">\r\n-            <h3 class=\"section-title\">\r\n-              <UndressWomanIcon :size=\"20\" color=\"var(--primary-color)\" class=\"section-icon\" />\r\n+          <div class=\"mobile-card\">\r\n+            <h3 class=\"mobile-text-title mobile-mb-3\">\r\n+              <UndressWomanIcon :size=\"20\" color=\"var(--van-primary-color)\" class=\"section-icon\" />\r\n               ä¸Šä¼ äººç‰©ç…§ç‰‡\r\n             </h3>\r\n-            <!-- <p class=\"section-description\">ä¸Šä¼ éœ€è¦æ¢è¡£çš„äººç‰©ç…§ç‰‡</p> -->\r\n \r\n             <ImageUpload\r\n               v-model=\"selectedImage\"\r\n               title=\"é€‰æ‹©äººç‰©ç…§ç‰‡\"\r\n"
                },
                {
                    "date": 1752350903750,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -34,31 +34,33 @@\n               @change=\"handleImageChange\"\r\n             />\r\n           </div>\r\n \r\n-          <div v-if=\"selectedImage\" class=\"action-section\">\r\n+          </div>\r\n+\r\n+          <div v-if=\"selectedImage\" class=\"mobile-card mobile-mt-3\">\r\n             <!-- å¤„ç†æŒ‰é’® -->\r\n             <van-button\r\n               v-if=\"!isLoading && !resultImage\"\r\n               @click=\"processImage\"\r\n               type=\"primary\"\r\n               size=\"large\"\r\n               round\r\n               block\r\n-              class=\"process-btn\"\r\n+              class=\"mobile-button mobile-button-primary\"\r\n             >\r\n               <Shirt :size=\"20\" color=\"white\" class=\"btn-icon\" />\r\n               å¼€å§‹æ¢è¡£\r\n             </van-button>\r\n           </div>\r\n         </div>\r\n \r\n         <!-- å¤„ç†çŠ¶æ€ -->\r\n-        <ProcessingStatus\r\n-          v-if=\"isLoading\"\r\n-          status=\"loading\"\r\n-          title=\"æ­£åœ¨å¤„ç†æ¢è¡£...\"\r\n-          description=\"è¯·è€å¿ƒç­‰å¾…ï¼Œå¤„ç†æ—¶é—´å¯èƒ½éœ€è¦å‡ åˆ†é’Ÿ\"\r\n+        <div v-if=\"isLoading\" class=\"mobile-card\">\r\n+          <ProcessingStatus\r\n+            status=\"loading\"\r\n+            title=\"æ­£åœ¨å¤„ç†æ¢è¡£...\"\r\n+            description=\"è¯·è€å¿ƒç­‰å¾…ï¼Œå¤„ç†æ—¶é—´å¯èƒ½éœ€è¦å‡ åˆ†é’Ÿ\"\r\n           :progress=\"progressPercent\"\r\n           :prompt-id=\"promptId\"\r\n           :processing-time=\"processingTime\"\r\n         />\r\n"
                },
                {
                    "date": 1752350924657,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -62,21 +62,21 @@\n             description=\"è¯·è€å¿ƒç­‰å¾…ï¼Œå¤„ç†æ—¶é—´å¯èƒ½éœ€è¦å‡ åˆ†é’Ÿ\"\r\n           :progress=\"progressPercent\"\r\n           :prompt-id=\"promptId\"\r\n           :processing-time=\"processingTime\"\r\n-        />\r\n+          />\r\n+        </div>\r\n \r\n         <!-- ç»“æœå±•ç¤º -->\r\n-        <ImageComparison\r\n-          v-if=\"resultImage\"\r\n-          :original-image=\"originalImageForComparison || selectedImage\"\r\n-          :result-image=\"resultImage\"\r\n-          @reset=\"resetProcess\"\r\n-        />\r\n-      </main>\r\n+        <div v-if=\"resultImage\" class=\"mobile-card\">\r\n+          <ImageComparison\r\n+            :original-image=\"originalImageForComparison || selectedImage\"\r\n+            :result-image=\"resultImage\"\r\n+            @reset=\"resetProcess\"\r\n+          />\r\n+        </div>\r\n+      </div>\r\n     </div>\r\n-\r\n-\r\n   </div>\r\n </template>\r\n \r\n <script setup>\r\n"
                },
                {
                    "date": 1752351017466,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -292,23 +292,24 @@\n }\r\n </script>\r\n \r\n <style scoped>\r\n-.feature-page {\r\n-  min-height: 100vh;\r\n-  padding: 20px;\r\n-  background: linear-gradient(135deg, var(--bg-primary) 0%, var(--bg-secondary) 100%);\r\n-  position: relative;\r\n-}\r\n-\r\n-/* å³ä¸Šè§’ç”¨æˆ·ä¿¡æ¯ */\r\n+/* ç§»åŠ¨ç«¯ClothesSwapé¡µé¢æ ·å¼ */\r\n .top-corner {\r\n   position: fixed;\r\n   top: 20px;\r\n   right: 20px;\r\n   z-index: 1000;\r\n }\r\n \r\n+.section-icon {\r\n+  margin-right: 8px;\r\n+}\r\n+\r\n+.btn-icon {\r\n+  margin-right: 8px;\r\n+}\r\n+\r\n .container {\r\n   max-width: 1000px;\r\n   margin: 0 auto;\r\n }\r\n"
                },
                {
                    "date": 1752351039019,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -307,48 +307,10 @@\n \r\n .btn-icon {\r\n   margin-right: 8px;\r\n }\r\n-\r\n-.container {\r\n-  max-width: 1000px;\r\n-  margin: 0 auto;\r\n-}\r\n-\r\n-.page-header {\r\n-  text-align: center;\r\n-  margin-bottom: 40px;\r\n-}\r\n-\r\n-.page-title {\r\n-  color: var(--text-color);\r\n-  font-size: 2.5rem;\r\n-  font-weight: 700;\r\n-  margin-bottom: 12px;\r\n+</style>\r\n   display: flex;\r\n-  align-items: center;\r\n-  justify-content: center;\r\n-  gap: 16px;\r\n-}\r\n-\r\n-.page-icon {\r\n-  flex-shrink: 0;\r\n-}\r\n-\r\n-.page-description {\r\n-  color: var(--text-light);\r\n-  font-size: 1.1rem;\r\n-  margin: 0;\r\n-  line-height: 1.5;\r\n-}\r\n-\r\n-.page-description {\r\n-  font-size: 1.2rem;\r\n-  color: rgba(255, 255, 255, 0.8);\r\n-}\r\n-\r\n-.page-content {\r\n-  display: flex;\r\n   flex-direction: column;\r\n   gap: 40px;\r\n }\r\n \r\n"
                },
                {
                    "date": 1752351061347,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -308,9 +308,8 @@\n .btn-icon {\r\n   margin-right: 8px;\r\n }\r\n </style>\r\n-  display: flex;\r\n   flex-direction: column;\r\n   gap: 40px;\r\n }\r\n \r\n"
                },
                {
                    "date": 1752351085434,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -308,9 +308,8 @@\n .btn-icon {\r\n   margin-right: 8px;\r\n }\r\n </style>\r\n-  flex-direction: column;\r\n   gap: 40px;\r\n }\r\n \r\n .upload-section {\r\n"
                },
                {
                    "date": 1752351111732,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -308,9 +308,8 @@\n .btn-icon {\r\n   margin-right: 8px;\r\n }\r\n </style>\r\n-  gap: 40px;\r\n }\r\n \r\n .upload-section {\r\n   display: flex;\r\n"
                },
                {
                    "date": 1752351136360,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -308,9 +308,8 @@\n .btn-icon {\r\n   margin-right: 8px;\r\n }\r\n </style>\r\n-}\r\n \r\n .upload-section {\r\n   display: flex;\r\n   flex-direction: column;\r\n"
                },
                {
                    "date": 1752351162649,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -308,10 +308,8 @@\n .btn-icon {\r\n   margin-right: 8px;\r\n }\r\n </style>\r\n-\r\n-.upload-section {\r\n   display: flex;\r\n   flex-direction: column;\r\n   gap: 40px;\r\n }\r\n"
                },
                {
                    "date": 1752351188728,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -308,9 +308,8 @@\n .btn-icon {\r\n   margin-right: 8px;\r\n }\r\n </style>\r\n-  display: flex;\r\n   flex-direction: column;\r\n   gap: 40px;\r\n }\r\n \r\n"
                },
                {
                    "date": 1752352727427,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -34,10 +34,8 @@\n               @change=\"handleImageChange\"\r\n             />\r\n           </div>\r\n \r\n-          </div>\r\n-\r\n           <div v-if=\"selectedImage\" class=\"mobile-card mobile-mt-3\">\r\n             <!-- å¤„ç†æŒ‰é’® -->\r\n             <van-button\r\n               v-if=\"!isLoading && !resultImage\"\r\n"
                },
                {
                    "date": 1752353493510,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -305,9 +305,10 @@\n \r\n .btn-icon {\r\n   margin-right: 8px;\r\n }\r\n-</style>\r\n+\r\n+.upload-section {\r\n   flex-direction: column;\r\n   gap: 40px;\r\n }\r\n \r\n"
                },
                {
                    "date": 1752354037651,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,28 +1,32 @@\n <template>\r\n-  <div class=\"mobile-page\">\r\n+  <div class=\"feature-page\">\r\n     <!-- å³ä¸Šè§’ç”¨æˆ·ä¿¡æ¯ -->\r\n     <div class=\"top-corner\">\r\n       <UserInfo @login=\"handleUserLogin\" @logout=\"handleUserLogout\" />\r\n     </div>\r\n \r\n-    <div class=\"mobile-container\">\r\n-      <header class=\"mobile-header\">\r\n-        <BackToHomeButton class=\"mobile-header-back\" />\r\n-        <h1 class=\"mobile-header-title\">ä¸€é”®è¤ªè¡£</h1>\r\n-        <div></div>\r\n+    <div class=\"container\">\r\n+      <header class=\"page-header\">\r\n+        <BackToHomeButton class=\"back-btn\" />\r\n+        <h1 class=\"page-title\">\r\n+          <UndressWomanIcon :size=\"32\" color=\"var(--primary-color)\" class=\"page-icon\" />\r\n+          ä¸€é”®è¤ªè¡£\r\n+        </h1>\r\n+        <p class=\"page-description\">ä¸Šä¼ äººç‰©ç…§ç‰‡ï¼ŒAIå°†ä¸ºæ‚¨æ™ºèƒ½ç§»é™¤æœè£…</p>\r\n       </header>\r\n \r\n       <!-- ä½“éªŒç‚¹æ˜¾ç¤º -->\r\n-      <div class=\"mobile-content\">\r\n-        <PointsDisplay ref=\"pointsDisplayRef\" />\r\n+      <PointsDisplay ref=\"pointsDisplayRef\" />\r\n \r\n+      <main class=\"page-content\">\r\n         <div v-if=\"!resultImage\" class=\"upload-section\">\r\n-          <div class=\"mobile-card\">\r\n-            <h3 class=\"mobile-text-title mobile-mb-3\">\r\n-              <UndressWomanIcon :size=\"20\" color=\"var(--van-primary-color)\" class=\"section-icon\" />\r\n+          <div class=\"target-image-section\">\r\n+            <h3 class=\"section-title\">\r\n+              <UndressWomanIcon :size=\"20\" color=\"var(--primary-color)\" class=\"section-icon\" />\r\n               ä¸Šä¼ äººç‰©ç…§ç‰‡\r\n             </h3>\r\n+            <!-- <p class=\"section-description\">ä¸Šä¼ éœ€è¦æ¢è¡£çš„äººç‰©ç…§ç‰‡</p> -->\r\n \r\n             <ImageUpload\r\n               v-model=\"selectedImage\"\r\n               title=\"é€‰æ‹©äººç‰©ç…§ç‰‡\"\r\n@@ -34,47 +38,47 @@\n               @change=\"handleImageChange\"\r\n             />\r\n           </div>\r\n \r\n-          <div v-if=\"selectedImage\" class=\"mobile-card mobile-mt-3\">\r\n+          <div v-if=\"selectedImage\" class=\"action-section\">\r\n             <!-- å¤„ç†æŒ‰é’® -->\r\n             <van-button\r\n               v-if=\"!isLoading && !resultImage\"\r\n               @click=\"processImage\"\r\n               type=\"primary\"\r\n               size=\"large\"\r\n               round\r\n               block\r\n-              class=\"mobile-button mobile-button-primary\"\r\n+              class=\"process-btn\"\r\n             >\r\n               <Shirt :size=\"20\" color=\"white\" class=\"btn-icon\" />\r\n               å¼€å§‹æ¢è¡£\r\n             </van-button>\r\n           </div>\r\n         </div>\r\n \r\n         <!-- å¤„ç†çŠ¶æ€ -->\r\n-        <div v-if=\"isLoading\" class=\"mobile-card\">\r\n-          <ProcessingStatus\r\n-            status=\"loading\"\r\n-            title=\"æ­£åœ¨å¤„ç†æ¢è¡£...\"\r\n-            description=\"è¯·è€å¿ƒç­‰å¾…ï¼Œå¤„ç†æ—¶é—´å¯èƒ½éœ€è¦å‡ åˆ†é’Ÿ\"\r\n+        <ProcessingStatus\r\n+          v-if=\"isLoading\"\r\n+          status=\"loading\"\r\n+          title=\"æ­£åœ¨å¤„ç†æ¢è¡£...\"\r\n+          description=\"è¯·è€å¿ƒç­‰å¾…ï¼Œå¤„ç†æ—¶é—´å¯èƒ½éœ€è¦å‡ åˆ†é’Ÿ\"\r\n           :progress=\"progressPercent\"\r\n           :prompt-id=\"promptId\"\r\n           :processing-time=\"processingTime\"\r\n-          />\r\n-        </div>\r\n+        />\r\n \r\n         <!-- ç»“æœå±•ç¤º -->\r\n-        <div v-if=\"resultImage\" class=\"mobile-card\">\r\n-          <ImageComparison\r\n-            :original-image=\"originalImageForComparison || selectedImage\"\r\n-            :result-image=\"resultImage\"\r\n-            @reset=\"resetProcess\"\r\n-          />\r\n-        </div>\r\n-      </div>\r\n+        <ImageComparison\r\n+          v-if=\"resultImage\"\r\n+          :original-image=\"originalImageForComparison || selectedImage\"\r\n+          :result-image=\"resultImage\"\r\n+          @reset=\"resetProcess\"\r\n+        />\r\n+      </main>\r\n     </div>\r\n+\r\n+\r\n   </div>\r\n </template>\r\n \r\n <script setup>\r\n@@ -290,25 +294,68 @@\n }\r\n </script>\r\n \r\n <style scoped>\r\n-/* ç§»åŠ¨ç«¯ClothesSwapé¡µé¢æ ·å¼ */\r\n+.feature-page {\r\n+  min-height: 100vh;\r\n+  padding: 20px;\r\n+  background: linear-gradient(135deg, var(--bg-primary) 0%, var(--bg-secondary) 100%);\r\n+  position: relative;\r\n+}\r\n+\r\n+/* å³ä¸Šè§’ç”¨æˆ·ä¿¡æ¯ */\r\n .top-corner {\r\n   position: fixed;\r\n   top: 20px;\r\n   right: 20px;\r\n   z-index: 1000;\r\n }\r\n \r\n-.section-icon {\r\n-  margin-right: 8px;\r\n+.container {\r\n+  max-width: 1000px;\r\n+  margin: 0 auto;\r\n }\r\n \r\n-.btn-icon {\r\n-  margin-right: 8px;\r\n+.page-header {\r\n+  text-align: center;\r\n+  margin-bottom: 40px;\r\n }\r\n \r\n+.page-title {\r\n+  color: var(--text-color);\r\n+  font-size: 2.5rem;\r\n+  font-weight: 700;\r\n+  margin-bottom: 12px;\r\n+  display: flex;\r\n+  align-items: center;\r\n+  justify-content: center;\r\n+  gap: 16px;\r\n+}\r\n+\r\n+.page-icon {\r\n+  flex-shrink: 0;\r\n+}\r\n+\r\n+.page-description {\r\n+  color: var(--text-light);\r\n+  font-size: 1.1rem;\r\n+  margin: 0;\r\n+  line-height: 1.5;\r\n+}\r\n+\r\n+.page-description {\r\n+  font-size: 1.2rem;\r\n+  color: rgba(255, 255, 255, 0.8);\r\n+}\r\n+\r\n+.page-content {\r\n+  display: flex;\r\n+  flex-direction: column;\r\n+  gap: 40px;\r\n+}\r\n+\r\n .upload-section {\r\n+  display: flex;\r\n   flex-direction: column;\r\n   gap: 40px;\r\n }\r\n \r\n"
                },
                {
                    "date": 1752354692573,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,21 +1,25 @@\n <template>\r\n-  <div class=\"feature-page\">\r\n-    <!-- å³ä¸Šè§’ç”¨æˆ·ä¿¡æ¯ -->\r\n-    <div class=\"top-corner\">\r\n+  <MobileLayout\r\n+    title=\"ä¸€é”®è¤ªè¡£\"\r\n+    title-icon=\"user-o\"\r\n+    :show-back-button=\"true\"\r\n+  >\r\n+    <template #header-right>\r\n       <UserInfo @login=\"handleUserLogin\" @logout=\"handleUserLogout\" />\r\n+    </template>\r\n+\r\n+    <!-- åŠŸèƒ½ä»‹ç» -->\r\n+    <div class=\"mobile-card\">\r\n+      <div class=\"feature-intro\">\r\n+        <div class=\"intro-icon\">\r\n+          <UndressWomanIcon :size=\"32\" color=\"white\" />\r\n+        </div>\r\n+        <h2 class=\"intro-title\">ä¸€é”®è¤ªè¡£</h2>\r\n+        <p class=\"intro-description\">ä¸Šä¼ äººç‰©ç…§ç‰‡ï¼ŒAIå°†ä¸ºæ‚¨æ™ºèƒ½ç§»é™¤æœè£…</p>\r\n+      </div>\r\n     </div>\r\n \r\n-    <div class=\"container\">\r\n-      <header class=\"page-header\">\r\n-        <BackToHomeButton class=\"back-btn\" />\r\n-        <h1 class=\"page-title\">\r\n-          <UndressWomanIcon :size=\"32\" color=\"var(--primary-color)\" class=\"page-icon\" />\r\n-          ä¸€é”®è¤ªè¡£\r\n-        </h1>\r\n-        <p class=\"page-description\">ä¸Šä¼ äººç‰©ç…§ç‰‡ï¼ŒAIå°†ä¸ºæ‚¨æ™ºèƒ½ç§»é™¤æœè£…</p>\r\n-      </header>\r\n-\r\n       <!-- ä½“éªŒç‚¹æ˜¾ç¤º -->\r\n       <PointsDisplay ref=\"pointsDisplayRef\" />\r\n \r\n       <main class=\"page-content\">\r\n"
                },
                {
                    "date": 1752354727891,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -18,31 +18,33 @@\n         <p class=\"intro-description\">ä¸Šä¼ äººç‰©ç…§ç‰‡ï¼ŒAIå°†ä¸ºæ‚¨æ™ºèƒ½ç§»é™¤æœè£…</p>\r\n       </div>\r\n     </div>\r\n \r\n-      <!-- ä½“éªŒç‚¹æ˜¾ç¤º -->\r\n+    <!-- ä½“éªŒç‚¹æ˜¾ç¤º -->\r\n+    <div class=\"mobile-card\">\r\n       <PointsDisplay ref=\"pointsDisplayRef\" />\r\n+    </div>\r\n \r\n-      <main class=\"page-content\">\r\n-        <div v-if=\"!resultImage\" class=\"upload-section\">\r\n-          <div class=\"target-image-section\">\r\n-            <h3 class=\"section-title\">\r\n-              <UndressWomanIcon :size=\"20\" color=\"var(--primary-color)\" class=\"section-icon\" />\r\n-              ä¸Šä¼ äººç‰©ç…§ç‰‡\r\n-            </h3>\r\n-            <!-- <p class=\"section-description\">ä¸Šä¼ éœ€è¦æ¢è¡£çš„äººç‰©ç…§ç‰‡</p> -->\r\n+    <!-- å›¾ç‰‡ä¸Šä¼ åŒºåŸŸ -->\r\n+    <div v-if=\"!resultImage\" class=\"mobile-card\">\r\n+      <div class=\"mobile-card-header\">\r\n+        <h3 class=\"mobile-card-title\">\r\n+          <UndressWomanIcon :size=\"20\" color=\"var(--primary-color)\" />\r\n+          ä¸Šä¼ äººç‰©ç…§ç‰‡\r\n+        </h3>\r\n+      </div>\r\n \r\n-            <ImageUpload\r\n-              v-model=\"selectedImage\"\r\n-              title=\"é€‰æ‹©äººç‰©ç…§ç‰‡\"\r\n-              description=\"æ”¯æŒ JPGã€PNG æ ¼å¼ï¼Œå»ºè®®å°ºå¯¸ 512x512 ä»¥ä¸Š\"\r\n-              icon=\"Image\"\r\n-              :icon-size=\"48\"\r\n-              :min-height=\"300\"\r\n-              :disabled=\"isLoading\"\r\n-              @change=\"handleImageChange\"\r\n-            />\r\n-          </div>\r\n+      <ImageUpload\r\n+        v-model=\"selectedImage\"\r\n+        title=\"é€‰æ‹©äººç‰©ç…§ç‰‡\"\r\n+        description=\"æ”¯æŒ JPGã€PNG æ ¼å¼ï¼Œå»ºè®®å°ºå¯¸ 512x512 ä»¥ä¸Š\"\r\n+        icon=\"Image\"\r\n+        :icon-size=\"48\"\r\n+        :min-height=\"300\"\r\n+        :disabled=\"isLoading\"\r\n+        @change=\"handleImageChange\"\r\n+      />\r\n+    </div>\r\n \r\n           <div v-if=\"selectedImage\" class=\"action-section\">\r\n             <!-- å¤„ç†æŒ‰é’® -->\r\n             <van-button\r\n"
                },
                {
                    "date": 1752354758219,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -44,24 +44,23 @@\n         @change=\"handleImageChange\"\r\n       />\r\n     </div>\r\n \r\n-          <div v-if=\"selectedImage\" class=\"action-section\">\r\n-            <!-- å¤„ç†æŒ‰é’® -->\r\n-            <van-button\r\n-              v-if=\"!isLoading && !resultImage\"\r\n-              @click=\"processImage\"\r\n-              type=\"primary\"\r\n-              size=\"large\"\r\n-              round\r\n-              block\r\n-              class=\"process-btn\"\r\n-            >\r\n-              <Shirt :size=\"20\" color=\"white\" class=\"btn-icon\" />\r\n-              å¼€å§‹æ¢è¡£\r\n-            </van-button>\r\n-          </div>\r\n-        </div>\r\n+    <!-- æ“ä½œæŒ‰é’® -->\r\n+    <div v-if=\"selectedImage && !resultImage\" class=\"mobile-card\">\r\n+      <van-button\r\n+        v-if=\"!isLoading\"\r\n+        @click=\"processImage\"\r\n+        type=\"primary\"\r\n+        size=\"large\"\r\n+        round\r\n+        block\r\n+        class=\"mobile-btn mobile-btn-primary\"\r\n+      >\r\n+        <Shirt :size=\"20\" color=\"white\" class=\"btn-icon\" />\r\n+        å¼€å§‹æ¢è¡£\r\n+      </van-button>\r\n+    </div>\r\n \r\n         <!-- å¤„ç†çŠ¶æ€ -->\r\n         <ProcessingStatus\r\n           v-if=\"isLoading\"\r\n"
                },
                {
                    "date": 1752354797419,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -60,31 +60,36 @@\n         å¼€å§‹æ¢è¡£\r\n       </van-button>\r\n     </div>\r\n \r\n-        <!-- å¤„ç†çŠ¶æ€ -->\r\n-        <ProcessingStatus\r\n-          v-if=\"isLoading\"\r\n-          status=\"loading\"\r\n-          title=\"æ­£åœ¨å¤„ç†æ¢è¡£...\"\r\n-          description=\"è¯·è€å¿ƒç­‰å¾…ï¼Œå¤„ç†æ—¶é—´å¯èƒ½éœ€è¦å‡ åˆ†é’Ÿ\"\r\n-          :progress=\"progressPercent\"\r\n-          :prompt-id=\"promptId\"\r\n-          :processing-time=\"processingTime\"\r\n-        />\r\n-\r\n-        <!-- ç»“æœå±•ç¤º -->\r\n-        <ImageComparison\r\n-          v-if=\"resultImage\"\r\n-          :original-image=\"originalImageForComparison || selectedImage\"\r\n-          :result-image=\"resultImage\"\r\n-          @reset=\"resetProcess\"\r\n-        />\r\n-      </main>\r\n+    <!-- å¤„ç†çŠ¶æ€ -->\r\n+    <div v-if=\"isLoading\" class=\"mobile-card\">\r\n+      <ProcessingStatus\r\n+        status=\"loading\"\r\n+        title=\"æ­£åœ¨å¤„ç†æ¢è¡£...\"\r\n+        description=\"è¯·è€å¿ƒç­‰å¾…ï¼Œå¤„ç†æ—¶é—´å¯èƒ½éœ€è¦å‡ åˆ†é’Ÿ\"\r\n+        :progress=\"progressPercent\"\r\n+        :prompt-id=\"promptId\"\r\n+        :processing-time=\"processingTime\"\r\n+      />\r\n     </div>\r\n \r\n+    <!-- ç»“æœå±•ç¤º -->\r\n+    <div v-if=\"resultImage\" class=\"mobile-card\">\r\n+      <div class=\"mobile-card-header\">\r\n+        <h3 class=\"mobile-card-title\">\r\n+          <van-icon name=\"photo-o\" size=\"20\" />\r\n+          å¤„ç†ç»“æœ\r\n+        </h3>\r\n+      </div>\r\n \r\n-  </div>\r\n+      <ImageComparison\r\n+        :original-image=\"originalImageForComparison || selectedImage\"\r\n+        :result-image=\"resultImage\"\r\n+        @reset=\"resetProcess\"\r\n+      />\r\n+    </div>\r\n+  </MobileLayout>\r\n </template>\r\n \r\n <script setup>\r\n import { ref, onMounted, onUnmounted } from 'vue'\r\n"
                },
                {
                    "date": 1752354811872,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -93,14 +93,15 @@\n \r\n <script setup>\r\n import { ref, onMounted, onUnmounted } from 'vue'\r\n import { Toast } from 'vant'\r\n+import { Shirt } from 'lucide-vue-next'\r\n+import MobileLayout from '../components/MobileLayout.vue'\r\n import ImageUpload from '../components/ImageUpload.vue'\r\n import ProcessingStatus from '../components/ProcessingStatus.vue'\r\n import ImageComparison from '../components/ImageComparison.vue'\r\n import PointsDisplay from '../components/PointsDisplay.vue'\r\n import UserInfo from '../components/UserInfo.vue'\r\n-import BackToHomeButton from '../components/BackToHomeButton.vue'\r\n \r\n import { UndressWomanIcon } from '../components/icons'\r\n \r\n // é™æ€å¯¼å…¥ComfyUIæœåŠ¡\r\n"
                },
                {
                    "date": 1752354835522,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -795,9 +795,49 @@\n   justify-content: center;\r\n   gap: 8px;\r\n }\r\n \r\n+/* ç§»åŠ¨ç«¯æ ·å¼ */\r\n+.feature-intro {\r\n+  text-align: center;\r\n+  padding: 20px;\r\n+}\r\n+\r\n+.intro-icon {\r\n+  width: 64px;\r\n+  height: 64px;\r\n+  border-radius: 16px;\r\n+  background: var(--gradient-primary);\r\n+  display: flex;\r\n+  align-items: center;\r\n+  justify-content: center;\r\n+  margin: 0 auto 16px;\r\n+  box-shadow: var(--mobile-shadow-lg);\r\n+}\r\n+\r\n+.intro-title {\r\n+  font-size: 20px;\r\n+  font-weight: 600;\r\n+  color: var(--text-color);\r\n+  margin: 0 0 8px 0;\r\n+}\r\n+\r\n+.intro-description {\r\n+  font-size: 14px;\r\n+  color: var(--text-light);\r\n+  margin: 0;\r\n+  line-height: 1.5;\r\n+}\r\n+\r\n+.result-actions {\r\n+  margin-top: 20px;\r\n+}\r\n+\r\n .btn-icon {\r\n+  margin-right: 8px;\r\n+}\r\n+\r\n+.btn-icon {\r\n   flex-shrink: 0;\r\n }\r\n \r\n /* åŠ¨ç”»å·²ç§»è‡³ shared.css */\r\n"
                },
                {
                    "date": 1752368903160,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,107 +1,96 @@\n <template>\r\n-  <MobileLayout\r\n-    title=\"ä¸€é”®è¤ªè¡£\"\r\n-    title-icon=\"user-o\"\r\n-    :show-back-button=\"true\"\r\n-  >\r\n-    <template #header-right>\r\n+  <div class=\"feature-page\">\r\n+    <!-- å³ä¸Šè§’ç”¨æˆ·ä¿¡æ¯ -->\r\n+    <div class=\"top-corner\">\r\n       <UserInfo @login=\"handleUserLogin\" @logout=\"handleUserLogout\" />\r\n-    </template>\r\n-\r\n-    <!-- åŠŸèƒ½ä»‹ç» -->\r\n-    <div class=\"mobile-card\">\r\n-      <div class=\"feature-intro\">\r\n-        <div class=\"intro-icon\">\r\n-          <UndressWomanIcon :size=\"32\" color=\"white\" />\r\n-        </div>\r\n-        <h2 class=\"intro-title\">ä¸€é”®è¤ªè¡£</h2>\r\n-        <p class=\"intro-description\">ä¸Šä¼ äººç‰©ç…§ç‰‡ï¼ŒAIå°†ä¸ºæ‚¨æ™ºèƒ½ç§»é™¤æœè£…</p>\r\n-      </div>\r\n     </div>\r\n \r\n-    <!-- ä½“éªŒç‚¹æ˜¾ç¤º -->\r\n-    <div class=\"mobile-card\">\r\n+    <div class=\"container\">\r\n+      <header class=\"page-header\">\r\n+        <BackToHomeButton class=\"back-btn\" />\r\n+        <h1 class=\"page-title\">\r\n+          <UndressWomanIcon :size=\"32\" color=\"var(--primary-color)\" class=\"page-icon\" />\r\n+          ä¸€é”®è¤ªè¡£\r\n+        </h1>\r\n+        <p class=\"page-description\">ä¸Šä¼ äººç‰©ç…§ç‰‡ï¼ŒAIå°†ä¸ºæ‚¨æ™ºèƒ½ç§»é™¤æœè£…</p>\r\n+      </header>\r\n+\r\n+      <!-- ä½“éªŒç‚¹æ˜¾ç¤º -->\r\n       <PointsDisplay ref=\"pointsDisplayRef\" />\r\n-    </div>\r\n \r\n-    <!-- å›¾ç‰‡ä¸Šä¼ åŒºåŸŸ -->\r\n-    <div v-if=\"!resultImage\" class=\"mobile-card\">\r\n-      <div class=\"mobile-card-header\">\r\n-        <h3 class=\"mobile-card-title\">\r\n-          <UndressWomanIcon :size=\"20\" color=\"var(--primary-color)\" />\r\n-          ä¸Šä¼ äººç‰©ç…§ç‰‡\r\n-        </h3>\r\n-      </div>\r\n+      <main class=\"page-content\">\r\n+        <div v-if=\"!resultImage\" class=\"upload-section\">\r\n+          <div class=\"target-image-section\">\r\n+            <h3 class=\"section-title\">\r\n+              <UndressWomanIcon :size=\"20\" color=\"var(--primary-color)\" class=\"section-icon\" />\r\n+              ä¸Šä¼ äººç‰©ç…§ç‰‡\r\n+            </h3>\r\n+            <!-- <p class=\"section-description\">ä¸Šä¼ éœ€è¦æ¢è¡£çš„äººç‰©ç…§ç‰‡</p> -->\r\n \r\n-      <ImageUpload\r\n-        v-model=\"selectedImage\"\r\n-        title=\"é€‰æ‹©äººç‰©ç…§ç‰‡\"\r\n-        description=\"æ”¯æŒ JPGã€PNG æ ¼å¼ï¼Œå»ºè®®å°ºå¯¸ 512x512 ä»¥ä¸Š\"\r\n-        icon=\"Image\"\r\n-        :icon-size=\"48\"\r\n-        :min-height=\"300\"\r\n-        :disabled=\"isLoading\"\r\n-        @change=\"handleImageChange\"\r\n-      />\r\n-    </div>\r\n+            <ImageUpload\r\n+              v-model=\"selectedImage\"\r\n+              title=\"é€‰æ‹©äººç‰©ç…§ç‰‡\"\r\n+              description=\"æ”¯æŒ JPGã€PNG æ ¼å¼ï¼Œå»ºè®®å°ºå¯¸ 512x512 ä»¥ä¸Š\"\r\n+              icon=\"Image\"\r\n+              :icon-size=\"48\"\r\n+              :min-height=\"300\"\r\n+              :disabled=\"isLoading\"\r\n+              @change=\"handleImageChange\"\r\n+            />\r\n+          </div>\r\n \r\n-    <!-- æ“ä½œæŒ‰é’® -->\r\n-    <div v-if=\"selectedImage && !resultImage\" class=\"mobile-card\">\r\n-      <van-button\r\n-        v-if=\"!isLoading\"\r\n-        @click=\"processImage\"\r\n-        type=\"primary\"\r\n-        size=\"large\"\r\n-        round\r\n-        block\r\n-        class=\"mobile-btn mobile-btn-primary\"\r\n-      >\r\n-        <Shirt :size=\"20\" color=\"white\" class=\"btn-icon\" />\r\n-        å¼€å§‹æ¢è¡£\r\n-      </van-button>\r\n-    </div>\r\n+          <div v-if=\"selectedImage\" class=\"action-section\">\r\n+            <!-- å¤„ç†æŒ‰é’® -->\r\n+            <van-button\r\n+              v-if=\"!isLoading && !resultImage\"\r\n+              @click=\"processImage\"\r\n+              type=\"primary\"\r\n+              size=\"large\"\r\n+              round\r\n+              block\r\n+              class=\"process-btn\"\r\n+            >\r\n+              <Shirt :size=\"20\" color=\"white\" class=\"btn-icon\" />\r\n+              å¼€å§‹æ¢è¡£\r\n+            </van-button>\r\n+          </div>\r\n+        </div>\r\n \r\n-    <!-- å¤„ç†çŠ¶æ€ -->\r\n-    <div v-if=\"isLoading\" class=\"mobile-card\">\r\n-      <ProcessingStatus\r\n-        status=\"loading\"\r\n-        title=\"æ­£åœ¨å¤„ç†æ¢è¡£...\"\r\n-        description=\"è¯·è€å¿ƒç­‰å¾…ï¼Œå¤„ç†æ—¶é—´å¯èƒ½éœ€è¦å‡ åˆ†é’Ÿ\"\r\n-        :progress=\"progressPercent\"\r\n-        :prompt-id=\"promptId\"\r\n-        :processing-time=\"processingTime\"\r\n-      />\r\n+        <!-- å¤„ç†çŠ¶æ€ -->\r\n+        <ProcessingStatus\r\n+          v-if=\"isLoading\"\r\n+          status=\"loading\"\r\n+          title=\"æ­£åœ¨å¤„ç†æ¢è¡£...\"\r\n+          description=\"è¯·è€å¿ƒç­‰å¾…ï¼Œå¤„ç†æ—¶é—´å¯èƒ½éœ€è¦å‡ åˆ†é’Ÿ\"\r\n+          :progress=\"progressPercent\"\r\n+          :prompt-id=\"promptId\"\r\n+          :processing-time=\"processingTime\"\r\n+        />\r\n+\r\n+        <!-- ç»“æœå±•ç¤º -->\r\n+        <ImageComparison\r\n+          v-if=\"resultImage\"\r\n+          :original-image=\"originalImageForComparison || selectedImage\"\r\n+          :result-image=\"resultImage\"\r\n+          @reset=\"resetProcess\"\r\n+        />\r\n+      </main>\r\n     </div>\r\n \r\n-    <!-- ç»“æœå±•ç¤º -->\r\n-    <div v-if=\"resultImage\" class=\"mobile-card\">\r\n-      <div class=\"mobile-card-header\">\r\n-        <h3 class=\"mobile-card-title\">\r\n-          <van-icon name=\"photo-o\" size=\"20\" />\r\n-          å¤„ç†ç»“æœ\r\n-        </h3>\r\n-      </div>\r\n \r\n-      <ImageComparison\r\n-        :original-image=\"originalImageForComparison || selectedImage\"\r\n-        :result-image=\"resultImage\"\r\n-        @reset=\"resetProcess\"\r\n-      />\r\n-    </div>\r\n-  </MobileLayout>\r\n+  </div>\r\n </template>\r\n \r\n <script setup>\r\n import { ref, onMounted, onUnmounted } from 'vue'\r\n import { Toast } from 'vant'\r\n-import { Shirt } from 'lucide-vue-next'\r\n-import MobileLayout from '../components/MobileLayout.vue'\r\n import ImageUpload from '../components/ImageUpload.vue'\r\n import ProcessingStatus from '../components/ProcessingStatus.vue'\r\n import ImageComparison from '../components/ImageComparison.vue'\r\n import PointsDisplay from '../components/PointsDisplay.vue'\r\n import UserInfo from '../components/UserInfo.vue'\r\n+import BackToHomeButton from '../components/BackToHomeButton.vue'\r\n \r\n import { UndressWomanIcon } from '../components/icons'\r\n \r\n // é™æ€å¯¼å…¥ComfyUIæœåŠ¡\r\n@@ -795,49 +784,9 @@\n   justify-content: center;\r\n   gap: 8px;\r\n }\r\n \r\n-/* ç§»åŠ¨ç«¯æ ·å¼ */\r\n-.feature-intro {\r\n-  text-align: center;\r\n-  padding: 20px;\r\n-}\r\n-\r\n-.intro-icon {\r\n-  width: 64px;\r\n-  height: 64px;\r\n-  border-radius: 16px;\r\n-  background: var(--gradient-primary);\r\n-  display: flex;\r\n-  align-items: center;\r\n-  justify-content: center;\r\n-  margin: 0 auto 16px;\r\n-  box-shadow: var(--mobile-shadow-lg);\r\n-}\r\n-\r\n-.intro-title {\r\n-  font-size: 20px;\r\n-  font-weight: 600;\r\n-  color: var(--text-color);\r\n-  margin: 0 0 8px 0;\r\n-}\r\n-\r\n-.intro-description {\r\n-  font-size: 14px;\r\n-  color: var(--text-light);\r\n-  margin: 0;\r\n-  line-height: 1.5;\r\n-}\r\n-\r\n-.result-actions {\r\n-  margin-top: 20px;\r\n-}\r\n-\r\n .btn-icon {\r\n-  margin-right: 8px;\r\n-}\r\n-\r\n-.btn-icon {\r\n   flex-shrink: 0;\r\n }\r\n \r\n /* åŠ¨ç”»å·²ç§»è‡³ shared.css */\r\n"
                }
            ],
            "date": 1752348776465,
            "name": "Commit-0",
            "content": "<template>\r\n  <div class=\"feature-page\">\r\n    <!-- å³ä¸Šè§’ç”¨æˆ·ä¿¡æ¯ -->\r\n    <div class=\"top-corner\">\r\n      <UserInfo @login=\"handleUserLogin\" @logout=\"handleUserLogout\" />\r\n    </div>\r\n\r\n    <div class=\"container\">\r\n      <header class=\"page-header\">\r\n        <BackToHomeButton class=\"back-btn\" />\r\n        <h1 class=\"page-title\">\r\n          <UndressWomanIcon :size=\"32\" color=\"var(--primary-color)\" class=\"page-icon\" />\r\n          ä¸€é”®è¤ªè¡£\r\n        </h1>\r\n        <p class=\"page-description\">ä¸Šä¼ äººç‰©ç…§ç‰‡ï¼ŒAIå°†ä¸ºæ‚¨æ™ºèƒ½ç§»é™¤æœè£…</p>\r\n      </header>\r\n\r\n      <!-- ä½“éªŒç‚¹æ˜¾ç¤º -->\r\n      <PointsDisplay ref=\"pointsDisplayRef\" />\r\n\r\n      <main class=\"page-content\">\r\n        <div v-if=\"!resultImage\" class=\"upload-section\">\r\n          <div class=\"target-image-section\">\r\n            <h3 class=\"section-title\">\r\n              <UndressWomanIcon :size=\"20\" color=\"var(--primary-color)\" class=\"section-icon\" />\r\n              ä¸Šä¼ äººç‰©ç…§ç‰‡\r\n            </h3>\r\n            <!-- <p class=\"section-description\">ä¸Šä¼ éœ€è¦æ¢è¡£çš„äººç‰©ç…§ç‰‡</p> -->\r\n\r\n            <ImageUpload\r\n              v-model=\"selectedImage\"\r\n              title=\"é€‰æ‹©äººç‰©ç…§ç‰‡\"\r\n              description=\"æ”¯æŒ JPGã€PNG æ ¼å¼ï¼Œå»ºè®®å°ºå¯¸ 512x512 ä»¥ä¸Š\"\r\n              icon=\"Image\"\r\n              :icon-size=\"48\"\r\n              :min-height=\"300\"\r\n              :disabled=\"isLoading\"\r\n              @change=\"handleImageChange\"\r\n            />\r\n          </div>\r\n\r\n          <div v-if=\"selectedImage\" class=\"action-section\">\r\n            <!-- å¤„ç†æŒ‰é’® -->\r\n            <van-button\r\n              v-if=\"!isLoading && !resultImage\"\r\n              @click=\"processImage\"\r\n              type=\"primary\"\r\n              size=\"large\"\r\n              round\r\n              block\r\n              class=\"process-btn\"\r\n            >\r\n              <Shirt :size=\"20\" color=\"white\" class=\"btn-icon\" />\r\n              å¼€å§‹æ¢è¡£\r\n            </van-button>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- å¤„ç†çŠ¶æ€ -->\r\n        <ProcessingStatus\r\n          v-if=\"isLoading\"\r\n          status=\"loading\"\r\n          title=\"æ­£åœ¨å¤„ç†æ¢è¡£...\"\r\n          description=\"è¯·è€å¿ƒç­‰å¾…ï¼Œå¤„ç†æ—¶é—´å¯èƒ½éœ€è¦å‡ åˆ†é’Ÿ\"\r\n          :progress=\"progressPercent\"\r\n          :prompt-id=\"promptId\"\r\n          :processing-time=\"processingTime\"\r\n        />\r\n\r\n        <!-- ç»“æœå±•ç¤º -->\r\n        <ImageComparison\r\n          v-if=\"resultImage\"\r\n          :original-image=\"originalImageForComparison || selectedImage\"\r\n          :result-image=\"resultImage\"\r\n          @reset=\"resetProcess\"\r\n        />\r\n      </main>\r\n    </div>\r\n\r\n\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted, onUnmounted } from 'vue'\r\nimport { Toast } from 'vant'\r\nimport ImageUpload from '../components/ImageUpload.vue'\r\nimport ProcessingStatus from '../components/ProcessingStatus.vue'\r\nimport ImageComparison from '../components/ImageComparison.vue'\r\nimport PointsDisplay from '../components/PointsDisplay.vue'\r\nimport UserInfo from '../components/UserInfo.vue'\r\n\r\nimport { UndressWomanIcon } from '../components/icons'\r\n\r\n// é™æ€å¯¼å…¥ComfyUIæœåŠ¡\r\nimport { processUndressImage } from '../services/comfyui.js'\r\n\r\nconsole.log('ClothesSwapç»„ä»¶å·²åŠ è½½ï¼ŒComfyUIæœåŠ¡å·²å¯¼å…¥')\r\n\r\nconst selectedImage = ref(null)\r\nconst originalImageForComparison = ref(null) // æ–°å¢ï¼šç”¨äºå¯¹æ¯”çš„åŸå›¾ï¼ˆèŠ‚ç‚¹49ï¼‰\r\nconst resultImage = ref(null)\r\nconst isLoading = ref(false)\r\nconst processingStatus = ref('')\r\nconst promptId = ref('')\r\nconst processingTime = ref('')\r\nconst progressPercent = ref(0) // æ–°å¢ï¼šå¤„ç†è¿›åº¦ç™¾åˆ†æ¯”\r\n\r\n// æ‹–æ‹½å¯¹æ¯”åŠŸèƒ½\r\nconst sliderPosition = ref(50) // æ»‘å—ä½ç½®ç™¾åˆ†æ¯”\r\nconst isDragging = ref(false)\r\nconst comparisonContainer = ref(null)\r\nconst startTime = ref(null)\r\n\r\n// ä½“éªŒç‚¹ç»„ä»¶å¼•ç”¨\r\nconst pointsDisplayRef = ref(null)\r\n\r\n// ä½¿ç”¨VantUI Toastç³»ç»Ÿ\r\n\r\nconst handleImageChange = (imageData, file) => {\r\n  selectedImage.value = imageData\r\n  resultImage.value = null // æ¸…é™¤ä¹‹å‰çš„ç»“æœ\r\n  // ä¸å†è‡ªåŠ¨å¤„ç†ï¼Œç­‰å¾…ç”¨æˆ·ç‚¹å‡»æŒ‰é’®\r\n}\r\n\r\nconst processImage = async () => {\r\n  if (!selectedImage.value) return\r\n\r\n  isLoading.value = true\r\n  processingStatus.value = 'æ­£åœ¨åŠ è½½æœåŠ¡...'\r\n  progressPercent.value = 10\r\n  startTime.value = Date.now()\r\n\r\n  try {\r\n    console.log('ğŸš€ å¼€å§‹ä¸€é”®æ¢è¡£å¤„ç†')\r\n\r\n    // ComfyUIæœåŠ¡å·²é™æ€å¯¼å…¥ï¼Œæ— éœ€åŠ¨æ€åŠ è½½\r\n\r\n    processingStatus.value = 'å¼€å§‹å¤„ç†å›¾ç‰‡...'\r\n    progressPercent.value = 30\r\n\r\n    // è°ƒç”¨çœŸå®çš„ComfyUI API\r\n    processingStatus.value = 'æ­£åœ¨å¤„ç†å›¾ç‰‡...'\r\n    progressPercent.value = 50\r\n\r\n    const result = await processUndressImage(selectedImage.value)\r\n    progressPercent.value = 90\r\n\r\n    if (result && result.success) {\r\n      resultImage.value = result.resultImage\r\n      // è®¾ç½®ç”¨äºå¯¹æ¯”çš„åŸå›¾ï¼ˆä¼˜å…ˆä½¿ç”¨èŠ‚ç‚¹49çš„å›¾ç‰‡ï¼Œå¦åˆ™ä½¿ç”¨ç”¨æˆ·ä¸Šä¼ çš„å›¾ç‰‡ï¼‰\r\n      originalImageForComparison.value = result.originalImage || selectedImage.value\r\n      promptId.value = result.promptId || ''\r\n      processingStatus.value = 'å¤„ç†å®Œæˆï¼'\r\n      progressPercent.value = 100\r\n\r\n      // è®¡ç®—å¤„ç†æ—¶é—´\r\n      if (startTime.value) {\r\n        const duration = Math.round((Date.now() - startTime.value) / 1000)\r\n        processingTime.value = `${duration}ç§’`\r\n      }\r\n\r\n      // æ›´æ–°ä½“éªŒç‚¹æ˜¾ç¤º\r\n      if (pointsDisplayRef.value) {\r\n        pointsDisplayRef.value.updatePointsStatus()\r\n      }\r\n\r\n      // æ˜¾ç¤ºæˆåŠŸtoast\r\n      const pointsInfo = result.pointsConsumed ? `ï¼ˆæ¶ˆè€—${result.pointsConsumed}ç‚¹ï¼‰` : ''\r\n      Toast.success(`ğŸ‰ å¤„ç†å®Œæˆï¼${pointsInfo}å¯ä»¥æ‹–æ‹½ä¸­é—´çº¿å¯¹æ¯”æ•ˆæœ`)\r\n\r\n      console.log('ğŸ‰ æ¢è¡£å¤„ç†æˆåŠŸ')\r\n    } else {\r\n      throw new Error(result?.error || 'å¤„ç†å¤±è´¥')\r\n    }\r\n\r\n  } catch (error) {\r\n    console.error('âŒ å¤„ç†å¤±è´¥:', error)\r\n    processingStatus.value = `âŒ å¤„ç†å¤±è´¥: ${error.message}`\r\n    progressPercent.value = 0\r\n\r\n    // æ˜¾ç¤ºç”¨æˆ·å‹å¥½çš„é”™è¯¯ä¿¡æ¯\r\n    let errorMessage = 'å¤„ç†å¤±è´¥ï¼Œè¯·é‡è¯•'\r\n    if (error.message.includes('ä¸Šä¼ ')) {\r\n      errorMessage = 'å›¾ç‰‡ä¸Šä¼ å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿æ¥'\r\n    } else if (error.message.includes('è¶…æ—¶')) {\r\n      errorMessage = 'å¤„ç†è¶…æ—¶ï¼Œè¯·ç¨åé‡è¯•'\r\n    } else if (error.message.includes('å·¥ä½œæµ')) {\r\n      errorMessage = 'æœåŠ¡å™¨å¤„ç†å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•'\r\n    } else if (error.message.includes('ç½‘ç»œ')) {\r\n      errorMessage = 'ç½‘ç»œè¿æ¥å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œ'\r\n    } else if (error.message.includes('åŠ è½½')) {\r\n      errorMessage = 'æœåŠ¡åŠ è½½å¤±è´¥ï¼Œè¯·åˆ·æ–°é¡µé¢é‡è¯•'\r\n    }\r\n\r\n    Toast.fail(errorMessage)\r\n  } finally {\r\n    isLoading.value = false\r\n    progressPercent.value = 0\r\n  }\r\n}\r\n\r\n// ToaståŠŸèƒ½å·²ç§»è‡³useToastç»„åˆå¼å‡½æ•°\r\n\r\n// æ‹–æ‹½å¯¹æ¯”åŠŸèƒ½\r\nconst startDragging = (event) => {\r\n  event.preventDefault()\r\n  isDragging.value = true\r\n\r\n  const moveHandler = (e) => {\r\n    if (!isDragging.value || !comparisonContainer.value) return\r\n\r\n    const rect = comparisonContainer.value.getBoundingClientRect()\r\n    const clientX = e.clientX || (e.touches && e.touches[0].clientX)\r\n    const x = clientX - rect.left\r\n    const percentage = Math.max(0, Math.min(100, (x / rect.width) * 100))\r\n\r\n    sliderPosition.value = percentage\r\n  }\r\n\r\n  const stopDragging = () => {\r\n    isDragging.value = false\r\n    document.removeEventListener('mousemove', moveHandler)\r\n    document.removeEventListener('mouseup', stopDragging)\r\n    document.removeEventListener('touchmove', moveHandler)\r\n    document.removeEventListener('touchend', stopDragging)\r\n  }\r\n\r\n  document.addEventListener('mousemove', moveHandler)\r\n  document.addEventListener('mouseup', stopDragging)\r\n  document.addEventListener('touchmove', moveHandler)\r\n  document.addEventListener('touchend', stopDragging)\r\n}\r\n\r\n// ä¸‹è½½ç»“æœå›¾ç‰‡\r\nconst downloadResult = () => {\r\n  if (!resultImage.value) return\r\n\r\n  const link = document.createElement('a')\r\n  link.href = resultImage.value\r\n  link.download = `clothes-swap-result-${Date.now()}.jpg`\r\n  document.body.appendChild(link)\r\n  link.click()\r\n  document.body.removeChild(link)\r\n}\r\n\r\nconst resetProcess = () => {\r\n  selectedImage.value = null\r\n  resultImage.value = null\r\n  processingStatus.value = ''\r\n  promptId.value = ''\r\n  processingTime.value = ''\r\n  sliderPosition.value = 50\r\n  startTime.value = null\r\n\r\n  // æ¸…é™¤æ–‡ä»¶è¾“å…¥\r\n  const fileInput = document.getElementById('image-upload')\r\n  if (fileInput) {\r\n    fileInput.value = ''\r\n  }\r\n}\r\n\r\n// é”®ç›˜å¿«æ·é”®æ”¯æŒ\r\nconst handleKeyPress = (event) => {\r\n  if (!resultImage.value) return\r\n\r\n  if (event.key === 'ArrowLeft') {\r\n    sliderPosition.value = Math.max(0, sliderPosition.value - 5)\r\n  } else if (event.key === 'ArrowRight') {\r\n    sliderPosition.value = Math.min(100, sliderPosition.value + 5)\r\n  }\r\n}\r\n\r\n// ç”Ÿå‘½å‘¨æœŸé’©å­\r\nonMounted(() => {\r\n  document.addEventListener('keydown', handleKeyPress)\r\n})\r\n\r\nonUnmounted(() => {\r\n  document.removeEventListener('keydown', handleKeyPress)\r\n})\r\n\r\n// ç”¨æˆ·ç™»å½•æˆåŠŸå›è°ƒ\r\nconst handleUserLogin = (data) => {\r\n  console.log('ç”¨æˆ·ç™»å½•æˆåŠŸ:', data)\r\n  // å¯ä»¥åœ¨è¿™é‡Œè§¦å‘ä¸€äº›éœ€è¦ç™»å½•çŠ¶æ€çš„æ“ä½œ\r\n}\r\n\r\n// ç”¨æˆ·ç™»å‡ºå›è°ƒ\r\nconst handleUserLogout = () => {\r\n  console.log('ç”¨æˆ·å·²ç™»å‡º')\r\n  // å¯ä»¥åœ¨è¿™é‡Œæ¸…ç†ä¸€äº›ç”¨æˆ·ç›¸å…³çš„çŠ¶æ€\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.feature-page {\r\n  min-height: 100vh;\r\n  padding: 20px;\r\n  background: linear-gradient(135deg, var(--bg-primary) 0%, var(--bg-secondary) 100%);\r\n  position: relative;\r\n}\r\n\r\n/* å³ä¸Šè§’ç”¨æˆ·ä¿¡æ¯ */\r\n.top-corner {\r\n  position: fixed;\r\n  top: 20px;\r\n  right: 20px;\r\n  z-index: 1000;\r\n}\r\n\r\n.container {\r\n  max-width: 1000px;\r\n  margin: 0 auto;\r\n}\r\n\r\n.page-header {\r\n  text-align: center;\r\n  margin-bottom: 40px;\r\n}\r\n\r\n.page-title {\r\n  color: var(--text-color);\r\n  font-size: 2.5rem;\r\n  font-weight: 700;\r\n  margin-bottom: 12px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  gap: 16px;\r\n}\r\n\r\n.page-icon {\r\n  flex-shrink: 0;\r\n}\r\n\r\n.page-description {\r\n  color: var(--text-light);\r\n  font-size: 1.1rem;\r\n  margin: 0;\r\n  line-height: 1.5;\r\n}\r\n\r\n.page-description {\r\n  font-size: 1.2rem;\r\n  color: rgba(255, 255, 255, 0.8);\r\n}\r\n\r\n.page-content {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 40px;\r\n}\r\n\r\n.upload-section {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 40px;\r\n}\r\n\r\n/* ç›®æ ‡å›¾ç‰‡åŒºåŸŸæ ·å¼ - ä¸æ¢è„¸é¡µé¢ä¿æŒä¸€è‡´ */\r\n.target-image-section {\r\n  background: var(--bg-card);\r\n  border: 1px solid var(--border-color);\r\n  border-radius: 20px;\r\n  padding: 32px;\r\n  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);\r\n}\r\n\r\n.section-title {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 12px;\r\n  margin: 0 0 12px 0;\r\n  font-size: 1.5rem;\r\n  font-weight: 600;\r\n  color: var(--text-color);\r\n}\r\n\r\n.section-icon {\r\n  flex-shrink: 0;\r\n}\r\n\r\n.section-description {\r\n  margin: 0 0 24px 0;\r\n  color: var(--text-light);\r\n  font-size: 1rem;\r\n  line-height: 1.5;\r\n}\r\n\r\n.upload-card {\r\n  background: var(--bg-card);\r\n  border: 1px solid var(--border-color);\r\n  border-radius: 20px;\r\n  padding: 32px;\r\n  box-shadow: var(--shadow);\r\n  color: var(--text-color);\r\n}\r\n\r\n.hidden {\r\n  display: none;\r\n}\r\n\r\n.upload-area {\r\n  display: block;\r\n  cursor: pointer;\r\n  border: 3px dashed var(--border-color);\r\n  border-radius: 16px;\r\n  padding: 40px;\r\n  text-align: center;\r\n  transition: var(--transition);\r\n  min-width: 400px;\r\n  min-height: 300px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n\r\n.upload-area:hover {\r\n  border-color: var(--primary-color);\r\n  background: rgba(102, 126, 234, 0.05);\r\n}\r\n\r\n.upload-placeholder h3 {\r\n  margin: 16px 0 8px;\r\n  color: var(--text-color);\r\n}\r\n\r\n.upload-placeholder p {\r\n  color: var(--text-light);\r\n  font-size: 0.9rem;\r\n}\r\n\r\n.upload-icon {\r\n  font-size: 4rem;\r\n  margin-bottom: 16px;\r\n}\r\n\r\n.image-preview {\r\n  position: relative;\r\n  border-radius: 12px;\r\n  overflow: hidden;\r\n}\r\n\r\n/* ç§»é™¤é¢„è§ˆå›¾ç‰‡çš„é«˜åº¦é™åˆ¶ï¼Œè®©ImageUploadç»„ä»¶è‡ªå·±æ§åˆ¶ */\r\n\r\n.image-overlay {\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  background: rgba(0, 0, 0, 0.7);\r\n  color: white;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  opacity: 0;\r\n  transition: var(--transition);\r\n}\r\n\r\n.image-preview:hover .image-overlay {\r\n  opacity: 1;\r\n}\r\n\r\n.process-btn {\r\n  font-size: 1.1rem;\r\n  padding: 16px 32px;\r\n  min-width: 200px;\r\n}\r\n\r\n.status-message {\r\n  margin-top: 16px;\r\n  padding: 12px 16px;\r\n  border-radius: 8px;\r\n  background: rgba(76, 175, 80, 0.1);\r\n  border: 1px solid rgba(76, 175, 80, 0.3);\r\n  color: #2e7d32;\r\n  font-size: 0.9rem;\r\n  text-align: center;\r\n}\r\n\r\n.status-message.error {\r\n  background: rgba(244, 67, 54, 0.1);\r\n  border-color: rgba(244, 67, 54, 0.3);\r\n  color: #c62828;\r\n}\r\n\r\n/* prompt-idæ ·å¼å·²ç§»è‡³ shared.css */\r\n\r\n.result-section {\r\n  display: flex;\r\n  justify-content: center;\r\n}\r\n\r\n.result-card {\r\n  background: var(--bg-card);\r\n  border: 1px solid var(--border-color);\r\n  border-radius: 20px;\r\n  padding: 32px;\r\n  text-align: center;\r\n  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);\r\n  max-width: 600px;\r\n}\r\n\r\n.result-title {\r\n  font-size: 1.5rem;\r\n  margin-bottom: 24px;\r\n  color: var(--text-color);\r\n}\r\n\r\n.result-image-container {\r\n  margin-bottom: 24px;\r\n}\r\n\r\n.result-image {\r\n  max-width: 100%;\r\n  max-height: 500px;\r\n  border-radius: 12px;\r\n  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);\r\n}\r\n\r\n.result-actions {\r\n  display: flex;\r\n  gap: 16px;\r\n  justify-content: center;\r\n}\r\n\r\n.btn-secondary {\r\n  background: #6c757d;\r\n  color: white;\r\n}\r\n\r\n.btn-secondary:hover {\r\n  background: #5a6268;\r\n  transform: translateY(-2px);\r\n}\r\n\r\n/* æ‹–æ‹½å¯¹æ¯”åŠŸèƒ½æ ·å¼ */\r\n.image-comparison-container {\r\n  margin: 20px 0;\r\n  border-radius: 12px;\r\n  overflow: hidden;\r\n  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);\r\n}\r\n\r\n.comparison-wrapper {\r\n  position: relative;\r\n  width: 100%;\r\n  height: 600px;\r\n  overflow: hidden;\r\n  cursor: col-resize;\r\n  user-select: none;\r\n  background: #000000; /* æ”¹ä¸ºé»‘è‰²èƒŒæ™¯ï¼Œé¿å…ç™½è‰²é—´è· */\r\n}\r\n\r\n.image-layer {\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n\r\n.comparison-image {\r\n  width: 100%;\r\n  height: 100%;\r\n  object-fit: cover; /* æ”¹ä¸ºcoverï¼Œå……æ»¡æ•´ä¸ªåŒºåŸŸ */\r\n  object-position: center;\r\n  display: block;\r\n}\r\n\r\n.result-layer {\r\n  clip-path: inset(0 50% 0 0);\r\n  transition: clip-path 0.1s ease-out;\r\n}\r\n\r\n.image-label {\r\n  position: absolute;\r\n  top: 16px;\r\n  padding: 8px 16px;\r\n  background: rgba(0, 0, 0, 0.7);\r\n  color: white;\r\n  border-radius: 20px;\r\n  font-size: 0.9rem;\r\n  font-weight: 500;\r\n  backdrop-filter: blur(10px);\r\n  z-index: 10;\r\n}\r\n\r\n.original-label {\r\n  left: 16px;\r\n}\r\n\r\n.result-label {\r\n  right: 16px;\r\n}\r\n\r\n.comparison-slider {\r\n  position: absolute;\r\n  top: 0;\r\n  bottom: 0;\r\n  width: 4px;\r\n  background: white;\r\n  cursor: col-resize;\r\n  z-index: 20;\r\n  transform: translateX(-2px);\r\n  transition: left 0.1s ease-out;\r\n}\r\n\r\n.slider-line {\r\n  width: 100%;\r\n  height: 100%;\r\n  background: linear-gradient(to bottom,\r\n    rgba(255, 255, 255, 0.8),\r\n    rgba(255, 255, 255, 1),\r\n    rgba(255, 255, 255, 0.8)\r\n  );\r\n  box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);\r\n}\r\n\r\n.slider-handle {\r\n  position: absolute;\r\n  top: 50%;\r\n  left: 50%;\r\n  transform: translate(-50%, -50%);\r\n  width: 40px;\r\n  height: 40px;\r\n  background: white;\r\n  border-radius: 50%;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);\r\n  cursor: col-resize;\r\n}\r\n\r\n.slider-circle {\r\n  width: 12px;\r\n  height: 12px;\r\n  background: #007bff;\r\n  border-radius: 50%;\r\n}\r\n\r\n.slider-arrow {\r\n  position: absolute;\r\n  color: #007bff;\r\n  font-size: 12px;\r\n  font-weight: bold;\r\n}\r\n\r\n.slider-arrow.left {\r\n  left: 6px;\r\n}\r\n\r\n.slider-arrow.right {\r\n  right: 6px;\r\n}\r\n\r\n.slider-handle:hover {\r\n  transform: translate(-50%, -50%) scale(1.1);\r\n  box-shadow: 0 6px 16px rgba(0, 0, 0, 0.4);\r\n}\r\n\r\n/* å¤„ç†ä¿¡æ¯æ ·å¼ */\r\n.process-info {\r\n  margin-top: 20px;\r\n  padding: 16px;\r\n  background: rgba(255, 255, 255, 0.1);\r\n  border-radius: 8px;\r\n  display: flex;\r\n  gap: 24px;\r\n  flex-wrap: wrap;\r\n}\r\n\r\n.info-item {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n}\r\n\r\n.info-label {\r\n  color: rgba(255, 255, 255, 0.8);\r\n  font-size: 0.9rem;\r\n}\r\n\r\n.info-value {\r\n  color: white;\r\n  font-weight: 500;\r\n  font-family: monospace;\r\n  background: rgba(255, 255, 255, 0.1);\r\n  padding: 4px 8px;\r\n  border-radius: 4px;\r\n}\r\n\r\n/* æŒ‰é’®æ ·å¼å·²ç§»è‡³AppButtonç»„ä»¶ */\r\n\r\n@media (max-width: 768px) {\r\n  .page-title {\r\n    font-size: 2rem;\r\n  }\r\n\r\n  .upload-area {\r\n    min-width: 300px;\r\n    min-height: 250px;\r\n    padding: 24px;\r\n  }\r\n\r\n  .result-actions {\r\n    flex-direction: column;\r\n  }\r\n\r\n  .comparison-wrapper {\r\n    height: 500px;\r\n  }\r\n\r\n  .slider-handle {\r\n    width: 36px;\r\n    height: 36px;\r\n  }\r\n\r\n  .slider-arrow {\r\n    font-size: 10px;\r\n  }\r\n\r\n  .process-info {\r\n    flex-direction: column;\r\n    gap: 12px;\r\n  }\r\n\r\n  .toast {\r\n    right: 20px;\r\n    top: 20px;\r\n  }\r\n\r\n  .toast-content {\r\n    padding: 12px 16px;\r\n  }\r\n}\r\n\r\n/* VantUIç»„ä»¶æ ·å¼è¦†ç›– */\r\n.processing-status {\r\n  margin-top: 24px;\r\n  padding: 20px;\r\n  background: var(--bg-card);\r\n  border: 1px solid var(--border-color);\r\n  border-radius: 12px;\r\n}\r\n\r\n.status-info {\r\n  margin-top: 16px;\r\n  text-align: center;\r\n}\r\n\r\n.status-text {\r\n  color: var(--text-color);\r\n  font-size: 16px;\r\n  margin-bottom: 12px;\r\n}\r\n\r\n.process-details {\r\n  display: flex;\r\n  justify-content: center;\r\n  gap: 20px;\r\n  font-size: 14px;\r\n  color: var(--text-light);\r\n}\r\n\r\n.action-section {\r\n  text-align: center;\r\n}\r\n\r\n.process-btn {\r\n  margin-top: 24px;\r\n}\r\n\r\n.process-btn .van-button__content {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  gap: 8px;\r\n}\r\n\r\n.btn-icon {\r\n  flex-shrink: 0;\r\n}\r\n\r\n/* åŠ¨ç”»å·²ç§»è‡³ shared.css */\r\n</style>\r\n"
        }
    ]
}