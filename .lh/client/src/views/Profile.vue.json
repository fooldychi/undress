{
    "sourceFile": "client/src/views/Profile.vue",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 53,
            "patches": [
                {
                    "date": 1752283749891,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1752283791229,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -463,6 +463,394 @@\n }\n </script>\n \n <style scoped>\n-/* 基础样式将在下一个编辑中添加 */\n+.profile-page {\n+  min-height: 100vh;\n+  padding: 20px;\n+  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n+  position: relative;\n+}\n+\n+/* 右上角用户信息 */\n+.top-corner {\n+  position: fixed;\n+  top: 20px;\n+  right: 20px;\n+  z-index: 1000;\n+}\n+\n+.container {\n+  max-width: 800px;\n+  margin: 0 auto;\n+}\n+\n+/* 页面头部 */\n+.page-header {\n+  display: flex;\n+  align-items: center;\n+  gap: 16px;\n+  margin-bottom: 24px;\n+}\n+\n+.back-btn {\n+  background: rgba(255, 255, 255, 0.2);\n+  border: 1px solid rgba(255, 255, 255, 0.3);\n+  color: white;\n+}\n+\n+.back-btn:hover {\n+  background: rgba(255, 255, 255, 0.3);\n+}\n+\n+.page-title {\n+  display: flex;\n+  align-items: center;\n+  gap: 8px;\n+  color: white;\n+  font-size: 24px;\n+  font-weight: 600;\n+  margin: 0;\n+}\n+\n+/* 加载状态 */\n+.loading-center {\n+  display: flex;\n+  justify-content: center;\n+  align-items: center;\n+  height: 200px;\n+  color: white;\n+}\n+\n+/* 未登录状态 */\n+.not-logged-in {\n+  background: white;\n+  border-radius: 16px;\n+  padding: 40px 20px;\n+  text-align: center;\n+  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);\n+}\n+\n+/* 个人中心内容 */\n+.profile-content {\n+  display: flex;\n+  flex-direction: column;\n+  gap: 20px;\n+}\n+\n+/* 用户信息卡片 */\n+.user-card {\n+  background: white;\n+  border-radius: 16px;\n+  padding: 24px;\n+  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);\n+  display: flex;\n+  align-items: center;\n+  gap: 20px;\n+}\n+\n+.user-avatar {\n+  width: 80px;\n+  height: 80px;\n+  background: linear-gradient(135deg, #1989fa, #1976d2);\n+  border-radius: 50%;\n+  display: flex;\n+  align-items: center;\n+  justify-content: center;\n+  color: white;\n+  flex-shrink: 0;\n+}\n+\n+.user-info {\n+  flex: 1;\n+}\n+\n+.username {\n+  font-size: 20px;\n+  font-weight: 600;\n+  color: #323233;\n+  margin: 0 0 8px 0;\n+}\n+\n+.user-id,\n+.join-date,\n+.last-login {\n+  font-size: 14px;\n+  color: #969799;\n+  margin: 4px 0;\n+}\n+\n+.user-actions {\n+  flex-shrink: 0;\n+}\n+\n+/* 积分信息卡片 */\n+.points-card {\n+  background: white;\n+  border-radius: 16px;\n+  padding: 24px;\n+  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);\n+}\n+\n+.card-header {\n+  display: flex;\n+  justify-content: space-between;\n+  align-items: center;\n+  margin-bottom: 20px;\n+}\n+\n+.card-header h3 {\n+  display: flex;\n+  align-items: center;\n+  gap: 8px;\n+  font-size: 18px;\n+  font-weight: 600;\n+  color: #323233;\n+  margin: 0;\n+}\n+\n+.points-summary {\n+  display: grid;\n+  grid-template-columns: 1fr 1fr;\n+  gap: 20px;\n+  margin-bottom: 20px;\n+}\n+\n+.points-item {\n+  text-align: center;\n+  padding: 16px;\n+  background: #f7f8fa;\n+  border-radius: 12px;\n+}\n+\n+.points-label {\n+  display: block;\n+  font-size: 14px;\n+  color: #969799;\n+  margin-bottom: 8px;\n+}\n+\n+.points-value {\n+  display: block;\n+  font-size: 24px;\n+  font-weight: 600;\n+  color: #1989fa;\n+}\n+\n+/* 等级卡明细 */\n+.cards-breakdown {\n+  border-top: 1px solid #ebedf0;\n+  padding-top: 20px;\n+}\n+\n+.cards-breakdown h4 {\n+  font-size: 16px;\n+  font-weight: 600;\n+  color: #323233;\n+  margin: 0 0 12px 0;\n+}\n+\n+.card-list {\n+  display: flex;\n+  flex-direction: column;\n+  gap: 8px;\n+}\n+\n+.card-item {\n+  display: flex;\n+  justify-content: space-between;\n+  align-items: center;\n+  padding: 12px 16px;\n+  background: #f7f8fa;\n+  border-radius: 8px;\n+}\n+\n+.card-type {\n+  font-size: 14px;\n+  color: #323233;\n+}\n+\n+.card-points {\n+  font-size: 14px;\n+  font-weight: 600;\n+  color: #1989fa;\n+}\n+\n+/* 最近记录 */\n+.recent-records {\n+  background: white;\n+  border-radius: 16px;\n+  padding: 24px;\n+  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);\n+}\n+\n+.no-records {\n+  padding: 40px 20px;\n+  text-align: center;\n+}\n+\n+.records-list {\n+  display: flex;\n+  flex-direction: column;\n+  gap: 12px;\n+}\n+\n+.record-item {\n+  display: flex;\n+  justify-content: space-between;\n+  align-items: center;\n+  padding: 16px;\n+  background: #f7f8fa;\n+  border-radius: 12px;\n+}\n+\n+.record-info {\n+  flex: 1;\n+}\n+\n+.record-desc {\n+  font-size: 14px;\n+  color: #323233;\n+  margin-bottom: 4px;\n+}\n+\n+.record-time {\n+  font-size: 12px;\n+  color: #969799;\n+}\n+\n+.record-url {\n+  margin-top: 4px;\n+}\n+\n+.record-amount {\n+  font-size: 16px;\n+  font-weight: 600;\n+  flex-shrink: 0;\n+}\n+\n+.record-amount.consume {\n+  color: #ee0a24;\n+}\n+\n+.record-amount.add,\n+.record-amount.purchase,\n+.record-amount.daily_reset {\n+  color: #07c160;\n+}\n+\n+/* 操作按钮 */\n+.action-buttons {\n+  margin-top: 20px;\n+}\n+\n+/* 积分记录弹窗 */\n+.records-modal {\n+  height: 100%;\n+  display: flex;\n+  flex-direction: column;\n+}\n+\n+.modal-header {\n+  display: flex;\n+  justify-content: space-between;\n+  align-items: center;\n+  padding: 20px;\n+  border-bottom: 1px solid #ebedf0;\n+}\n+\n+.modal-header h3 {\n+  font-size: 18px;\n+  font-weight: 600;\n+  color: #323233;\n+  margin: 0;\n+}\n+\n+.modal-header .van-icon {\n+  font-size: 20px;\n+  color: #969799;\n+  cursor: pointer;\n+}\n+\n+.modal-content {\n+  flex: 1;\n+  overflow-y: auto;\n+  padding: 20px;\n+}\n+\n+/* 响应式设计 */\n+@media (max-width: 768px) {\n+  .profile-page {\n+    padding: 16px;\n+  }\n+\n+  .user-card {\n+    flex-direction: column;\n+    text-align: center;\n+    gap: 16px;\n+  }\n+\n+  .user-info {\n+    text-align: center;\n+  }\n+\n+  .points-summary {\n+    grid-template-columns: 1fr;\n+    gap: 12px;\n+  }\n+\n+  .record-item {\n+    flex-direction: column;\n+    align-items: flex-start;\n+    gap: 8px;\n+  }\n+\n+  .record-amount {\n+    align-self: flex-end;\n+  }\n+}\n+\n+/* 深色主题适配 */\n+@media (prefers-color-scheme: dark) {\n+  .user-card,\n+  .points-card,\n+  .recent-records,\n+  .not-logged-in {\n+    background: #1e1e1e;\n+    color: #ffffff;\n+  }\n+\n+  .username,\n+  .card-header h3,\n+  .cards-breakdown h4,\n+  .record-desc {\n+    color: #ffffff;\n+  }\n+\n+  .user-id,\n+  .join-date,\n+  .last-login,\n+  .points-label,\n+  .record-time {\n+    color: #8e8e93;\n+  }\n+\n+  .points-item,\n+  .card-item,\n+  .record-item {\n+    background: #2c2c2e;\n+  }\n+\n+  .cards-breakdown {\n+    border-top-color: #3a3a3c;\n+  }\n+\n+  .modal-header {\n+    background: #1e1e1e;\n+    border-bottom-color: #3a3a3c;\n+  }\n+\n+  .modal-header h3 {\n+    color: #ffffff;\n+  }\n+}\n </style>\n"
                },
                {
                    "date": 1752292106593,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,11 +1,6 @@\n <template>\n   <div class=\"profile-page\">\n-    <!-- 右上角用户信息 -->\n-    <div class=\"top-corner\">\n-      <UserInfo @login=\"handleUserLogin\" @logout=\"handleUserLogout\" />\n-    </div>\n-\n     <div class=\"container\">\n       <!-- 页面头部 -->\n       <header class=\"page-header\">\n         <van-button\n"
                },
                {
                    "date": 1752292124673,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -53,19 +53,8 @@\n             <p v-if=\"userInfo?.last_login\" class=\"last-login\">\n               最后登录: {{ formatDate(userInfo?.last_login) }}\n             </p>\n           </div>\n-          <div class=\"user-actions\">\n-            <van-button\n-              type=\"primary\"\n-              size=\"small\"\n-              plain\n-              @click=\"refreshUserInfo\"\n-              :loading=\"refreshing\"\n-            >\n-              刷新信息\n-            </van-button>\n-          </div>\n         </div>\n \n         <!-- 积分信息卡片 -->\n         <div class=\"points-card\">\n"
                },
                {
                    "date": 1752292147249,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -62,17 +62,8 @@\n             <h3>\n               <van-icon name=\"gold-coin-o\" size=\"20\" />\n               我的积分\n             </h3>\n-            <van-button\n-              type=\"primary\"\n-              size=\"mini\"\n-              plain\n-              @click=\"refreshPoints\"\n-              :loading=\"pointsLoading\"\n-            >\n-              刷新\n-            </van-button>\n           </div>\n \n           <div class=\"points-summary\">\n             <div class=\"points-item\">\n@@ -83,23 +74,29 @@\n               <span class=\"points-label\">等级卡数量</span>\n               <span class=\"points-value\">{{ pointsInfo?.cards_count || 0 }}</span>\n             </div>\n           </div>\n+        </div>\n \n-          <!-- 等级卡明细 -->\n-          <div v-if=\"pointsInfo?.cards_breakdown?.length\" class=\"cards-breakdown\">\n-            <h4>等级卡明细</h4>\n-            <div class=\"card-list\">\n-              <div\n-                v-for=\"(card, index) in pointsInfo.cards_breakdown\"\n-                :key=\"index\"\n-                class=\"card-item\"\n-              >\n-                <span class=\"card-type\">{{ card.type }}</span>\n-                <span class=\"card-points\">{{ card.points }} 积分</span>\n-              </div>\n-            </div>\n+        <!-- 我的等级卡 -->\n+        <div v-if=\"levelCards.length > 0\" class=\"level-cards-section\">\n+          <div class=\"card-header\">\n+            <h3>\n+              <van-icon name=\"diamond-o\" size=\"20\" />\n+              我的等级卡\n+            </h3>\n           </div>\n+          <div class=\"level-cards-list\">\n+            <LevelCardItem\n+              v-for=\"card in levelCards\"\n+              :key=\"card.id\"\n+              :card-type=\"card.type_name\"\n+              :card-icon=\"card.icon || 'diamond-o'\"\n+              :remaining-points=\"card.remaining_points\"\n+              :total-points=\"card.total_points\"\n+              :bound-at=\"card.bound_at\"\n+            />\n+          </div>\n         </div>\n \n         <!-- 最近积分记录 -->\n         <div class=\"recent-records\">\n"
                },
                {
                    "date": 1752292167354,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -119,21 +119,20 @@\n             <van-empty description=\"暂无记录\" />\n           </div>\n \n           <div v-else class=\"records-list\">\n-            <div\n-              v-for=\"(record, index) in recentRecords\"\n-              :key=\"index\"\n-              class=\"record-item\"\n-            >\n-              <div class=\"record-info\">\n-                <div class=\"record-desc\">{{ record.description }}</div>\n-                <div class=\"record-time\">{{ formatDate(record.created_at) }}</div>\n-              </div>\n-              <div class=\"record-amount\" :class=\"record.action_type\">\n-                {{ record.action_type === 'consume' ? '-' : '+' }}{{ record.points_amount }}\n-              </div>\n-            </div>\n+            <RecordItem\n+              v-for=\"record in recentRecords.slice(0, 3)\"\n+              :key=\"record.id\"\n+              :id=\"record.id\"\n+              :description=\"record.description\"\n+              :action-type=\"record.action_type\"\n+              :points-amount=\"record.points_amount\"\n+              :created-at=\"record.created_at\"\n+              :media-url=\"record.media_url\"\n+              :loading=\"resultLoading === record.id\"\n+              @view-result=\"handleViewResult\"\n+            />\n           </div>\n         </div>\n \n         <!-- 操作按钮 -->\n"
                },
                {
                    "date": 1752292181569,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -156,8 +156,14 @@\n       :default-mode=\"authMode\"\n       @success=\"handleAuthSuccess\"\n     />\n \n+    <!-- 结果查看弹窗 -->\n+    <ResultModal\n+      v-model:show=\"showResultModal\"\n+      :result-data=\"currentResult\"\n+    />\n+\n     <!-- 积分记录详情弹窗 -->\n     <van-popup\n       v-model:show=\"showRecordsModal\"\n       position=\"bottom\"\n"
                },
                {
                    "date": 1752292217374,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -209,16 +209,20 @@\n <script>\n import { ref, reactive, computed, onMounted } from 'vue'\n import { useRouter } from 'vue-router'\n import { Toast } from 'vant'\n-import { authApi, pointsApi, userApi } from '../services/api.js'\n-import UserInfo from '../components/UserInfo.vue'\n+import { authApi, pointsApi, userApi, levelCardApi } from '../services/api.js'\n+import LevelCardItem from '../components/LevelCardItem.vue'\n+import RecordItem from '../components/RecordItem.vue'\n+import ResultModal from '../components/ResultModal.vue'\n import AuthModal from '../components/AuthModal.vue'\n \n export default {\n   name: 'Profile',\n   components: {\n-    UserInfo,\n+    LevelCardItem,\n+    RecordItem,\n+    ResultModal,\n     AuthModal\n   },\n   setup() {\n     const router = useRouter()\n"
                },
                {
                    "date": 1752292236038,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -232,17 +232,21 @@\n     const refreshing = ref(false)\n     const pointsLoading = ref(false)\n     const recordsLoading = ref(false)\n     const recordsFinished = ref(false)\n+    const resultLoading = ref(null)\n     const showAuthModal = ref(false)\n     const showRecordsModal = ref(false)\n+    const showResultModal = ref(false)\n     const authMode = ref('login')\n \n     const userInfo = ref(null)\n     const pointsInfo = ref(null)\n+    const levelCards = ref([])\n     const recentRecords = ref([])\n     const allRecords = ref([])\n     const recordsPage = ref(1)\n+    const currentResult = ref({})\n \n     // 计算属性\n     const isLoggedIn = computed(() => authApi.isLoggedIn() && userInfo.value)\n \n"
                },
                {
                    "date": 1752292260256,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -355,14 +355,31 @@\n         console.error('获取最近记录失败:', error)\n       }\n     }\n \n+    // 获取等级卡列表\n+    const loadLevelCards = async () => {\n+      if (!isLoggedIn.value) return\n+\n+      try {\n+        const response = await levelCardApi.getMyCards()\n+        if (response.success) {\n+          levelCards.value = response.data.cards || []\n+        }\n+      } catch (error) {\n+        console.error('获取等级卡失败:', error)\n+      }\n+    }\n+\n+    // 查看生成结果\n+    const handleViewResult = (resultData) => {\n+      currentResult.value = resultData\n+      showResultModal.value = true\n+    }\n+\n     // 查看全部记录\n     const viewAllRecords = () => {\n-      showRecordsModal.value = true\n-      if (allRecords.value.length === 0) {\n-        loadMoreRecords()\n-      }\n+      Toast.fail('功能未开通，敬请期待')\n     }\n \n     // 加载更多记录\n     const loadMoreRecords = async () => {\n"
                },
                {
                    "date": 1752292287291,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -418,12 +418,13 @@\n \n       try {\n         loading.value = true\n \n-        // 并行加载用户信息、积分信息和最近记录\n+        // 并行加载用户信息、积分信息、等级卡和最近记录\n         await Promise.all([\n           refreshUserInfo(),\n           refreshPoints(),\n+          loadLevelCards(),\n           loadRecentRecords()\n         ])\n       } catch (error) {\n         console.error('初始化数据失败:', error)\n"
                },
                {
                    "date": 1752292321844,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -448,16 +448,20 @@\n       refreshing,\n       pointsLoading,\n       recordsLoading,\n       recordsFinished,\n+      resultLoading,\n       showAuthModal,\n       showRecordsModal,\n+      showResultModal,\n       authMode,\n       userInfo,\n       pointsInfo,\n+      levelCards,\n       recentRecords,\n       allRecords,\n       recordsPage,\n+      currentResult,\n       isLoggedIn,\n       formatDate,\n       showLoginModal,\n       handleAuthSuccess,\n@@ -465,9 +469,11 @@\n       handleUserLogout,\n       handleLogout,\n       refreshUserInfo,\n       refreshPoints,\n+      loadLevelCards,\n       loadRecentRecords,\n+      handleViewResult,\n       viewAllRecords,\n       loadMoreRecords,\n       initializeData\n     }\n"
                },
                {
                    "date": 1752292345141,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -523,12 +523,13 @@\n .page-title {\n   display: flex;\n   align-items: center;\n   gap: 8px;\n-  color: white;\n+  color: #ffffff;\n   font-size: 24px;\n-  font-weight: 600;\n+  font-weight: 700;\n   margin: 0;\n+  text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);\n }\n \n /* 加载状态 */\n .loading-center {\n"
                },
                {
                    "date": 1752292369476,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -693,8 +693,21 @@\n   font-weight: 600;\n   color: #1989fa;\n }\n \n+/* 我的等级卡 */\n+.level-cards-section {\n+  background: white;\n+  border-radius: 16px;\n+  padding: 24px;\n+  margin-bottom: 20px;\n+  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);\n+}\n+\n+.level-cards-list {\n+  margin-top: 16px;\n+}\n+\n /* 最近记录 */\n .recent-records {\n   background: white;\n   border-radius: 16px;\n"
                },
                {
                    "date": 1752292403806,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -162,48 +162,9 @@\n       v-model:show=\"showResultModal\"\n       :result-data=\"currentResult\"\n     />\n \n-    <!-- 积分记录详情弹窗 -->\n-    <van-popup\n-      v-model:show=\"showRecordsModal\"\n-      position=\"bottom\"\n-      :style=\"{ height: '80%' }\"\n-      round\n-    >\n-      <div class=\"records-modal\">\n-        <div class=\"modal-header\">\n-          <h3>积分记录</h3>\n-          <van-icon name=\"cross\" @click=\"showRecordsModal = false\" />\n-        </div>\n \n-        <div class=\"modal-content\">\n-          <van-list\n-            v-model:loading=\"recordsLoading\"\n-            :finished=\"recordsFinished\"\n-            finished-text=\"没有更多了\"\n-            @load=\"loadMoreRecords\"\n-          >\n-            <div\n-              v-for=\"(record, index) in allRecords\"\n-              :key=\"index\"\n-              class=\"record-item\"\n-            >\n-              <div class=\"record-info\">\n-                <div class=\"record-desc\">{{ record.description }}</div>\n-                <div class=\"record-time\">{{ formatDate(record.created_at) }}</div>\n-                <div v-if=\"record.url\" class=\"record-url\">\n-                  <van-tag type=\"primary\" size=\"mini\">有关联文件</van-tag>\n-                </div>\n-              </div>\n-              <div class=\"record-amount\" :class=\"record.action_type\">\n-                {{ record.action_type === 'consume' ? '-' : '+' }}{{ record.points_amount }}\n-              </div>\n-            </div>\n-          </van-list>\n-        </div>\n-      </div>\n-    </van-popup>\n   </div>\n </template>\n \n <script>\n"
                },
                {
                    "date": 1752292418878,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -195,9 +195,9 @@\n     const recordsLoading = ref(false)\n     const recordsFinished = ref(false)\n     const resultLoading = ref(null)\n     const showAuthModal = ref(false)\n-    const showRecordsModal = ref(false)\n+\n     const showResultModal = ref(false)\n     const authMode = ref('login')\n \n     const userInfo = ref(null)\n"
                },
                {
                    "date": 1752292431291,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -203,10 +203,9 @@\n     const userInfo = ref(null)\n     const pointsInfo = ref(null)\n     const levelCards = ref([])\n     const recentRecords = ref([])\n-    const allRecords = ref([])\n-    const recordsPage = ref(1)\n+\n     const currentResult = ref({})\n \n     // 计算属性\n     const isLoggedIn = computed(() => authApi.isLoggedIn() && userInfo.value)\n"
                },
                {
                    "date": 1752292454658,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -410,9 +410,9 @@\n       recordsLoading,\n       recordsFinished,\n       resultLoading,\n       showAuthModal,\n-      showRecordsModal,\n+\n       showResultModal,\n       authMode,\n       userInfo,\n       pointsInfo,\n"
                },
                {
                    "date": 1752292468532,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -417,10 +417,9 @@\n       userInfo,\n       pointsInfo,\n       levelCards,\n       recentRecords,\n-      allRecords,\n-      recordsPage,\n+\n       currentResult,\n       isLoggedIn,\n       formatDate,\n       showLoginModal,\n"
                },
                {
                    "date": 1752292480659,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -432,9 +432,9 @@\n       loadLevelCards,\n       loadRecentRecords,\n       handleViewResult,\n       viewAllRecords,\n-      loadMoreRecords,\n+\n       initializeData\n     }\n   }\n }\n"
                },
                {
                    "date": 1752292504341,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -733,42 +733,10 @@\n .action-buttons {\n   margin-top: 20px;\n }\n \n-/* 积分记录弹窗 */\n-.records-modal {\n-  height: 100%;\n-  display: flex;\n-  flex-direction: column;\n-}\n \n-.modal-header {\n-  display: flex;\n-  justify-content: space-between;\n-  align-items: center;\n-  padding: 20px;\n-  border-bottom: 1px solid #ebedf0;\n-}\n \n-.modal-header h3 {\n-  font-size: 18px;\n-  font-weight: 600;\n-  color: #323233;\n-  margin: 0;\n-}\n-\n-.modal-header .van-icon {\n-  font-size: 20px;\n-  color: #969799;\n-  cursor: pointer;\n-}\n-\n-.modal-content {\n-  flex: 1;\n-  overflow-y: auto;\n-  padding: 20px;\n-}\n-\n /* 响应式设计 */\n @media (max-width: 768px) {\n   .profile-page {\n     padding: 16px;\n"
                },
                {
                    "date": 1752293016486,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,9 +1,16 @@\n <template>\n   <div class=\"profile-page\">\n+    <!-- 顶部导航 -->\n+    <TopNavigation\n+      ref=\"topNavigationRef\"\n+      @login=\"handleUserLogin\"\n+      @logout=\"handleUserLogout\"\n+    />\n+\n     <div class=\"container\">\n       <!-- 页面头部 -->\n-      <header class=\"page-header\">\n+      <header class=\"header\">\n         <van-button\n           @click=\"$router.push('/')\"\n           type=\"default\"\n           size=\"small\"\n@@ -13,10 +20,10 @@\n           class=\"back-btn\"\n         >\n           返回首页\n         </van-button>\n-        <h1 class=\"page-title\">\n-          <van-icon name=\"user-o\" size=\"24\" />\n+        <h1 class=\"title\">\n+          <van-icon name=\"user-o\" size=\"32\" color=\"var(--primary-color)\" />\n           个人中心\n         </h1>\n       </header>\n \n"
                },
                {
                    "date": 1752293033970,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -46,22 +46,26 @@\n \n       <!-- 已登录状态 -->\n       <div v-else class=\"profile-content\">\n         <!-- 用户信息卡片 -->\n-        <div class=\"user-card\">\n-          <div class=\"user-avatar\">\n-            <van-icon name=\"user-o\" size=\"48\" />\n+        <div class=\"feature-card user-card\">\n+          <div class=\"feature-content\">\n+            <div class=\"feature-icon user-avatar\">\n+              <van-icon name=\"user-o\" size=\"48\" color=\"var(--primary-color)\" />\n+            </div>\n+            <div class=\"user-info\">\n+              <h2 class=\"feature-title username\">{{ userInfo?.username }}</h2>\n+              <p class=\"feature-description user-id\">ID: {{ userInfo?.id }}</p>\n+              <div class=\"user-details\">\n+                <p class=\"join-date\">\n+                  注册时间: {{ formatDate(userInfo?.created_at) }}\n+                </p>\n+                <p v-if=\"userInfo?.last_login\" class=\"last-login\">\n+                  最后登录: {{ formatDate(userInfo?.last_login) }}\n+                </p>\n+              </div>\n+            </div>\n           </div>\n-          <div class=\"user-info\">\n-            <h2 class=\"username\">{{ userInfo?.username }}</h2>\n-            <p class=\"user-id\">ID: {{ userInfo?.id }}</p>\n-            <p class=\"join-date\">\n-              注册时间: {{ formatDate(userInfo?.created_at) }}\n-            </p>\n-            <p v-if=\"userInfo?.last_login\" class=\"last-login\">\n-              最后登录: {{ formatDate(userInfo?.last_login) }}\n-            </p>\n-          </div>\n         </div>\n \n         <!-- 积分信息卡片 -->\n         <div class=\"points-card\">\n"
                },
                {
                    "date": 1752293051634,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -67,24 +67,26 @@\n           </div>\n         </div>\n \n         <!-- 积分信息卡片 -->\n-        <div class=\"points-card\">\n-          <div class=\"card-header\">\n-            <h3>\n-              <van-icon name=\"gold-coin-o\" size=\"20\" />\n-              我的积分\n-            </h3>\n-          </div>\n-\n-          <div class=\"points-summary\">\n-            <div class=\"points-item\">\n-              <span class=\"points-label\">总积分</span>\n-              <span class=\"points-value\">{{ pointsInfo?.total_points || 0 }}</span>\n+        <div class=\"feature-card points-card\">\n+          <div class=\"feature-content\">\n+            <div class=\"feature-icon\">\n+              <van-icon name=\"diamond-o\" size=\"48\" color=\"var(--primary-color)\" />\n             </div>\n-            <div class=\"points-item\">\n-              <span class=\"points-label\">等级卡数量</span>\n-              <span class=\"points-value\">{{ pointsInfo?.cards_count || 0 }}</span>\n+            <h2 class=\"feature-title\">我的积分</h2>\n+            <div class=\"points-summary\">\n+              <div class=\"points-grid\">\n+                <div class=\"points-item\">\n+                  <div class=\"points-value\">{{ pointsInfo?.total_points || 0 }}</div>\n+                  <div class=\"points-label\">总积分</div>\n+                </div>\n+                <div class=\"points-divider\"></div>\n+                <div class=\"points-item\">\n+                  <div class=\"points-value\">{{ pointsInfo?.cards_count || 0 }}</div>\n+                  <div class=\"points-label\">等级卡数量</div>\n+                </div>\n+              </div>\n             </div>\n           </div>\n         </div>\n \n"
                },
                {
                    "date": 1752293070563,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -91,24 +91,32 @@\n         </div>\n \n         <!-- 我的等级卡 -->\n         <div v-if=\"levelCards.length > 0\" class=\"level-cards-section\">\n-          <div class=\"card-header\">\n-            <h3>\n-              <van-icon name=\"diamond-o\" size=\"20\" />\n-              我的等级卡\n-            </h3>\n-          </div>\n-          <div class=\"level-cards-list\">\n-            <LevelCardItem\n+          <h2 class=\"section-title\">\n+            <van-icon name=\"credit-pay\" size=\"24\" color=\"var(--primary-color)\" />\n+            我的等级卡\n+          </h2>\n+          <div class=\"level-cards-grid\">\n+            <div\n               v-for=\"card in levelCards\"\n               :key=\"card.id\"\n-              :card-type=\"card.type_name\"\n-              :card-icon=\"card.icon || 'diamond-o'\"\n-              :remaining-points=\"card.remaining_points\"\n-              :total-points=\"card.total_points\"\n-              :bound-at=\"card.bound_at\"\n-            />\n+              class=\"feature-card level-card\"\n+            >\n+              <div class=\"feature-content\">\n+                <div class=\"feature-icon\">\n+                  <van-icon name=\"credit-pay\" size=\"32\" color=\"var(--primary-color)\" />\n+                </div>\n+                <h3 class=\"card-type\">{{ card.type_name }}</h3>\n+                <div class=\"card-points\">\n+                  <span class=\"points-current\">{{ card.remaining_points }}</span>\n+                  <span class=\"points-separator\">/</span>\n+                  <span class=\"points-total\">{{ card.total_points }}</span>\n+                  <span class=\"points-unit\">积分</span>\n+                </div>\n+                <p class=\"card-date\">{{ formatDate(card.bound_at) }}</p>\n+              </div>\n+            </div>\n           </div>\n         </div>\n \n         <!-- 最近积分记录 -->\n"
                },
                {
                    "date": 1752293091957,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -119,41 +119,45 @@\n           </div>\n         </div>\n \n         <!-- 最近积分记录 -->\n-        <div class=\"recent-records\">\n-          <div class=\"card-header\">\n-            <h3>\n-              <van-icon name=\"records\" size=\"20\" />\n-              最近记录\n-            </h3>\n-            <van-button\n-              type=\"primary\"\n-              size=\"mini\"\n-              plain\n-              @click=\"viewAllRecords\"\n-            >\n-              查看全部\n-            </van-button>\n-          </div>\n+        <div class=\"feature-card recent-records\">\n+          <div class=\"feature-content\">\n+            <div class=\"feature-icon\">\n+              <van-icon name=\"records\" size=\"48\" color=\"var(--primary-color)\" />\n+            </div>\n+            <h2 class=\"feature-title\">最近记录</h2>\n \n-          <div v-if=\"recentRecords.length === 0\" class=\"no-records\">\n-            <van-empty description=\"暂无记录\" />\n-          </div>\n+            <div v-if=\"recentRecords.length === 0\" class=\"no-records\">\n+              <van-empty description=\"暂无记录\" />\n+            </div>\n \n-          <div v-else class=\"records-list\">\n-            <RecordItem\n-              v-for=\"record in recentRecords.slice(0, 3)\"\n-              :key=\"record.id\"\n-              :id=\"record.id\"\n-              :description=\"record.description\"\n-              :action-type=\"record.action_type\"\n-              :points-amount=\"record.points_amount\"\n-              :created-at=\"record.created_at\"\n-              :media-url=\"record.media_url\"\n-              :loading=\"resultLoading === record.id\"\n-              @view-result=\"handleViewResult\"\n-            />\n+            <div v-else class=\"records-list\">\n+              <RecordItem\n+                v-for=\"record in recentRecords.slice(0, 3)\"\n+                :key=\"record.id\"\n+                :id=\"record.id\"\n+                :description=\"record.description\"\n+                :action-type=\"record.action_type\"\n+                :points-amount=\"record.points_amount\"\n+                :created-at=\"record.created_at\"\n+                :media-url=\"record.media_url\"\n+                :loading=\"resultLoading === record.id\"\n+                @view-result=\"handleViewResult\"\n+              />\n+            </div>\n+\n+            <div class=\"records-footer\">\n+              <van-button\n+                type=\"primary\"\n+                size=\"small\"\n+                plain\n+                @click=\"viewAllRecords\"\n+                class=\"view-all-btn\"\n+              >\n+                查看全部\n+              </van-button>\n+            </div>\n           </div>\n         </div>\n \n         <!-- 操作按钮 -->\n"
                },
                {
                    "date": 1752293107783,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -196,9 +196,9 @@\n import { ref, reactive, computed, onMounted } from 'vue'\n import { useRouter } from 'vue-router'\n import { Toast } from 'vant'\n import { authApi, pointsApi, userApi, levelCardApi } from '../services/api.js'\n-import LevelCardItem from '../components/LevelCardItem.vue'\n+import TopNavigation from '../components/TopNavigation.vue'\n import RecordItem from '../components/RecordItem.vue'\n import ResultModal from '../components/ResultModal.vue'\n import AuthModal from '../components/AuthModal.vue'\n \n"
                },
                {
                    "date": 1752293121225,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -204,9 +204,9 @@\n \n export default {\n   name: 'Profile',\n   components: {\n-    LevelCardItem,\n+    TopNavigation,\n     RecordItem,\n     ResultModal,\n     AuthModal\n   },\n"
                },
                {
                    "date": 1752293136172,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -453,9 +453,9 @@\n       handleUserLogout,\n       handleLogout,\n       refreshUserInfo,\n       refreshPoints,\n-      loadLevelCards,\n+\n       loadRecentRecords,\n       handleViewResult,\n       viewAllRecords,\n \n"
                },
                {
                    "date": 1752293180388,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -467,53 +467,51 @@\n \n <style scoped>\n .profile-page {\n   min-height: 100vh;\n+  background: linear-gradient(135deg, var(--bg-primary) 0%, var(--bg-secondary) 100%);\n   padding: 20px;\n-  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n-  position: relative;\n+  padding-top: 80px; /* 为TopNavigation留出空间 */\n }\n \n-/* 右上角用户信息 */\n-.top-corner {\n-  position: fixed;\n-  top: 20px;\n-  right: 20px;\n-  z-index: 1000;\n-}\n-\n .container {\n-  max-width: 800px;\n+  max-width: 1200px;\n   margin: 0 auto;\n }\n \n /* 页面头部 */\n-.page-header {\n-  display: flex;\n-  align-items: center;\n-  gap: 16px;\n-  margin-bottom: 24px;\n+.header {\n+  text-align: center;\n+  margin-bottom: 60px;\n+  position: relative;\n }\n \n .back-btn {\n-  background: rgba(255, 255, 255, 0.2);\n-  border: 1px solid rgba(255, 255, 255, 0.3);\n-  color: white;\n+  position: absolute;\n+  left: 0;\n+  top: 50%;\n+  transform: translateY(-50%);\n+  background: rgba(255, 255, 255, 0.1);\n+  border: 1px solid rgba(255, 255, 255, 0.2);\n+  color: var(--text-color);\n+  backdrop-filter: blur(10px);\n }\n \n .back-btn:hover {\n-  background: rgba(255, 255, 255, 0.3);\n+  background: rgba(255, 255, 255, 0.2);\n+  border-color: var(--primary-color);\n }\n \n-.page-title {\n+.title {\n   display: flex;\n   align-items: center;\n-  gap: 8px;\n-  color: #ffffff;\n-  font-size: 24px;\n+  justify-content: center;\n+  gap: 16px;\n+  color: var(--text-color);\n+  font-size: 2.5rem;\n   font-weight: 700;\n   margin: 0;\n-  text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);\n+  text-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);\n }\n \n /* 加载状态 */\n .loading-center {\n"
                },
                {
                    "date": 1752293202115,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -518,20 +518,83 @@\n   display: flex;\n   justify-content: center;\n   align-items: center;\n   height: 200px;\n-  color: white;\n+  color: var(--text-color);\n }\n \n /* 未登录状态 */\n .not-logged-in {\n-  background: white;\n-  border-radius: 16px;\n+  background: var(--bg-card);\n+  border: 1px solid var(--border-color);\n+  border-radius: 20px;\n   padding: 40px 20px;\n   text-align: center;\n-  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);\n+  box-shadow: var(--shadow-lg);\n }\n \n+/* 主要内容区域 */\n+.profile-content {\n+  display: grid;\n+  grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));\n+  gap: 32px;\n+  margin-bottom: 60px;\n+}\n+\n+/* 统一的卡片样式 - 与首页保持一致 */\n+.feature-card {\n+  background: var(--bg-card);\n+  border: 1px solid var(--border-color);\n+  border-radius: 20px;\n+  cursor: default;\n+  transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);\n+  overflow: hidden;\n+  position: relative;\n+  height: 100%;\n+}\n+\n+.feature-content {\n+  padding: 32px;\n+  text-align: center;\n+  height: 100%;\n+  display: flex;\n+  flex-direction: column;\n+  justify-content: space-between;\n+}\n+\n+.feature-icon {\n+  margin-bottom: 20px;\n+  display: flex;\n+  justify-content: center;\n+  align-items: center;\n+  width: 80px;\n+  height: 80px;\n+  background: rgba(255, 255, 255, 0.1);\n+  border-radius: 50%;\n+  margin: 0 auto 20px;\n+}\n+\n+.feature-title {\n+  color: var(--text-color);\n+  font-size: 1.5rem;\n+  font-weight: 600;\n+  margin-bottom: 12px;\n+}\n+\n+.feature-description {\n+  color: var(--text-light);\n+  font-size: 1rem;\n+  line-height: 1.6;\n+  margin-bottom: 20px;\n+  flex-grow: 1;\n+}\n+\n+.feature-card:hover {\n+  transform: translateY(-4px);\n+  box-shadow: var(--shadow-xl);\n+  border-color: var(--border-light);\n+}\n+\n /* 个人中心内容 */\n .profile-content {\n   display: flex;\n   flex-direction: column;\n"
                },
                {
                    "date": 1752293246874,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -593,61 +593,39 @@\n   box-shadow: var(--shadow-xl);\n   border-color: var(--border-light);\n }\n \n-/* 个人中心内容 */\n-.profile-content {\n-  display: flex;\n-  flex-direction: column;\n-  gap: 20px;\n+/* 用户信息卡片特定样式 */\n+.user-card .user-avatar {\n+  background: rgba(102, 102, 255, 0.1);\n }\n \n-/* 用户信息卡片 */\n-.user-card {\n-  background: white;\n-  border-radius: 16px;\n-  padding: 24px;\n-  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);\n-  display: flex;\n-  align-items: center;\n-  gap: 20px;\n+.user-card .user-info {\n+  text-align: left;\n+  flex: 1;\n }\n \n-.user-avatar {\n-  width: 80px;\n-  height: 80px;\n-  background: linear-gradient(135deg, #1989fa, #1976d2);\n-  border-radius: 50%;\n-  display: flex;\n-  align-items: center;\n-  justify-content: center;\n-  color: white;\n-  flex-shrink: 0;\n+.user-card .username {\n+  text-align: left;\n+  margin-bottom: 8px;\n }\n \n-.user-info {\n-  flex: 1;\n+.user-card .user-id {\n+  text-align: left;\n+  margin-bottom: 16px;\n }\n \n-.username {\n-  font-size: 20px;\n-  font-weight: 600;\n-  color: #323233;\n-  margin: 0 0 8px 0;\n+.user-details {\n+  text-align: left;\n }\n \n-.user-id,\n .join-date,\n .last-login {\n   font-size: 14px;\n-  color: #969799;\n+  color: var(--text-light);\n   margin: 4px 0;\n }\n \n-.user-actions {\n-  flex-shrink: 0;\n-}\n-\n /* 积分信息卡片 */\n .points-card {\n   background: white;\n   border-radius: 16px;\n"
                },
                {
                    "date": 1752293287598,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -624,61 +624,44 @@\n   color: var(--text-light);\n   margin: 4px 0;\n }\n \n-/* 积分信息卡片 */\n-.points-card {\n-  background: white;\n-  border-radius: 16px;\n-  padding: 24px;\n-  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);\n+/* 积分卡片特定样式 */\n+.points-summary {\n+  margin-top: 20px;\n }\n \n-.card-header {\n+.points-grid {\n   display: flex;\n-  justify-content: space-between;\n   align-items: center;\n-  margin-bottom: 20px;\n-}\n-\n-.card-header h3 {\n-  display: flex;\n-  align-items: center;\n-  gap: 8px;\n-  font-size: 18px;\n-  font-weight: 600;\n-  color: #323233;\n-  margin: 0;\n-}\n-\n-.points-summary {\n-  display: grid;\n-  grid-template-columns: 1fr 1fr;\n+  justify-content: center;\n   gap: 20px;\n-  margin-bottom: 20px;\n }\n \n .points-item {\n   text-align: center;\n-  padding: 16px;\n-  background: #f7f8fa;\n-  border-radius: 12px;\n+  flex: 1;\n }\n \n-.points-label {\n+.points-value {\n   display: block;\n-  font-size: 14px;\n-  color: #969799;\n-  margin-bottom: 8px;\n+  font-size: 2rem;\n+  font-weight: 700;\n+  color: var(--primary-color);\n+  margin-bottom: 4px;\n }\n \n-.points-value {\n-  display: block;\n-  font-size: 24px;\n-  font-weight: 600;\n-  color: #1989fa;\n+.points-label {\n+  font-size: 0.9rem;\n+  color: var(--text-light);\n }\n \n+.points-divider {\n+  width: 1px;\n+  height: 40px;\n+  background: var(--border-color);\n+}\n+\n /* 等级卡明细 */\n .cards-breakdown {\n   border-top: 1px solid #ebedf0;\n   padding-top: 20px;\n"
                },
                {
                    "date": 1752293309094,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -660,60 +660,74 @@\n   height: 40px;\n   background: var(--border-color);\n }\n \n-/* 等级卡明细 */\n-.cards-breakdown {\n-  border-top: 1px solid #ebedf0;\n-  padding-top: 20px;\n+/* 等级卡部分 */\n+.level-cards-section {\n+  margin-bottom: 40px;\n }\n \n-.cards-breakdown h4 {\n-  font-size: 16px;\n+.section-title {\n+  display: flex;\n+  align-items: center;\n+  gap: 12px;\n+  color: var(--text-color);\n+  font-size: 1.8rem;\n   font-weight: 600;\n-  color: #323233;\n-  margin: 0 0 12px 0;\n+  margin-bottom: 24px;\n+  text-align: center;\n+  justify-content: center;\n }\n \n-.card-list {\n-  display: flex;\n-  flex-direction: column;\n-  gap: 8px;\n+.level-cards-grid {\n+  display: grid;\n+  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));\n+  gap: 24px;\n }\n \n-.card-item {\n+.level-card .card-type {\n+  font-size: 1.2rem;\n+  font-weight: 600;\n+  color: var(--text-color);\n+  margin-bottom: 16px;\n+}\n+\n+.card-points {\n   display: flex;\n-  justify-content: space-between;\n-  align-items: center;\n-  padding: 12px 16px;\n-  background: #f7f8fa;\n-  border-radius: 8px;\n+  align-items: baseline;\n+  justify-content: center;\n+  gap: 4px;\n+  margin-bottom: 12px;\n }\n \n-.card-type {\n-  font-size: 14px;\n-  color: #323233;\n+.points-current {\n+  font-size: 1.8rem;\n+  font-weight: 700;\n+  color: var(--primary-color);\n }\n \n-.card-points {\n-  font-size: 14px;\n-  font-weight: 600;\n-  color: #1989fa;\n+.points-separator {\n+  font-size: 1.2rem;\n+  color: var(--text-light);\n }\n \n-/* 我的等级卡 */\n-.level-cards-section {\n-  background: white;\n-  border-radius: 16px;\n-  padding: 24px;\n-  margin-bottom: 20px;\n-  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);\n+.points-total {\n+  font-size: 1.2rem;\n+  color: var(--text-light);\n }\n \n-.level-cards-list {\n-  margin-top: 16px;\n+.points-unit {\n+  font-size: 0.9rem;\n+  color: var(--text-light);\n+  margin-left: 4px;\n }\n \n+.card-date {\n+  font-size: 0.85rem;\n+  color: var(--text-light);\n+  margin: 0;\n+}\n+\n /* 最近记录 */\n .recent-records {\n   background: white;\n   border-radius: 16px;\n"
                },
                {
                    "date": 1752293345446,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -737,10 +737,24 @@\n \n .no-records {\n   padding: 40px 20px;\n   text-align: center;\n+  color: var(--text-light);\n }\n \n+.records-footer {\n+  text-align: center;\n+  margin-top: 20px;\n+  padding-top: 20px;\n+  border-top: 1px solid var(--border-color);\n+}\n+\n+.view-all-btn {\n+  background: rgba(102, 102, 255, 0.1);\n+  border-color: var(--primary-color);\n+  color: var(--primary-color);\n+}\n+\n .records-list {\n   display: flex;\n   flex-direction: column;\n   gap: 12px;\n"
                },
                {
                    "date": 1752293363213,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -805,13 +805,75 @@\n }\n \n /* 操作按钮 */\n .action-buttons {\n-  margin-top: 20px;\n+  margin-top: 40px;\n+  text-align: center;\n }\n \n+/* 响应式设计 */\n+@media (max-width: 768px) {\n+  .profile-page {\n+    padding: 16px;\n+    padding-top: 70px;\n+  }\n \n+  .container {\n+    max-width: 100%;\n+  }\n \n+  .header {\n+    margin-bottom: 40px;\n+  }\n+\n+  .title {\n+    font-size: 2rem;\n+  }\n+\n+  .back-btn {\n+    position: static;\n+    transform: none;\n+    margin-bottom: 20px;\n+  }\n+\n+  .profile-content {\n+    grid-template-columns: 1fr;\n+    gap: 20px;\n+  }\n+\n+  .level-cards-grid {\n+    grid-template-columns: 1fr;\n+    gap: 16px;\n+  }\n+\n+  .feature-content {\n+    padding: 24px;\n+  }\n+\n+  .feature-icon {\n+    width: 60px;\n+    height: 60px;\n+  }\n+\n+  .feature-title {\n+    font-size: 1.3rem;\n+  }\n+\n+  .points-grid {\n+    gap: 16px;\n+  }\n+\n+  .points-value {\n+    font-size: 1.5rem;\n+  }\n+\n+  .section-title {\n+    font-size: 1.5rem;\n+  }\n+}\n+\n+\n+\n /* 响应式设计 */\n @media (max-width: 768px) {\n   .profile-page {\n     padding: 16px;\n"
                },
                {
                    "date": 1752293385656,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -872,40 +872,8 @@\n }\n \n \n \n-/* 响应式设计 */\n-@media (max-width: 768px) {\n-  .profile-page {\n-    padding: 16px;\n-  }\n-\n-  .user-card {\n-    flex-direction: column;\n-    text-align: center;\n-    gap: 16px;\n-  }\n-\n-  .user-info {\n-    text-align: center;\n-  }\n-\n-  .points-summary {\n-    grid-template-columns: 1fr;\n-    gap: 12px;\n-  }\n-\n-  .record-item {\n-    flex-direction: column;\n-    align-items: flex-start;\n-    gap: 8px;\n-  }\n-\n-  .record-amount {\n-    align-self: flex-end;\n-  }\n-}\n-\n /* 深色主题适配 */\n @media (prefers-color-scheme: dark) {\n   .user-card,\n   .points-card,\n"
                },
                {
                    "date": 1752293421991,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -872,49 +872,6 @@\n }\n \n \n \n-/* 深色主题适配 */\n-@media (prefers-color-scheme: dark) {\n-  .user-card,\n-  .points-card,\n-  .recent-records,\n-  .not-logged-in {\n-    background: #1e1e1e;\n-    color: #ffffff;\n-  }\n \n-  .username,\n-  .card-header h3,\n-  .cards-breakdown h4,\n-  .record-desc {\n-    color: #ffffff;\n-  }\n-\n-  .user-id,\n-  .join-date,\n-  .last-login,\n-  .points-label,\n-  .record-time {\n-    color: #8e8e93;\n-  }\n-\n-  .points-item,\n-  .card-item,\n-  .record-item {\n-    background: #2c2c2e;\n-  }\n-\n-  .cards-breakdown {\n-    border-top-color: #3a3a3c;\n-  }\n-\n-  .modal-header {\n-    background: #1e1e1e;\n-    border-bottom-color: #3a3a3c;\n-  }\n-\n-  .modal-header h3 {\n-    color: #ffffff;\n-  }\n-}\n </style>\n"
                },
                {
                    "date": 1752293736098,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -533,10 +533,10 @@\n }\n \n /* 主要内容区域 */\n .profile-content {\n-  display: grid;\n-  grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));\n+  display: flex;\n+  flex-direction: column;\n   gap: 32px;\n   margin-bottom: 60px;\n }\n \n"
                },
                {
                    "date": 1752293755319,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -68,13 +68,15 @@\n         </div>\n \n         <!-- 积分信息卡片 -->\n         <div class=\"feature-card points-card\">\n-          <div class=\"feature-content\">\n-            <div class=\"feature-icon\">\n-              <van-icon name=\"diamond-o\" size=\"48\" color=\"var(--primary-color)\" />\n+          <div class=\"feature-content points-content\">\n+            <div class=\"points-header\">\n+              <div class=\"feature-icon\">\n+                <van-icon name=\"diamond-o\" size=\"48\" color=\"var(--primary-color)\" />\n+              </div>\n+              <h2 class=\"feature-title\">我的积分</h2>\n             </div>\n-            <h2 class=\"feature-title\">我的积分</h2>\n             <div class=\"points-summary\">\n               <div class=\"points-grid\">\n                 <div class=\"points-item\">\n                   <div class=\"points-value\">{{ pointsInfo?.total_points || 0 }}</div>\n"
                },
                {
                    "date": 1752293780142,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -122,31 +122,50 @@\n         </div>\n \n         <!-- 最近积分记录 -->\n         <div class=\"feature-card recent-records\">\n-          <div class=\"feature-content\">\n-            <div class=\"feature-icon\">\n-              <van-icon name=\"records\" size=\"48\" color=\"var(--primary-color)\" />\n+          <div class=\"feature-content records-content\">\n+            <div class=\"records-header\">\n+              <div class=\"feature-icon\">\n+                <van-icon name=\"records\" size=\"48\" color=\"var(--primary-color)\" />\n+              </div>\n+              <h2 class=\"feature-title\">最近记录</h2>\n             </div>\n-            <h2 class=\"feature-title\">最近记录</h2>\n \n             <div v-if=\"recentRecords.length === 0\" class=\"no-records\">\n               <van-empty description=\"暂无记录\" />\n             </div>\n \n             <div v-else class=\"records-list\">\n-              <RecordItem\n+              <div\n                 v-for=\"record in recentRecords.slice(0, 3)\"\n                 :key=\"record.id\"\n-                :id=\"record.id\"\n-                :description=\"record.description\"\n-                :action-type=\"record.action_type\"\n-                :points-amount=\"record.points_amount\"\n-                :created-at=\"record.created_at\"\n-                :media-url=\"record.media_url\"\n-                :loading=\"resultLoading === record.id\"\n-                @view-result=\"handleViewResult\"\n-              />\n+                class=\"record-item-unified\"\n+              >\n+                <div class=\"record-info\">\n+                  <div class=\"record-desc\">{{ record.description }}</div>\n+                  <div class=\"record-time\">{{ formatDate(record.created_at) }}</div>\n+                </div>\n+                <div class=\"record-amount\" :class=\"record.action_type\">\n+                  {{ record.action_type === 'consume' ? '-' : '+' }}{{ record.points_amount }}\n+                </div>\n+                <div class=\"record-actions\" v-if=\"record.action_type === 'consume' && record.media_url\">\n+                  <van-button\n+                    type=\"primary\"\n+                    size=\"mini\"\n+                    plain\n+                    @click=\"handleViewResult({\n+                      id: record.id,\n+                      description: record.description,\n+                      mediaUrl: record.media_url,\n+                      createdAt: record.created_at\n+                    })\"\n+                    :loading=\"resultLoading === record.id\"\n+                  >\n+                    查看结果\n+                  </van-button>\n+                </div>\n+              </div>\n             </div>\n \n             <div class=\"records-footer\">\n               <van-button\n"
                },
                {
                    "date": 1752293800206,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -646,17 +646,44 @@\n   margin: 4px 0;\n }\n \n /* 积分卡片特定样式 */\n+.points-content {\n+  display: flex;\n+  flex-direction: column;\n+  align-items: center;\n+  text-align: center;\n+}\n+\n+.points-header {\n+  display: flex;\n+  flex-direction: column;\n+  align-items: center;\n+  margin-bottom: 30px;\n+}\n+\n+.points-header .feature-icon {\n+  margin-bottom: 16px;\n+}\n+\n+.points-header .feature-title {\n+  margin-bottom: 0;\n+}\n+\n .points-summary {\n-  margin-top: 20px;\n+  width: 100%;\n+  max-width: 500px;\n }\n \n .points-grid {\n   display: flex;\n   align-items: center;\n   justify-content: center;\n-  gap: 20px;\n+  gap: 40px;\n+  padding: 20px;\n+  background: rgba(255, 255, 255, 0.05);\n+  border-radius: 16px;\n+  border: 1px solid var(--border-color);\n }\n \n .points-item {\n   text-align: center;\n@@ -664,23 +691,26 @@\n }\n \n .points-value {\n   display: block;\n-  font-size: 2rem;\n+  font-size: 2.5rem;\n   font-weight: 700;\n   color: var(--primary-color);\n-  margin-bottom: 4px;\n+  margin-bottom: 8px;\n+  line-height: 1;\n }\n \n .points-label {\n-  font-size: 0.9rem;\n+  font-size: 1rem;\n   color: var(--text-light);\n+  font-weight: 500;\n }\n \n .points-divider {\n-  width: 1px;\n-  height: 40px;\n-  background: var(--border-color);\n+  width: 2px;\n+  height: 60px;\n+  background: linear-gradient(to bottom, transparent, var(--border-color), transparent);\n+  border-radius: 1px;\n }\n \n /* 等级卡部分 */\n .level-cards-section {\n"
                },
                {
                    "date": 1752293856869,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -777,61 +777,118 @@\n   color: var(--text-light);\n   margin: 0;\n }\n \n-/* 最近记录 */\n-.recent-records {\n-  background: white;\n-  border-radius: 16px;\n-  padding: 24px;\n-  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);\n+/* 记录部分样式 */\n+.records-content {\n+  display: flex;\n+  flex-direction: column;\n+  align-items: center;\n+  text-align: center;\n }\n \n+.records-header {\n+  display: flex;\n+  flex-direction: column;\n+  align-items: center;\n+  margin-bottom: 30px;\n+}\n+\n+.records-header .feature-icon {\n+  margin-bottom: 16px;\n+}\n+\n+.records-header .feature-title {\n+  margin-bottom: 0;\n+}\n+\n .no-records {\n   padding: 40px 20px;\n   text-align: center;\n   color: var(--text-light);\n }\n \n-.records-footer {\n-  text-align: center;\n-  margin-top: 20px;\n-  padding-top: 20px;\n-  border-top: 1px solid var(--border-color);\n-}\n-\n-.view-all-btn {\n-  background: rgba(102, 102, 255, 0.1);\n-  border-color: var(--primary-color);\n-  color: var(--primary-color);\n-}\n-\n .records-list {\n-  display: flex;\n-  flex-direction: column;\n-  gap: 12px;\n+  width: 100%;\n+  margin-bottom: 30px;\n }\n \n-.record-item {\n+.record-item-unified {\n   display: flex;\n-  justify-content: space-between;\n   align-items: center;\n-  padding: 16px;\n-  background: #f7f8fa;\n+  gap: 16px;\n+  padding: 20px;\n+  background: rgba(255, 255, 255, 0.05);\n+  border: 1px solid var(--border-color);\n   border-radius: 12px;\n+  margin-bottom: 12px;\n+  transition: all 0.3s ease;\n }\n \n+.record-item-unified:hover {\n+  background: rgba(255, 255, 255, 0.08);\n+  border-color: var(--primary-color);\n+  transform: translateY(-1px);\n+}\n+\n+.record-item-unified:last-child {\n+  margin-bottom: 0;\n+}\n+\n .record-info {\n   flex: 1;\n+  text-align: left;\n }\n \n .record-desc {\n-  font-size: 14px;\n-  color: #323233;\n+  font-size: 16px;\n+  font-weight: 500;\n+  color: var(--text-color);\n   margin-bottom: 4px;\n }\n \n .record-time {\n+  font-size: 14px;\n+  color: var(--text-light);\n+}\n+\n+.record-amount {\n+  font-size: 18px;\n+  font-weight: 700;\n+  min-width: 80px;\n+  text-align: right;\n+}\n+\n+.record-amount.consume {\n+  color: #ef4444;\n+}\n+\n+.record-amount.bind,\n+.record-amount.purchase {\n+  color: #10b981;\n+}\n+\n+.record-actions {\n+  flex-shrink: 0;\n+  min-width: 80px;\n+  display: flex;\n+  justify-content: flex-end;\n+}\n+\n+.records-footer {\n+  text-align: center;\n+  padding-top: 20px;\n+  border-top: 1px solid var(--border-color);\n+  width: 100%;\n+}\n+\n+.view-all-btn {\n+  background: rgba(102, 102, 255, 0.1);\n+  border-color: var(--primary-color);\n+  color: var(--primary-color);\n+}\n+\n+.record-time {\n   font-size: 12px;\n   color: #969799;\n }\n \n"
                },
                {
                    "date": 1752293872629,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -218,9 +218,8 @@\n import { useRouter } from 'vue-router'\n import { Toast } from 'vant'\n import { authApi, pointsApi, userApi, levelCardApi } from '../services/api.js'\n import TopNavigation from '../components/TopNavigation.vue'\n-import RecordItem from '../components/RecordItem.vue'\n import ResultModal from '../components/ResultModal.vue'\n import AuthModal from '../components/AuthModal.vue'\n \n export default {\n"
                },
                {
                    "date": 1752293885449,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -225,9 +225,8 @@\n export default {\n   name: 'Profile',\n   components: {\n     TopNavigation,\n-    RecordItem,\n     ResultModal,\n     AuthModal\n   },\n   setup() {\n"
                },
                {
                    "date": 1752293898275,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -941,9 +941,8 @@\n     margin-bottom: 20px;\n   }\n \n   .profile-content {\n-    grid-template-columns: 1fr;\n     gap: 20px;\n   }\n \n   .level-cards-grid {\n"
                },
                {
                    "date": 1752293912680,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -973,8 +973,34 @@\n \n   .section-title {\n     font-size: 1.5rem;\n   }\n+\n+  .points-grid {\n+    gap: 20px;\n+    padding: 16px;\n+  }\n+\n+  .points-value {\n+    font-size: 2rem;\n+  }\n+\n+  .record-item-unified {\n+    flex-direction: column;\n+    align-items: flex-start;\n+    gap: 12px;\n+    padding: 16px;\n+  }\n+\n+  .record-amount {\n+    align-self: flex-end;\n+    min-width: auto;\n+  }\n+\n+  .record-actions {\n+    align-self: flex-end;\n+    min-width: auto;\n+  }\n }\n \n \n \n"
                },
                {
                    "date": 1752294923955,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -92,31 +92,36 @@\n           </div>\n         </div>\n \n         <!-- 我的等级卡 -->\n-        <div v-if=\"levelCards.length > 0\" class=\"level-cards-section\">\n-          <h2 class=\"section-title\">\n-            <van-icon name=\"credit-pay\" size=\"24\" color=\"var(--primary-color)\" />\n-            我的等级卡\n-          </h2>\n-          <div class=\"level-cards-grid\">\n-            <div\n-              v-for=\"card in levelCards\"\n-              :key=\"card.id\"\n-              class=\"feature-card level-card\"\n-            >\n-              <div class=\"feature-content\">\n-                <div class=\"feature-icon\">\n-                  <van-icon name=\"credit-pay\" size=\"32\" color=\"var(--primary-color)\" />\n+        <div v-if=\"levelCards.length > 0\" class=\"feature-card level-cards\">\n+          <div class=\"feature-content level-cards-content\">\n+            <div class=\"level-cards-header\">\n+              <div class=\"feature-icon\">\n+                <van-icon name=\"credit-pay\" size=\"48\" color=\"var(--primary-color)\" />\n+              </div>\n+              <h2 class=\"feature-title\">我的等级卡</h2>\n+            </div>\n+\n+            <div class=\"level-cards-list\">\n+              <div\n+                v-for=\"card in levelCards\"\n+                :key=\"card.id\"\n+                class=\"level-card-item-unified\"\n+              >\n+                <div class=\"level-card-info\">\n+                  <div class=\"level-card-type\">{{ card.type_name }}</div>\n+                  <div class=\"level-card-date\">{{ formatDate(card.bound_at) }}</div>\n                 </div>\n-                <h3 class=\"card-type\">{{ card.type_name }}</h3>\n-                <div class=\"card-points\">\n+                <div class=\"level-card-points\">\n                   <span class=\"points-current\">{{ card.remaining_points }}</span>\n                   <span class=\"points-separator\">/</span>\n                   <span class=\"points-total\">{{ card.total_points }}</span>\n                   <span class=\"points-unit\">积分</span>\n                 </div>\n-                <p class=\"card-date\">{{ formatDate(card.bound_at) }}</p>\n+                <div class=\"level-card-icon\">\n+                  <van-icon name=\"credit-pay\" size=\"24\" color=\"var(--primary-color)\" />\n+                </div>\n               </div>\n             </div>\n           </div>\n         </div>\n"
                },
                {
                    "date": 1752294979954,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -719,67 +719,105 @@\n .level-cards-section {\n   margin-bottom: 40px;\n }\n \n-.section-title {\n+/* 等级卡样式 */\n+.level-cards-content {\n   display: flex;\n+  flex-direction: column;\n   align-items: center;\n-  gap: 12px;\n-  color: var(--text-color);\n-  font-size: 1.8rem;\n-  font-weight: 600;\n-  margin-bottom: 24px;\n   text-align: center;\n-  justify-content: center;\n }\n \n-.level-cards-grid {\n-  display: grid;\n-  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));\n-  gap: 24px;\n+.level-cards-header {\n+  display: flex;\n+  flex-direction: column;\n+  align-items: center;\n+  margin-bottom: 30px;\n }\n \n-.level-card .card-type {\n-  font-size: 1.2rem;\n-  font-weight: 600;\n-  color: var(--text-color);\n+.level-cards-header .feature-icon {\n   margin-bottom: 16px;\n }\n \n-.card-points {\n+.level-cards-header .feature-title {\n+  margin-bottom: 0;\n+}\n+\n+.level-cards-list {\n+  width: 100%;\n+  margin-bottom: 30px;\n+}\n+\n+.level-card-item-unified {\n   display: flex;\n-  align-items: baseline;\n-  justify-content: center;\n-  gap: 4px;\n+  align-items: center;\n+  gap: 16px;\n+  padding: 20px;\n+  background: rgba(255, 255, 255, 0.05);\n+  border: 1px solid var(--border-color);\n+  border-radius: 12px;\n   margin-bottom: 12px;\n+  transition: all 0.3s ease;\n }\n \n-.points-current {\n-  font-size: 1.8rem;\n-  font-weight: 700;\n+.level-card-item-unified:hover {\n+  background: rgba(255, 255, 255, 0.08);\n+  border-color: var(--primary-color);\n+  transform: translateY(-1px);\n+}\n+\n+.level-card-item-unified:last-child {\n+  margin-bottom: 0;\n+}\n+\n+.level-card-info {\n+  flex: 1;\n+  text-align: left;\n+}\n+\n+.level-card-type {\n+  font-size: 16px;\n+  font-weight: 500;\n+  color: var(--text-color);\n+  margin-bottom: 4px;\n+}\n+\n+.level-card-date {\n+  font-size: 14px;\n+  color: var(--text-light);\n+}\n+\n+.level-card-points {\n+  display: flex;\n+  align-items: baseline;\n+  gap: 4px;\n+  font-size: 16px;\n+  font-weight: 600;\n   color: var(--primary-color);\n+  min-width: 120px;\n+  justify-content: center;\n }\n \n-.points-separator {\n-  font-size: 1.2rem;\n+.level-card-points .points-separator {\n   color: var(--text-light);\n }\n \n-.points-total {\n-  font-size: 1.2rem;\n+.level-card-points .points-total {\n   color: var(--text-light);\n }\n \n-.points-unit {\n-  font-size: 0.9rem;\n+.level-card-points .points-unit {\n+  font-size: 14px;\n   color: var(--text-light);\n   margin-left: 4px;\n }\n \n-.card-date {\n-  font-size: 0.85rem;\n-  color: var(--text-light);\n-  margin: 0;\n+.level-card-icon {\n+  flex-shrink: 0;\n+  min-width: 40px;\n+  display: flex;\n+  justify-content: center;\n }\n \n /* 记录部分样式 */\n .records-content {\n"
                },
                {
                    "date": 1752294997061,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1042,8 +1042,25 @@\n   .record-actions {\n     align-self: flex-end;\n     min-width: auto;\n   }\n+\n+  .level-card-item-unified {\n+    flex-direction: column;\n+    align-items: flex-start;\n+    gap: 12px;\n+    padding: 16px;\n+  }\n+\n+  .level-card-points {\n+    align-self: flex-end;\n+    min-width: auto;\n+  }\n+\n+  .level-card-icon {\n+    align-self: flex-end;\n+    min-width: auto;\n+  }\n }\n \n \n \n"
                },
                {
                    "date": 1752295214324,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -92,36 +92,31 @@\n           </div>\n         </div>\n \n         <!-- 我的等级卡 -->\n-        <div v-if=\"levelCards.length > 0\" class=\"feature-card level-cards\">\n-          <div class=\"feature-content level-cards-content\">\n-            <div class=\"level-cards-header\">\n-              <div class=\"feature-icon\">\n-                <van-icon name=\"credit-pay\" size=\"48\" color=\"var(--primary-color)\" />\n-              </div>\n-              <h2 class=\"feature-title\">我的等级卡</h2>\n-            </div>\n-\n-            <div class=\"level-cards-list\">\n-              <div\n-                v-for=\"card in levelCards\"\n-                :key=\"card.id\"\n-                class=\"level-card-item-unified\"\n-              >\n-                <div class=\"level-card-info\">\n-                  <div class=\"level-card-type\">{{ card.type_name }}</div>\n-                  <div class=\"level-card-date\">{{ formatDate(card.bound_at) }}</div>\n+        <div v-if=\"levelCards.length > 0\" class=\"level-cards-section\">\n+          <h2 class=\"section-title\">\n+            <van-icon name=\"credit-pay\" size=\"24\" color=\"var(--primary-color)\" />\n+            我的等级卡\n+          </h2>\n+          <div class=\"level-cards-grid\">\n+            <div\n+              v-for=\"card in levelCards\"\n+              :key=\"card.id\"\n+              class=\"feature-card level-card\"\n+            >\n+              <div class=\"feature-content\">\n+                <div class=\"feature-icon\">\n+                  <van-icon name=\"credit-pay\" size=\"32\" color=\"var(--primary-color)\" />\n                 </div>\n-                <div class=\"level-card-points\">\n+                <h3 class=\"card-type\">{{ card.type_name }}</h3>\n+                <div class=\"card-points\">\n                   <span class=\"points-current\">{{ card.remaining_points }}</span>\n                   <span class=\"points-separator\">/</span>\n                   <span class=\"points-total\">{{ card.total_points }}</span>\n                   <span class=\"points-unit\">积分</span>\n                 </div>\n-                <div class=\"level-card-icon\">\n-                  <van-icon name=\"credit-pay\" size=\"24\" color=\"var(--primary-color)\" />\n-                </div>\n+                <p class=\"card-date\">{{ formatDate(card.bound_at) }}</p>\n               </div>\n             </div>\n           </div>\n         </div>\n@@ -719,105 +714,67 @@\n .level-cards-section {\n   margin-bottom: 40px;\n }\n \n-/* 等级卡样式 */\n-.level-cards-content {\n+.section-title {\n   display: flex;\n-  flex-direction: column;\n   align-items: center;\n+  gap: 12px;\n+  color: var(--text-color);\n+  font-size: 1.8rem;\n+  font-weight: 600;\n+  margin-bottom: 24px;\n   text-align: center;\n+  justify-content: center;\n }\n \n-.level-cards-header {\n-  display: flex;\n-  flex-direction: column;\n-  align-items: center;\n-  margin-bottom: 30px;\n+.level-cards-grid {\n+  display: grid;\n+  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));\n+  gap: 24px;\n }\n \n-.level-cards-header .feature-icon {\n+.level-card .card-type {\n+  font-size: 1.2rem;\n+  font-weight: 600;\n+  color: var(--text-color);\n   margin-bottom: 16px;\n }\n \n-.level-cards-header .feature-title {\n-  margin-bottom: 0;\n-}\n-\n-.level-cards-list {\n-  width: 100%;\n-  margin-bottom: 30px;\n-}\n-\n-.level-card-item-unified {\n+.card-points {\n   display: flex;\n-  align-items: center;\n-  gap: 16px;\n-  padding: 20px;\n-  background: rgba(255, 255, 255, 0.05);\n-  border: 1px solid var(--border-color);\n-  border-radius: 12px;\n+  align-items: baseline;\n+  justify-content: center;\n+  gap: 4px;\n   margin-bottom: 12px;\n-  transition: all 0.3s ease;\n }\n \n-.level-card-item-unified:hover {\n-  background: rgba(255, 255, 255, 0.08);\n-  border-color: var(--primary-color);\n-  transform: translateY(-1px);\n-}\n-\n-.level-card-item-unified:last-child {\n-  margin-bottom: 0;\n-}\n-\n-.level-card-info {\n-  flex: 1;\n-  text-align: left;\n-}\n-\n-.level-card-type {\n-  font-size: 16px;\n-  font-weight: 500;\n-  color: var(--text-color);\n-  margin-bottom: 4px;\n-}\n-\n-.level-card-date {\n-  font-size: 14px;\n-  color: var(--text-light);\n-}\n-\n-.level-card-points {\n-  display: flex;\n-  align-items: baseline;\n-  gap: 4px;\n-  font-size: 16px;\n-  font-weight: 600;\n+.points-current {\n+  font-size: 1.8rem;\n+  font-weight: 700;\n   color: var(--primary-color);\n-  min-width: 120px;\n-  justify-content: center;\n }\n \n-.level-card-points .points-separator {\n+.points-separator {\n+  font-size: 1.2rem;\n   color: var(--text-light);\n }\n \n-.level-card-points .points-total {\n+.points-total {\n+  font-size: 1.2rem;\n   color: var(--text-light);\n }\n \n-.level-card-points .points-unit {\n-  font-size: 14px;\n+.points-unit {\n+  font-size: 0.9rem;\n   color: var(--text-light);\n   margin-left: 4px;\n }\n \n-.level-card-icon {\n-  flex-shrink: 0;\n-  min-width: 40px;\n-  display: flex;\n-  justify-content: center;\n+.card-date {\n+  font-size: 0.85rem;\n+  color: var(--text-light);\n+  margin: 0;\n }\n \n /* 记录部分样式 */\n .records-content {\n@@ -1042,25 +999,8 @@\n   .record-actions {\n     align-self: flex-end;\n     min-width: auto;\n   }\n-\n-  .level-card-item-unified {\n-    flex-direction: column;\n-    align-items: flex-start;\n-    gap: 12px;\n-    padding: 16px;\n-  }\n-\n-  .level-card-points {\n-    align-self: flex-end;\n-    min-width: auto;\n-  }\n-\n-  .level-card-icon {\n-    align-self: flex-end;\n-    min-width: auto;\n-  }\n }\n \n \n \n"
                },
                {
                    "date": 1752296123958,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -92,31 +92,35 @@\n           </div>\n         </div>\n \n         <!-- 我的等级卡 -->\n-        <div v-if=\"levelCards.length > 0\" class=\"level-cards-section\">\n-          <h2 class=\"section-title\">\n-            <van-icon name=\"credit-pay\" size=\"24\" color=\"var(--primary-color)\" />\n-            我的等级卡\n-          </h2>\n-          <div class=\"level-cards-grid\">\n-            <div\n-              v-for=\"card in levelCards\"\n-              :key=\"card.id\"\n-              class=\"feature-card level-card\"\n-            >\n-              <div class=\"feature-content\">\n-                <div class=\"feature-icon\">\n-                  <van-icon name=\"credit-pay\" size=\"32\" color=\"var(--primary-color)\" />\n+        <div v-if=\"levelCards.length > 0\" class=\"feature-card level-cards-section\">\n+          <div class=\"feature-content level-cards-content\">\n+            <div class=\"level-cards-header\">\n+              <div class=\"feature-icon\">\n+                <van-icon name=\"credit-pay\" size=\"48\" color=\"var(--primary-color)\" />\n+              </div>\n+              <h2 class=\"feature-title\">我的等级卡</h2>\n+            </div>\n+\n+            <div class=\"level-cards-list\">\n+              <div\n+                v-for=\"card in levelCards\"\n+                :key=\"card.id\"\n+                class=\"level-card-item-unified\"\n+              >\n+                <div class=\"level-card-icon\">\n+                  <van-icon name=\"credit-pay\" size=\"24\" color=\"var(--primary-color)\" />\n                 </div>\n-                <h3 class=\"card-type\">{{ card.type_name }}</h3>\n-                <div class=\"card-points\">\n+                <div class=\"level-card-info\">\n+                  <div class=\"level-card-type\">{{ card.type_name }}</div>\n+                  <div class=\"level-card-date\">{{ formatDate(card.bound_at) }}</div>\n+                </div>\n+                <div class=\"level-card-points\">\n                   <span class=\"points-current\">{{ card.remaining_points }}</span>\n                   <span class=\"points-separator\">/</span>\n                   <span class=\"points-total\">{{ card.total_points }}</span>\n-                  <span class=\"points-unit\">积分</span>\n                 </div>\n-                <p class=\"card-date\">{{ formatDate(card.bound_at) }}</p>\n               </div>\n             </div>\n           </div>\n         </div>\n"
                },
                {
                    "date": 1752296146782,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -718,39 +718,83 @@\n .level-cards-section {\n   margin-bottom: 40px;\n }\n \n-.section-title {\n+.level-cards-content {\n   display: flex;\n+  flex-direction: column;\n   align-items: center;\n-  gap: 12px;\n-  color: var(--text-color);\n-  font-size: 1.8rem;\n-  font-weight: 600;\n-  margin-bottom: 24px;\n   text-align: center;\n-  justify-content: center;\n }\n \n-.level-cards-grid {\n-  display: grid;\n-  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));\n-  gap: 24px;\n+.level-cards-header {\n+  display: flex;\n+  flex-direction: column;\n+  align-items: center;\n+  margin-bottom: 30px;\n }\n \n-.level-card .card-type {\n-  font-size: 1.2rem;\n-  font-weight: 600;\n-  color: var(--text-color);\n+.level-cards-header .feature-icon {\n   margin-bottom: 16px;\n }\n \n-.card-points {\n+.level-cards-header .feature-title {\n+  margin-bottom: 0;\n+}\n+\n+.level-cards-list {\n+  width: 100%;\n+  margin-bottom: 30px;\n+}\n+\n+.level-card-item-unified {\n   display: flex;\n+  align-items: center;\n+  gap: 16px;\n+  padding: 20px;\n+  background: rgba(255, 255, 255, 0.05);\n+  border: 1px solid var(--border-color);\n+  border-radius: 12px;\n+  margin-bottom: 12px;\n+  transition: all 0.3s ease;\n+}\n+\n+.level-card-item-unified:hover {\n+  background: rgba(255, 255, 255, 0.08);\n+  border-color: var(--primary-color);\n+  transform: translateY(-1px);\n+}\n+\n+.level-card-item-unified:last-child {\n+  margin-bottom: 0;\n+}\n+\n+.level-card-icon {\n+  flex-shrink: 0;\n+}\n+\n+.level-card-info {\n+  flex: 1;\n+  text-align: left;\n+}\n+\n+.level-card-type {\n+  font-size: 16px;\n+  font-weight: 500;\n+  color: var(--text-color);\n+  margin-bottom: 4px;\n+}\n+\n+.level-card-date {\n+  font-size: 14px;\n+  color: var(--text-light);\n+}\n+\n+.level-card-points {\n+  display: flex;\n   align-items: baseline;\n-  justify-content: center;\n   gap: 4px;\n-  margin-bottom: 12px;\n+  font-weight: 600;\n }\n \n .points-current {\n   font-size: 1.8rem;\n"
                },
                {
                    "date": 1752296163349,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -795,36 +795,24 @@\n   gap: 4px;\n   font-weight: 600;\n }\n \n-.points-current {\n-  font-size: 1.8rem;\n+.level-card-points .points-current {\n+  font-size: 1.4rem;\n   font-weight: 700;\n   color: var(--primary-color);\n }\n \n-.points-separator {\n-  font-size: 1.2rem;\n+.level-card-points .points-separator {\n+  font-size: 1rem;\n   color: var(--text-light);\n }\n \n-.points-total {\n-  font-size: 1.2rem;\n+.level-card-points .points-total {\n+  font-size: 1rem;\n   color: var(--text-light);\n }\n \n-.points-unit {\n-  font-size: 0.9rem;\n-  color: var(--text-light);\n-  margin-left: 4px;\n-}\n-\n-.card-date {\n-  font-size: 0.85rem;\n-  color: var(--text-light);\n-  margin: 0;\n-}\n-\n /* 记录部分样式 */\n .records-content {\n   display: flex;\n   flex-direction: column;\n"
                }
            ],
            "date": 1752283749891,
            "name": "Commit-0",
            "content": "<template>\n  <div class=\"profile-page\">\n    <!-- 右上角用户信息 -->\n    <div class=\"top-corner\">\n      <UserInfo @login=\"handleUserLogin\" @logout=\"handleUserLogout\" />\n    </div>\n\n    <div class=\"container\">\n      <!-- 页面头部 -->\n      <header class=\"page-header\">\n        <van-button\n          @click=\"$router.push('/')\"\n          type=\"default\"\n          size=\"small\"\n          plain\n          round\n          icon=\"arrow-left\"\n          class=\"back-btn\"\n        >\n          返回首页\n        </van-button>\n        <h1 class=\"page-title\">\n          <van-icon name=\"user-o\" size=\"24\" />\n          个人中心\n        </h1>\n      </header>\n\n      <!-- 加载状态 -->\n      <van-loading v-if=\"loading\" class=\"loading-center\" size=\"24px\" vertical>\n        加载中...\n      </van-loading>\n\n      <!-- 未登录状态 -->\n      <div v-else-if=\"!isLoggedIn\" class=\"not-logged-in\">\n        <van-empty\n          image=\"https://fastly.jsdelivr.net/npm/@vant/assets/custom-empty-image.png\"\n          description=\"请先登录\"\n        >\n          <van-button type=\"primary\" round @click=\"showLoginModal\">\n            立即登录\n          </van-button>\n        </van-empty>\n      </div>\n\n      <!-- 已登录状态 -->\n      <div v-else class=\"profile-content\">\n        <!-- 用户信息卡片 -->\n        <div class=\"user-card\">\n          <div class=\"user-avatar\">\n            <van-icon name=\"user-o\" size=\"48\" />\n          </div>\n          <div class=\"user-info\">\n            <h2 class=\"username\">{{ userInfo?.username }}</h2>\n            <p class=\"user-id\">ID: {{ userInfo?.id }}</p>\n            <p class=\"join-date\">\n              注册时间: {{ formatDate(userInfo?.created_at) }}\n            </p>\n            <p v-if=\"userInfo?.last_login\" class=\"last-login\">\n              最后登录: {{ formatDate(userInfo?.last_login) }}\n            </p>\n          </div>\n          <div class=\"user-actions\">\n            <van-button\n              type=\"primary\"\n              size=\"small\"\n              plain\n              @click=\"refreshUserInfo\"\n              :loading=\"refreshing\"\n            >\n              刷新信息\n            </van-button>\n          </div>\n        </div>\n\n        <!-- 积分信息卡片 -->\n        <div class=\"points-card\">\n          <div class=\"card-header\">\n            <h3>\n              <van-icon name=\"gold-coin-o\" size=\"20\" />\n              我的积分\n            </h3>\n            <van-button\n              type=\"primary\"\n              size=\"mini\"\n              plain\n              @click=\"refreshPoints\"\n              :loading=\"pointsLoading\"\n            >\n              刷新\n            </van-button>\n          </div>\n\n          <div class=\"points-summary\">\n            <div class=\"points-item\">\n              <span class=\"points-label\">总积分</span>\n              <span class=\"points-value\">{{ pointsInfo?.total_points || 0 }}</span>\n            </div>\n            <div class=\"points-item\">\n              <span class=\"points-label\">等级卡数量</span>\n              <span class=\"points-value\">{{ pointsInfo?.cards_count || 0 }}</span>\n            </div>\n          </div>\n\n          <!-- 等级卡明细 -->\n          <div v-if=\"pointsInfo?.cards_breakdown?.length\" class=\"cards-breakdown\">\n            <h4>等级卡明细</h4>\n            <div class=\"card-list\">\n              <div\n                v-for=\"(card, index) in pointsInfo.cards_breakdown\"\n                :key=\"index\"\n                class=\"card-item\"\n              >\n                <span class=\"card-type\">{{ card.type }}</span>\n                <span class=\"card-points\">{{ card.points }} 积分</span>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <!-- 最近积分记录 -->\n        <div class=\"recent-records\">\n          <div class=\"card-header\">\n            <h3>\n              <van-icon name=\"records\" size=\"20\" />\n              最近记录\n            </h3>\n            <van-button\n              type=\"primary\"\n              size=\"mini\"\n              plain\n              @click=\"viewAllRecords\"\n            >\n              查看全部\n            </van-button>\n          </div>\n\n          <div v-if=\"recentRecords.length === 0\" class=\"no-records\">\n            <van-empty description=\"暂无记录\" />\n          </div>\n\n          <div v-else class=\"records-list\">\n            <div\n              v-for=\"(record, index) in recentRecords\"\n              :key=\"index\"\n              class=\"record-item\"\n            >\n              <div class=\"record-info\">\n                <div class=\"record-desc\">{{ record.description }}</div>\n                <div class=\"record-time\">{{ formatDate(record.created_at) }}</div>\n              </div>\n              <div class=\"record-amount\" :class=\"record.action_type\">\n                {{ record.action_type === 'consume' ? '-' : '+' }}{{ record.points_amount }}\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <!-- 操作按钮 -->\n        <div class=\"action-buttons\">\n          <van-button\n            type=\"danger\"\n            block\n            round\n            @click=\"handleLogout\"\n            icon=\"sign\"\n          >\n            退出登录\n          </van-button>\n        </div>\n      </div>\n    </div>\n\n    <!-- 登录注册弹窗 -->\n    <AuthModal\n      v-model:show=\"showAuthModal\"\n      :default-mode=\"authMode\"\n      @success=\"handleAuthSuccess\"\n    />\n\n    <!-- 积分记录详情弹窗 -->\n    <van-popup\n      v-model:show=\"showRecordsModal\"\n      position=\"bottom\"\n      :style=\"{ height: '80%' }\"\n      round\n    >\n      <div class=\"records-modal\">\n        <div class=\"modal-header\">\n          <h3>积分记录</h3>\n          <van-icon name=\"cross\" @click=\"showRecordsModal = false\" />\n        </div>\n\n        <div class=\"modal-content\">\n          <van-list\n            v-model:loading=\"recordsLoading\"\n            :finished=\"recordsFinished\"\n            finished-text=\"没有更多了\"\n            @load=\"loadMoreRecords\"\n          >\n            <div\n              v-for=\"(record, index) in allRecords\"\n              :key=\"index\"\n              class=\"record-item\"\n            >\n              <div class=\"record-info\">\n                <div class=\"record-desc\">{{ record.description }}</div>\n                <div class=\"record-time\">{{ formatDate(record.created_at) }}</div>\n                <div v-if=\"record.url\" class=\"record-url\">\n                  <van-tag type=\"primary\" size=\"mini\">有关联文件</van-tag>\n                </div>\n              </div>\n              <div class=\"record-amount\" :class=\"record.action_type\">\n                {{ record.action_type === 'consume' ? '-' : '+' }}{{ record.points_amount }}\n              </div>\n            </div>\n          </van-list>\n        </div>\n      </div>\n    </van-popup>\n  </div>\n</template>\n\n<script>\nimport { ref, reactive, computed, onMounted } from 'vue'\nimport { useRouter } from 'vue-router'\nimport { Toast } from 'vant'\nimport { authApi, pointsApi, userApi } from '../services/api.js'\nimport UserInfo from '../components/UserInfo.vue'\nimport AuthModal from '../components/AuthModal.vue'\n\nexport default {\n  name: 'Profile',\n  components: {\n    UserInfo,\n    AuthModal\n  },\n  setup() {\n    const router = useRouter()\n\n    // 响应式数据\n    const loading = ref(true)\n    const refreshing = ref(false)\n    const pointsLoading = ref(false)\n    const recordsLoading = ref(false)\n    const recordsFinished = ref(false)\n    const showAuthModal = ref(false)\n    const showRecordsModal = ref(false)\n    const authMode = ref('login')\n\n    const userInfo = ref(null)\n    const pointsInfo = ref(null)\n    const recentRecords = ref([])\n    const allRecords = ref([])\n    const recordsPage = ref(1)\n\n    // 计算属性\n    const isLoggedIn = computed(() => authApi.isLoggedIn() && userInfo.value)\n\n    // 格式化日期\n    const formatDate = (dateString) => {\n      if (!dateString) return '未知'\n      const date = new Date(dateString)\n      return date.toLocaleString('zh-CN', {\n        year: 'numeric',\n        month: '2-digit',\n        day: '2-digit',\n        hour: '2-digit',\n        minute: '2-digit'\n      })\n    }\n\n    // 显示登录弹窗\n    const showLoginModal = () => {\n      authMode.value = 'login'\n      showAuthModal.value = true\n    }\n\n    // 处理认证成功\n    const handleAuthSuccess = (data) => {\n      userInfo.value = data.user\n      initializeData()\n    }\n\n    // 处理用户登录\n    const handleUserLogin = (data) => {\n      userInfo.value = data.user\n      initializeData()\n    }\n\n    // 处理用户登出\n    const handleUserLogout = () => {\n      userInfo.value = null\n      pointsInfo.value = null\n      recentRecords.value = []\n      allRecords.value = []\n      router.push('/')\n    }\n\n    // 退出登录\n    const handleLogout = () => {\n      authApi.logout()\n      handleUserLogout()\n      Toast.success('退出登录成功')\n    }\n\n    // 刷新用户信息\n    const refreshUserInfo = async () => {\n      if (!isLoggedIn.value) return\n\n      try {\n        refreshing.value = true\n        const response = await authApi.getCurrentUser()\n\n        if (response.success) {\n          userInfo.value = response.data.user\n          Toast.success('用户信息已刷新')\n        } else {\n          Toast.fail('刷新失败')\n        }\n      } catch (error) {\n        console.error('刷新用户信息失败:', error)\n        Toast.fail('刷新失败')\n      } finally {\n        refreshing.value = false\n      }\n    }\n\n    // 刷新积分信息\n    const refreshPoints = async () => {\n      if (!isLoggedIn.value) return\n\n      try {\n        pointsLoading.value = true\n        const response = await pointsApi.getUserPoints()\n\n        if (response.success) {\n          pointsInfo.value = response.data\n          Toast.success('积分信息已刷新')\n        } else {\n          Toast.fail('获取积分信息失败')\n        }\n      } catch (error) {\n        console.error('获取积分信息失败:', error)\n        Toast.fail('获取积分信息失败')\n      } finally {\n        pointsLoading.value = false\n      }\n    }\n\n    // 加载最近积分记录\n    const loadRecentRecords = async () => {\n      if (!isLoggedIn.value) return\n\n      try {\n        const response = await pointsApi.getPointsHistory(1, 3, true)\n\n        if (response.success) {\n          recentRecords.value = response.data.logs || []\n        }\n      } catch (error) {\n        console.error('获取最近记录失败:', error)\n      }\n    }\n\n    // 查看全部记录\n    const viewAllRecords = () => {\n      showRecordsModal.value = true\n      if (allRecords.value.length === 0) {\n        loadMoreRecords()\n      }\n    }\n\n    // 加载更多记录\n    const loadMoreRecords = async () => {\n      if (!isLoggedIn.value || recordsLoading.value || recordsFinished.value) return\n\n      try {\n        recordsLoading.value = true\n        const response = await pointsApi.getPointsHistory(recordsPage.value, 20, false)\n\n        if (response.success) {\n          const newRecords = response.data.logs || []\n          allRecords.value.push(...newRecords)\n\n          if (newRecords.length < 20) {\n            recordsFinished.value = true\n          } else {\n            recordsPage.value++\n          }\n        } else {\n          recordsFinished.value = true\n        }\n      } catch (error) {\n        console.error('加载积分记录失败:', error)\n        recordsFinished.value = true\n      } finally {\n        recordsLoading.value = false\n      }\n    }\n\n    // 初始化数据\n    const initializeData = async () => {\n      if (!isLoggedIn.value) {\n        loading.value = false\n        return\n      }\n\n      try {\n        loading.value = true\n\n        // 并行加载用户信息、积分信息和最近记录\n        await Promise.all([\n          refreshUserInfo(),\n          refreshPoints(),\n          loadRecentRecords()\n        ])\n      } catch (error) {\n        console.error('初始化数据失败:', error)\n      } finally {\n        loading.value = false\n      }\n    }\n\n    // 组件挂载时初始化\n    onMounted(() => {\n      // 从本地存储获取用户信息\n      if (authApi.isLoggedIn()) {\n        userInfo.value = authApi.getLocalUserInfo()\n      }\n\n      initializeData()\n    })\n\n    return {\n      loading,\n      refreshing,\n      pointsLoading,\n      recordsLoading,\n      recordsFinished,\n      showAuthModal,\n      showRecordsModal,\n      authMode,\n      userInfo,\n      pointsInfo,\n      recentRecords,\n      allRecords,\n      recordsPage,\n      isLoggedIn,\n      formatDate,\n      showLoginModal,\n      handleAuthSuccess,\n      handleUserLogin,\n      handleUserLogout,\n      handleLogout,\n      refreshUserInfo,\n      refreshPoints,\n      loadRecentRecords,\n      viewAllRecords,\n      loadMoreRecords,\n      initializeData\n    }\n  }\n}\n</script>\n\n<style scoped>\n/* 基础样式将在下一个编辑中添加 */\n</style>\n"
        }
    ]
}