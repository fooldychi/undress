{
    "sourceFile": "client/src/views/FaceSwapUnified.vue",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 18,
            "patches": [
                {
                    "date": 1752395499903,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1752898906929,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -25,8 +25,9 @@\n import { Users } from 'lucide-vue-next'\n import { UnifiedImageProcessingTemplate } from '../components/mobile'\n import { FaceSwapIcon } from '../components/icons'\n import { processFaceSwapImage } from '../services/comfyui.js'\n+import { handleError } from '../services/globalErrorHandler.js'\n \n console.log('FaceSwapUnifiedç»„ä»¶å·²åŠ è½½ï¼ŒComfyUIæœåŠ¡å·²å¯¼å…¥')\n \n // å“åº”å¼æ•°æ®\n@@ -49,19 +50,19 @@\n \n // å¤„ç†ä¸Šä¼ å˜åŒ–\n const handleUploadChange = (panelId, data) => {\n   console.log('ä¸Šä¼ å˜åŒ–:', panelId, data)\n-  \n+\n   if (panelId === 'face-photos') {\n     // å¤„ç†å¤šå›¾ä¸Šä¼ æ•°æ®\n     facePhotos.value = Array.isArray(data) ? data.map(item => item.url || item) : []\n     resultImage.value = null // æ¸…é™¤ä¹‹å‰çš„ç»“æœ\n-    \n+\n     // è‡ªåŠ¨è¡¥é½åˆ°4å¼ ï¼ˆå¦‚æœéœ€è¦çš„è¯ï¼‰\n     while (facePhotos.value.length < 4 && facePhotos.value.length > 0) {\n       facePhotos.value.push(facePhotos.value[facePhotos.value.length - 1])\n     }\n-    \n+\n     if (data.length > 0) {\n       Toast.success(`å·²é€‰æ‹© ${data.length} å¼ ç…§ç‰‡${data.length < 4 ? 'ï¼Œè‡ªåŠ¨è¡¥é½è‡³4å¼ ' : ''}`)\n     }\n   } else if (panelId === 'target-image') {\n@@ -134,9 +135,9 @@\n   resultImage.value = null\n   processingStatus.value = ''\n   promptId.value = ''\n   processingTime.value = ''\n-  \n+\n   // é‡ç½®æ¨¡æ¿å†…éƒ¨çŠ¶æ€\n   if (templateRef.value) {\n     const { uploadData } = templateRef.value\n     if (uploadData['face-photos']) {\n@@ -145,9 +146,9 @@\n     if (uploadData['target-image']) {\n       uploadData['target-image'] = null\n     }\n   }\n-  \n+\n   Toast.success('å·²é‡ç½®ï¼Œå¯ä»¥é‡æ–°é€‰æ‹©å›¾ç‰‡')\n }\n \n // ä¸‹è½½ç»“æœ\n"
                },
                {
                    "date": 1752898918175,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -118,9 +118,16 @@\n       throw new Error(result.error || 'æ¢è„¸å¤„ç†å¤±è´¥')\n     }\n   } catch (error) {\n     console.error('âŒ æ¢è„¸å¤„ç†å¤±è´¥:', error)\n-    Toast.fail(`æ¢è„¸å¤±è´¥: ${error.message}`)\n+\n+    // ä½¿ç”¨å…¨å±€é”™è¯¯å¤„ç†å™¨\n+    const isHandledGlobally = handleError(error, 'æ¢è„¸å¤„ç†')\n+\n+    // å¦‚æœæ²¡æœ‰è¢«å…¨å±€å¤„ç†ï¼Œåˆ™æ˜¾ç¤ºæ™®é€šé”™è¯¯æç¤º\n+    if (!isHandledGlobally) {\n+      Toast.fail(`æ¢è„¸å¤±è´¥: ${error.message}`)\n+    }\n   } finally {\n     isLoading.value = false\n     processingStatus.value = ''\n     progressPercent.value = 0\n"
                },
                {
                    "date": 1752944784132,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -24,9 +24,9 @@\n import { Toast } from 'vant'\n import { Users } from 'lucide-vue-next'\n import { UnifiedImageProcessingTemplate } from '../components/mobile'\n import { FaceSwapIcon } from '../components/icons'\n-import { processFaceSwapImage } from '../services/comfyui.js'\n+import { processFaceSwapImage } from '../services/comfyui-refactored.js'\n import { handleError } from '../services/globalErrorHandler.js'\n \n console.log('FaceSwapUnifiedç»„ä»¶å·²åŠ è½½ï¼ŒComfyUIæœåŠ¡å·²å¯¼å…¥')\n \n"
                },
                {
                    "date": 1752946712221,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -24,9 +24,9 @@\n import { Toast } from 'vant'\n import { Users } from 'lucide-vue-next'\n import { UnifiedImageProcessingTemplate } from '../components/mobile'\n import { FaceSwapIcon } from '../components/icons'\n-import { processFaceSwapImage } from '../services/comfyui-refactored.js'\n+import { processFaceSwapImage } from '../services/comfyui.js'\n import { handleError } from '../services/globalErrorHandler.js'\n \n console.log('FaceSwapUnifiedç»„ä»¶å·²åŠ è½½ï¼ŒComfyUIæœåŠ¡å·²å¯¼å…¥')\n \n"
                },
                {
                    "date": 1753532273797,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,223 +1,223 @@\n-<template>\n-  <UnifiedImageProcessingTemplate\n-    function-id=\"face-swap\"\n-    :title-icon=\"FaceSwapIcon\"\n-    title-icon-color=\"var(--van-warning-color)\"\n-    :process-button-icon=\"Users\"\n-    :is-processing=\"isLoading\"\n-    :progress=\"progressPercent\"\n-    :processing-info=\"{ promptId, processingTime }\"\n-    :result-data=\"resultImage\"\n-    :original-image-for-comparison=\"originalImageForComparison\"\n-    @login=\"handleUserLogin\"\n-    @logout=\"handleUserLogout\"\n-    @process=\"processImages\"\n-    @reset=\"resetProcess\"\n-    @download=\"handleDownload\"\n-    @upload-change=\"handleUploadChange\"\n-    ref=\"templateRef\"\n-  />\n-</template>\n-\n-<script setup>\n-import { ref, computed, onMounted, onUnmounted } from 'vue'\n-import { Toast } from 'vant'\n-import { Users } from 'lucide-vue-next'\n-import { UnifiedImageProcessingTemplate } from '../components/mobile'\n-import { FaceSwapIcon } from '../components/icons'\n-import { processFaceSwapImage } from '../services/comfyui.js'\n-import { handleError } from '../services/globalErrorHandler.js'\n-\n-console.log('FaceSwapUnifiedç»„ä»¶å·²åŠ è½½ï¼ŒComfyUIæœåŠ¡å·²å¯¼å…¥')\n-\n-// å“åº”å¼æ•°æ®\n-const templateRef = ref(null)\n-const facePhotos = ref([])\n-const targetImage = ref(null)\n-const originalImageForComparison = ref(null)\n-const resultImage = ref(null)\n-const isLoading = ref(false)\n-const processingStatus = ref('')\n-const promptId = ref('')\n-const processingTime = ref('')\n-const progressPercent = ref(0)\n-const startTime = ref(null)\n-\n-// è®¡ç®—å±æ€§\n-const canProcess = computed(() => {\n-  return facePhotos.value.length > 0 && targetImage.value !== null\n-})\n-\n-// å¤„ç†ä¸Šä¼ å˜åŒ–\n-const handleUploadChange = (panelId, data) => {\n-  console.log('ä¸Šä¼ å˜åŒ–:', panelId, data)\n-\n-  if (panelId === 'face-photos') {\n-    // å¤„ç†å¤šå›¾ä¸Šä¼ æ•°æ®\n-    facePhotos.value = Array.isArray(data) ? data.map(item => item.url || item) : []\n-    resultImage.value = null // æ¸…é™¤ä¹‹å‰çš„ç»“æœ\n-\n-    // è‡ªåŠ¨è¡¥é½åˆ°4å¼ ï¼ˆå¦‚æœéœ€è¦çš„è¯ï¼‰\n-    while (facePhotos.value.length < 4 && facePhotos.value.length > 0) {\n-      facePhotos.value.push(facePhotos.value[facePhotos.value.length - 1])\n-    }\n-\n-    if (data.length > 0) {\n-      Toast.success(`å·²é€‰æ‹© ${data.length} å¼ ç…§ç‰‡${data.length < 4 ? 'ï¼Œè‡ªåŠ¨è¡¥é½è‡³4å¼ ' : ''}`)\n-    }\n-  } else if (panelId === 'target-image') {\n-    targetImage.value = data\n-    resultImage.value = null // æ¸…é™¤ä¹‹å‰çš„ç»“æœ\n-  }\n-}\n-\n-// å¤„ç†å›¾ç‰‡\n-const processImages = async () => {\n-  if (!canProcess.value) {\n-    Toast.fail('è¯·å…ˆä¸Šä¼ äººè„¸ç…§ç‰‡å’Œç›®æ ‡å›¾ç‰‡')\n-    return\n-  }\n-\n-  isLoading.value = true\n-  processingStatus.value = 'æ­£åœ¨åŠ è½½æœåŠ¡...'\n-  progressPercent.value = 10\n-  startTime.value = Date.now()\n-\n-  try {\n-    console.log('ğŸš€ å¼€å§‹æé€Ÿæ¢è„¸å¤„ç†')\n-\n-    processingStatus.value = 'æ­£åœ¨ä¸Šä¼ å›¾ç‰‡...'\n-    progressPercent.value = 30\n-\n-    // è°ƒç”¨æ¢è„¸å¤„ç†æœåŠ¡\n-    const result = await processFaceSwapImage({\n-      facePhotos: facePhotos.value,\n-      targetImage: targetImage.value,\n-      onProgress: (status, percent) => {\n-        processingStatus.value = status\n-        progressPercent.value = Math.max(progressPercent.value, percent)\n-      }\n-    })\n-\n-    if (result.success && result.imageUrl) {\n-      resultImage.value = result.imageUrl\n-      // ä¿å­˜ç›®æ ‡å›¾åƒç”¨äºå¯¹æ¯”ï¼ˆä½¿ç”¨æœåŠ¡å™¨è¿”å›çš„æˆ–åŸå§‹çš„ç›®æ ‡å›¾åƒï¼‰\n-      originalImageForComparison.value = result.targetImageUrl || targetImage.value\n-      promptId.value = result.promptId || ''\n-\n-      // è®¡ç®—å¤„ç†æ—¶é—´\n-      const endTime = Date.now()\n-      const duration = Math.round((endTime - startTime.value) / 1000)\n-      processingTime.value = `${duration}ç§’`\n-\n-      // æ˜¾ç¤ºæˆåŠŸtoast\n-      const pointsInfo = result.pointsConsumed ? `ï¼ˆæ¶ˆè€—${result.pointsConsumed}ç‚¹ï¼‰` : ''\n-      Toast.success(`ğŸ‰ æ¢è„¸å®Œæˆï¼${pointsInfo}å¯ä»¥æ‹–æ‹½ä¸­é—´çº¿å¯¹æ¯”ç›®æ ‡å›¾åƒå’Œæ¢è„¸ç»“æœ`)\n-      console.log('âœ… æ¢è„¸å¤„ç†å®Œæˆ')\n-    } else {\n-      throw new Error(result.error || 'æ¢è„¸å¤„ç†å¤±è´¥')\n-    }\n-  } catch (error) {\n-    console.error('âŒ æ¢è„¸å¤„ç†å¤±è´¥:', error)\n-\n-    // ä½¿ç”¨å…¨å±€é”™è¯¯å¤„ç†å™¨\n-    const isHandledGlobally = handleError(error, 'æ¢è„¸å¤„ç†')\n-\n-    // å¦‚æœæ²¡æœ‰è¢«å…¨å±€å¤„ç†ï¼Œåˆ™æ˜¾ç¤ºæ™®é€šé”™è¯¯æç¤º\n-    if (!isHandledGlobally) {\n-      Toast.fail(`æ¢è„¸å¤±è´¥: ${error.message}`)\n-    }\n-  } finally {\n-    isLoading.value = false\n-    processingStatus.value = ''\n-    progressPercent.value = 0\n-  }\n-}\n-\n-// é‡ç½®å¤„ç†\n-const resetProcess = () => {\n-  facePhotos.value = []\n-  targetImage.value = null\n-  originalImageForComparison.value = null\n-  resultImage.value = null\n-  processingStatus.value = ''\n-  promptId.value = ''\n-  processingTime.value = ''\n-\n-  // é‡ç½®æ¨¡æ¿å†…éƒ¨çŠ¶æ€\n-  if (templateRef.value) {\n-    const { uploadData } = templateRef.value\n-    if (uploadData['face-photos']) {\n-      uploadData['face-photos'] = []\n-    }\n-    if (uploadData['target-image']) {\n-      uploadData['target-image'] = null\n-    }\n-  }\n-\n-  Toast.success('å·²é‡ç½®ï¼Œå¯ä»¥é‡æ–°é€‰æ‹©å›¾ç‰‡')\n-}\n-\n-// ä¸‹è½½ç»“æœ\n-const handleDownload = (imageUrl) => {\n-  if (!imageUrl) return\n-\n-  const link = document.createElement('a')\n-  link.href = imageUrl\n-  link.download = `faceswap_result_${Date.now()}.png`\n-  document.body.appendChild(link)\n-  link.click()\n-  document.body.removeChild(link)\n-\n-  Toast.success('å›¾ç‰‡ä¸‹è½½å·²å¼€å§‹')\n-}\n-\n-// ç”¨æˆ·ç™»å½•æˆåŠŸå›è°ƒ\n-const handleUserLogin = (data) => {\n-  console.log('ç”¨æˆ·ç™»å½•æˆåŠŸ:', data)\n-  // å¯ä»¥åœ¨è¿™é‡Œè§¦å‘ä¸€äº›éœ€è¦ç™»å½•çŠ¶æ€çš„æ“ä½œ\n-}\n-\n-// ç”¨æˆ·ç™»å‡ºå›è°ƒ\n-const handleUserLogout = () => {\n-  console.log('ç”¨æˆ·å·²ç™»å‡º')\n-  // å¯ä»¥åœ¨è¿™é‡Œæ¸…ç†ä¸€äº›ç”¨æˆ·ç›¸å…³çš„çŠ¶æ€\n-}\n-\n-// ç”Ÿå‘½å‘¨æœŸ\n-onMounted(() => {\n-  console.log('FaceSwapUnifiedç»„ä»¶å·²æŒ‚è½½ï¼ŒComfyUIæœåŠ¡å·²å‡†å¤‡å°±ç»ª')\n-})\n-\n-onUnmounted(() => {\n-  // æ¸…ç†å·¥ä½œ\n-  if (isLoading.value) {\n-    isLoading.value = false\n-  }\n-})\n-</script>\n-\n-<style scoped>\n-/* è¿™é‡Œå¯ä»¥æ·»åŠ ç‰¹å®šäºæ¢è„¸åŠŸèƒ½çš„æ ·å¼ */\n-/* å¤§éƒ¨åˆ†æ ·å¼å·²ç»åœ¨ç»Ÿä¸€æ¨¡æ¿ä¸­å¤„ç† */\n-\n-/* å¦‚æœéœ€è¦è‡ªå®šä¹‰æ ·å¼ï¼Œå¯ä»¥åœ¨è¿™é‡Œæ·»åŠ  */\n-:deep(.unified-image-upload-panel) {\n-  /* è‡ªå®šä¹‰ä¸Šä¼ é¢æ¿æ ·å¼ */\n-}\n-\n-:deep(.multi-image-upload) {\n-  /* è‡ªå®šä¹‰å¤šå›¾ä¸Šä¼ æ ·å¼ */\n-}\n-\n-/* ç§»åŠ¨ç«¯ä¼˜åŒ– */\n-@media (max-width: 768px) {\n-  /* ç§»åŠ¨ç«¯ç‰¹å®šæ ·å¼ */\n-}\n-\n-/* æ·±è‰²ä¸»é¢˜é€‚é… */\n-@media (prefers-color-scheme: dark) {\n-  /* æ·±è‰²ä¸»é¢˜æ ·å¼ */\n-}\n-</style>\n-\n+<template>\r\n+  <UnifiedImageProcessingTemplate\r\n+    function-id=\"face-swap\"\r\n+    :title-icon=\"FaceSwapIcon\"\r\n+    title-icon-color=\"var(--van-warning-color)\"\r\n+    :process-button-icon=\"Users\"\r\n+    :is-processing=\"isLoading\"\r\n+    :progress=\"0\"\r\n+    :processing-info=\"{ promptId, processingTime }\"\r\n+    :result-data=\"resultImage\"\r\n+    :original-image-for-comparison=\"originalImageForComparison\"\r\n+    @login=\"handleUserLogin\"\r\n+    @logout=\"handleUserLogout\"\r\n+    @process=\"processImages\"\r\n+    @reset=\"resetProcess\"\r\n+    @download=\"handleDownload\"\r\n+    @upload-change=\"handleUploadChange\"\r\n+    ref=\"templateRef\"\r\n+  />\r\n+</template>\r\n+\r\n+<script setup>\r\n+import { ref, computed, onMounted, onUnmounted } from 'vue'\r\n+import { Toast } from 'vant'\r\n+import { Users } from 'lucide-vue-next'\r\n+import { UnifiedImageProcessingTemplate } from '../components/mobile'\r\n+import { FaceSwapIcon } from '../components/icons'\r\n+import { processFaceSwapImage } from '../services/comfyui.js'\r\n+import { handleError } from '../services/globalErrorHandler.js'\r\n+\r\n+console.log('FaceSwapUnifiedç»„ä»¶å·²åŠ è½½ï¼ŒComfyUIæœåŠ¡å·²å¯¼å…¥')\r\n+\r\n+// å“åº”å¼æ•°æ®\r\n+const templateRef = ref(null)\r\n+const facePhotos = ref([])\r\n+const targetImage = ref(null)\r\n+const originalImageForComparison = ref(null)\r\n+const resultImage = ref(null)\r\n+const isLoading = ref(false)\r\n+const processingStatus = ref('')\r\n+const promptId = ref('')\r\n+const processingTime = ref('')\r\n+const progressPercent = ref(0)\r\n+const startTime = ref(null)\r\n+\r\n+// è®¡ç®—å±æ€§\r\n+const canProcess = computed(() => {\r\n+  return facePhotos.value.length > 0 && targetImage.value !== null\r\n+})\r\n+\r\n+// å¤„ç†ä¸Šä¼ å˜åŒ–\r\n+const handleUploadChange = (panelId, data) => {\r\n+  console.log('ä¸Šä¼ å˜åŒ–:', panelId, data)\r\n+\r\n+  if (panelId === 'face-photos') {\r\n+    // å¤„ç†å¤šå›¾ä¸Šä¼ æ•°æ®\r\n+    facePhotos.value = Array.isArray(data) ? data.map(item => item.url || item) : []\r\n+    resultImage.value = null // æ¸…é™¤ä¹‹å‰çš„ç»“æœ\r\n+\r\n+    // è‡ªåŠ¨è¡¥é½åˆ°4å¼ ï¼ˆå¦‚æœéœ€è¦çš„è¯ï¼‰\r\n+    while (facePhotos.value.length < 4 && facePhotos.value.length > 0) {\r\n+      facePhotos.value.push(facePhotos.value[facePhotos.value.length - 1])\r\n+    }\r\n+\r\n+    if (data.length > 0) {\r\n+      Toast.success(`å·²é€‰æ‹© ${data.length} å¼ ç…§ç‰‡${data.length < 4 ? 'ï¼Œè‡ªåŠ¨è¡¥é½è‡³4å¼ ' : ''}`)\r\n+    }\r\n+  } else if (panelId === 'target-image') {\r\n+    targetImage.value = data\r\n+    resultImage.value = null // æ¸…é™¤ä¹‹å‰çš„ç»“æœ\r\n+  }\r\n+}\r\n+\r\n+// å¤„ç†å›¾ç‰‡\r\n+const processImages = async () => {\r\n+  if (!canProcess.value) {\r\n+    Toast.fail('è¯·å…ˆä¸Šä¼ äººè„¸ç…§ç‰‡å’Œç›®æ ‡å›¾ç‰‡')\r\n+    return\r\n+  }\r\n+\r\n+  isLoading.value = true\r\n+  processingStatus.value = 'æ­£åœ¨åŠ è½½æœåŠ¡...'\r\n+  progressPercent.value = 10\r\n+  startTime.value = Date.now()\r\n+\r\n+  try {\r\n+    console.log('ğŸš€ å¼€å§‹æé€Ÿæ¢è„¸å¤„ç†')\r\n+\r\n+    processingStatus.value = 'æ­£åœ¨ä¸Šä¼ å›¾ç‰‡...'\r\n+    progressPercent.value = 30\r\n+\r\n+    // è°ƒç”¨æ¢è„¸å¤„ç†æœåŠ¡\r\n+    const result = await processFaceSwapImage({\r\n+      facePhotos: facePhotos.value,\r\n+      targetImage: targetImage.value,\r\n+      onProgress: (status, percent) => {\r\n+        processingStatus.value = status\r\n+        progressPercent.value = Math.max(progressPercent.value, percent)\r\n+      }\r\n+    })\r\n+\r\n+    if (result.success && result.imageUrl) {\r\n+      resultImage.value = result.imageUrl\r\n+      // ä¿å­˜ç›®æ ‡å›¾åƒç”¨äºå¯¹æ¯”ï¼ˆä½¿ç”¨æœåŠ¡å™¨è¿”å›çš„æˆ–åŸå§‹çš„ç›®æ ‡å›¾åƒï¼‰\r\n+      originalImageForComparison.value = result.targetImageUrl || targetImage.value\r\n+      promptId.value = result.promptId || ''\r\n+\r\n+      // è®¡ç®—å¤„ç†æ—¶é—´\r\n+      const endTime = Date.now()\r\n+      const duration = Math.round((endTime - startTime.value) / 1000)\r\n+      processingTime.value = `${duration}ç§’`\r\n+\r\n+      // æ˜¾ç¤ºæˆåŠŸtoast\r\n+      const pointsInfo = result.pointsConsumed ? `ï¼ˆæ¶ˆè€—${result.pointsConsumed}ç‚¹ï¼‰` : ''\r\n+      Toast.success(`ğŸ‰ æ¢è„¸å®Œæˆï¼${pointsInfo}å¯ä»¥æ‹–æ‹½ä¸­é—´çº¿å¯¹æ¯”ç›®æ ‡å›¾åƒå’Œæ¢è„¸ç»“æœ`)\r\n+      console.log('âœ… æ¢è„¸å¤„ç†å®Œæˆ')\r\n+    } else {\r\n+      throw new Error(result.error || 'æ¢è„¸å¤„ç†å¤±è´¥')\r\n+    }\r\n+  } catch (error) {\r\n+    console.error('âŒ æ¢è„¸å¤„ç†å¤±è´¥:', error)\r\n+\r\n+    // ä½¿ç”¨å…¨å±€é”™è¯¯å¤„ç†å™¨\r\n+    const isHandledGlobally = handleError(error, 'æ¢è„¸å¤„ç†')\r\n+\r\n+    // å¦‚æœæ²¡æœ‰è¢«å…¨å±€å¤„ç†ï¼Œåˆ™æ˜¾ç¤ºæ™®é€šé”™è¯¯æç¤º\r\n+    if (!isHandledGlobally) {\r\n+      Toast.fail(`æ¢è„¸å¤±è´¥: ${error.message}`)\r\n+    }\r\n+  } finally {\r\n+    isLoading.value = false\r\n+    processingStatus.value = ''\r\n+    progressPercent.value = 0\r\n+  }\r\n+}\r\n+\r\n+// é‡ç½®å¤„ç†\r\n+const resetProcess = () => {\r\n+  facePhotos.value = []\r\n+  targetImage.value = null\r\n+  originalImageForComparison.value = null\r\n+  resultImage.value = null\r\n+  processingStatus.value = ''\r\n+  promptId.value = ''\r\n+  processingTime.value = ''\r\n+\r\n+  // é‡ç½®æ¨¡æ¿å†…éƒ¨çŠ¶æ€\r\n+  if (templateRef.value) {\r\n+    const { uploadData } = templateRef.value\r\n+    if (uploadData['face-photos']) {\r\n+      uploadData['face-photos'] = []\r\n+    }\r\n+    if (uploadData['target-image']) {\r\n+      uploadData['target-image'] = null\r\n+    }\r\n+  }\r\n+\r\n+  Toast.success('å·²é‡ç½®ï¼Œå¯ä»¥é‡æ–°é€‰æ‹©å›¾ç‰‡')\r\n+}\r\n+\r\n+// ä¸‹è½½ç»“æœ\r\n+const handleDownload = (imageUrl) => {\r\n+  if (!imageUrl) return\r\n+\r\n+  const link = document.createElement('a')\r\n+  link.href = imageUrl\r\n+  link.download = `faceswap_result_${Date.now()}.png`\r\n+  document.body.appendChild(link)\r\n+  link.click()\r\n+  document.body.removeChild(link)\r\n+\r\n+  Toast.success('å›¾ç‰‡ä¸‹è½½å·²å¼€å§‹')\r\n+}\r\n+\r\n+// ç”¨æˆ·ç™»å½•æˆåŠŸå›è°ƒ\r\n+const handleUserLogin = (data) => {\r\n+  console.log('ç”¨æˆ·ç™»å½•æˆåŠŸ:', data)\r\n+  // å¯ä»¥åœ¨è¿™é‡Œè§¦å‘ä¸€äº›éœ€è¦ç™»å½•çŠ¶æ€çš„æ“ä½œ\r\n+}\r\n+\r\n+// ç”¨æˆ·ç™»å‡ºå›è°ƒ\r\n+const handleUserLogout = () => {\r\n+  console.log('ç”¨æˆ·å·²ç™»å‡º')\r\n+  // å¯ä»¥åœ¨è¿™é‡Œæ¸…ç†ä¸€äº›ç”¨æˆ·ç›¸å…³çš„çŠ¶æ€\r\n+}\r\n+\r\n+// ç”Ÿå‘½å‘¨æœŸ\r\n+onMounted(() => {\r\n+  console.log('FaceSwapUnifiedç»„ä»¶å·²æŒ‚è½½ï¼ŒComfyUIæœåŠ¡å·²å‡†å¤‡å°±ç»ª')\r\n+})\r\n+\r\n+onUnmounted(() => {\r\n+  // æ¸…ç†å·¥ä½œ\r\n+  if (isLoading.value) {\r\n+    isLoading.value = false\r\n+  }\r\n+})\r\n+</script>\r\n+\r\n+<style scoped>\r\n+/* è¿™é‡Œå¯ä»¥æ·»åŠ ç‰¹å®šäºæ¢è„¸åŠŸèƒ½çš„æ ·å¼ */\r\n+/* å¤§éƒ¨åˆ†æ ·å¼å·²ç»åœ¨ç»Ÿä¸€æ¨¡æ¿ä¸­å¤„ç† */\r\n+\r\n+/* å¦‚æœéœ€è¦è‡ªå®šä¹‰æ ·å¼ï¼Œå¯ä»¥åœ¨è¿™é‡Œæ·»åŠ  */\r\n+:deep(.unified-image-upload-panel) {\r\n+  /* è‡ªå®šä¹‰ä¸Šä¼ é¢æ¿æ ·å¼ */\r\n+}\r\n+\r\n+:deep(.multi-image-upload) {\r\n+  /* è‡ªå®šä¹‰å¤šå›¾ä¸Šä¼ æ ·å¼ */\r\n+}\r\n+\r\n+/* ç§»åŠ¨ç«¯ä¼˜åŒ– */\r\n+@media (max-width: 768px) {\r\n+  /* ç§»åŠ¨ç«¯ç‰¹å®šæ ·å¼ */\r\n+}\r\n+\r\n+/* æ·±è‰²ä¸»é¢˜é€‚é… */\r\n+@media (prefers-color-scheme: dark) {\r\n+  /* æ·±è‰²ä¸»é¢˜æ ·å¼ */\r\n+}\r\n+</style>\r\n+\r\n"
                },
                {
                    "date": 1753532288610,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -78,25 +78,21 @@\n     return\r\n   }\r\n \r\n   isLoading.value = true\r\n-  processingStatus.value = 'æ­£åœ¨åŠ è½½æœåŠ¡...'\r\n-  progressPercent.value = 10\r\n+  processingStatus.value = 'æ­£åœ¨åˆå§‹åŒ–...'\r\n   startTime.value = Date.now()\r\n \r\n   try {\r\n     console.log('ğŸš€ å¼€å§‹æé€Ÿæ¢è„¸å¤„ç†')\r\n \r\n-    processingStatus.value = 'æ­£åœ¨ä¸Šä¼ å›¾ç‰‡...'\r\n-    progressPercent.value = 30\r\n-\r\n     // è°ƒç”¨æ¢è„¸å¤„ç†æœåŠ¡\r\n     const result = await processFaceSwapImage({\r\n       facePhotos: facePhotos.value,\r\n       targetImage: targetImage.value,\r\n-      onProgress: (status, percent) => {\r\n+      onProgress: (status) => {\r\n         processingStatus.value = status\r\n-        progressPercent.value = Math.max(progressPercent.value, percent)\r\n+        console.log(`ğŸ“Š å¤„ç†çŠ¶æ€: ${status}`)\r\n       }\r\n     })\r\n \r\n     if (result.success && result.imageUrl) {\r\n"
                },
                {
                    "date": 1753532893514,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -4,9 +4,9 @@\n     :title-icon=\"FaceSwapIcon\"\r\n     title-icon-color=\"var(--van-warning-color)\"\r\n     :process-button-icon=\"Users\"\r\n     :is-processing=\"isLoading\"\r\n-    :progress=\"0\"\r\n+    :progress=\"progressPercent\"\r\n     :processing-info=\"{ promptId, processingTime }\"\r\n     :result-data=\"resultImage\"\r\n     :original-image-for-comparison=\"originalImageForComparison\"\r\n     @login=\"handleUserLogin\"\r\n"
                },
                {
                    "date": 1753532904503,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -88,11 +88,12 @@\n     // è°ƒç”¨æ¢è„¸å¤„ç†æœåŠ¡\r\n     const result = await processFaceSwapImage({\r\n       facePhotos: facePhotos.value,\r\n       targetImage: targetImage.value,\r\n-      onProgress: (status) => {\r\n+      onProgress: (status, progress) => {\r\n         processingStatus.value = status\r\n-        console.log(`ğŸ“Š å¤„ç†çŠ¶æ€: ${status}`)\r\n+        progressPercent.value = progress || 0\r\n+        console.log(`ğŸ“Š å¤„ç†çŠ¶æ€: ${status}, è¿›åº¦: ${progress}%`)\r\n       }\r\n     })\r\n \r\n     if (result.success && result.imageUrl) {\r\n"
                },
                {
                    "date": 1753533657950,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -5,8 +5,9 @@\n     title-icon-color=\"var(--van-warning-color)\"\r\n     :process-button-icon=\"Users\"\r\n     :is-processing=\"isLoading\"\r\n     :progress=\"progressPercent\"\r\n+    :processing-description=\"processingStatus\"\r\n     :processing-info=\"{ promptId, processingTime }\"\r\n     :result-data=\"resultImage\"\r\n     :original-image-for-comparison=\"originalImageForComparison\"\r\n     @login=\"handleUserLogin\"\r\n"
                },
                {
                    "date": 1753543866111,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,8 +1,8 @@\n <template>\r\n   <UnifiedImageProcessingTemplate\r\n     function-id=\"face-swap\"\r\n-    :title-icon=\"FaceSwapIcon\"\r\n+    title-icon-name=\"face-swap\"\r\n     title-icon-color=\"var(--van-warning-color)\"\r\n     :process-button-icon=\"Users\"\r\n     :is-processing=\"isLoading\"\r\n     :progress=\"progressPercent\"\r\n"
                },
                {
                    "date": 1753543872764,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -24,9 +24,9 @@\n import { ref, computed, onMounted, onUnmounted } from 'vue'\r\n import { Toast } from 'vant'\r\n import { Users } from 'lucide-vue-next'\r\n import { UnifiedImageProcessingTemplate } from '../components/mobile'\r\n-import { FaceSwapIcon } from '../components/icons'\r\n+\r\n import { processFaceSwapImage } from '../services/comfyui.js'\r\n import { handleError } from '../services/globalErrorHandler.js'\r\n \r\n console.log('FaceSwapUnifiedç»„ä»¶å·²åŠ è½½ï¼ŒComfyUIæœåŠ¡å·²å¯¼å…¥')\r\n"
                },
                {
                    "date": 1753555567989,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -2,9 +2,9 @@\n   <UnifiedImageProcessingTemplate\r\n     function-id=\"face-swap\"\r\n     title-icon-name=\"face-swap\"\r\n     title-icon-color=\"var(--van-warning-color)\"\r\n-    :process-button-icon=\"Users\"\r\n+    process-button-icon-name=\"users\"\r\n     :is-processing=\"isLoading\"\r\n     :progress=\"progressPercent\"\r\n     :processing-description=\"processingStatus\"\r\n     :processing-info=\"{ promptId, processingTime }\"\r\n"
                },
                {
                    "date": 1753556118069,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -20,9 +20,9 @@\n   />\r\n </template>\r\n \r\n <script setup>\r\n-import { ref, computed, onMounted, onUnmounted } from 'vue'\r\n+import { ref, computed, onMounted, onUnmounted, nextTick } from 'vue'\r\n import { Toast } from 'vant'\r\n import { Users } from 'lucide-vue-next'\r\n import { UnifiedImageProcessingTemplate } from '../components/mobile'\r\n \r\n"
                },
                {
                    "date": 1753556126870,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -90,11 +90,14 @@\n     const result = await processFaceSwapImage({\r\n       facePhotos: facePhotos.value,\r\n       targetImage: targetImage.value,\r\n       onProgress: (status, progress) => {\r\n-        processingStatus.value = status\r\n-        progressPercent.value = progress || 0\r\n-        console.log(`ğŸ“Š å¤„ç†çŠ¶æ€: ${status}, è¿›åº¦: ${progress}%`)\r\n+        // ä½¿ç”¨ nextTick é¿å…é€’å½’æ›´æ–°\r\n+        nextTick(() => {\r\n+          processingStatus.value = status\r\n+          progressPercent.value = progress || 0\r\n+          console.log(`ğŸ“Š å¤„ç†çŠ¶æ€: ${status}, è¿›åº¦: ${progress}%`)\r\n+        })\r\n       }\r\n     })\r\n \r\n     if (result.success && result.imageUrl) {\r\n"
                },
                {
                    "date": 1753556183002,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -202,16 +202,9 @@\n /* è¿™é‡Œå¯ä»¥æ·»åŠ ç‰¹å®šäºæ¢è„¸åŠŸèƒ½çš„æ ·å¼ */\r\n /* å¤§éƒ¨åˆ†æ ·å¼å·²ç»åœ¨ç»Ÿä¸€æ¨¡æ¿ä¸­å¤„ç† */\r\n \r\n /* å¦‚æœéœ€è¦è‡ªå®šä¹‰æ ·å¼ï¼Œå¯ä»¥åœ¨è¿™é‡Œæ·»åŠ  */\r\n-:deep(.unified-image-upload-panel) {\r\n-  /* è‡ªå®šä¹‰ä¸Šä¼ é¢æ¿æ ·å¼ */\r\n-}\r\n \r\n-:deep(.multi-image-upload) {\r\n-  /* è‡ªå®šä¹‰å¤šå›¾ä¸Šä¼ æ ·å¼ */\r\n-}\r\n-\r\n /* ç§»åŠ¨ç«¯ä¼˜åŒ– */\r\n @media (max-width: 768px) {\r\n   /* ç§»åŠ¨ç«¯ç‰¹å®šæ ·å¼ */\r\n }\r\n"
                },
                {
                    "date": 1753586543711,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -90,14 +90,12 @@\n     const result = await processFaceSwapImage({\r\n       facePhotos: facePhotos.value,\r\n       targetImage: targetImage.value,\r\n       onProgress: (status, progress) => {\r\n-        // ä½¿ç”¨ nextTick é¿å…é€’å½’æ›´æ–°\r\n-        nextTick(() => {\r\n-          processingStatus.value = status\r\n-          progressPercent.value = progress || 0\r\n-          console.log(`ğŸ“Š å¤„ç†çŠ¶æ€: ${status}, è¿›åº¦: ${progress}%`)\r\n-        })\r\n+        // ç›´æ¥åŒæ­¥æ›´æ–°ï¼ŒWebSocketç®¡ç†å™¨å·²ç»å¤„ç†äº†å¼‚æ­¥\r\n+        processingStatus.value = status\r\n+        progressPercent.value = progress || 0\r\n+        console.log(`ğŸ“Š å¤„ç†çŠ¶æ€: ${status}, è¿›åº¦: ${progress}%`)\r\n       }\r\n     })\r\n \r\n     if (result.success && result.imageUrl) {\r\n"
                },
                {
                    "date": 1753586587706,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -20,9 +20,9 @@\n   />\r\n </template>\r\n \r\n <script setup>\r\n-import { ref, computed, onMounted, onUnmounted, nextTick } from 'vue'\r\n+import { ref, computed, onMounted, onUnmounted } from 'vue'\r\n import { Toast } from 'vant'\r\n import { Users } from 'lucide-vue-next'\r\n import { UnifiedImageProcessingTemplate } from '../components/mobile'\r\n \r\n"
                },
                {
                    "date": 1753588440097,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -53,23 +53,39 @@\n const handleUploadChange = (panelId, data) => {\r\n   console.log('ä¸Šä¼ å˜åŒ–:', panelId, data)\r\n \r\n   if (panelId === 'face-photos') {\r\n-    // å¤„ç†å¤šå›¾ä¸Šä¼ æ•°æ®\r\n-    facePhotos.value = Array.isArray(data) ? data.map(item => item.url || item) : []\r\n-    resultImage.value = null // æ¸…é™¤ä¹‹å‰çš„ç»“æœ\r\n+    // å¤„ç†å¤šå›¾ä¸Šä¼ æ•°æ®ï¼Œå…ˆåœ¨ä¸´æ—¶å˜é‡ä¸­å®Œæˆæ‰€æœ‰é€»è¾‘\r\n+    let processedPhotos = Array.isArray(data) ? data.map(item => item.url || item) : []\r\n \r\n-    // è‡ªåŠ¨è¡¥é½åˆ°4å¼ ï¼ˆå¦‚æœéœ€è¦çš„è¯ï¼‰\r\n-    while (facePhotos.value.length < 4 && facePhotos.value.length > 0) {\r\n-      facePhotos.value.push(facePhotos.value[facePhotos.value.length - 1])\r\n+    // è‡ªåŠ¨è¡¥é½é€»è¾‘åœ¨èµ‹å€¼å‰å®Œæˆï¼Œé¿å…å¤šæ¬¡ä¿®æ”¹å“åº”å¼å˜é‡\r\n+    if (processedPhotos.length > 0 && processedPhotos.length < 4) {\r\n+      const lastPhoto = processedPhotos[processedPhotos.length - 1]\r\n+      while (processedPhotos.length < 4) {\r\n+        processedPhotos.push(lastPhoto)\r\n+      }\r\n     }\r\n \r\n+    // ä¸€æ¬¡æ€§èµ‹å€¼ï¼Œå‡å°‘å“åº”å¼è§¦å‘æ¬¡æ•°\r\n+    facePhotos.value = processedPhotos\r\n+\r\n+    // åªåœ¨æœ‰ç»“æœæ—¶æ‰æ¸…ç©ºï¼Œé¿å…ä¸å¿…è¦çš„çŠ¶æ€å˜æ›´\r\n+    if (resultImage.value !== null) {\r\n+      resultImage.value = null\r\n+    }\r\n+\r\n+    // æ˜¾ç¤ºæç¤ºä¿¡æ¯\r\n     if (data.length > 0) {\r\n       Toast.success(`å·²é€‰æ‹© ${data.length} å¼ ç…§ç‰‡${data.length < 4 ? 'ï¼Œè‡ªåŠ¨è¡¥é½è‡³4å¼ ' : ''}`)\r\n     }\r\n   } else if (panelId === 'target-image') {\r\n+    // å…ˆæ›´æ–°ç›®æ ‡å›¾ç‰‡\r\n     targetImage.value = data\r\n-    resultImage.value = null // æ¸…é™¤ä¹‹å‰çš„ç»“æœ\r\n+\r\n+    // åªåœ¨æœ‰ç»“æœæ—¶æ‰æ¸…ç©ºï¼Œé¿å…ä¸å¿…è¦çš„çŠ¶æ€å˜æ›´\r\n+    if (resultImage.value !== null) {\r\n+      resultImage.value = null\r\n+    }\r\n   }\r\n }\r\n \r\n // å¤„ç†å›¾ç‰‡\r\n"
                }
            ],
            "date": 1752395499903,
            "name": "Commit-0",
            "content": "<template>\n  <UnifiedImageProcessingTemplate\n    function-id=\"face-swap\"\n    :title-icon=\"FaceSwapIcon\"\n    title-icon-color=\"var(--van-warning-color)\"\n    :process-button-icon=\"Users\"\n    :is-processing=\"isLoading\"\n    :progress=\"progressPercent\"\n    :processing-info=\"{ promptId, processingTime }\"\n    :result-data=\"resultImage\"\n    :original-image-for-comparison=\"originalImageForComparison\"\n    @login=\"handleUserLogin\"\n    @logout=\"handleUserLogout\"\n    @process=\"processImages\"\n    @reset=\"resetProcess\"\n    @download=\"handleDownload\"\n    @upload-change=\"handleUploadChange\"\n    ref=\"templateRef\"\n  />\n</template>\n\n<script setup>\nimport { ref, computed, onMounted, onUnmounted } from 'vue'\nimport { Toast } from 'vant'\nimport { Users } from 'lucide-vue-next'\nimport { UnifiedImageProcessingTemplate } from '../components/mobile'\nimport { FaceSwapIcon } from '../components/icons'\nimport { processFaceSwapImage } from '../services/comfyui.js'\n\nconsole.log('FaceSwapUnifiedç»„ä»¶å·²åŠ è½½ï¼ŒComfyUIæœåŠ¡å·²å¯¼å…¥')\n\n// å“åº”å¼æ•°æ®\nconst templateRef = ref(null)\nconst facePhotos = ref([])\nconst targetImage = ref(null)\nconst originalImageForComparison = ref(null)\nconst resultImage = ref(null)\nconst isLoading = ref(false)\nconst processingStatus = ref('')\nconst promptId = ref('')\nconst processingTime = ref('')\nconst progressPercent = ref(0)\nconst startTime = ref(null)\n\n// è®¡ç®—å±æ€§\nconst canProcess = computed(() => {\n  return facePhotos.value.length > 0 && targetImage.value !== null\n})\n\n// å¤„ç†ä¸Šä¼ å˜åŒ–\nconst handleUploadChange = (panelId, data) => {\n  console.log('ä¸Šä¼ å˜åŒ–:', panelId, data)\n  \n  if (panelId === 'face-photos') {\n    // å¤„ç†å¤šå›¾ä¸Šä¼ æ•°æ®\n    facePhotos.value = Array.isArray(data) ? data.map(item => item.url || item) : []\n    resultImage.value = null // æ¸…é™¤ä¹‹å‰çš„ç»“æœ\n    \n    // è‡ªåŠ¨è¡¥é½åˆ°4å¼ ï¼ˆå¦‚æœéœ€è¦çš„è¯ï¼‰\n    while (facePhotos.value.length < 4 && facePhotos.value.length > 0) {\n      facePhotos.value.push(facePhotos.value[facePhotos.value.length - 1])\n    }\n    \n    if (data.length > 0) {\n      Toast.success(`å·²é€‰æ‹© ${data.length} å¼ ç…§ç‰‡${data.length < 4 ? 'ï¼Œè‡ªåŠ¨è¡¥é½è‡³4å¼ ' : ''}`)\n    }\n  } else if (panelId === 'target-image') {\n    targetImage.value = data\n    resultImage.value = null // æ¸…é™¤ä¹‹å‰çš„ç»“æœ\n  }\n}\n\n// å¤„ç†å›¾ç‰‡\nconst processImages = async () => {\n  if (!canProcess.value) {\n    Toast.fail('è¯·å…ˆä¸Šä¼ äººè„¸ç…§ç‰‡å’Œç›®æ ‡å›¾ç‰‡')\n    return\n  }\n\n  isLoading.value = true\n  processingStatus.value = 'æ­£åœ¨åŠ è½½æœåŠ¡...'\n  progressPercent.value = 10\n  startTime.value = Date.now()\n\n  try {\n    console.log('ğŸš€ å¼€å§‹æé€Ÿæ¢è„¸å¤„ç†')\n\n    processingStatus.value = 'æ­£åœ¨ä¸Šä¼ å›¾ç‰‡...'\n    progressPercent.value = 30\n\n    // è°ƒç”¨æ¢è„¸å¤„ç†æœåŠ¡\n    const result = await processFaceSwapImage({\n      facePhotos: facePhotos.value,\n      targetImage: targetImage.value,\n      onProgress: (status, percent) => {\n        processingStatus.value = status\n        progressPercent.value = Math.max(progressPercent.value, percent)\n      }\n    })\n\n    if (result.success && result.imageUrl) {\n      resultImage.value = result.imageUrl\n      // ä¿å­˜ç›®æ ‡å›¾åƒç”¨äºå¯¹æ¯”ï¼ˆä½¿ç”¨æœåŠ¡å™¨è¿”å›çš„æˆ–åŸå§‹çš„ç›®æ ‡å›¾åƒï¼‰\n      originalImageForComparison.value = result.targetImageUrl || targetImage.value\n      promptId.value = result.promptId || ''\n\n      // è®¡ç®—å¤„ç†æ—¶é—´\n      const endTime = Date.now()\n      const duration = Math.round((endTime - startTime.value) / 1000)\n      processingTime.value = `${duration}ç§’`\n\n      // æ˜¾ç¤ºæˆåŠŸtoast\n      const pointsInfo = result.pointsConsumed ? `ï¼ˆæ¶ˆè€—${result.pointsConsumed}ç‚¹ï¼‰` : ''\n      Toast.success(`ğŸ‰ æ¢è„¸å®Œæˆï¼${pointsInfo}å¯ä»¥æ‹–æ‹½ä¸­é—´çº¿å¯¹æ¯”ç›®æ ‡å›¾åƒå’Œæ¢è„¸ç»“æœ`)\n      console.log('âœ… æ¢è„¸å¤„ç†å®Œæˆ')\n    } else {\n      throw new Error(result.error || 'æ¢è„¸å¤„ç†å¤±è´¥')\n    }\n  } catch (error) {\n    console.error('âŒ æ¢è„¸å¤„ç†å¤±è´¥:', error)\n    Toast.fail(`æ¢è„¸å¤±è´¥: ${error.message}`)\n  } finally {\n    isLoading.value = false\n    processingStatus.value = ''\n    progressPercent.value = 0\n  }\n}\n\n// é‡ç½®å¤„ç†\nconst resetProcess = () => {\n  facePhotos.value = []\n  targetImage.value = null\n  originalImageForComparison.value = null\n  resultImage.value = null\n  processingStatus.value = ''\n  promptId.value = ''\n  processingTime.value = ''\n  \n  // é‡ç½®æ¨¡æ¿å†…éƒ¨çŠ¶æ€\n  if (templateRef.value) {\n    const { uploadData } = templateRef.value\n    if (uploadData['face-photos']) {\n      uploadData['face-photos'] = []\n    }\n    if (uploadData['target-image']) {\n      uploadData['target-image'] = null\n    }\n  }\n  \n  Toast.success('å·²é‡ç½®ï¼Œå¯ä»¥é‡æ–°é€‰æ‹©å›¾ç‰‡')\n}\n\n// ä¸‹è½½ç»“æœ\nconst handleDownload = (imageUrl) => {\n  if (!imageUrl) return\n\n  const link = document.createElement('a')\n  link.href = imageUrl\n  link.download = `faceswap_result_${Date.now()}.png`\n  document.body.appendChild(link)\n  link.click()\n  document.body.removeChild(link)\n\n  Toast.success('å›¾ç‰‡ä¸‹è½½å·²å¼€å§‹')\n}\n\n// ç”¨æˆ·ç™»å½•æˆåŠŸå›è°ƒ\nconst handleUserLogin = (data) => {\n  console.log('ç”¨æˆ·ç™»å½•æˆåŠŸ:', data)\n  // å¯ä»¥åœ¨è¿™é‡Œè§¦å‘ä¸€äº›éœ€è¦ç™»å½•çŠ¶æ€çš„æ“ä½œ\n}\n\n// ç”¨æˆ·ç™»å‡ºå›è°ƒ\nconst handleUserLogout = () => {\n  console.log('ç”¨æˆ·å·²ç™»å‡º')\n  // å¯ä»¥åœ¨è¿™é‡Œæ¸…ç†ä¸€äº›ç”¨æˆ·ç›¸å…³çš„çŠ¶æ€\n}\n\n// ç”Ÿå‘½å‘¨æœŸ\nonMounted(() => {\n  console.log('FaceSwapUnifiedç»„ä»¶å·²æŒ‚è½½ï¼ŒComfyUIæœåŠ¡å·²å‡†å¤‡å°±ç»ª')\n})\n\nonUnmounted(() => {\n  // æ¸…ç†å·¥ä½œ\n  if (isLoading.value) {\n    isLoading.value = false\n  }\n})\n</script>\n\n<style scoped>\n/* è¿™é‡Œå¯ä»¥æ·»åŠ ç‰¹å®šäºæ¢è„¸åŠŸèƒ½çš„æ ·å¼ */\n/* å¤§éƒ¨åˆ†æ ·å¼å·²ç»åœ¨ç»Ÿä¸€æ¨¡æ¿ä¸­å¤„ç† */\n\n/* å¦‚æœéœ€è¦è‡ªå®šä¹‰æ ·å¼ï¼Œå¯ä»¥åœ¨è¿™é‡Œæ·»åŠ  */\n:deep(.unified-image-upload-panel) {\n  /* è‡ªå®šä¹‰ä¸Šä¼ é¢æ¿æ ·å¼ */\n}\n\n:deep(.multi-image-upload) {\n  /* è‡ªå®šä¹‰å¤šå›¾ä¸Šä¼ æ ·å¼ */\n}\n\n/* ç§»åŠ¨ç«¯ä¼˜åŒ– */\n@media (max-width: 768px) {\n  /* ç§»åŠ¨ç«¯ç‰¹å®šæ ·å¼ */\n}\n\n/* æ·±è‰²ä¸»é¢˜é€‚é… */\n@media (prefers-color-scheme: dark) {\n  /* æ·±è‰²ä¸»é¢˜æ ·å¼ */\n}\n</style>\n\n"
        }
    ]
}