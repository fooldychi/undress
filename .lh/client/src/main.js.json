{
    "sourceFile": "client/src/main.js",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 38,
            "patches": [
                {
                    "date": 1752330016769,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1752330032726,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -33,10 +33,18 @@\n   console.error('æœªå¤„ç†çš„Promiseæ‹’ç»:', event.reason)\r\n })\r\n \r\n // ç¡®ä¿DOMåŠ è½½å®Œæˆ\r\n-function initApp() {\r\n+async function initApp() {\r\n   try {\r\n+    console.log('ğŸš€ åˆå§‹åŒ–é…ç½®æœåŠ¡...')\r\n+    // åˆå§‹åŒ–é…ç½®æœåŠ¡\r\n+    try {\r\n+      await configService.initialize()\r\n+    } catch (error) {\r\n+      console.warn('âš ï¸ é…ç½®æœåŠ¡åˆå§‹åŒ–å¤±è´¥ï¼Œä½¿ç”¨é»˜è®¤é…ç½®:', error)\r\n+    }\r\n+\r\n     console.log('ğŸ“¦ åˆ›å»ºVueåº”ç”¨å®ä¾‹...')\r\n     const app = createApp(App)\r\n \r\n     console.log('ğŸ”§ é…ç½®è·¯ç”±...')\r\n"
                },
                {
                    "date": 1752330256372,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -4,8 +4,13 @@\n \r\n // å¼•å…¥é…ç½®æœåŠ¡\r\n import configService from './services/configService.js'\r\n \r\n+// å¼€å‘ç¯å¢ƒä¸‹å¼•å…¥é…ç½®æµ‹è¯•å·¥å…·\r\n+if (import.meta.env.DEV) {\r\n+  import('./utils/testConfig.js')\r\n+}\r\n+\r\n // å¼•å…¥Vant UI\r\n import Vant, { Toast } from 'vant'\r\n import 'vant/lib/index.css'\r\n \r\n"
                },
                {
                    "date": 1752332979423,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,10 +1,11 @@\n import { createApp } from 'vue'\r\n import App from './App.vue'\r\n import router from './router'\r\n \r\n-// å¼•å…¥é…ç½®æœåŠ¡\r\n+// å¼•å…¥é…ç½®æœåŠ¡å’Œè´Ÿè½½å‡è¡¡å™¨\r\n import configService from './services/configService.js'\r\n+import loadBalancer from './services/loadBalancer.js'\r\n \r\n // å¼€å‘ç¯å¢ƒä¸‹å¼•å…¥é…ç½®æµ‹è¯•å·¥å…·\r\n if (import.meta.env.DEV) {\r\n   import('./utils/testConfig.js')\r\n"
                },
                {
                    "date": 1752332995483,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -49,8 +49,16 @@\n     } catch (error) {\r\n       console.warn('âš ï¸ é…ç½®æœåŠ¡åˆå§‹åŒ–å¤±è´¥ï¼Œä½¿ç”¨é»˜è®¤é…ç½®:', error)\r\n     }\r\n \r\n+    console.log('ğŸš€ åˆå§‹åŒ–è´Ÿè½½å‡è¡¡å™¨...')\r\n+    // åˆå§‹åŒ–è´Ÿè½½å‡è¡¡å™¨\r\n+    try {\r\n+      await loadBalancer.initialize()\r\n+    } catch (error) {\r\n+      console.warn('âš ï¸ è´Ÿè½½å‡è¡¡å™¨åˆå§‹åŒ–å¤±è´¥ï¼Œå°†ä½¿ç”¨å•æœåŠ¡å™¨æ¨¡å¼:', error)\r\n+    }\r\n+\r\n     console.log('ğŸ“¦ åˆ›å»ºVueåº”ç”¨å®ä¾‹...')\r\n     const app = createApp(App)\r\n \r\n     console.log('ğŸ”§ é…ç½®è·¯ç”±...')\r\n"
                },
                {
                    "date": 1752333733156,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -5,11 +5,12 @@\n // å¼•å…¥é…ç½®æœåŠ¡å’Œè´Ÿè½½å‡è¡¡å™¨\r\n import configService from './services/configService.js'\r\n import loadBalancer from './services/loadBalancer.js'\r\n \r\n-// å¼€å‘ç¯å¢ƒä¸‹å¼•å…¥é…ç½®æµ‹è¯•å·¥å…·\r\n+// å¼€å‘ç¯å¢ƒä¸‹å¼•å…¥é…ç½®æµ‹è¯•å·¥å…·å’Œä¿®å¤å·¥å…·\r\n if (import.meta.env.DEV) {\r\n   import('./utils/testConfig.js')\r\n+  import('./utils/fixLoadBalancer.js')\r\n }\r\n \r\n // å¼•å…¥Vant UI\r\n import Vant, { Toast } from 'vant'\r\n"
                },
                {
                    "date": 1752334615729,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -9,8 +9,9 @@\n // å¼€å‘ç¯å¢ƒä¸‹å¼•å…¥é…ç½®æµ‹è¯•å·¥å…·å’Œä¿®å¤å·¥å…·\r\n if (import.meta.env.DEV) {\r\n   import('./utils/testConfig.js')\r\n   import('./utils/fixLoadBalancer.js')\r\n+  import('./utils/testPointsConsumption.js')\r\n }\r\n \r\n // å¼•å…¥Vant UI\r\n import Vant, { Toast } from 'vant'\r\n"
                },
                {
                    "date": 1752349558209,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -19,8 +19,9 @@\n \r\n // å¼•å…¥è‡ªå®šä¹‰æ ·å¼ï¼ˆåŒ…å«æš—é»‘ä¸»é¢˜ï¼‰\r\n import './style.css'\r\n import './styles/vant-theme.css'\r\n+import './styles/mobile-layout.css'\r\n \r\n console.log('ğŸš€ å¼€å§‹åˆå§‹åŒ–Vueåº”ç”¨...');\r\n \r\n // å¤„ç†GitHub Pages SPAè·¯ç”±é‡å®šå‘\r\n"
                },
                {
                    "date": 1752352274669,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -7,11 +7,16 @@\n import loadBalancer from './services/loadBalancer.js'\r\n \r\n // å¼€å‘ç¯å¢ƒä¸‹å¼•å…¥é…ç½®æµ‹è¯•å·¥å…·å’Œä¿®å¤å·¥å…·\r\n if (import.meta.env.DEV) {\r\n-  import('./utils/testConfig.js')\r\n-  import('./utils/fixLoadBalancer.js')\r\n-  import('./utils/testPointsConsumption.js')\r\n+  // ä½¿ç”¨é™æ€å¯¼å…¥é¿å…åŠ¨æ€å¯¼å…¥é—®é¢˜\r\n+  try {\r\n+    await import('./utils/testConfig.js')\r\n+    await import('./utils/fixLoadBalancer.js')\r\n+    await import('./utils/testPointsConsumption.js')\r\n+  } catch (error) {\r\n+    console.warn('å¼€å‘å·¥å…·åŠ è½½å¤±è´¥:', error)\r\n+  }\r\n }\r\n \r\n // å¼•å…¥Vant UI\r\n import Vant, { Toast } from 'vant'\r\n"
                },
                {
                    "date": 1752352389534,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -5,18 +5,11 @@\n // å¼•å…¥é…ç½®æœåŠ¡å’Œè´Ÿè½½å‡è¡¡å™¨\r\n import configService from './services/configService.js'\r\n import loadBalancer from './services/loadBalancer.js'\r\n \r\n-// å¼€å‘ç¯å¢ƒä¸‹å¼•å…¥é…ç½®æµ‹è¯•å·¥å…·å’Œä¿®å¤å·¥å…·\r\n+// å¼€å‘ç¯å¢ƒä¸‹çš„è°ƒè¯•ä¿¡æ¯\r\n if (import.meta.env.DEV) {\r\n-  // ä½¿ç”¨é™æ€å¯¼å…¥é¿å…åŠ¨æ€å¯¼å…¥é—®é¢˜\r\n-  try {\r\n-    await import('./utils/testConfig.js')\r\n-    await import('./utils/fixLoadBalancer.js')\r\n-    await import('./utils/testPointsConsumption.js')\r\n-  } catch (error) {\r\n-    console.warn('å¼€å‘å·¥å…·åŠ è½½å¤±è´¥:', error)\r\n-  }\r\n+  console.log('ğŸ”§ å¼€å‘æ¨¡å¼å·²å¯ç”¨')\r\n }\r\n \r\n // å¼•å…¥Vant UI\r\n import Vant, { Toast } from 'vant'\r\n"
                },
                {
                    "date": 1752354037800,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -5,11 +5,13 @@\n // å¼•å…¥é…ç½®æœåŠ¡å’Œè´Ÿè½½å‡è¡¡å™¨\r\n import configService from './services/configService.js'\r\n import loadBalancer from './services/loadBalancer.js'\r\n \r\n-// å¼€å‘ç¯å¢ƒä¸‹çš„è°ƒè¯•ä¿¡æ¯\r\n+// å¼€å‘ç¯å¢ƒä¸‹å¼•å…¥é…ç½®æµ‹è¯•å·¥å…·å’Œä¿®å¤å·¥å…·\r\n if (import.meta.env.DEV) {\r\n-  console.log('ğŸ”§ å¼€å‘æ¨¡å¼å·²å¯ç”¨')\r\n+  import('./utils/testConfig.js')\r\n+  import('./utils/fixLoadBalancer.js')\r\n+  import('./utils/testPointsConsumption.js')\r\n }\r\n \r\n // å¼•å…¥Vant UI\r\n import Vant, { Toast } from 'vant'\r\n@@ -17,9 +19,8 @@\n \r\n // å¼•å…¥è‡ªå®šä¹‰æ ·å¼ï¼ˆåŒ…å«æš—é»‘ä¸»é¢˜ï¼‰\r\n import './style.css'\r\n import './styles/vant-theme.css'\r\n-import './styles/mobile-layout.css'\r\n \r\n console.log('ğŸš€ å¼€å§‹åˆå§‹åŒ–Vueåº”ç”¨...');\r\n \r\n // å¤„ç†GitHub Pages SPAè·¯ç”±é‡å®šå‘\r\n"
                },
                {
                    "date": 1752354348141,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -19,8 +19,9 @@\n \r\n // å¼•å…¥è‡ªå®šä¹‰æ ·å¼ï¼ˆåŒ…å«æš—é»‘ä¸»é¢˜ï¼‰\r\n import './style.css'\r\n import './styles/vant-theme.css'\r\n+import './styles/mobile-template.css'\r\n \r\n console.log('ğŸš€ å¼€å§‹åˆå§‹åŒ–Vueåº”ç”¨...');\r\n \r\n // å¤„ç†GitHub Pages SPAè·¯ç”±é‡å®šå‘\r\n"
                },
                {
                    "date": 1752368903166,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -19,9 +19,8 @@\n \r\n // å¼•å…¥è‡ªå®šä¹‰æ ·å¼ï¼ˆåŒ…å«æš—é»‘ä¸»é¢˜ï¼‰\r\n import './style.css'\r\n import './styles/vant-theme.css'\r\n-import './styles/mobile-template.css'\r\n \r\n console.log('ğŸš€ å¼€å§‹åˆå§‹åŒ–Vueåº”ç”¨...');\r\n \r\n // å¤„ç†GitHub Pages SPAè·¯ç”±é‡å®šå‘\r\n"
                },
                {
                    "date": 1752369208528,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -19,8 +19,9 @@\n \r\n // å¼•å…¥è‡ªå®šä¹‰æ ·å¼ï¼ˆåŒ…å«æš—é»‘ä¸»é¢˜ï¼‰\r\n import './style.css'\r\n import './styles/vant-theme.css'\r\n+import './styles/mobile-layout.css'\r\n \r\n console.log('ğŸš€ å¼€å§‹åˆå§‹åŒ–Vueåº”ç”¨...');\r\n \r\n // å¤„ç†GitHub Pages SPAè·¯ç”±é‡å®šå‘\r\n"
                },
                {
                    "date": 1752373807699,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -19,9 +19,8 @@\n \r\n // å¼•å…¥è‡ªå®šä¹‰æ ·å¼ï¼ˆåŒ…å«æš—é»‘ä¸»é¢˜ï¼‰\r\n import './style.css'\r\n import './styles/vant-theme.css'\r\n-import './styles/mobile-layout.css'\r\n \r\n console.log('ğŸš€ å¼€å§‹åˆå§‹åŒ–Vueåº”ç”¨...');\r\n \r\n // å¤„ç†GitHub Pages SPAè·¯ç”±é‡å®šå‘\r\n"
                },
                {
                    "date": 1752374205984,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -5,12 +5,10 @@\n // å¼•å…¥é…ç½®æœåŠ¡å’Œè´Ÿè½½å‡è¡¡å™¨\r\n import configService from './services/configService.js'\r\n import loadBalancer from './services/loadBalancer.js'\r\n \r\n-// å¼€å‘ç¯å¢ƒä¸‹å¼•å…¥é…ç½®æµ‹è¯•å·¥å…·å’Œä¿®å¤å·¥å…·\r\n+// å¼€å‘ç¯å¢ƒä¸‹å¼•å…¥æµ‹è¯•å·¥å…·\r\n if (import.meta.env.DEV) {\r\n-  import('./utils/testConfig.js')\r\n-  import('./utils/fixLoadBalancer.js')\r\n   import('./utils/testPointsConsumption.js')\r\n }\r\n \r\n // å¼•å…¥Vant UI\r\n"
                },
                {
                    "date": 1752411451557,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -4,8 +4,9 @@\n \r\n // å¼•å…¥é…ç½®æœåŠ¡å’Œè´Ÿè½½å‡è¡¡å™¨\r\n import configService from './services/configService.js'\r\n import loadBalancer from './services/loadBalancer.js'\r\n+import { exposeTestFunctions } from './utils/loadBalancerTest.js'\r\n \r\n // å¼€å‘ç¯å¢ƒä¸‹å¼•å…¥æµ‹è¯•å·¥å…·\r\n if (import.meta.env.DEV) {\r\n   import('./utils/testPointsConsumption.js')\r\n"
                },
                {
                    "date": 1752411497329,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -116,8 +116,13 @@\n     app.mount('#app')\r\n \r\n     console.log('âœ… Vueåº”ç”¨å¯åŠ¨æˆåŠŸ!')\r\n \r\n+    // åœ¨å¼€å‘ç¯å¢ƒä¸­æš´éœ²æµ‹è¯•å‡½æ•°\r\n+    if (import.meta.env.DEV) {\r\n+      exposeTestFunctions()\r\n+    }\r\n+\r\n   } catch (error) {\r\n     console.error('âŒ Vueåº”ç”¨å¯åŠ¨å¤±è´¥:', error)\r\n \r\n     // æ˜¾ç¤ºå¯åŠ¨å¤±è´¥é¡µé¢\r\n"
                },
                {
                    "date": 1752436287887,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -18,8 +18,9 @@\n \r\n // å¼•å…¥è‡ªå®šä¹‰æ ·å¼ï¼ˆåŒ…å«æš—é»‘ä¸»é¢˜ï¼‰\r\n import './style.css'\r\n import './styles/vant-theme.css'\r\n+import './styles/overrides.css'\r\n \r\n console.log('ğŸš€ å¼€å§‹åˆå§‹åŒ–Vueåº”ç”¨...');\r\n \r\n // å¤„ç†GitHub Pages SPAè·¯ç”±é‡å®šå‘\r\n"
                },
                {
                    "date": 1752436317134,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -18,9 +18,8 @@\n \r\n // å¼•å…¥è‡ªå®šä¹‰æ ·å¼ï¼ˆåŒ…å«æš—é»‘ä¸»é¢˜ï¼‰\r\n import './style.css'\r\n import './styles/vant-theme.css'\r\n-import './styles/overrides.css'\r\n \r\n console.log('ğŸš€ å¼€å§‹åˆå§‹åŒ–Vueåº”ç”¨...');\r\n \r\n // å¤„ç†GitHub Pages SPAè·¯ç”±é‡å®šå‘\r\n"
                },
                {
                    "date": 1752462962658,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -5,8 +5,9 @@\n // å¼•å…¥é…ç½®æœåŠ¡å’Œè´Ÿè½½å‡è¡¡å™¨\r\n import configService from './services/configService.js'\r\n import loadBalancer from './services/loadBalancer.js'\r\n import { exposeTestFunctions } from './utils/loadBalancerTest.js'\r\n+import { initializeWebSocket } from './services/comfyui.js'\r\n \r\n // å¼€å‘ç¯å¢ƒä¸‹å¼•å…¥æµ‹è¯•å·¥å…·\r\n if (import.meta.env.DEV) {\r\n   import('./utils/testPointsConsumption.js')\r\n"
                },
                {
                    "date": 1752462978762,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -59,8 +59,17 @@\n     } catch (error) {\r\n       console.warn('âš ï¸ è´Ÿè½½å‡è¡¡å™¨åˆå§‹åŒ–å¤±è´¥ï¼Œå°†ä½¿ç”¨å•æœåŠ¡å™¨æ¨¡å¼:', error)\r\n     }\r\n \r\n+    console.log('ğŸ”Œ åˆå§‹åŒ– ComfyUI WebSocket...')\r\n+    // åˆå§‹åŒ– ComfyUI WebSocket è¿æ¥\r\n+    try {\r\n+      await initializeWebSocket()\r\n+      console.log('âœ… ComfyUI WebSocket åˆå§‹åŒ–å®Œæˆ')\r\n+    } catch (error) {\r\n+      console.warn('âš ï¸ ComfyUI WebSocket åˆå§‹åŒ–å¤±è´¥ï¼Œå°†åœ¨éœ€è¦æ—¶é‡è¯•:', error.message)\r\n+    }\r\n+\r\n     console.log('ğŸ“¦ åˆ›å»ºVueåº”ç”¨å®ä¾‹...')\r\n     const app = createApp(App)\r\n \r\n     console.log('ğŸ”§ é…ç½®è·¯ç”±...')\r\n"
                },
                {
                    "date": 1752467961919,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -43,40 +43,32 @@\n \r\n // ç¡®ä¿DOMåŠ è½½å®Œæˆ\r\n async function initApp() {\r\n   try {\r\n-    console.log('ğŸš€ åˆå§‹åŒ–é…ç½®æœåŠ¡...')\r\n     // åˆå§‹åŒ–é…ç½®æœåŠ¡\r\n     try {\r\n       await configService.initialize()\r\n     } catch (error) {\r\n       console.warn('âš ï¸ é…ç½®æœåŠ¡åˆå§‹åŒ–å¤±è´¥ï¼Œä½¿ç”¨é»˜è®¤é…ç½®:', error)\r\n     }\r\n \r\n-    console.log('ğŸš€ åˆå§‹åŒ–è´Ÿè½½å‡è¡¡å™¨...')\r\n     // åˆå§‹åŒ–è´Ÿè½½å‡è¡¡å™¨\r\n     try {\r\n       await loadBalancer.initialize()\r\n     } catch (error) {\r\n       console.warn('âš ï¸ è´Ÿè½½å‡è¡¡å™¨åˆå§‹åŒ–å¤±è´¥ï¼Œå°†ä½¿ç”¨å•æœåŠ¡å™¨æ¨¡å¼:', error)\r\n     }\r\n \r\n-    console.log('ğŸ”Œ åˆå§‹åŒ– ComfyUI WebSocket...')\r\n     // åˆå§‹åŒ– ComfyUI WebSocket è¿æ¥\r\n     try {\r\n       await initializeWebSocket()\r\n       console.log('âœ… ComfyUI WebSocket åˆå§‹åŒ–å®Œæˆ')\r\n     } catch (error) {\r\n       console.warn('âš ï¸ ComfyUI WebSocket åˆå§‹åŒ–å¤±è´¥ï¼Œå°†åœ¨éœ€è¦æ—¶é‡è¯•:', error.message)\r\n     }\r\n \r\n-    console.log('ğŸ“¦ åˆ›å»ºVueåº”ç”¨å®ä¾‹...')\r\n     const app = createApp(App)\r\n-\r\n-    console.log('ğŸ”§ é…ç½®è·¯ç”±...')\r\n     app.use(router)\r\n-\r\n-    console.log('ğŸ¨ é…ç½®Vant UI...')\r\n     app.use(Vant)\r\n \r\n     // æ·»åŠ Vueé”™è¯¯å¤„ç†\r\n     app.config.errorHandler = (err, vm, info) => {\r\n"
                },
                {
                    "date": 1752467991541,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -113,11 +113,9 @@\n         }\r\n       }, 5000)\r\n     }\r\n \r\n-    console.log('ğŸ”§ æŒ‚è½½åº”ç”¨åˆ°#app...')\r\n     app.mount('#app')\r\n-\r\n     console.log('âœ… Vueåº”ç”¨å¯åŠ¨æˆåŠŸ!')\r\n \r\n     // åœ¨å¼€å‘ç¯å¢ƒä¸­æš´éœ²æµ‹è¯•å‡½æ•°\r\n     if (import.meta.env.DEV) {\r\n"
                },
                {
                    "date": 1752511416943,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -47,24 +47,23 @@\n     // åˆå§‹åŒ–é…ç½®æœåŠ¡\r\n     try {\r\n       await configService.initialize()\r\n     } catch (error) {\r\n-      console.warn('âš ï¸ é…ç½®æœåŠ¡åˆå§‹åŒ–å¤±è´¥ï¼Œä½¿ç”¨é»˜è®¤é…ç½®:', error)\r\n+      // ä½¿ç”¨é»˜è®¤é…ç½®\r\n     }\r\n \r\n     // åˆå§‹åŒ–è´Ÿè½½å‡è¡¡å™¨\r\n     try {\r\n       await loadBalancer.initialize()\r\n     } catch (error) {\r\n-      console.warn('âš ï¸ è´Ÿè½½å‡è¡¡å™¨åˆå§‹åŒ–å¤±è´¥ï¼Œå°†ä½¿ç”¨å•æœåŠ¡å™¨æ¨¡å¼:', error)\r\n+      // ä½¿ç”¨å•æœåŠ¡å™¨æ¨¡å¼\r\n     }\r\n \r\n     // åˆå§‹åŒ– ComfyUI WebSocket è¿æ¥\r\n     try {\r\n       await initializeWebSocket()\r\n-      console.log('âœ… ComfyUI WebSocket åˆå§‹åŒ–å®Œæˆ')\r\n     } catch (error) {\r\n-      console.warn('âš ï¸ ComfyUI WebSocket åˆå§‹åŒ–å¤±è´¥ï¼Œå°†åœ¨éœ€è¦æ—¶é‡è¯•:', error.message)\r\n+      // å°†åœ¨éœ€è¦æ—¶é‡è¯•\r\n     }\r\n \r\n     const app = createApp(App)\r\n     app.use(router)\r\n"
                },
                {
                    "date": 1752512801256,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -51,13 +51,9 @@\n       // ä½¿ç”¨é»˜è®¤é…ç½®\r\n     }\r\n \r\n     // åˆå§‹åŒ–è´Ÿè½½å‡è¡¡å™¨\r\n-    try {\r\n-      await loadBalancer.initialize()\r\n-    } catch (error) {\r\n-      // ä½¿ç”¨å•æœåŠ¡å™¨æ¨¡å¼\r\n-    }\r\n+    await loadBalancer.initialize()\r\n \r\n     // åˆå§‹åŒ– ComfyUI WebSocket è¿æ¥\r\n     try {\r\n       await initializeWebSocket()\r\n"
                },
                {
                    "date": 1752512826329,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -53,14 +53,9 @@\n \r\n     // åˆå§‹åŒ–è´Ÿè½½å‡è¡¡å™¨\r\n     await loadBalancer.initialize()\r\n \r\n-    // åˆå§‹åŒ– ComfyUI WebSocket è¿æ¥\r\n-    try {\r\n-      await initializeWebSocket()\r\n-    } catch (error) {\r\n-      // å°†åœ¨éœ€è¦æ—¶é‡è¯•\r\n-    }\r\n+    // WebSocket è¿æ¥å°†åœ¨ç”¨æˆ·å‘èµ·ç”Ÿå›¾è¯·æ±‚æ—¶è‡ªåŠ¨åˆå§‹åŒ–\r\n \r\n     const app = createApp(App)\r\n     app.use(router)\r\n     app.use(Vant)\r\n"
                },
                {
                    "date": 1752512885102,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -10,8 +10,9 @@\n \r\n // å¼€å‘ç¯å¢ƒä¸‹å¼•å…¥æµ‹è¯•å·¥å…·\r\n if (import.meta.env.DEV) {\r\n   import('./utils/testPointsConsumption.js')\r\n+  import('./utils/testSimpleLoadBalancer.js')\r\n }\r\n \r\n // å¼•å…¥Vant UI\r\n import Vant, { Toast } from 'vant'\r\n"
                },
                {
                    "date": 1752513548368,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -54,8 +54,16 @@\n \r\n     // åˆå§‹åŒ–è´Ÿè½½å‡è¡¡å™¨\r\n     await loadBalancer.initialize()\r\n \r\n+    // åˆå§‹åŒ–æœåŠ¡å™¨è¿æ¥æµ‹è¯•ï¼Œæä¾›è¯¦ç»†çš„æœåŠ¡å™¨çŠ¶æ€åé¦ˆ\r\n+    console.log('ğŸ” å¼€å§‹æœåŠ¡å™¨è¿æ¥æµ‹è¯•...')\r\n+    try {\r\n+      await loadBalancer.initializeServerConnection()\r\n+    } catch (error) {\r\n+      console.warn('âš ï¸ æœåŠ¡å™¨è¿æ¥æµ‹è¯•å¤±è´¥ï¼Œå°†åœ¨éœ€è¦æ—¶é‡è¯•:', error.message)\r\n+    }\r\n+\r\n     // WebSocket è¿æ¥å°†åœ¨ç”¨æˆ·å‘èµ·ç”Ÿå›¾è¯·æ±‚æ—¶è‡ªåŠ¨åˆå§‹åŒ–\r\n \r\n     const app = createApp(App)\r\n     app.use(router)\r\n"
                },
                {
                    "date": 1752549327542,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -4,9 +4,8 @@\n \r\n // å¼•å…¥é…ç½®æœåŠ¡å’Œè´Ÿè½½å‡è¡¡å™¨\r\n import configService from './services/configService.js'\r\n import loadBalancer from './services/loadBalancer.js'\r\n-import { exposeTestFunctions } from './utils/loadBalancerTest.js'\r\n import { initializeWebSocket } from './services/comfyui.js'\r\n \r\n // å¼€å‘ç¯å¢ƒä¸‹å¼•å…¥æµ‹è¯•å·¥å…·\r\n if (import.meta.env.DEV) {\r\n"
                },
                {
                    "date": 1752549390022,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -114,12 +114,9 @@\n \r\n     app.mount('#app')\r\n     console.log('âœ… Vueåº”ç”¨å¯åŠ¨æˆåŠŸ!')\r\n \r\n-    // åœ¨å¼€å‘ç¯å¢ƒä¸­æš´éœ²æµ‹è¯•å‡½æ•°\r\n-    if (import.meta.env.DEV) {\r\n-      exposeTestFunctions()\r\n-    }\r\n+    // æµ‹è¯•å‡½æ•°å·²åœ¨å„è‡ªçš„æ¨¡å—ä¸­è‡ªåŠ¨æš´éœ²åˆ°å…¨å±€\r\n \r\n   } catch (error) {\r\n     console.error('âŒ Vueåº”ç”¨å¯åŠ¨å¤±è´¥:', error)\r\n \r\n"
                },
                {
                    "date": 1752835846491,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,196 +1,118 @@\n-import { createApp } from 'vue'\r\n-import App from './App.vue'\r\n-import router from './router'\r\n-\r\n-// å¼•å…¥é…ç½®æœåŠ¡å’Œè´Ÿè½½å‡è¡¡å™¨\r\n-import configService from './services/configService.js'\r\n-import loadBalancer from './services/loadBalancer.js'\r\n-import { initializeWebSocket } from './services/comfyui.js'\r\n-\r\n-// å¼€å‘ç¯å¢ƒä¸‹å¼•å…¥æµ‹è¯•å·¥å…·\r\n-if (import.meta.env.DEV) {\r\n-  import('./utils/testPointsConsumption.js')\r\n-  import('./utils/testSimpleLoadBalancer.js')\r\n-}\r\n-\r\n-// å¼•å…¥Vant UI\r\n-import Vant, { Toast } from 'vant'\r\n-import 'vant/lib/index.css'\r\n-\r\n-// å¼•å…¥è‡ªå®šä¹‰æ ·å¼ï¼ˆåŒ…å«æš—é»‘ä¸»é¢˜ï¼‰\r\n-import './style.css'\r\n-import './styles/vant-theme.css'\r\n-\r\n-console.log('ğŸš€ å¼€å§‹åˆå§‹åŒ–Vueåº”ç”¨...');\r\n-\r\n-// å¤„ç†GitHub Pages SPAè·¯ç”±é‡å®šå‘\r\n-(function() {\r\n-  const redirect = new URLSearchParams(window.location.search).get('redirect');\r\n-  if (redirect) {\r\n-    console.log('ğŸ”„ æ£€æµ‹åˆ°è·¯ç”±é‡å®šå‘:', redirect);\r\n-    history.replaceState(null, null, redirect);\r\n-  }\r\n-})();\r\n-\r\n-// æ·»åŠ å…¨å±€é”™è¯¯å¤„ç†\r\n-window.addEventListener('error', (event) => {\r\n-  console.error('å…¨å±€JavaScripté”™è¯¯:', event.error)\r\n-})\r\n-\r\n-window.addEventListener('unhandledrejection', (event) => {\r\n-  console.error('æœªå¤„ç†çš„Promiseæ‹’ç»:', event.reason)\r\n-})\r\n-\r\n-// ç¡®ä¿DOMåŠ è½½å®Œæˆ\r\n-async function initApp() {\r\n-  try {\r\n-    // åˆå§‹åŒ–é…ç½®æœåŠ¡\r\n-    try {\r\n-      await configService.initialize()\r\n-    } catch (error) {\r\n-      // ä½¿ç”¨é»˜è®¤é…ç½®\r\n-    }\r\n-\r\n-    // åˆå§‹åŒ–è´Ÿè½½å‡è¡¡å™¨\r\n-    await loadBalancer.initialize()\r\n-\r\n-    // åˆå§‹åŒ–æœåŠ¡å™¨è¿æ¥æµ‹è¯•ï¼Œæä¾›è¯¦ç»†çš„æœåŠ¡å™¨çŠ¶æ€åé¦ˆ\r\n-    console.log('ğŸ” å¼€å§‹æœåŠ¡å™¨è¿æ¥æµ‹è¯•...')\r\n-    try {\r\n-      await loadBalancer.initializeServerConnection()\r\n-    } catch (error) {\r\n-      console.warn('âš ï¸ æœåŠ¡å™¨è¿æ¥æµ‹è¯•å¤±è´¥ï¼Œå°†åœ¨éœ€è¦æ—¶é‡è¯•:', error.message)\r\n-    }\r\n-\r\n-    // WebSocket è¿æ¥å°†åœ¨ç”¨æˆ·å‘èµ·ç”Ÿå›¾è¯·æ±‚æ—¶è‡ªåŠ¨åˆå§‹åŒ–\r\n-\r\n-    const app = createApp(App)\r\n-    app.use(router)\r\n-    app.use(Vant)\r\n-\r\n-    // æ·»åŠ Vueé”™è¯¯å¤„ç†\r\n-    app.config.errorHandler = (err, vm, info) => {\r\n-      console.error('Vueåº”ç”¨é”™è¯¯:', err, info)\r\n-\r\n-      // æ˜¾ç¤ºç”¨æˆ·å‹å¥½çš„é”™è¯¯ä¿¡æ¯\r\n-      const errorDiv = document.createElement('div')\r\n-      errorDiv.style.cssText = `\r\n-        position: fixed;\r\n-        top: 20px;\r\n-        right: 20px;\r\n-        background: #ff4444;\r\n-        color: white;\r\n-        padding: 15px;\r\n-        border-radius: 8px;\r\n-        z-index: 10000;\r\n-        max-width: 300px;\r\n-        font-family: monospace;\r\n-        font-size: 12px;\r\n-      `\r\n-      errorDiv.innerHTML = `\r\n-        <strong>Vueé”™è¯¯:</strong><br>\r\n-        ${err.message}<br>\r\n-        <small>${info}</small>\r\n-        <button onclick=\"this.parentElement.remove()\" style=\"\r\n-          background: rgba(255,255,255,0.2);\r\n-          border: none;\r\n-          color: white;\r\n-          padding: 4px 8px;\r\n-          border-radius: 4px;\r\n-          cursor: pointer;\r\n-          margin-top: 8px;\r\n-          display: block;\r\n-        \">å…³é—­</button>\r\n-      `\r\n-      document.body.appendChild(errorDiv)\r\n-\r\n-      // 5ç§’åè‡ªåŠ¨ç§»é™¤\r\n-      setTimeout(() => {\r\n-        if (errorDiv.parentElement) {\r\n-          errorDiv.remove()\r\n-        }\r\n-      }, 5000)\r\n-    }\r\n-\r\n-    app.mount('#app')\r\n-    console.log('âœ… Vueåº”ç”¨å¯åŠ¨æˆåŠŸ!')\r\n-\r\n-    // æµ‹è¯•å‡½æ•°å·²åœ¨å„è‡ªçš„æ¨¡å—ä¸­è‡ªåŠ¨æš´éœ²åˆ°å…¨å±€\r\n-\r\n-  } catch (error) {\r\n-    console.error('âŒ Vueåº”ç”¨å¯åŠ¨å¤±è´¥:', error)\r\n-\r\n-    // æ˜¾ç¤ºå¯åŠ¨å¤±è´¥é¡µé¢\r\n-    const appElement = document.getElementById('app')\r\n-    if (appElement) {\r\n-      appElement.innerHTML = `\r\n-        <div style=\"\r\n-          min-height: 100vh;\r\n-          background: linear-gradient(135deg, #ff6b6b, #ee5a24);\r\n-          display: flex;\r\n-          align-items: center;\r\n-          justify-content: center;\r\n-          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\r\n-          color: white;\r\n-          text-align: center;\r\n-          padding: 20px;\r\n-        \">\r\n-          <div style=\"\r\n-            background: rgba(255, 255, 255, 0.1);\r\n-            backdrop-filter: blur(10px);\r\n-            border-radius: 16px;\r\n-            padding: 40px;\r\n-            max-width: 600px;\r\n-            border: 1px solid rgba(255, 255, 255, 0.2);\r\n-          \">\r\n-            <h1 style=\"margin: 0 0 20px 0; font-size: 2rem;\">ğŸš¨ åº”ç”¨å¯åŠ¨å¤±è´¥</h1>\r\n-            <p style=\"font-size: 1.1rem; margin: 0 0 20px 0;\">\r\n-              <strong>é”™è¯¯:</strong> ${error.message}\r\n-            </p>\r\n-            <div style=\"margin: 20px 0;\">\r\n-              <button onclick=\"location.reload()\" style=\"\r\n-                background: #fff;\r\n-                color: #ee5a24;\r\n-                border: none;\r\n-                padding: 12px 24px;\r\n-                border-radius: 8px;\r\n-                cursor: pointer;\r\n-                font-weight: bold;\r\n-                font-size: 1rem;\r\n-                margin-right: 10px;\r\n-              \">é‡æ–°åŠ è½½</button>\r\n-              <a href=\"/simple.html\" style=\"\r\n-                background: rgba(255,255,255,0.2);\r\n-                color: white;\r\n-                text-decoration: none;\r\n-                padding: 12px 24px;\r\n-                border-radius: 8px;\r\n-                display: inline-block;\r\n-                font-weight: bold;\r\n-              \">ç®€åŒ–ç‰ˆæœ¬</a>\r\n-            </div>\r\n-            <details style=\"margin: 20px 0; text-align: left;\">\r\n-              <summary style=\"cursor: pointer; font-weight: bold; text-align: center;\">æŸ¥çœ‹è¯¦ç»†é”™è¯¯ä¿¡æ¯</summary>\r\n-              <pre style=\"\r\n-                background: rgba(0,0,0,0.3);\r\n-                padding: 15px;\r\n-                border-radius: 8px;\r\n-                overflow: auto;\r\n-                margin: 10px 0;\r\n-                font-size: 12px;\r\n-                white-space: pre-wrap;\r\n-              \">${error.stack || 'æ— å †æ ˆä¿¡æ¯'}</pre>\r\n-            </details>\r\n-          </div>\r\n-        </div>\r\n-      `\r\n-    }\r\n-  }\r\n-}\r\n-\r\n-// ç­‰å¾…DOMåŠ è½½å®Œæˆ\r\n-if (document.readyState === 'loading') {\r\n-  document.addEventListener('DOMContentLoaded', initApp)\r\n-} else {\r\n-  initApp()\r\n-}\r\n+import { createApp } from 'vue'\n+import App from './App.vue'\n+import router from './router'\n+\n+// å¼•å…¥é…ç½®æœåŠ¡å’Œè´Ÿè½½å‡è¡¡å™¨\n+import configService from './services/configService.js'\n+import loadBalancer from './services/loadBalancer.js'\n+import { initializeWebSocket } from './services/comfyui.js'\n+\n+// å¼€å‘ç¯å¢ƒä¸‹å¼•å…¥æµ‹è¯•å·¥å…·\n+if (import.meta.env.DEV) {\n+  import('./utils/testPointsConsumption.js')\n+  import('./utils/testSimpleLoadBalancer.js')\n+}\n+\n+// å¼•å…¥Vant UI\n+import Vant, { Toast } from 'vant'\n+import 'vant/lib/index.css'\n+\n+// å¼•å…¥è‡ªå®šä¹‰æ ·å¼ï¼ˆåŒ…å«æš—é»‘ä¸»é¢˜ï¼‰\n+import './style.css'\n+import './styles/vant-theme.css'\n+\n+console.log('ğŸš€ å¼€å§‹åˆå§‹åŒ–Vueåº”ç”¨...');\n+\n+// å¤„ç†GitHub Pages SPAè·¯ç”±é‡å®šå‘\n+if (window.location.search.includes('redirect=')) {\n+  const redirectPath = new URLSearchParams(window.location.search).get('redirect')\n+  if (redirectPath) {\n+    window.history.replaceState({}, '', redirectPath)\n+  }\n+}\n+\n+// å…¨å±€é”™è¯¯å¤„ç†\n+window.addEventListener('error', (event) => {\n+  console.error('å…¨å±€é”™è¯¯:', event.error)\n+})\n+\n+window.addEventListener('unhandledrejection', (event) => {\n+  console.error('æœªå¤„ç†çš„Promiseæ‹’ç»:', event.reason)\n+})\n+\n+import logger from './utils/logger.js'\n+\n+// ç¡®ä¿DOMåŠ è½½å®Œæˆ\n+async function initApp() {\n+  try {\n+    logger.info('ğŸš€ æ­£åœ¨åˆå§‹åŒ–åº”ç”¨...')\n+\n+    // åˆå§‹åŒ–é…ç½®æœåŠ¡\n+    try {\n+      await configService.initialize()\n+      logger.info('âœ… é…ç½®æœåŠ¡åˆå§‹åŒ–å®Œæˆ')\n+    } catch (error) {\n+      logger.warn('âš ï¸ é…ç½®æœåŠ¡åˆå§‹åŒ–å¤±è´¥ï¼Œä½¿ç”¨é»˜è®¤é…ç½®')\n+      // ä½¿ç”¨é»˜è®¤é…ç½®\n+    }\n+\n+    // åˆå§‹åŒ–è´Ÿè½½å‡è¡¡å™¨\n+    await loadBalancer.initialize()\n+\n+    // åˆå§‹åŒ–æœåŠ¡å™¨è¿æ¥æµ‹è¯•ï¼ˆé™é»˜æ¨¡å¼ï¼‰\n+    try {\n+      await loadBalancer.initializeServerConnection()\n+      await loadBalancer.showLoadBalancingStatus()\n+      logger.info('âœ… æœåŠ¡å™¨è¿æ¥æµ‹è¯•å®Œæˆ')\n+    } catch (error) {\n+      logger.warn('âš ï¸ æœåŠ¡å™¨è¿æ¥æµ‹è¯•å¤±è´¥ï¼Œå°†åœ¨éœ€è¦æ—¶é‡è¯•')\n+    }\n+\n+    const app = createApp(App)\n+    app.use(router)\n+    app.use(Vant)\n+\n+    // å…¨å±€é”™è¯¯å¤„ç†\n+    app.config.errorHandler = (err, vm, info) => {\n+      logger.error('Vueåº”ç”¨é”™è¯¯:', err, info)\n+      Toast.fail('åº”ç”¨å‘ç”Ÿé”™è¯¯ï¼Œè¯·åˆ·æ–°é¡µé¢é‡è¯•')\n+    }\n+\n+    // å…¨å±€å±æ€§\n+    app.config.globalProperties.$toast = Toast\n+\n+    // æŒ‚è½½åº”ç”¨\n+    app.mount('#app')\n+    console.log('âœ… Vueåº”ç”¨å¯åŠ¨æˆåŠŸ!')\n+\n+    // æµ‹è¯•å‡½æ•°å·²åœ¨å„è‡ªçš„æ¨¡å—ä¸­è‡ªåŠ¨æš´éœ²åˆ°å…¨å±€\n+\n+  } catch (error) {\n+    console.error('âŒ Vueåº”ç”¨å¯åŠ¨å¤±è´¥:', error)\n+\n+    // æ˜¾ç¤ºå¯åŠ¨å¤±è´¥é¡µé¢\n+    document.body.innerHTML = `\n+      <div class=\"error-page\">\n+        <div class=\"error-content\">\n+          <h1 class=\"error-title\">åº”ç”¨å¯åŠ¨å¤±è´¥</h1>\n+          <p class=\"error-message\">æŠ±æ­‰ï¼Œåº”ç”¨æ— æ³•æ­£å¸¸å¯åŠ¨ã€‚è¯·å°è¯•åˆ·æ–°é¡µé¢æˆ–è”ç³»æŠ€æœ¯æ”¯æŒã€‚</p>\n+          <div class=\"error-actions\">\n+            <button class=\"error-button\" onclick=\"window.location.reload()\">åˆ·æ–°é¡µé¢</button>\n+            <a class=\"error-button secondary\" href=\"/\">è¿”å›é¦–é¡µ</a>\n+          </div>\n+          <details style=\"margin-top: 20px; text-align: left;\">\n+            <summary style=\"cursor: pointer;\">æŠ€æœ¯è¯¦æƒ…</summary>\n+            <pre style=\"margin-top: 10px; padding: 10px; background: rgba(0,0,0,0.2); border-radius: 4px; font-size: 12px; overflow: auto;\">${error.stack || error.message}</pre>\n+          </details>\n+        </div>\n+      </div>\n+    `\n+  }\n+}\n+\n+// å¯åŠ¨åº”ç”¨\n+if (document.readyState === 'loading') {\n+  document.addEventListener('DOMContentLoaded', initApp)\n+} else {\n+  initApp()\n+}\n"
                },
                {
                    "date": 1752898763095,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -5,8 +5,9 @@\n // å¼•å…¥é…ç½®æœåŠ¡å’Œè´Ÿè½½å‡è¡¡å™¨\n import configService from './services/configService.js'\n import loadBalancer from './services/loadBalancer.js'\n import { initializeWebSocket } from './services/comfyui.js'\n+import { setupGlobalErrorHandler } from './services/globalErrorHandler.js'\n \n // å¼€å‘ç¯å¢ƒä¸‹å¼•å…¥æµ‹è¯•å·¥å…·\n if (import.meta.env.DEV) {\n   import('./utils/testPointsConsumption.js')\n"
                },
                {
                    "date": 1752898774935,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -31,17 +31,11 @@\n     window.history.replaceState({}, '', redirectPath)\n   }\n }\n \n-// å…¨å±€é”™è¯¯å¤„ç†\n-window.addEventListener('error', (event) => {\n-  console.error('å…¨å±€é”™è¯¯:', event.error)\n-})\n+// è®¾ç½®å…¨å±€é”™è¯¯å¤„ç†å™¨\n+setupGlobalErrorHandler()\n \n-window.addEventListener('unhandledrejection', (event) => {\n-  console.error('æœªå¤„ç†çš„Promiseæ‹’ç»:', event.reason)\n-})\n-\n import logger from './utils/logger.js'\n \n // ç¡®ä¿DOMåŠ è½½å®Œæˆ\n async function initApp() {\n"
                },
                {
                    "date": 1752920799192,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -62,8 +62,17 @@\n     } catch (error) {\n       logger.warn('âš ï¸ æœåŠ¡å™¨è¿æ¥æµ‹è¯•å¤±è´¥ï¼Œå°†åœ¨éœ€è¦æ—¶é‡è¯•')\n     }\n \n+    // ğŸ”§ å…³é”®ä¿®å¤ï¼šåˆå§‹åŒ–WebSocketè¿æ¥\n+    try {\n+      logger.info('ğŸ”Œ æ­£åœ¨åˆå§‹åŒ–WebSocketè¿æ¥...')\n+      await initializeWebSocket()\n+      logger.info('âœ… WebSocketè¿æ¥åˆå§‹åŒ–å®Œæˆ')\n+    } catch (error) {\n+      logger.warn('âš ï¸ WebSocketè¿æ¥åˆå§‹åŒ–å¤±è´¥ï¼Œå°†åœ¨éœ€è¦æ—¶é‡è¯•:', error.message)\n+    }\n+\n     const app = createApp(App)\n     app.use(router)\n     app.use(Vant)\n \n"
                },
                {
                    "date": 1752944726240,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -4,9 +4,10 @@\n \n // å¼•å…¥é…ç½®æœåŠ¡å’Œè´Ÿè½½å‡è¡¡å™¨\n import configService from './services/configService.js'\n import loadBalancer from './services/loadBalancer.js'\n-import { initializeWebSocket } from './services/comfyui.js'\n+// åˆ‡æ¢åˆ°WebSocketé‡æ„ç‰ˆæœ¬\n+import { initializeWebSocketClient } from './services/comfyui-refactored.js'\n import { setupGlobalErrorHandler } from './services/globalErrorHandler.js'\n \n // å¼€å‘ç¯å¢ƒä¸‹å¼•å…¥æµ‹è¯•å·¥å…·\n if (import.meta.env.DEV) {\n"
                },
                {
                    "date": 1752944739162,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -63,15 +63,15 @@\n     } catch (error) {\n       logger.warn('âš ï¸ æœåŠ¡å™¨è¿æ¥æµ‹è¯•å¤±è´¥ï¼Œå°†åœ¨éœ€è¦æ—¶é‡è¯•')\n     }\n \n-    // ğŸ”§ å…³é”®ä¿®å¤ï¼šåˆå§‹åŒ–WebSocketè¿æ¥\n+    // ğŸ”§ å…³é”®ä¿®å¤ï¼šåˆå§‹åŒ–WebSocketè¿æ¥ï¼ˆé‡æ„ç‰ˆæœ¬ï¼‰\n     try {\n-      logger.info('ğŸ”Œ æ­£åœ¨åˆå§‹åŒ–WebSocketè¿æ¥...')\n-      await initializeWebSocket()\n-      logger.info('âœ… WebSocketè¿æ¥åˆå§‹åŒ–å®Œæˆ')\n+      logger.info('ğŸ”Œ æ­£åœ¨åˆå§‹åŒ–WebSocketå®¢æˆ·ç«¯ï¼ˆé‡æ„ç‰ˆæœ¬ï¼‰...')\n+      await initializeWebSocketClient()\n+      logger.info('âœ… WebSocketå®¢æˆ·ç«¯åˆå§‹åŒ–å®Œæˆ')\n     } catch (error) {\n-      logger.warn('âš ï¸ WebSocketè¿æ¥åˆå§‹åŒ–å¤±è´¥ï¼Œå°†åœ¨éœ€è¦æ—¶é‡è¯•:', error.message)\n+      logger.warn('âš ï¸ WebSocketå®¢æˆ·ç«¯åˆå§‹åŒ–å¤±è´¥ï¼Œå°†åœ¨éœ€è¦æ—¶é‡è¯•:', error.message)\n     }\n \n     const app = createApp(App)\n     app.use(router)\n"
                },
                {
                    "date": 1752946590174,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -4,10 +4,10 @@\n \n // å¼•å…¥é…ç½®æœåŠ¡å’Œè´Ÿè½½å‡è¡¡å™¨\n import configService from './services/configService.js'\n import loadBalancer from './services/loadBalancer.js'\n-// åˆ‡æ¢åˆ°WebSocketé‡æ„ç‰ˆæœ¬\n-import { initializeWebSocketClient } from './services/comfyui-refactored.js'\n+// æ¢å¤ä½¿ç”¨ç›´è¿æ¨¡å¼\n+import { initializeComfyUIConnection } from './services/comfyui.js'\n import { setupGlobalErrorHandler } from './services/globalErrorHandler.js'\n \n // å¼€å‘ç¯å¢ƒä¸‹å¼•å…¥æµ‹è¯•å·¥å…·\n if (import.meta.env.DEV) {\n"
                },
                {
                    "date": 1752946602160,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -63,15 +63,15 @@\n     } catch (error) {\n       logger.warn('âš ï¸ æœåŠ¡å™¨è¿æ¥æµ‹è¯•å¤±è´¥ï¼Œå°†åœ¨éœ€è¦æ—¶é‡è¯•')\n     }\n \n-    // ğŸ”§ å…³é”®ä¿®å¤ï¼šåˆå§‹åŒ–WebSocketè¿æ¥ï¼ˆé‡æ„ç‰ˆæœ¬ï¼‰\n+    // ğŸ”§ æ¢å¤ç›´è¿æ¨¡å¼ï¼šåˆå§‹åŒ–ComfyUIç›´è¿\n     try {\n-      logger.info('ğŸ”Œ æ­£åœ¨åˆå§‹åŒ–WebSocketå®¢æˆ·ç«¯ï¼ˆé‡æ„ç‰ˆæœ¬ï¼‰...')\n-      await initializeWebSocketClient()\n-      logger.info('âœ… WebSocketå®¢æˆ·ç«¯åˆå§‹åŒ–å®Œæˆ')\n+      logger.info('ğŸ”Œ æ­£åœ¨åˆå§‹åŒ–ComfyUIç›´è¿...')\n+      await initializeComfyUIConnection()\n+      logger.info('âœ… ComfyUIç›´è¿åˆå§‹åŒ–å®Œæˆ')\n     } catch (error) {\n-      logger.warn('âš ï¸ WebSocketå®¢æˆ·ç«¯åˆå§‹åŒ–å¤±è´¥ï¼Œå°†åœ¨éœ€è¦æ—¶é‡è¯•:', error.message)\n+      logger.warn('âš ï¸ ComfyUIç›´è¿åˆå§‹åŒ–å¤±è´¥ï¼Œå°†åœ¨éœ€è¦æ—¶é‡è¯•:', error.message)\n     }\n \n     const app = createApp(App)\n     app.use(router)\n"
                }
            ],
            "date": 1752330016769,
            "name": "Commit-0",
            "content": "import { createApp } from 'vue'\r\nimport App from './App.vue'\r\nimport router from './router'\r\n\r\n// å¼•å…¥é…ç½®æœåŠ¡\r\nimport configService from './services/configService.js'\r\n\r\n// å¼•å…¥Vant UI\r\nimport Vant, { Toast } from 'vant'\r\nimport 'vant/lib/index.css'\r\n\r\n// å¼•å…¥è‡ªå®šä¹‰æ ·å¼ï¼ˆåŒ…å«æš—é»‘ä¸»é¢˜ï¼‰\r\nimport './style.css'\r\nimport './styles/vant-theme.css'\r\n\r\nconsole.log('ğŸš€ å¼€å§‹åˆå§‹åŒ–Vueåº”ç”¨...');\r\n\r\n// å¤„ç†GitHub Pages SPAè·¯ç”±é‡å®šå‘\r\n(function() {\r\n  const redirect = new URLSearchParams(window.location.search).get('redirect');\r\n  if (redirect) {\r\n    console.log('ğŸ”„ æ£€æµ‹åˆ°è·¯ç”±é‡å®šå‘:', redirect);\r\n    history.replaceState(null, null, redirect);\r\n  }\r\n})();\r\n\r\n// æ·»åŠ å…¨å±€é”™è¯¯å¤„ç†\r\nwindow.addEventListener('error', (event) => {\r\n  console.error('å…¨å±€JavaScripté”™è¯¯:', event.error)\r\n})\r\n\r\nwindow.addEventListener('unhandledrejection', (event) => {\r\n  console.error('æœªå¤„ç†çš„Promiseæ‹’ç»:', event.reason)\r\n})\r\n\r\n// ç¡®ä¿DOMåŠ è½½å®Œæˆ\r\nfunction initApp() {\r\n  try {\r\n    console.log('ğŸ“¦ åˆ›å»ºVueåº”ç”¨å®ä¾‹...')\r\n    const app = createApp(App)\r\n\r\n    console.log('ğŸ”§ é…ç½®è·¯ç”±...')\r\n    app.use(router)\r\n\r\n    console.log('ğŸ¨ é…ç½®Vant UI...')\r\n    app.use(Vant)\r\n\r\n    // æ·»åŠ Vueé”™è¯¯å¤„ç†\r\n    app.config.errorHandler = (err, vm, info) => {\r\n      console.error('Vueåº”ç”¨é”™è¯¯:', err, info)\r\n\r\n      // æ˜¾ç¤ºç”¨æˆ·å‹å¥½çš„é”™è¯¯ä¿¡æ¯\r\n      const errorDiv = document.createElement('div')\r\n      errorDiv.style.cssText = `\r\n        position: fixed;\r\n        top: 20px;\r\n        right: 20px;\r\n        background: #ff4444;\r\n        color: white;\r\n        padding: 15px;\r\n        border-radius: 8px;\r\n        z-index: 10000;\r\n        max-width: 300px;\r\n        font-family: monospace;\r\n        font-size: 12px;\r\n      `\r\n      errorDiv.innerHTML = `\r\n        <strong>Vueé”™è¯¯:</strong><br>\r\n        ${err.message}<br>\r\n        <small>${info}</small>\r\n        <button onclick=\"this.parentElement.remove()\" style=\"\r\n          background: rgba(255,255,255,0.2);\r\n          border: none;\r\n          color: white;\r\n          padding: 4px 8px;\r\n          border-radius: 4px;\r\n          cursor: pointer;\r\n          margin-top: 8px;\r\n          display: block;\r\n        \">å…³é—­</button>\r\n      `\r\n      document.body.appendChild(errorDiv)\r\n\r\n      // 5ç§’åè‡ªåŠ¨ç§»é™¤\r\n      setTimeout(() => {\r\n        if (errorDiv.parentElement) {\r\n          errorDiv.remove()\r\n        }\r\n      }, 5000)\r\n    }\r\n\r\n    console.log('ğŸ”§ æŒ‚è½½åº”ç”¨åˆ°#app...')\r\n    app.mount('#app')\r\n\r\n    console.log('âœ… Vueåº”ç”¨å¯åŠ¨æˆåŠŸ!')\r\n\r\n  } catch (error) {\r\n    console.error('âŒ Vueåº”ç”¨å¯åŠ¨å¤±è´¥:', error)\r\n\r\n    // æ˜¾ç¤ºå¯åŠ¨å¤±è´¥é¡µé¢\r\n    const appElement = document.getElementById('app')\r\n    if (appElement) {\r\n      appElement.innerHTML = `\r\n        <div style=\"\r\n          min-height: 100vh;\r\n          background: linear-gradient(135deg, #ff6b6b, #ee5a24);\r\n          display: flex;\r\n          align-items: center;\r\n          justify-content: center;\r\n          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\r\n          color: white;\r\n          text-align: center;\r\n          padding: 20px;\r\n        \">\r\n          <div style=\"\r\n            background: rgba(255, 255, 255, 0.1);\r\n            backdrop-filter: blur(10px);\r\n            border-radius: 16px;\r\n            padding: 40px;\r\n            max-width: 600px;\r\n            border: 1px solid rgba(255, 255, 255, 0.2);\r\n          \">\r\n            <h1 style=\"margin: 0 0 20px 0; font-size: 2rem;\">ğŸš¨ åº”ç”¨å¯åŠ¨å¤±è´¥</h1>\r\n            <p style=\"font-size: 1.1rem; margin: 0 0 20px 0;\">\r\n              <strong>é”™è¯¯:</strong> ${error.message}\r\n            </p>\r\n            <div style=\"margin: 20px 0;\">\r\n              <button onclick=\"location.reload()\" style=\"\r\n                background: #fff;\r\n                color: #ee5a24;\r\n                border: none;\r\n                padding: 12px 24px;\r\n                border-radius: 8px;\r\n                cursor: pointer;\r\n                font-weight: bold;\r\n                font-size: 1rem;\r\n                margin-right: 10px;\r\n              \">é‡æ–°åŠ è½½</button>\r\n              <a href=\"/simple.html\" style=\"\r\n                background: rgba(255,255,255,0.2);\r\n                color: white;\r\n                text-decoration: none;\r\n                padding: 12px 24px;\r\n                border-radius: 8px;\r\n                display: inline-block;\r\n                font-weight: bold;\r\n              \">ç®€åŒ–ç‰ˆæœ¬</a>\r\n            </div>\r\n            <details style=\"margin: 20px 0; text-align: left;\">\r\n              <summary style=\"cursor: pointer; font-weight: bold; text-align: center;\">æŸ¥çœ‹è¯¦ç»†é”™è¯¯ä¿¡æ¯</summary>\r\n              <pre style=\"\r\n                background: rgba(0,0,0,0.3);\r\n                padding: 15px;\r\n                border-radius: 8px;\r\n                overflow: auto;\r\n                margin: 10px 0;\r\n                font-size: 12px;\r\n                white-space: pre-wrap;\r\n              \">${error.stack || 'æ— å †æ ˆä¿¡æ¯'}</pre>\r\n            </details>\r\n          </div>\r\n        </div>\r\n      `\r\n    }\r\n  }\r\n}\r\n\r\n// ç­‰å¾…DOMåŠ è½½å®Œæˆ\r\nif (document.readyState === 'loading') {\r\n  document.addEventListener('DOMContentLoaded', initApp)\r\n} else {\r\n  initApp()\r\n}\r\n"
        }
    ]
}