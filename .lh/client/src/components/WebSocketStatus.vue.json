{
    "sourceFile": "client/src/components/WebSocketStatus.vue",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 9,
            "patches": [
                {
                    "date": 1752463749504,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1752464153128,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -16,20 +16,17 @@\n   setup() {\n     const showStatus = ref(false)\n     const statusClass = ref('disconnected')\n     const statusText = ref('WebSocket Êú™ËøûÊé•')\n-\n+    \n     let statusCheckInterval = null\n-\n+    \n     // Êõ¥Êñ∞Áä∂ÊÄÅÊòæÁ§∫\n     const updateStatus = () => {\n-      // Ê£ÄÊü• WebSocket ËøûÊé•Áä∂ÊÄÅ\n-      const connected = wsConnection && wsConnection.readyState === WebSocket.OPEN\n-\n-      if (connected) {\n+      if (isWsConnected) {\n         statusClass.value = 'connected'\n         statusText.value = 'ComfyUI Â∑≤ËøûÊé•'\n-\n+        \n         // ËøûÊé•ÊàêÂäüÂêé3ÁßíÈöêËóèÁä∂ÊÄÅ\n         setTimeout(() => {\n           showStatus.value = false\n         }, 3000)\n@@ -38,40 +35,40 @@\n         statusText.value = 'ComfyUI ËøûÊé•‰∏≠...'\n         showStatus.value = true\n       }\n     }\n-\n+    \n     onMounted(() => {\n       // ÂàùÂßãÁä∂ÊÄÅÊ£ÄÊü•\n       updateStatus()\n-\n+      \n       // ÂÆöÊúüÊ£ÄÊü•ËøûÊé•Áä∂ÊÄÅ\n       statusCheckInterval = setInterval(updateStatus, 2000)\n-\n+      \n       // ÁõëÂê¨ WebSocket ‰∫ã‰ª∂\n       if (wsConnection) {\n         wsConnection.addEventListener('open', () => {\n           updateStatus()\n         })\n-\n+        \n         wsConnection.addEventListener('close', () => {\n           updateStatus()\n         })\n-\n+        \n         wsConnection.addEventListener('error', () => {\n           statusClass.value = 'error'\n           statusText.value = 'ComfyUI ËøûÊé•ÈîôËØØ'\n           showStatus.value = true\n         })\n       }\n     })\n-\n+    \n     onUnmounted(() => {\n       if (statusCheckInterval) {\n         clearInterval(statusCheckInterval)\n       }\n     })\n-\n+    \n     return {\n       showStatus,\n       statusClass,\n       statusText\n"
                },
                {
                    "date": 1752465565302,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,10 +1,30 @@\n <template>\n-  <div class=\"websocket-status\" v-if=\"showStatus\">\n-    <div class=\"status-indicator\" :class=\"statusClass\">\n-      <div class=\"status-dot\"></div>\n-      <span class=\"status-text\">{{ statusText }}</span>\n+  <div>\n+    <!-- WebSocketËøûÊé•Áä∂ÊÄÅ -->\n+    <div class=\"websocket-status\" v-if=\"showStatus\">\n+      <div class=\"status-indicator\" :class=\"statusClass\">\n+        <div class=\"status-dot\"></div>\n+        <span class=\"status-text\">{{ statusText }}</span>\n+      </div>\n     </div>\n+\n+    <!-- Â§ÑÁêÜÁªìÊûúÈÄöÁü• -->\n+    <div v-if=\"notifications.length > 0\" class=\"notification-container\">\n+      <div\n+        v-for=\"notification in notifications\"\n+        :key=\"notification.id\"\n+        class=\"notification\"\n+        :class=\"notification.type\"\n+      >\n+        <div class=\"notification-content\">\n+          <div class=\"notification-icon\">{{ getNotificationIcon(notification.type) }}</div>\n+          <div class=\"notification-message\">{{ notification.message }}</div>\n+          <div class=\"notification-time\">{{ notification.time }}</div>\n+        </div>\n+        <button @click=\"removeNotification(notification.id)\" class=\"notification-close\">√ó</button>\n+      </div>\n+    </div>\n   </div>\n </template>\n \n <script>\n@@ -16,63 +36,135 @@\n   setup() {\n     const showStatus = ref(false)\n     const statusClass = ref('disconnected')\n     const statusText = ref('WebSocket Êú™ËøûÊé•')\n-    \n+    const notifications = ref([])\n+\n     let statusCheckInterval = null\n-    \n+    let notificationId = 0\n+\n     // Êõ¥Êñ∞Áä∂ÊÄÅÊòæÁ§∫\n     const updateStatus = () => {\n       if (isWsConnected) {\n         statusClass.value = 'connected'\n-        statusText.value = 'ComfyUI Â∑≤ËøûÊé•'\n-        \n-        // ËøûÊé•ÊàêÂäüÂêé3ÁßíÈöêËóèÁä∂ÊÄÅ\n+        statusText.value = 'ComfyUI ÂÆûÊó∂ËøûÊé•'\n+        showStatus.value = true\n+\n+        // ËøûÊé•ÊàêÂäüÂêé5ÁßíÈöêËóèÁä∂ÊÄÅ\n         setTimeout(() => {\n           showStatus.value = false\n-        }, 3000)\n+        }, 5000)\n       } else {\n         statusClass.value = 'disconnected'\n         statusText.value = 'ComfyUI ËøûÊé•‰∏≠...'\n         showStatus.value = true\n       }\n     }\n-    \n+\n+    // Ê∑ªÂä†ÈÄöÁü•\n+    const addNotification = (message, type = 'info') => {\n+      const notification = {\n+        id: ++notificationId,\n+        message,\n+        type,\n+        time: new Date().toLocaleTimeString()\n+      }\n+\n+      notifications.value.unshift(notification)\n+\n+      // Âú®ÊéßÂà∂Âè∞ÊòæÁ§∫ÊòéÊòæÊ†áËÆ∞\n+      console.log('üîîüîîüîî ÂâçÁ´ØÈÄöÁü•ÊòæÁ§∫ üîîüîîüîî')\n+      console.log(`ÈÄöÁü•ÂÜÖÂÆπ: ${message}`)\n+      console.log(`ÈÄöÁü•Á±ªÂûã: ${type}`)\n+      console.log(`ÈÄöÁü•Êó∂Èó¥: ${notification.time}`)\n+\n+      // Ëá™Âä®ÁßªÈô§ÈÄöÁü•ÔºàÊàêÂäüÂíå‰ø°ÊÅØÁ±ªÂûã8ÁßíÂêéÁßªÈô§ÔºåÈîôËØØÁ±ªÂûã15ÁßíÂêéÁßªÈô§Ôºâ\n+      const autoRemoveTime = type === 'error' ? 15000 : 8000\n+      setTimeout(() => {\n+        removeNotification(notification.id)\n+      }, autoRemoveTime)\n+\n+      // ÊúÄÂ§ö‰øùÁïô5‰∏™ÈÄöÁü•\n+      if (notifications.value.length > 5) {\n+        notifications.value = notifications.value.slice(0, 5)\n+      }\n+    }\n+\n+    // ÁßªÈô§ÈÄöÁü•\n+    const removeNotification = (id) => {\n+      const index = notifications.value.findIndex(n => n.id === id)\n+      if (index > -1) {\n+        notifications.value.splice(index, 1)\n+      }\n+    }\n+\n+    // Ëé∑ÂèñÈÄöÁü•ÂõæÊ†á\n+    const getNotificationIcon = (type) => {\n+      const icons = {\n+        'success': '‚úÖ',\n+        'error': '‚ùå',\n+        'warning': '‚ö†Ô∏è',\n+        'info': '‚ÑπÔ∏è'\n+      }\n+      return icons[type] || '‚ÑπÔ∏è'\n+    }\n+\n+    // ÁõëÂê¨Ëá™ÂÆö‰πâ‰∫ã‰ª∂\n+    const handleComfyUIStatus = (event) => {\n+      const { message, type } = event.detail\n+      addNotification(message, type)\n+    }\n+\n     onMounted(() => {\n       // ÂàùÂßãÁä∂ÊÄÅÊ£ÄÊü•\n       updateStatus()\n-      \n+\n       // ÂÆöÊúüÊ£ÄÊü•ËøûÊé•Áä∂ÊÄÅ\n       statusCheckInterval = setInterval(updateStatus, 2000)\n-      \n+\n+      // ÁõëÂê¨ComfyUIÁä∂ÊÄÅ‰∫ã‰ª∂\n+      window.addEventListener('comfyui-status', handleComfyUIStatus)\n+\n+      // ÊòæÁ§∫ÂàùÂßãÂåñÈÄöÁü•\n+      addNotification('WebSocketÁä∂ÊÄÅÁõëÊéßÂ∑≤ÂêØÂä®', 'info')\n+\n       // ÁõëÂê¨ WebSocket ‰∫ã‰ª∂\n       if (wsConnection) {\n         wsConnection.addEventListener('open', () => {\n           updateStatus()\n+          addNotification('WebSocketËøûÊé•ÊàêÂäü', 'success')\n         })\n-        \n+\n         wsConnection.addEventListener('close', () => {\n           updateStatus()\n+          addNotification('WebSocketËøûÊé•Â∑≤Êñ≠ÂºÄ', 'warning')\n         })\n-        \n+\n         wsConnection.addEventListener('error', () => {\n           statusClass.value = 'error'\n           statusText.value = 'ComfyUI ËøûÊé•ÈîôËØØ'\n           showStatus.value = true\n+          addNotification('WebSocketËøûÊé•ÈîôËØØ', 'error')\n         })\n       }\n     })\n-    \n+\n     onUnmounted(() => {\n       if (statusCheckInterval) {\n         clearInterval(statusCheckInterval)\n       }\n+\n+      // ÁßªÈô§‰∫ã‰ª∂ÁõëÂê¨\n+      window.removeEventListener('comfyui-status', handleComfyUIStatus)\n     })\n-    \n+\n     return {\n       showStatus,\n       statusClass,\n-      statusText\n+      statusText,\n+      notifications,\n+      removeNotification,\n+      getNotificationIcon\n     }\n   }\n }\n </script>\n"
                },
                {
                    "date": 1752465587852,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -230,14 +230,130 @@\n .status-text {\n   font-weight: 500;\n }\n \n+/* ÈÄöÁü•ÂÆπÂô® */\n+.notification-container {\n+  position: fixed;\n+  top: 70px;\n+  right: 20px;\n+  z-index: 1001;\n+  max-width: 350px;\n+}\n+\n+.notification {\n+  display: flex;\n+  align-items: flex-start;\n+  margin-bottom: 10px;\n+  padding: 12px;\n+  border-radius: 8px;\n+  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n+  animation: slideIn 0.3s ease-out;\n+  transition: all 0.3s ease;\n+  backdrop-filter: blur(10px);\n+}\n+\n+.notification:hover {\n+  transform: translateX(-5px);\n+}\n+\n+.notification.success {\n+  background-color: rgba(240, 253, 244, 0.95);\n+  border: 1px solid #22c55e;\n+  color: #15803d;\n+}\n+\n+.notification.error {\n+  background-color: rgba(254, 242, 242, 0.95);\n+  border: 1px solid #ef4444;\n+  color: #dc2626;\n+}\n+\n+.notification.warning {\n+  background-color: rgba(255, 251, 235, 0.95);\n+  border: 1px solid #f59e0b;\n+  color: #d97706;\n+}\n+\n+.notification.info {\n+  background-color: rgba(240, 249, 255, 0.95);\n+  border: 1px solid #3b82f6;\n+  color: #1d4ed8;\n+}\n+\n+.notification-content {\n+  flex: 1;\n+  display: flex;\n+  align-items: center;\n+  gap: 8px;\n+}\n+\n+.notification-icon {\n+  font-size: 16px;\n+  flex-shrink: 0;\n+}\n+\n+.notification-message {\n+  flex: 1;\n+  font-size: 14px;\n+  font-weight: 500;\n+  line-height: 1.4;\n+}\n+\n+.notification-time {\n+  font-size: 11px;\n+  opacity: 0.7;\n+  flex-shrink: 0;\n+}\n+\n+.notification-close {\n+  background: none;\n+  border: none;\n+  font-size: 18px;\n+  cursor: pointer;\n+  padding: 0;\n+  margin-left: 8px;\n+  opacity: 0.5;\n+  transition: opacity 0.2s;\n+  color: inherit;\n+}\n+\n+.notification-close:hover {\n+  opacity: 1;\n+}\n+\n+@keyframes slideIn {\n+  from {\n+    transform: translateX(100%);\n+    opacity: 0;\n+  }\n+  to {\n+    transform: translateX(0);\n+    opacity: 1;\n+  }\n+}\n+\n /* ÁßªÂä®Á´ØÈÄÇÈÖç */\n @media (max-width: 768px) {\n   .websocket-status {\n     top: 10px;\n     right: 10px;\n     font-size: 11px;\n     padding: 6px 10px;\n   }\n+\n+  .notification-container {\n+    top: 60px;\n+    right: 10px;\n+    max-width: calc(100vw - 20px);\n+  }\n+\n+  .notification {\n+    padding: 10px;\n+    font-size: 13px;\n+  }\n+\n+  .notification-message {\n+    font-size: 13px;\n+  }\n }\n </style>\n"
                },
                {
                    "date": 1752467896266,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -70,14 +70,8 @@\n       }\n \n       notifications.value.unshift(notification)\n \n-      // Âú®ÊéßÂà∂Âè∞ÊòæÁ§∫ÊòéÊòæÊ†áËÆ∞\n-      console.log('üîîüîîüîî ÂâçÁ´ØÈÄöÁü•ÊòæÁ§∫ üîîüîîüîî')\n-      console.log(`ÈÄöÁü•ÂÜÖÂÆπ: ${message}`)\n-      console.log(`ÈÄöÁü•Á±ªÂûã: ${type}`)\n-      console.log(`ÈÄöÁü•Êó∂Èó¥: ${notification.time}`)\n-\n       // Ëá™Âä®ÁßªÈô§ÈÄöÁü•ÔºàÊàêÂäüÂíå‰ø°ÊÅØÁ±ªÂûã8ÁßíÂêéÁßªÈô§ÔºåÈîôËØØÁ±ªÂûã15ÁßíÂêéÁßªÈô§Ôºâ\n       const autoRemoveTime = type === 'error' ? 15000 : 8000\n       setTimeout(() => {\n         removeNotification(notification.id)\n"
                },
                {
                    "date": 1752467913491,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -117,11 +117,8 @@\n \n       // ÁõëÂê¨ComfyUIÁä∂ÊÄÅ‰∫ã‰ª∂\n       window.addEventListener('comfyui-status', handleComfyUIStatus)\n \n-      // ÊòæÁ§∫ÂàùÂßãÂåñÈÄöÁü•\n-      addNotification('WebSocketÁä∂ÊÄÅÁõëÊéßÂ∑≤ÂêØÂä®', 'info')\n-\n       // ÁõëÂê¨ WebSocket ‰∫ã‰ª∂\n       if (wsConnection) {\n         wsConnection.addEventListener('open', () => {\n           updateStatus()\n"
                },
                {
                    "date": 1752836210723,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -121,21 +121,25 @@\n       // ÁõëÂê¨ WebSocket ‰∫ã‰ª∂\n       if (wsConnection) {\n         wsConnection.addEventListener('open', () => {\n           updateStatus()\n-          addNotification('WebSocketËøûÊé•ÊàêÂäü', 'success')\n+          // Âè™Âú®Ë∞ÉËØïÊ®°Âºè‰∏ãÊòæÁ§∫ËøûÊé•ÊàêÂäüÈÄöÁü•\n+          if (import.meta.env.DEV) {\n+            addNotification('WebSocketËøûÊé•ÊàêÂäü', 'success')\n+          }\n         })\n \n         wsConnection.addEventListener('close', () => {\n           updateStatus()\n-          addNotification('WebSocketËøûÊé•Â∑≤Êñ≠ÂºÄ', 'warning')\n+          // ÁÆÄÂåñËøûÊé•Êñ≠ÂºÄÈÄöÁü•\n+          addNotification('ËøûÊé•Â∑≤Êñ≠ÂºÄ', 'warning')\n         })\n \n         wsConnection.addEventListener('error', () => {\n           statusClass.value = 'error'\n           statusText.value = 'ComfyUI ËøûÊé•ÈîôËØØ'\n           showStatus.value = true\n-          addNotification('WebSocketËøûÊé•ÈîôËØØ', 'error')\n+          addNotification('ËøûÊé•ÈîôËØØ', 'error')\n         })\n       }\n     })\n \n"
                },
                {
                    "date": 1753508123009,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,354 +1,354 @@\n-<template>\n-  <div>\n-    <!-- WebSocketËøûÊé•Áä∂ÊÄÅ -->\n-    <div class=\"websocket-status\" v-if=\"showStatus\">\n-      <div class=\"status-indicator\" :class=\"statusClass\">\n-        <div class=\"status-dot\"></div>\n-        <span class=\"status-text\">{{ statusText }}</span>\n-      </div>\n-    </div>\n-\n-    <!-- Â§ÑÁêÜÁªìÊûúÈÄöÁü• -->\n-    <div v-if=\"notifications.length > 0\" class=\"notification-container\">\n-      <div\n-        v-for=\"notification in notifications\"\n-        :key=\"notification.id\"\n-        class=\"notification\"\n-        :class=\"notification.type\"\n-      >\n-        <div class=\"notification-content\">\n-          <div class=\"notification-icon\">{{ getNotificationIcon(notification.type) }}</div>\n-          <div class=\"notification-message\">{{ notification.message }}</div>\n-          <div class=\"notification-time\">{{ notification.time }}</div>\n-        </div>\n-        <button @click=\"removeNotification(notification.id)\" class=\"notification-close\">√ó</button>\n-      </div>\n-    </div>\n-  </div>\n-</template>\n-\n-<script>\n-import { ref, onMounted, onUnmounted } from 'vue'\n-import { wsConnection, isWsConnected } from '../services/comfyui.js'\n-\n-export default {\n-  name: 'WebSocketStatus',\n-  setup() {\n-    const showStatus = ref(false)\n-    const statusClass = ref('disconnected')\n-    const statusText = ref('WebSocket Êú™ËøûÊé•')\n-    const notifications = ref([])\n-\n-    let statusCheckInterval = null\n-    let notificationId = 0\n-\n-    // Êõ¥Êñ∞Áä∂ÊÄÅÊòæÁ§∫\n-    const updateStatus = () => {\n-      if (isWsConnected) {\n-        statusClass.value = 'connected'\n-        statusText.value = 'ComfyUI ÂÆûÊó∂ËøûÊé•'\n-        showStatus.value = true\n-\n-        // ËøûÊé•ÊàêÂäüÂêé5ÁßíÈöêËóèÁä∂ÊÄÅ\n-        setTimeout(() => {\n-          showStatus.value = false\n-        }, 5000)\n-      } else {\n-        statusClass.value = 'disconnected'\n-        statusText.value = 'ComfyUI ËøûÊé•‰∏≠...'\n-        showStatus.value = true\n-      }\n-    }\n-\n-    // Ê∑ªÂä†ÈÄöÁü•\n-    const addNotification = (message, type = 'info') => {\n-      const notification = {\n-        id: ++notificationId,\n-        message,\n-        type,\n-        time: new Date().toLocaleTimeString()\n-      }\n-\n-      notifications.value.unshift(notification)\n-\n-      // Ëá™Âä®ÁßªÈô§ÈÄöÁü•ÔºàÊàêÂäüÂíå‰ø°ÊÅØÁ±ªÂûã8ÁßíÂêéÁßªÈô§ÔºåÈîôËØØÁ±ªÂûã15ÁßíÂêéÁßªÈô§Ôºâ\n-      const autoRemoveTime = type === 'error' ? 15000 : 8000\n-      setTimeout(() => {\n-        removeNotification(notification.id)\n-      }, autoRemoveTime)\n-\n-      // ÊúÄÂ§ö‰øùÁïô5‰∏™ÈÄöÁü•\n-      if (notifications.value.length > 5) {\n-        notifications.value = notifications.value.slice(0, 5)\n-      }\n-    }\n-\n-    // ÁßªÈô§ÈÄöÁü•\n-    const removeNotification = (id) => {\n-      const index = notifications.value.findIndex(n => n.id === id)\n-      if (index > -1) {\n-        notifications.value.splice(index, 1)\n-      }\n-    }\n-\n-    // Ëé∑ÂèñÈÄöÁü•ÂõæÊ†á\n-    const getNotificationIcon = (type) => {\n-      const icons = {\n-        'success': '‚úÖ',\n-        'error': '‚ùå',\n-        'warning': '‚ö†Ô∏è',\n-        'info': '‚ÑπÔ∏è'\n-      }\n-      return icons[type] || '‚ÑπÔ∏è'\n-    }\n-\n-    // ÁõëÂê¨Ëá™ÂÆö‰πâ‰∫ã‰ª∂\n-    const handleComfyUIStatus = (event) => {\n-      const { message, type } = event.detail\n-      addNotification(message, type)\n-    }\n-\n-    onMounted(() => {\n-      // ÂàùÂßãÁä∂ÊÄÅÊ£ÄÊü•\n-      updateStatus()\n-\n-      // ÂÆöÊúüÊ£ÄÊü•ËøûÊé•Áä∂ÊÄÅ\n-      statusCheckInterval = setInterval(updateStatus, 2000)\n-\n-      // ÁõëÂê¨ComfyUIÁä∂ÊÄÅ‰∫ã‰ª∂\n-      window.addEventListener('comfyui-status', handleComfyUIStatus)\n-\n-      // ÁõëÂê¨ WebSocket ‰∫ã‰ª∂\n-      if (wsConnection) {\n-        wsConnection.addEventListener('open', () => {\n-          updateStatus()\n-          // Âè™Âú®Ë∞ÉËØïÊ®°Âºè‰∏ãÊòæÁ§∫ËøûÊé•ÊàêÂäüÈÄöÁü•\n-          if (import.meta.env.DEV) {\n-            addNotification('WebSocketËøûÊé•ÊàêÂäü', 'success')\n-          }\n-        })\n-\n-        wsConnection.addEventListener('close', () => {\n-          updateStatus()\n-          // ÁÆÄÂåñËøûÊé•Êñ≠ÂºÄÈÄöÁü•\n-          addNotification('ËøûÊé•Â∑≤Êñ≠ÂºÄ', 'warning')\n-        })\n-\n-        wsConnection.addEventListener('error', () => {\n-          statusClass.value = 'error'\n-          statusText.value = 'ComfyUI ËøûÊé•ÈîôËØØ'\n-          showStatus.value = true\n-          addNotification('ËøûÊé•ÈîôËØØ', 'error')\n-        })\n-      }\n-    })\n-\n-    onUnmounted(() => {\n-      if (statusCheckInterval) {\n-        clearInterval(statusCheckInterval)\n-      }\n-\n-      // ÁßªÈô§‰∫ã‰ª∂ÁõëÂê¨\n-      window.removeEventListener('comfyui-status', handleComfyUIStatus)\n-    })\n-\n-    return {\n-      showStatus,\n-      statusClass,\n-      statusText,\n-      notifications,\n-      removeNotification,\n-      getNotificationIcon\n-    }\n-  }\n-}\n-</script>\n-\n-<style scoped>\n-.websocket-status {\n-  position: fixed;\n-  top: 20px;\n-  right: 20px;\n-  z-index: 1000;\n-  background: rgba(0, 0, 0, 0.8);\n-  backdrop-filter: blur(10px);\n-  border-radius: 8px;\n-  padding: 8px 12px;\n-  color: white;\n-  font-size: 12px;\n-  transition: all 0.3s ease;\n-}\n-\n-.status-indicator {\n-  display: flex;\n-  align-items: center;\n-  gap: 6px;\n-}\n-\n-.status-dot {\n-  width: 8px;\n-  height: 8px;\n-  border-radius: 50%;\n-  transition: background-color 0.3s ease;\n-}\n-\n-.connected .status-dot {\n-  background-color: #4caf50;\n-  box-shadow: 0 0 6px rgba(76, 175, 80, 0.6);\n-}\n-\n-.disconnected .status-dot {\n-  background-color: #ff9800;\n-  animation: pulse 1.5s infinite;\n-}\n-\n-.error .status-dot {\n-  background-color: #f44336;\n-  animation: pulse 1s infinite;\n-}\n-\n-@keyframes pulse {\n-  0% {\n-    opacity: 1;\n-    transform: scale(1);\n-  }\n-  50% {\n-    opacity: 0.5;\n-    transform: scale(1.2);\n-  }\n-  100% {\n-    opacity: 1;\n-    transform: scale(1);\n-  }\n-}\n-\n-.status-text {\n-  font-weight: 500;\n-}\n-\n-/* ÈÄöÁü•ÂÆπÂô® */\n-.notification-container {\n-  position: fixed;\n-  top: 70px;\n-  right: 20px;\n-  z-index: 1001;\n-  max-width: 350px;\n-}\n-\n-.notification {\n-  display: flex;\n-  align-items: flex-start;\n-  margin-bottom: 10px;\n-  padding: 12px;\n-  border-radius: 8px;\n-  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n-  animation: slideIn 0.3s ease-out;\n-  transition: all 0.3s ease;\n-  backdrop-filter: blur(10px);\n-}\n-\n-.notification:hover {\n-  transform: translateX(-5px);\n-}\n-\n-.notification.success {\n-  background-color: rgba(240, 253, 244, 0.95);\n-  border: 1px solid #22c55e;\n-  color: #15803d;\n-}\n-\n-.notification.error {\n-  background-color: rgba(254, 242, 242, 0.95);\n-  border: 1px solid #ef4444;\n-  color: #dc2626;\n-}\n-\n-.notification.warning {\n-  background-color: rgba(255, 251, 235, 0.95);\n-  border: 1px solid #f59e0b;\n-  color: #d97706;\n-}\n-\n-.notification.info {\n-  background-color: rgba(240, 249, 255, 0.95);\n-  border: 1px solid #3b82f6;\n-  color: #1d4ed8;\n-}\n-\n-.notification-content {\n-  flex: 1;\n-  display: flex;\n-  align-items: center;\n-  gap: 8px;\n-}\n-\n-.notification-icon {\n-  font-size: 16px;\n-  flex-shrink: 0;\n-}\n-\n-.notification-message {\n-  flex: 1;\n-  font-size: 14px;\n-  font-weight: 500;\n-  line-height: 1.4;\n-}\n-\n-.notification-time {\n-  font-size: 11px;\n-  opacity: 0.7;\n-  flex-shrink: 0;\n-}\n-\n-.notification-close {\n-  background: none;\n-  border: none;\n-  font-size: 18px;\n-  cursor: pointer;\n-  padding: 0;\n-  margin-left: 8px;\n-  opacity: 0.5;\n-  transition: opacity 0.2s;\n-  color: inherit;\n-}\n-\n-.notification-close:hover {\n-  opacity: 1;\n-}\n-\n-@keyframes slideIn {\n-  from {\n-    transform: translateX(100%);\n-    opacity: 0;\n-  }\n-  to {\n-    transform: translateX(0);\n-    opacity: 1;\n-  }\n-}\n-\n-/* ÁßªÂä®Á´ØÈÄÇÈÖç */\n-@media (max-width: 768px) {\n-  .websocket-status {\n-    top: 10px;\n-    right: 10px;\n-    font-size: 11px;\n-    padding: 6px 10px;\n-  }\n-\n-  .notification-container {\n-    top: 60px;\n-    right: 10px;\n-    max-width: calc(100vw - 20px);\n-  }\n-\n-  .notification {\n-    padding: 10px;\n-    font-size: 13px;\n-  }\n-\n-  .notification-message {\n-    font-size: 13px;\n-  }\n-}\n-</style>\n+<template>\r\n+  <div>\r\n+    <!-- WebSocketËøûÊé•Áä∂ÊÄÅ -->\r\n+    <div class=\"websocket-status\" v-if=\"showStatus\">\r\n+      <div class=\"status-indicator\" :class=\"statusClass\">\r\n+        <div class=\"status-dot\"></div>\r\n+        <span class=\"status-text\">{{ statusText }}</span>\r\n+      </div>\r\n+    </div>\r\n+\r\n+    <!-- Â§ÑÁêÜÁªìÊûúÈÄöÁü• -->\r\n+    <div v-if=\"notifications.length > 0\" class=\"notification-container\">\r\n+      <div\r\n+        v-for=\"notification in notifications\"\r\n+        :key=\"notification.id\"\r\n+        class=\"notification\"\r\n+        :class=\"notification.type\"\r\n+      >\r\n+        <div class=\"notification-content\">\r\n+          <div class=\"notification-icon\">{{ getNotificationIcon(notification.type) }}</div>\r\n+          <div class=\"notification-message\">{{ notification.message }}</div>\r\n+          <div class=\"notification-time\">{{ notification.time }}</div>\r\n+        </div>\r\n+        <button @click=\"removeNotification(notification.id)\" class=\"notification-close\">√ó</button>\r\n+      </div>\r\n+    </div>\r\n+  </div>\r\n+</template>\r\n+\r\n+<script>\r\n+import { ref, onMounted, onUnmounted } from 'vue'\r\n+import webSocketManager from '../services/webSocketManager.js'\r\n+\r\n+export default {\r\n+  name: 'WebSocketStatus',\r\n+  setup() {\r\n+    const showStatus = ref(false)\r\n+    const statusClass = ref('disconnected')\r\n+    const statusText = ref('WebSocket Êú™ËøûÊé•')\r\n+    const notifications = ref([])\r\n+\r\n+    let statusCheckInterval = null\r\n+    let notificationId = 0\r\n+\r\n+    // Êõ¥Êñ∞Áä∂ÊÄÅÊòæÁ§∫\r\n+    const updateStatus = () => {\r\n+      if (isWsConnected) {\r\n+        statusClass.value = 'connected'\r\n+        statusText.value = 'ComfyUI ÂÆûÊó∂ËøûÊé•'\r\n+        showStatus.value = true\r\n+\r\n+        // ËøûÊé•ÊàêÂäüÂêé5ÁßíÈöêËóèÁä∂ÊÄÅ\r\n+        setTimeout(() => {\r\n+          showStatus.value = false\r\n+        }, 5000)\r\n+      } else {\r\n+        statusClass.value = 'disconnected'\r\n+        statusText.value = 'ComfyUI ËøûÊé•‰∏≠...'\r\n+        showStatus.value = true\r\n+      }\r\n+    }\r\n+\r\n+    // Ê∑ªÂä†ÈÄöÁü•\r\n+    const addNotification = (message, type = 'info') => {\r\n+      const notification = {\r\n+        id: ++notificationId,\r\n+        message,\r\n+        type,\r\n+        time: new Date().toLocaleTimeString()\r\n+      }\r\n+\r\n+      notifications.value.unshift(notification)\r\n+\r\n+      // Ëá™Âä®ÁßªÈô§ÈÄöÁü•ÔºàÊàêÂäüÂíå‰ø°ÊÅØÁ±ªÂûã8ÁßíÂêéÁßªÈô§ÔºåÈîôËØØÁ±ªÂûã15ÁßíÂêéÁßªÈô§Ôºâ\r\n+      const autoRemoveTime = type === 'error' ? 15000 : 8000\r\n+      setTimeout(() => {\r\n+        removeNotification(notification.id)\r\n+      }, autoRemoveTime)\r\n+\r\n+      // ÊúÄÂ§ö‰øùÁïô5‰∏™ÈÄöÁü•\r\n+      if (notifications.value.length > 5) {\r\n+        notifications.value = notifications.value.slice(0, 5)\r\n+      }\r\n+    }\r\n+\r\n+    // ÁßªÈô§ÈÄöÁü•\r\n+    const removeNotification = (id) => {\r\n+      const index = notifications.value.findIndex(n => n.id === id)\r\n+      if (index > -1) {\r\n+        notifications.value.splice(index, 1)\r\n+      }\r\n+    }\r\n+\r\n+    // Ëé∑ÂèñÈÄöÁü•ÂõæÊ†á\r\n+    const getNotificationIcon = (type) => {\r\n+      const icons = {\r\n+        'success': '‚úÖ',\r\n+        'error': '‚ùå',\r\n+        'warning': '‚ö†Ô∏è',\r\n+        'info': '‚ÑπÔ∏è'\r\n+      }\r\n+      return icons[type] || '‚ÑπÔ∏è'\r\n+    }\r\n+\r\n+    // ÁõëÂê¨Ëá™ÂÆö‰πâ‰∫ã‰ª∂\r\n+    const handleComfyUIStatus = (event) => {\r\n+      const { message, type } = event.detail\r\n+      addNotification(message, type)\r\n+    }\r\n+\r\n+    onMounted(() => {\r\n+      // ÂàùÂßãÁä∂ÊÄÅÊ£ÄÊü•\r\n+      updateStatus()\r\n+\r\n+      // ÂÆöÊúüÊ£ÄÊü•ËøûÊé•Áä∂ÊÄÅ\r\n+      statusCheckInterval = setInterval(updateStatus, 2000)\r\n+\r\n+      // ÁõëÂê¨ComfyUIÁä∂ÊÄÅ‰∫ã‰ª∂\r\n+      window.addEventListener('comfyui-status', handleComfyUIStatus)\r\n+\r\n+      // ÁõëÂê¨ WebSocket ‰∫ã‰ª∂\r\n+      if (wsConnection) {\r\n+        wsConnection.addEventListener('open', () => {\r\n+          updateStatus()\r\n+          // Âè™Âú®Ë∞ÉËØïÊ®°Âºè‰∏ãÊòæÁ§∫ËøûÊé•ÊàêÂäüÈÄöÁü•\r\n+          if (import.meta.env.DEV) {\r\n+            addNotification('WebSocketËøûÊé•ÊàêÂäü', 'success')\r\n+          }\r\n+        })\r\n+\r\n+        wsConnection.addEventListener('close', () => {\r\n+          updateStatus()\r\n+          // ÁÆÄÂåñËøûÊé•Êñ≠ÂºÄÈÄöÁü•\r\n+          addNotification('ËøûÊé•Â∑≤Êñ≠ÂºÄ', 'warning')\r\n+        })\r\n+\r\n+        wsConnection.addEventListener('error', () => {\r\n+          statusClass.value = 'error'\r\n+          statusText.value = 'ComfyUI ËøûÊé•ÈîôËØØ'\r\n+          showStatus.value = true\r\n+          addNotification('ËøûÊé•ÈîôËØØ', 'error')\r\n+        })\r\n+      }\r\n+    })\r\n+\r\n+    onUnmounted(() => {\r\n+      if (statusCheckInterval) {\r\n+        clearInterval(statusCheckInterval)\r\n+      }\r\n+\r\n+      // ÁßªÈô§‰∫ã‰ª∂ÁõëÂê¨\r\n+      window.removeEventListener('comfyui-status', handleComfyUIStatus)\r\n+    })\r\n+\r\n+    return {\r\n+      showStatus,\r\n+      statusClass,\r\n+      statusText,\r\n+      notifications,\r\n+      removeNotification,\r\n+      getNotificationIcon\r\n+    }\r\n+  }\r\n+}\r\n+</script>\r\n+\r\n+<style scoped>\r\n+.websocket-status {\r\n+  position: fixed;\r\n+  top: 20px;\r\n+  right: 20px;\r\n+  z-index: 1000;\r\n+  background: rgba(0, 0, 0, 0.8);\r\n+  backdrop-filter: blur(10px);\r\n+  border-radius: 8px;\r\n+  padding: 8px 12px;\r\n+  color: white;\r\n+  font-size: 12px;\r\n+  transition: all 0.3s ease;\r\n+}\r\n+\r\n+.status-indicator {\r\n+  display: flex;\r\n+  align-items: center;\r\n+  gap: 6px;\r\n+}\r\n+\r\n+.status-dot {\r\n+  width: 8px;\r\n+  height: 8px;\r\n+  border-radius: 50%;\r\n+  transition: background-color 0.3s ease;\r\n+}\r\n+\r\n+.connected .status-dot {\r\n+  background-color: #4caf50;\r\n+  box-shadow: 0 0 6px rgba(76, 175, 80, 0.6);\r\n+}\r\n+\r\n+.disconnected .status-dot {\r\n+  background-color: #ff9800;\r\n+  animation: pulse 1.5s infinite;\r\n+}\r\n+\r\n+.error .status-dot {\r\n+  background-color: #f44336;\r\n+  animation: pulse 1s infinite;\r\n+}\r\n+\r\n+@keyframes pulse {\r\n+  0% {\r\n+    opacity: 1;\r\n+    transform: scale(1);\r\n+  }\r\n+  50% {\r\n+    opacity: 0.5;\r\n+    transform: scale(1.2);\r\n+  }\r\n+  100% {\r\n+    opacity: 1;\r\n+    transform: scale(1);\r\n+  }\r\n+}\r\n+\r\n+.status-text {\r\n+  font-weight: 500;\r\n+}\r\n+\r\n+/* ÈÄöÁü•ÂÆπÂô® */\r\n+.notification-container {\r\n+  position: fixed;\r\n+  top: 70px;\r\n+  right: 20px;\r\n+  z-index: 1001;\r\n+  max-width: 350px;\r\n+}\r\n+\r\n+.notification {\r\n+  display: flex;\r\n+  align-items: flex-start;\r\n+  margin-bottom: 10px;\r\n+  padding: 12px;\r\n+  border-radius: 8px;\r\n+  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\r\n+  animation: slideIn 0.3s ease-out;\r\n+  transition: all 0.3s ease;\r\n+  backdrop-filter: blur(10px);\r\n+}\r\n+\r\n+.notification:hover {\r\n+  transform: translateX(-5px);\r\n+}\r\n+\r\n+.notification.success {\r\n+  background-color: rgba(240, 253, 244, 0.95);\r\n+  border: 1px solid #22c55e;\r\n+  color: #15803d;\r\n+}\r\n+\r\n+.notification.error {\r\n+  background-color: rgba(254, 242, 242, 0.95);\r\n+  border: 1px solid #ef4444;\r\n+  color: #dc2626;\r\n+}\r\n+\r\n+.notification.warning {\r\n+  background-color: rgba(255, 251, 235, 0.95);\r\n+  border: 1px solid #f59e0b;\r\n+  color: #d97706;\r\n+}\r\n+\r\n+.notification.info {\r\n+  background-color: rgba(240, 249, 255, 0.95);\r\n+  border: 1px solid #3b82f6;\r\n+  color: #1d4ed8;\r\n+}\r\n+\r\n+.notification-content {\r\n+  flex: 1;\r\n+  display: flex;\r\n+  align-items: center;\r\n+  gap: 8px;\r\n+}\r\n+\r\n+.notification-icon {\r\n+  font-size: 16px;\r\n+  flex-shrink: 0;\r\n+}\r\n+\r\n+.notification-message {\r\n+  flex: 1;\r\n+  font-size: 14px;\r\n+  font-weight: 500;\r\n+  line-height: 1.4;\r\n+}\r\n+\r\n+.notification-time {\r\n+  font-size: 11px;\r\n+  opacity: 0.7;\r\n+  flex-shrink: 0;\r\n+}\r\n+\r\n+.notification-close {\r\n+  background: none;\r\n+  border: none;\r\n+  font-size: 18px;\r\n+  cursor: pointer;\r\n+  padding: 0;\r\n+  margin-left: 8px;\r\n+  opacity: 0.5;\r\n+  transition: opacity 0.2s;\r\n+  color: inherit;\r\n+}\r\n+\r\n+.notification-close:hover {\r\n+  opacity: 1;\r\n+}\r\n+\r\n+@keyframes slideIn {\r\n+  from {\r\n+    transform: translateX(100%);\r\n+    opacity: 0;\r\n+  }\r\n+  to {\r\n+    transform: translateX(0);\r\n+    opacity: 1;\r\n+  }\r\n+}\r\n+\r\n+/* ÁßªÂä®Á´ØÈÄÇÈÖç */\r\n+@media (max-width: 768px) {\r\n+  .websocket-status {\r\n+    top: 10px;\r\n+    right: 10px;\r\n+    font-size: 11px;\r\n+    padding: 6px 10px;\r\n+  }\r\n+\r\n+  .notification-container {\r\n+    top: 60px;\r\n+    right: 10px;\r\n+    max-width: calc(100vw - 20px);\r\n+  }\r\n+\r\n+  .notification {\r\n+    padding: 10px;\r\n+    font-size: 13px;\r\n+  }\r\n+\r\n+  .notification-message {\r\n+    font-size: 13px;\r\n+  }\r\n+}\r\n+</style>\r\n"
                },
                {
                    "date": 1753508138585,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -43,9 +43,9 @@\n     let notificationId = 0\r\n \r\n     // Êõ¥Êñ∞Áä∂ÊÄÅÊòæÁ§∫\r\n     const updateStatus = () => {\r\n-      if (isWsConnected) {\r\n+      if (webSocketManager.isWsConnected) {\r\n         statusClass.value = 'connected'\r\n         statusText.value = 'ComfyUI ÂÆûÊó∂ËøûÊé•'\r\n         showStatus.value = true\r\n \r\n"
                },
                {
                    "date": 1753508157283,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -118,24 +118,24 @@\n       // ÁõëÂê¨ComfyUIÁä∂ÊÄÅ‰∫ã‰ª∂\r\n       window.addEventListener('comfyui-status', handleComfyUIStatus)\r\n \r\n       // ÁõëÂê¨ WebSocket ‰∫ã‰ª∂\r\n-      if (wsConnection) {\r\n-        wsConnection.addEventListener('open', () => {\r\n+      if (webSocketManager.wsConnection) {\r\n+        webSocketManager.wsConnection.addEventListener('open', () => {\r\n           updateStatus()\r\n           // Âè™Âú®Ë∞ÉËØïÊ®°Âºè‰∏ãÊòæÁ§∫ËøûÊé•ÊàêÂäüÈÄöÁü•\r\n           if (import.meta.env.DEV) {\r\n             addNotification('WebSocketËøûÊé•ÊàêÂäü', 'success')\r\n           }\r\n         })\r\n \r\n-        wsConnection.addEventListener('close', () => {\r\n+        webSocketManager.wsConnection.addEventListener('close', () => {\r\n           updateStatus()\r\n           // ÁÆÄÂåñËøûÊé•Êñ≠ÂºÄÈÄöÁü•\r\n           addNotification('ËøûÊé•Â∑≤Êñ≠ÂºÄ', 'warning')\r\n         })\r\n \r\n-        wsConnection.addEventListener('error', () => {\r\n+        webSocketManager.wsConnection.addEventListener('error', () => {\r\n           statusClass.value = 'error'\r\n           statusText.value = 'ComfyUI ËøûÊé•ÈîôËØØ'\r\n           showStatus.value = true\r\n           addNotification('ËøûÊé•ÈîôËØØ', 'error')\r\n"
                }
            ],
            "date": 1752463749504,
            "name": "Commit-0",
            "content": "<template>\n  <div class=\"websocket-status\" v-if=\"showStatus\">\n    <div class=\"status-indicator\" :class=\"statusClass\">\n      <div class=\"status-dot\"></div>\n      <span class=\"status-text\">{{ statusText }}</span>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { ref, onMounted, onUnmounted } from 'vue'\nimport { wsConnection, isWsConnected } from '../services/comfyui.js'\n\nexport default {\n  name: 'WebSocketStatus',\n  setup() {\n    const showStatus = ref(false)\n    const statusClass = ref('disconnected')\n    const statusText = ref('WebSocket Êú™ËøûÊé•')\n\n    let statusCheckInterval = null\n\n    // Êõ¥Êñ∞Áä∂ÊÄÅÊòæÁ§∫\n    const updateStatus = () => {\n      // Ê£ÄÊü• WebSocket ËøûÊé•Áä∂ÊÄÅ\n      const connected = wsConnection && wsConnection.readyState === WebSocket.OPEN\n\n      if (connected) {\n        statusClass.value = 'connected'\n        statusText.value = 'ComfyUI Â∑≤ËøûÊé•'\n\n        // ËøûÊé•ÊàêÂäüÂêé3ÁßíÈöêËóèÁä∂ÊÄÅ\n        setTimeout(() => {\n          showStatus.value = false\n        }, 3000)\n      } else {\n        statusClass.value = 'disconnected'\n        statusText.value = 'ComfyUI ËøûÊé•‰∏≠...'\n        showStatus.value = true\n      }\n    }\n\n    onMounted(() => {\n      // ÂàùÂßãÁä∂ÊÄÅÊ£ÄÊü•\n      updateStatus()\n\n      // ÂÆöÊúüÊ£ÄÊü•ËøûÊé•Áä∂ÊÄÅ\n      statusCheckInterval = setInterval(updateStatus, 2000)\n\n      // ÁõëÂê¨ WebSocket ‰∫ã‰ª∂\n      if (wsConnection) {\n        wsConnection.addEventListener('open', () => {\n          updateStatus()\n        })\n\n        wsConnection.addEventListener('close', () => {\n          updateStatus()\n        })\n\n        wsConnection.addEventListener('error', () => {\n          statusClass.value = 'error'\n          statusText.value = 'ComfyUI ËøûÊé•ÈîôËØØ'\n          showStatus.value = true\n        })\n      }\n    })\n\n    onUnmounted(() => {\n      if (statusCheckInterval) {\n        clearInterval(statusCheckInterval)\n      }\n    })\n\n    return {\n      showStatus,\n      statusClass,\n      statusText\n    }\n  }\n}\n</script>\n\n<style scoped>\n.websocket-status {\n  position: fixed;\n  top: 20px;\n  right: 20px;\n  z-index: 1000;\n  background: rgba(0, 0, 0, 0.8);\n  backdrop-filter: blur(10px);\n  border-radius: 8px;\n  padding: 8px 12px;\n  color: white;\n  font-size: 12px;\n  transition: all 0.3s ease;\n}\n\n.status-indicator {\n  display: flex;\n  align-items: center;\n  gap: 6px;\n}\n\n.status-dot {\n  width: 8px;\n  height: 8px;\n  border-radius: 50%;\n  transition: background-color 0.3s ease;\n}\n\n.connected .status-dot {\n  background-color: #4caf50;\n  box-shadow: 0 0 6px rgba(76, 175, 80, 0.6);\n}\n\n.disconnected .status-dot {\n  background-color: #ff9800;\n  animation: pulse 1.5s infinite;\n}\n\n.error .status-dot {\n  background-color: #f44336;\n  animation: pulse 1s infinite;\n}\n\n@keyframes pulse {\n  0% {\n    opacity: 1;\n    transform: scale(1);\n  }\n  50% {\n    opacity: 0.5;\n    transform: scale(1.2);\n  }\n  100% {\n    opacity: 1;\n    transform: scale(1);\n  }\n}\n\n.status-text {\n  font-weight: 500;\n}\n\n/* ÁßªÂä®Á´ØÈÄÇÈÖç */\n@media (max-width: 768px) {\n  .websocket-status {\n    top: 10px;\n    right: 10px;\n    font-size: 11px;\n    padding: 6px 10px;\n  }\n}\n</style>\n"
        }
    ]
}