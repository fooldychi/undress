{
    "sourceFile": "client/src/components/ImageComparison.vue",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 60,
            "patches": [
                {
                    "date": 1752412387224,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1752412408458,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -37,12 +37,11 @@\n             <van-icon name=\"arrow\" size=\"12\" color=\"white\" class=\"slider-arrow right\" />\r\n           </div>\r\n         </div>\r\n       </div>\r\n-    </div>\r\n \r\n-    <!-- 操作按钮 -->\r\n-    <div class=\"result-actions\">\r\n+      <!-- 操作按钮 -->\r\n+      <div class=\"result-actions\">\r\n       <van-button\r\n         @click=\"downloadResult\"\r\n         type=\"primary\"\r\n         size=\"normal\"\r\n"
                },
                {
                    "date": 1752412424119,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -58,9 +58,10 @@\n         icon=\"replay\"\r\n       >\r\n         重新选择图片\r\n       </van-button>\r\n-    </div>\r\n+      </div>\r\n+    </MobileCard>\r\n   </div>\r\n </template>\r\n \r\n <script setup>\r\n"
                },
                {
                    "date": 1752412440435,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -66,8 +66,9 @@\n \r\n <script setup>\r\n import { ref, computed, watch, onMounted, onUnmounted } from 'vue'\r\n import { Toast } from 'vant'\r\n+import { MobileCard } from './mobile'\r\n \r\n const props = defineProps({\r\n   originalImage: {\r\n     type: String,\r\n"
                },
                {
                    "date": 1752412456917,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -87,12 +87,12 @@\n const comparisonContainer = ref(null)\r\n const originalImageRef = ref(null)\r\n const imageAspectRatio = ref(1) // 默认1:1比例\r\n \r\n-// 计算容器样式\r\n+// 计算容器样式 - 使用固定1:1比例，与VantImageComparison保持一致\r\n const containerStyle = computed(() => {\r\n   return {\r\n-    aspectRatio: imageAspectRatio.value.toString()\r\n+    aspectRatio: '1'\r\n   }\r\n })\r\n \r\n // 处理图片加载\r\n"
                },
                {
                    "date": 1752412511782,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -181,13 +181,16 @@\n \r\n .comparison-container {\r\n   position: relative;\r\n   margin: 16px 0;\r\n-  border-radius: 16px;\r\n+  border-radius: 12px;\r\n   overflow: hidden;\r\n-  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.3);\r\n+  background: rgba(255, 255, 255, 0.1);\r\n+  backdrop-filter: blur(10px);\r\n+  -webkit-backdrop-filter: blur(10px);\r\n+  border: 1px solid rgba(255, 255, 255, 0.2);\r\n+  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);\r\n   user-select: none;\r\n-  background: var(--bg-dark);\r\n   width: 100%;\r\n }\r\n \r\n .comparison-wrapper {\r\n"
                },
                {
                    "date": 1752412530798,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -210,10 +210,10 @@\n }\r\n \r\n .comparison-image {\r\n   width: 100%;\r\n-  height: auto;\r\n-  object-fit: contain;\r\n+  height: 100%;\r\n+  object-fit: cover;\r\n   object-position: center;\r\n   display: block;\r\n }\r\n \r\n"
                },
                {
                    "date": 1752412938412,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -37,8 +37,9 @@\n             <van-icon name=\"arrow\" size=\"12\" color=\"white\" class=\"slider-arrow right\" />\r\n           </div>\r\n         </div>\r\n       </div>\r\n+      </div>\r\n \r\n       <!-- 操作按钮 -->\r\n       <div class=\"result-actions\">\r\n       <van-button\r\n"
                },
                {
                    "date": 1752413179780,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -3,43 +3,43 @@\n     <!-- 使用MobileCard包装，与VantImageComparison保持一致 -->\r\n     <MobileCard title=\"处理结果\" inset>\r\n       <div class=\"comparison-container\" ref=\"comparisonContainer\">\r\n         <div class=\"comparison-wrapper\" :style=\"containerStyle\">\r\n-        <!-- 原图层 -->\r\n-        <div class=\"image-layer original-layer\">\r\n-          <img\r\n-            :src=\"originalImage\"\r\n-            alt=\"原图\"\r\n-            class=\"comparison-image\"\r\n-            @load=\"handleImageLoad\"\r\n-            ref=\"originalImageRef\"\r\n-          />\r\n-        </div>\r\n+          <!-- 原图层 -->\r\n+          <div class=\"image-layer original-layer\">\r\n+            <img\r\n+              :src=\"originalImage\"\r\n+              alt=\"原图\"\r\n+              class=\"comparison-image\"\r\n+              @load=\"handleImageLoad\"\r\n+              ref=\"originalImageRef\"\r\n+            />\r\n+          </div>\r\n \r\n-        <!-- 结果图层 -->\r\n-        <div\r\n-          class=\"image-layer result-layer\"\r\n-          :style=\"{ clipPath: `inset(0 ${100 - sliderPosition}% 0 0)` }\"\r\n-        >\r\n-          <img :src=\"resultImage\" alt=\"处理结果\" class=\"comparison-image\" />\r\n-        </div>\r\n+          <!-- 结果图层 -->\r\n+          <div\r\n+            class=\"image-layer result-layer\"\r\n+            :style=\"{ clipPath: `inset(0 ${100 - sliderPosition}% 0 0)` }\"\r\n+          >\r\n+            <img :src=\"resultImage\" alt=\"处理结果\" class=\"comparison-image\" />\r\n+          </div>\r\n \r\n-        <!-- 拖拽滑块 -->\r\n-        <div\r\n-          class=\"comparison-slider\"\r\n-          :style=\"{ left: sliderPosition + '%' }\"\r\n-          @mousedown=\"startDragging\"\r\n-          @touchstart=\"startDragging\"\r\n-        >\r\n-          <div class=\"slider-line\"></div>\r\n-          <div class=\"slider-handle\">\r\n-            <van-icon name=\"arrow-left\" size=\"12\" color=\"white\" class=\"slider-arrow left\" />\r\n-            <div class=\"slider-circle\"></div>\r\n-            <van-icon name=\"arrow\" size=\"12\" color=\"white\" class=\"slider-arrow right\" />\r\n+          <!-- 拖拽滑块 -->\r\n+          <div\r\n+            class=\"comparison-slider\"\r\n+            :style=\"{ left: sliderPosition + '%' }\"\r\n+            @mousedown=\"startDragging\"\r\n+            @touchstart=\"startDragging\"\r\n+          >\r\n+            <div class=\"slider-line\"></div>\r\n+            <div class=\"slider-handle\">\r\n+              <van-icon name=\"arrow-left\" size=\"12\" color=\"white\" class=\"slider-arrow left\" />\r\n+              <div class=\"slider-circle\"></div>\r\n+              <van-icon name=\"arrow\" size=\"12\" color=\"white\" class=\"slider-arrow right\" />\r\n+            </div>\r\n           </div>\r\n         </div>\r\n       </div>\r\n-      </div>\r\n \r\n       <!-- 操作按钮 -->\r\n       <div class=\"result-actions\">\r\n       <van-button\r\n"
                },
                {
                    "date": 1752413205121,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -41,26 +41,26 @@\n       </div>\r\n \r\n       <!-- 操作按钮 -->\r\n       <div class=\"result-actions\">\r\n-      <van-button\r\n-        @click=\"downloadResult\"\r\n-        type=\"primary\"\r\n-        size=\"normal\"\r\n-        round\r\n-        icon=\"down\"\r\n-      >\r\n-        下载处理结果\r\n-      </van-button>\r\n-      <van-button\r\n-        @click=\"resetProcess\"\r\n-        type=\"default\"\r\n-        size=\"normal\"\r\n-        round\r\n-        icon=\"replay\"\r\n-      >\r\n-        重新选择图片\r\n-      </van-button>\r\n+        <van-button\r\n+          @click=\"downloadResult\"\r\n+          type=\"primary\"\r\n+          size=\"normal\"\r\n+          round\r\n+          icon=\"down\"\r\n+        >\r\n+          下载处理结果\r\n+        </van-button>\r\n+        <van-button\r\n+          @click=\"resetProcess\"\r\n+          type=\"default\"\r\n+          size=\"normal\"\r\n+          round\r\n+          icon=\"replay\"\r\n+        >\r\n+          重新选择图片\r\n+        </van-button>\r\n       </div>\r\n     </MobileCard>\r\n   </div>\r\n </template>\r\n"
                },
                {
                    "date": 1752414063729,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -68,8 +68,9 @@\n <script setup>\r\n import { ref, computed, watch, onMounted, onUnmounted } from 'vue'\r\n import { Toast } from 'vant'\r\n import { MobileCard } from './mobile'\r\n+import { ImageSizeUtils } from '../config/imageSizeConfig.js'\r\n \r\n const props = defineProps({\r\n   originalImage: {\r\n     type: String,\r\n"
                },
                {
                    "date": 1752414081871,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -88,16 +88,19 @@\n const isDragging = ref(false)\r\n const comparisonContainer = ref(null)\r\n const originalImageRef = ref(null)\r\n const imageAspectRatio = ref(1) // 默认1:1比例\r\n+const isMobile = ref(false)\r\n \r\n-// 计算容器样式 - 使用固定1:1比例，与VantImageComparison保持一致\r\n+// 计算容器样式 - 使用统一的对比组件尺寸配置\r\n const containerStyle = computed(() => {\r\n-  return {\r\n-    aspectRatio: '1'\r\n-  }\r\n+  return ImageSizeUtils.getContainerStyle('comparison', isMobile.value)\r\n })\r\n \r\n+const imageStyle = computed(() => {\r\n+  return ImageSizeUtils.getImageStyle('comparison', isMobile.value)\r\n+})\r\n+\r\n // 处理图片加载\r\n const handleImageLoad = () => {\r\n   if (originalImageRef.value) {\r\n     const img = originalImageRef.value\r\n"
                },
                {
                    "date": 1752414096633,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -9,8 +9,9 @@\n             <img\r\n               :src=\"originalImage\"\r\n               alt=\"原图\"\r\n               class=\"comparison-image\"\r\n+              :style=\"imageStyle\"\r\n               @load=\"handleImageLoad\"\r\n               ref=\"originalImageRef\"\r\n             />\r\n           </div>\r\n"
                },
                {
                    "date": 1752414111620,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -20,9 +20,9 @@\n           <div\r\n             class=\"image-layer result-layer\"\r\n             :style=\"{ clipPath: `inset(0 ${100 - sliderPosition}% 0 0)` }\"\r\n           >\r\n-            <img :src=\"resultImage\" alt=\"处理结果\" class=\"comparison-image\" />\r\n+            <img :src=\"resultImage\" alt=\"处理结果\" class=\"comparison-image\" :style=\"imageStyle\" />\r\n           </div>\r\n \r\n           <!-- 拖拽滑块 -->\r\n           <div\r\n"
                },
                {
                    "date": 1752414130229,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -156,8 +156,13 @@\n const resetProcess = () => {\r\n   emit('reset')\r\n }\r\n \r\n+// 响应式检测\r\n+const updateMobileStatus = () => {\r\n+  isMobile.value = ImageSizeUtils.isMobile()\r\n+}\r\n+\r\n // 键盘快捷键支持\r\n const handleKeyPress = (event) => {\r\n   if (event.key === 'ArrowLeft') {\r\n     sliderPosition.value = Math.max(0, sliderPosition.value - 5)\r\n@@ -166,12 +171,15 @@\n   }\r\n }\r\n \r\n onMounted(() => {\r\n+  updateMobileStatus()\r\n+  window.addEventListener('resize', updateMobileStatus)\r\n   document.addEventListener('keydown', handleKeyPress)\r\n })\r\n \r\n onUnmounted(() => {\r\n+  window.removeEventListener('resize', updateMobileStatus)\r\n   document.removeEventListener('keydown', handleKeyPress)\r\n   stopDragging()\r\n })\r\n </script>\r\n"
                },
                {
                    "date": 1752414919573,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,10 +1,9 @@\n <template>\r\n   <div class=\"result-container\">\r\n-    <!-- 使用MobileCard包装，与VantImageComparison保持一致 -->\r\n-    <MobileCard title=\"处理结果\" inset>\r\n-      <div class=\"comparison-container\" ref=\"comparisonContainer\">\r\n-        <div class=\"comparison-wrapper\" :style=\"containerStyle\">\r\n+    <!-- 纯粹的图片对比区域，无外部容器 -->\r\n+    <div class=\"comparison-container\" ref=\"comparisonContainer\">\r\n+      <div class=\"comparison-wrapper\" :style=\"containerStyle\">\r\n           <!-- 原图层 -->\r\n           <div class=\"image-layer original-layer\">\r\n             <img\r\n               :src=\"originalImage\"\r\n"
                },
                {
                    "date": 1752414939230,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -38,31 +38,9 @@\n             </div>\r\n           </div>\r\n         </div>\r\n       </div>\r\n-\r\n-      <!-- 操作按钮 -->\r\n-      <div class=\"result-actions\">\r\n-        <van-button\r\n-          @click=\"downloadResult\"\r\n-          type=\"primary\"\r\n-          size=\"normal\"\r\n-          round\r\n-          icon=\"down\"\r\n-        >\r\n-          下载处理结果\r\n-        </van-button>\r\n-        <van-button\r\n-          @click=\"resetProcess\"\r\n-          type=\"default\"\r\n-          size=\"normal\"\r\n-          round\r\n-          icon=\"replay\"\r\n-        >\r\n-          重新选择图片\r\n-        </van-button>\r\n-      </div>\r\n-    </MobileCard>\r\n+    </div>\r\n   </div>\r\n </template>\r\n \r\n <script setup>\r\n"
                },
                {
                    "date": 1752414961833,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -44,10 +44,8 @@\n </template>\r\n \r\n <script setup>\r\n import { ref, computed, watch, onMounted, onUnmounted } from 'vue'\r\n-import { Toast } from 'vant'\r\n-import { MobileCard } from './mobile'\r\n import { ImageSizeUtils } from '../config/imageSizeConfig.js'\r\n \r\n const props = defineProps({\r\n   originalImage: {\r\n"
                },
                {
                    "date": 1752414976642,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -57,9 +57,9 @@\n     required: true\r\n   }\r\n })\r\n \r\n-const emit = defineEmits(['reset'])\r\n+const emit = defineEmits([])\r\n \r\n const sliderPosition = ref(50)\r\n const isDragging = ref(false)\r\n const comparisonContainer = ref(null)\r\n"
                },
                {
                    "date": 1752414995041,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -117,22 +117,10 @@\n   document.removeEventListener('touchmove', handleDrag)\r\n   document.removeEventListener('touchend', stopDragging)\r\n }\r\n \r\n-const downloadResult = () => {\r\n-  const link = document.createElement('a')\r\n-  link.href = props.resultImage\r\n-  link.download = `processed-image-${Date.now()}.jpg`\r\n-  document.body.appendChild(link)\r\n-  link.click()\r\n-  document.body.removeChild(link)\r\n-  Toast.success('图片下载已开始')\r\n-}\r\n+// 移除下载和重置功能，只保留纯粹的对比功能\r\n \r\n-const resetProcess = () => {\r\n-  emit('reset')\r\n-}\r\n-\r\n // 响应式检测\r\n const updateMobileStatus = () => {\r\n   isMobile.value = ImageSizeUtils.isMobile()\r\n }\r\n"
                },
                {
                    "date": 1752415012329,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -66,15 +66,15 @@\n const originalImageRef = ref(null)\r\n const imageAspectRatio = ref(1) // 默认1:1比例\r\n const isMobile = ref(false)\r\n \r\n-// 计算容器样式 - 使用统一的对比组件尺寸配置\r\n+// 计算容器样式 - 使用与预览展示完全相同的尺寸配置\r\n const containerStyle = computed(() => {\r\n-  return ImageSizeUtils.getContainerStyle('comparison', isMobile.value)\r\n+  return ImageSizeUtils.getContainerStyle('preview', isMobile.value)\r\n })\r\n \r\n const imageStyle = computed(() => {\r\n-  return ImageSizeUtils.getImageStyle('comparison', isMobile.value)\r\n+  return ImageSizeUtils.getImageStyle('preview', isMobile.value)\r\n })\r\n \r\n // 处理图片加载\r\n const handleImageLoad = () => {\r\n"
                },
                {
                    "date": 1752415059280,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -148,13 +148,12 @@\n </script>\r\n \r\n <style scoped>\r\n .result-container {\r\n-  background: var(--bg-card);\r\n-  border: 1px solid var(--border-color);\r\n-  border-radius: 20px;\r\n-  padding: 24px;\r\n-  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.3);\r\n+  width: 100%;\r\n+  display: flex;\r\n+  justify-content: center;\r\n+  align-items: center;\r\n }\r\n \r\n .comparison-container {\r\n   position: relative;\r\n"
                },
                {
                    "date": 1752415078084,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -156,18 +156,18 @@\n }\r\n \r\n .comparison-container {\r\n   position: relative;\r\n-  margin: 16px 0;\r\n   border-radius: 12px;\r\n   overflow: hidden;\r\n-  background: rgba(255, 255, 255, 0.1);\r\n+  background: rgba(255, 255, 255, 0.05);\r\n   backdrop-filter: blur(10px);\r\n   -webkit-backdrop-filter: blur(10px);\r\n   border: 1px solid rgba(255, 255, 255, 0.2);\r\n   box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);\r\n   user-select: none;\r\n-  width: 100%;\r\n+  cursor: pointer;\r\n+  transition: all 0.3s ease;\r\n }\r\n \r\n .comparison-wrapper {\r\n   position: relative;\r\n"
                },
                {
                    "date": 1752415965991,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -39,9 +39,8 @@\n           </div>\r\n         </div>\r\n       </div>\r\n     </div>\r\n-  </div>\r\n </template>\r\n \r\n <script setup>\r\n import { ref, computed, watch, onMounted, onUnmounted } from 'vue'\r\n"
                },
                {
                    "date": 1752416170002,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,46 +1,45 @@\n <template>\r\n   <div class=\"result-container\">\r\n-    <!-- 纯粹的图片对比区域，无外部容器 -->\r\n     <div class=\"comparison-container\" ref=\"comparisonContainer\">\r\n       <div class=\"comparison-wrapper\" :style=\"containerStyle\">\r\n-          <!-- 原图层 -->\r\n-          <div class=\"image-layer original-layer\">\r\n-            <img\r\n-              :src=\"originalImage\"\r\n-              alt=\"原图\"\r\n-              class=\"comparison-image\"\r\n-              :style=\"imageStyle\"\r\n-              @load=\"handleImageLoad\"\r\n-              ref=\"originalImageRef\"\r\n-            />\r\n-          </div>\r\n+        <!-- 原图层 -->\r\n+        <div class=\"image-layer original-layer\">\r\n+          <img\r\n+            :src=\"originalImage\"\r\n+            alt=\"原图\"\r\n+            class=\"comparison-image\"\r\n+            :style=\"imageStyle\"\r\n+            @load=\"handleImageLoad\"\r\n+            ref=\"originalImageRef\"\r\n+          />\r\n+        </div>\r\n \r\n-          <!-- 结果图层 -->\r\n-          <div\r\n-            class=\"image-layer result-layer\"\r\n-            :style=\"{ clipPath: `inset(0 ${100 - sliderPosition}% 0 0)` }\"\r\n-          >\r\n-            <img :src=\"resultImage\" alt=\"处理结果\" class=\"comparison-image\" :style=\"imageStyle\" />\r\n-          </div>\r\n+        <!-- 结果图层 -->\r\n+        <div\r\n+          class=\"image-layer result-layer\"\r\n+          :style=\"{ clipPath: `inset(0 ${100 - sliderPosition}% 0 0)` }\"\r\n+        >\r\n+          <img :src=\"resultImage\" alt=\"处理结果\" class=\"comparison-image\" :style=\"imageStyle\" />\r\n+        </div>\r\n \r\n-          <!-- 拖拽滑块 -->\r\n-          <div\r\n-            class=\"comparison-slider\"\r\n-            :style=\"{ left: sliderPosition + '%' }\"\r\n-            @mousedown=\"startDragging\"\r\n-            @touchstart=\"startDragging\"\r\n-          >\r\n-            <div class=\"slider-line\"></div>\r\n-            <div class=\"slider-handle\">\r\n-              <van-icon name=\"arrow-left\" size=\"12\" color=\"white\" class=\"slider-arrow left\" />\r\n-              <div class=\"slider-circle\"></div>\r\n-              <van-icon name=\"arrow\" size=\"12\" color=\"white\" class=\"slider-arrow right\" />\r\n-            </div>\r\n+        <!-- 拖拽滑块 -->\r\n+        <div\r\n+          class=\"comparison-slider\"\r\n+          :style=\"{ left: sliderPosition + '%' }\"\r\n+          @mousedown=\"startDragging\"\r\n+          @touchstart=\"startDragging\"\r\n+        >\r\n+          <div class=\"slider-line\"></div>\r\n+          <div class=\"slider-handle\">\r\n+            <van-icon name=\"arrow-left\" size=\"12\" color=\"white\" class=\"slider-arrow left\" />\r\n+            <div class=\"slider-circle\"></div>\r\n+            <van-icon name=\"arrow\" size=\"12\" color=\"white\" class=\"slider-arrow right\" />\r\n           </div>\r\n         </div>\r\n       </div>\r\n     </div>\r\n+  </div>\r\n </template>\r\n \r\n <script setup>\r\n import { ref, computed, watch, onMounted, onUnmounted } from 'vue'\r\n"
                },
                {
                    "date": 1752416443308,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -37,9 +37,8 @@\n           </div>\r\n         </div>\r\n       </div>\r\n     </div>\r\n-  </div>\r\n </template>\r\n \r\n <script setup>\r\n import { ref, computed, watch, onMounted, onUnmounted } from 'vue'\r\n"
                },
                {
                    "date": 1752416484076,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -36,9 +36,8 @@\n             <van-icon name=\"arrow\" size=\"12\" color=\"white\" class=\"slider-arrow right\" />\r\n           </div>\r\n         </div>\r\n       </div>\r\n-    </div>\r\n </template>\r\n \r\n <script setup>\r\n import { ref, computed, watch, onMounted, onUnmounted } from 'vue'\r\n"
                },
                {
                    "date": 1752416698810,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -36,8 +36,10 @@\n             <van-icon name=\"arrow\" size=\"12\" color=\"white\" class=\"slider-arrow right\" />\r\n           </div>\r\n         </div>\r\n       </div>\r\n+    </div>\r\n+  </div>\r\n </template>\r\n \r\n <script setup>\r\n import { ref, computed, watch, onMounted, onUnmounted } from 'vue'\r\n"
                },
                {
                    "date": 1752417206145,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -37,8 +37,28 @@\n           </div>\r\n         </div>\r\n       </div>\r\n     </div>\r\n+\r\n+    <!-- 操作按钮 -->\r\n+    <div class=\"result-actions\">\r\n+      <van-button\r\n+        type=\"primary\"\r\n+        size=\"large\"\r\n+        @click=\"handleDownload\"\r\n+        icon=\"down\"\r\n+      >\r\n+        下载图片\r\n+      </van-button>\r\n+\r\n+      <van-button\r\n+        size=\"large\"\r\n+        @click=\"handleReset\"\r\n+        icon=\"replay\"\r\n+      >\r\n+        重新生成\r\n+      </van-button>\r\n+    </div>\r\n   </div>\r\n </template>\r\n \r\n <script setup>\r\n"
                },
                {
                    "date": 1752417223189,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -75,9 +75,9 @@\n     required: true\r\n   }\r\n })\r\n \r\n-const emit = defineEmits([])\r\n+const emit = defineEmits(['reset', 'download'])\r\n \r\n const sliderPosition = ref(50)\r\n const isDragging = ref(false)\r\n const comparisonContainer = ref(null)\r\n"
                },
                {
                    "date": 1752417241906,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -135,10 +135,18 @@\n   document.removeEventListener('touchmove', handleDrag)\r\n   document.removeEventListener('touchend', stopDragging)\r\n }\r\n \r\n-// 移除下载和重置功能，只保留纯粹的对比功能\r\n+// 下载处理\r\n+const handleDownload = () => {\r\n+  emit('download', props.resultImage)\r\n+}\r\n \r\n+// 重置处理\r\n+const handleReset = () => {\r\n+  emit('reset')\r\n+}\r\n+\r\n // 响应式检测\r\n const updateMobileStatus = () => {\r\n   isMobile.value = ImageSizeUtils.isMobile()\r\n }\r\n"
                },
                {
                    "date": 1752417262048,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -192,8 +192,10 @@\n   box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);\r\n   user-select: none;\r\n   cursor: pointer;\r\n   transition: all 0.3s ease;\r\n+  /* 确保容器有正确的尺寸 */\r\n+  width: 100%;\r\n }\r\n \r\n .comparison-wrapper {\r\n   position: relative;\r\n"
                },
                {
                    "date": 1752417279978,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -215,9 +215,9 @@\n \r\n .comparison-image {\r\n   width: 100%;\r\n   height: 100%;\r\n-  object-fit: cover;\r\n+  object-fit: contain;\r\n   object-position: center;\r\n   display: block;\r\n }\r\n \r\n"
                },
                {
                    "date": 1752417295147,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -281,8 +281,9 @@\n   display: flex;\r\n   gap: 16px;\r\n   justify-content: center;\r\n   margin-top: 24px;\r\n+  padding: 0 16px;\r\n }\r\n \r\n @media (max-width: 768px) {\r\n   .comparison-container {\r\n"
                },
                {
                    "date": 1752417868010,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -84,15 +84,15 @@\n const originalImageRef = ref(null)\r\n const imageAspectRatio = ref(1) // 默认1:1比例\r\n const isMobile = ref(false)\r\n \r\n-// 计算容器样式 - 使用与预览展示完全相同的尺寸配置\r\n+// 计算容器样式 - 使用与上传组件相同的尺寸配置（固定3:4比例）\r\n const containerStyle = computed(() => {\r\n-  return ImageSizeUtils.getContainerStyle('preview', isMobile.value)\r\n+  return ImageSizeUtils.getContainerStyle('comparison', isMobile.value)\r\n })\r\n \r\n const imageStyle = computed(() => {\r\n-  return ImageSizeUtils.getImageStyle('preview', isMobile.value)\r\n+  return ImageSizeUtils.getImageStyle('comparison', isMobile.value)\r\n })\r\n \r\n // 处理图片加载\r\n const handleImageLoad = () => {\r\n"
                },
                {
                    "date": 1752417916290,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -199,8 +199,9 @@\n \r\n .comparison-wrapper {\r\n   position: relative;\r\n   width: 100%;\r\n+  height: 100%;\r\n   overflow: hidden;\r\n   cursor: col-resize;\r\n   background: #000000;\r\n }\r\n"
                },
                {
                    "date": 1752417948722,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,8 +1,9 @@\n <template>\r\n   <div class=\"result-container\">\r\n-    <div class=\"comparison-container\" ref=\"comparisonContainer\">\r\n-      <div class=\"comparison-wrapper\" :style=\"containerStyle\">\r\n+    <!-- 图片对比区域 -->\r\n+    <div class=\"comparison-container\" ref=\"comparisonContainer\" :style=\"containerStyle\">\r\n+      <div class=\"comparison-wrapper\">\r\n         <!-- 原图层 -->\r\n         <div class=\"image-layer original-layer\">\r\n           <img\r\n             :src=\"originalImage\"\r\n@@ -38,9 +39,9 @@\n         </div>\r\n       </div>\r\n     </div>\r\n \r\n-    <!-- 操作按钮 -->\r\n+    <!-- 操作按钮 - 显示在图片下方 -->\r\n     <div class=\"result-actions\">\r\n       <van-button\r\n         type=\"primary\"\r\n         size=\"large\"\r\n"
                },
                {
                    "date": 1752417971006,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -177,10 +177,11 @@\n <style scoped>\r\n .result-container {\r\n   width: 100%;\r\n   display: flex;\r\n-  justify-content: center;\r\n+  flex-direction: column;\r\n   align-items: center;\r\n+  gap: 24px;\r\n }\r\n \r\n .comparison-container {\r\n   position: relative;\r\n@@ -193,10 +194,8 @@\n   box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);\r\n   user-select: none;\r\n   cursor: pointer;\r\n   transition: all 0.3s ease;\r\n-  /* 确保容器有正确的尺寸 */\r\n-  width: 100%;\r\n }\r\n \r\n .comparison-wrapper {\r\n   position: relative;\r\n"
                },
                {
                    "date": 1752417986880,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -281,9 +281,8 @@\n .result-actions {\r\n   display: flex;\r\n   gap: 16px;\r\n   justify-content: center;\r\n-  margin-top: 24px;\r\n   padding: 0 16px;\r\n }\r\n \r\n @media (max-width: 768px) {\r\n"
                },
                {
                    "date": 1752418380983,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -85,15 +85,15 @@\n const originalImageRef = ref(null)\r\n const imageAspectRatio = ref(1) // 默认1:1比例\r\n const isMobile = ref(false)\r\n \r\n-// 计算容器样式 - 使用与上传组件相同的尺寸配置（固定3:4比例）\r\n+// 计算容器样式 - 使用preview配置（只固定高度，宽度自适应保持原图比例）\r\n const containerStyle = computed(() => {\r\n-  return ImageSizeUtils.getContainerStyle('comparison', isMobile.value)\r\n+  return ImageSizeUtils.getContainerStyle('preview', isMobile.value)\r\n })\r\n \r\n const imageStyle = computed(() => {\r\n-  return ImageSizeUtils.getImageStyle('comparison', isMobile.value)\r\n+  return ImageSizeUtils.getImageStyle('preview', isMobile.value)\r\n })\r\n \r\n // 处理图片加载\r\n const handleImageLoad = () => {\r\n"
                },
                {
                    "date": 1752418406396,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,64 +1,41 @@\n <template>\r\n-  <div class=\"result-container\">\r\n-    <!-- 图片对比区域 -->\r\n-    <div class=\"comparison-container\" ref=\"comparisonContainer\" :style=\"containerStyle\">\r\n-      <div class=\"comparison-wrapper\">\r\n-        <!-- 原图层 -->\r\n-        <div class=\"image-layer original-layer\">\r\n-          <img\r\n-            :src=\"originalImage\"\r\n-            alt=\"原图\"\r\n-            class=\"comparison-image\"\r\n-            :style=\"imageStyle\"\r\n-            @load=\"handleImageLoad\"\r\n-            ref=\"originalImageRef\"\r\n-          />\r\n-        </div>\r\n-\r\n-        <!-- 结果图层 -->\r\n-        <div\r\n-          class=\"image-layer result-layer\"\r\n-          :style=\"{ clipPath: `inset(0 ${100 - sliderPosition}% 0 0)` }\"\r\n-        >\r\n-          <img :src=\"resultImage\" alt=\"处理结果\" class=\"comparison-image\" :style=\"imageStyle\" />\r\n-        </div>\r\n-\r\n-        <!-- 拖拽滑块 -->\r\n-        <div\r\n-          class=\"comparison-slider\"\r\n-          :style=\"{ left: sliderPosition + '%' }\"\r\n-          @mousedown=\"startDragging\"\r\n-          @touchstart=\"startDragging\"\r\n-        >\r\n-          <div class=\"slider-line\"></div>\r\n-          <div class=\"slider-handle\">\r\n-            <van-icon name=\"arrow-left\" size=\"12\" color=\"white\" class=\"slider-arrow left\" />\r\n-            <div class=\"slider-circle\"></div>\r\n-            <van-icon name=\"arrow\" size=\"12\" color=\"white\" class=\"slider-arrow right\" />\r\n-          </div>\r\n-        </div>\r\n+  <div class=\"comparison-container\" ref=\"comparisonContainer\" :style=\"containerStyle\">\r\n+    <div class=\"comparison-wrapper\">\r\n+      <!-- 原图层 -->\r\n+      <div class=\"image-layer original-layer\">\r\n+        <img\r\n+          :src=\"originalImage\"\r\n+          alt=\"原图\"\r\n+          class=\"comparison-image\"\r\n+          :style=\"imageStyle\"\r\n+          @load=\"handleImageLoad\"\r\n+          ref=\"originalImageRef\"\r\n+        />\r\n       </div>\r\n-    </div>\r\n \r\n-    <!-- 操作按钮 - 显示在图片下方 -->\r\n-    <div class=\"result-actions\">\r\n-      <van-button\r\n-        type=\"primary\"\r\n-        size=\"large\"\r\n-        @click=\"handleDownload\"\r\n-        icon=\"down\"\r\n+      <!-- 结果图层 -->\r\n+      <div\r\n+        class=\"image-layer result-layer\"\r\n+        :style=\"{ clipPath: `inset(0 ${100 - sliderPosition}% 0 0)` }\"\r\n       >\r\n-        下载图片\r\n-      </van-button>\r\n+        <img :src=\"resultImage\" alt=\"处理结果\" class=\"comparison-image\" :style=\"imageStyle\" />\r\n+      </div>\r\n \r\n-      <van-button\r\n-        size=\"large\"\r\n-        @click=\"handleReset\"\r\n-        icon=\"replay\"\r\n+      <!-- 拖拽滑块 -->\r\n+      <div\r\n+        class=\"comparison-slider\"\r\n+        :style=\"{ left: sliderPosition + '%' }\"\r\n+        @mousedown=\"startDragging\"\r\n+        @touchstart=\"startDragging\"\r\n       >\r\n-        重新生成\r\n-      </van-button>\r\n+        <div class=\"slider-line\"></div>\r\n+        <div class=\"slider-handle\">\r\n+          <van-icon name=\"arrow-left\" size=\"12\" color=\"white\" class=\"slider-arrow left\" />\r\n+          <div class=\"slider-circle\"></div>\r\n+          <van-icon name=\"arrow\" size=\"12\" color=\"white\" class=\"slider-arrow right\" />\r\n+        </div>\r\n+      </div>\r\n     </div>\r\n   </div>\r\n </template>\r\n \r\n"
                },
                {
                    "date": 1752418423630,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -53,9 +53,9 @@\n     required: true\r\n   }\r\n })\r\n \r\n-const emit = defineEmits(['reset', 'download'])\r\n+const emit = defineEmits([])\r\n \r\n const sliderPosition = ref(50)\r\n const isDragging = ref(false)\r\n const comparisonContainer = ref(null)\r\n"
                },
                {
                    "date": 1752418439456,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -113,18 +113,10 @@\n   document.removeEventListener('touchmove', handleDrag)\r\n   document.removeEventListener('touchend', stopDragging)\r\n }\r\n \r\n-// 下载处理\r\n-const handleDownload = () => {\r\n-  emit('download', props.resultImage)\r\n-}\r\n+// 移除下载和重置功能，只保留纯粹的对比功能\r\n \r\n-// 重置处理\r\n-const handleReset = () => {\r\n-  emit('reset')\r\n-}\r\n-\r\n // 响应式检测\r\n const updateMobileStatus = () => {\r\n   isMobile.value = ImageSizeUtils.isMobile()\r\n }\r\n"
                },
                {
                    "date": 1752418456687,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -143,16 +143,8 @@\n })\r\n </script>\r\n \r\n <style scoped>\r\n-.result-container {\r\n-  width: 100%;\r\n-  display: flex;\r\n-  flex-direction: column;\r\n-  align-items: center;\r\n-  gap: 24px;\r\n-}\r\n-\r\n .comparison-container {\r\n   position: relative;\r\n   border-radius: 12px;\r\n   overflow: hidden;\r\n"
                },
                {
                    "date": 1752418471104,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -238,15 +238,10 @@\n .slider-arrow {\r\n   opacity: 0.7;\r\n }\r\n \r\n-.result-actions {\r\n-  display: flex;\r\n-  gap: 16px;\r\n-  justify-content: center;\r\n-  padding: 0 16px;\r\n-}\r\n \r\n+\r\n @media (max-width: 768px) {\r\n   .comparison-container {\r\n     /* height: 60vh; */\r\n     min-height: 400px;\r\n"
                },
                {
                    "date": 1752425807648,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -155,8 +155,12 @@\n   box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);\r\n   user-select: none;\r\n   cursor: pointer;\r\n   transition: all 0.3s ease;\r\n+  min-height: 300px;\r\n+  max-height: 500px;\r\n+  width: 100%;\r\n+  margin: 0 auto;\r\n }\r\n \r\n .comparison-wrapper {\r\n   position: relative;\r\n"
                },
                {
                    "date": 1752425824998,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -168,8 +168,10 @@\n   height: 100%;\r\n   overflow: hidden;\r\n   cursor: col-resize;\r\n   background: #000000;\r\n+  min-height: 300px;\r\n+  max-height: 500px;\r\n }\r\n \r\n .image-layer {\r\n   position: absolute;\r\n"
                },
                {
                    "date": 1752425855389,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -248,16 +248,15 @@\n \r\n \r\n @media (max-width: 768px) {\r\n   .comparison-container {\r\n-    /* height: 60vh; */\r\n-    min-height: 400px;\r\n-    /* max-height: 600px; */\r\n+    min-height: 300px;\r\n+    max-height: 400px;\r\n   }\r\n \r\n-  .result-actions {\r\n-    flex-direction: column;\r\n-    gap: 12px;\r\n+  .comparison-wrapper {\r\n+    min-height: 300px;\r\n+    max-height: 400px;\r\n   }\r\n \r\n   .slider-handle {\r\n     width: 36px;\r\n"
                },
                {
                    "date": 1752428794364,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -159,8 +159,9 @@\n   min-height: 300px;\r\n   max-height: 500px;\r\n   width: 100%;\r\n   margin: 0 auto;\r\n+  height: 400px; /* 添加固定高度，确保容器有明确尺寸 */\r\n }\r\n \r\n .comparison-wrapper {\r\n   position: relative;\r\n"
                },
                {
                    "date": 1752428821319,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -204,8 +204,9 @@\n   background: white;\r\n   cursor: col-resize;\r\n   z-index: 20;\r\n   transform: translateX(-2px);\r\n+  left: 50%; /* 确保滑块初始位置在中间 */\r\n }\r\n \r\n .slider-line {\r\n   width: 100%;\r\n"
                },
                {
                    "date": 1752428835992,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -238,9 +238,9 @@\n \r\n .slider-circle {\r\n   width: 8px;\r\n   height: 8px;\r\n-  background: var(--primary-color);\r\n+  background: #1989fa;\r\n   border-radius: 50%;\r\n }\r\n \r\n .slider-arrow {\r\n"
                },
                {
                    "date": 1752428848657,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -244,8 +244,10 @@\n }\r\n \r\n .slider-arrow {\r\n   opacity: 0.7;\r\n+  font-size: 12px;\r\n+  color: #666;\r\n }\r\n \r\n \r\n \r\n"
                },
                {
                    "date": 1752428886254,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -252,8 +252,9 @@\n \r\n \r\n @media (max-width: 768px) {\r\n   .comparison-container {\r\n+    height: 300px; /* 移动端固定较小高度 */\r\n     min-height: 300px;\r\n     max-height: 400px;\r\n   }\r\n \r\n"
                },
                {
                    "date": 1752429857984,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -160,8 +160,9 @@\n   max-height: 500px;\r\n   width: 100%;\r\n   margin: 0 auto;\r\n   height: 400px; /* 添加固定高度，确保容器有明确尺寸 */\r\n+  display: inline-block; /* 确保可以被text-align: center居中 */\r\n }\r\n \r\n .comparison-wrapper {\r\n   position: relative;\r\n"
                },
                {
                    "date": 1752431338497,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -157,12 +157,16 @@\n   cursor: pointer;\r\n   transition: all 0.3s ease;\r\n   min-height: 300px;\r\n   max-height: 500px;\r\n-  width: 100%;\r\n+  height: 400px;\r\n+  /* 使用弹性布局确保居中，避免子元素宽度为0 */\r\n+  display: flex;\r\n+  justify-content: center;\r\n+  align-items: center;\r\n+  /* 限制最大宽度，确保图片不会过宽 */\r\n+  max-width: 100%;\r\n   margin: 0 auto;\r\n-  height: 400px; /* 添加固定高度，确保容器有明确尺寸 */\r\n-  display: inline-block; /* 确保可以被text-align: center居中 */\r\n }\r\n \r\n .comparison-wrapper {\r\n   position: relative;\r\n"
                },
                {
                    "date": 1752431353704,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -169,15 +169,18 @@\n }\r\n \r\n .comparison-wrapper {\r\n   position: relative;\r\n-  width: 100%;\r\n-  height: 100%;\r\n   overflow: hidden;\r\n   cursor: col-resize;\r\n   background: #000000;\r\n+  /* 使用弹性布局的子元素，确保有明确的尺寸 */\r\n+  width: 100%;\r\n+  height: 100%;\r\n   min-height: 300px;\r\n   max-height: 500px;\r\n+  /* 确保wrapper能够正确显示内容 */\r\n+  flex-shrink: 0;\r\n }\r\n \r\n .image-layer {\r\n   position: absolute;\r\n"
                },
                {
                    "date": 1752434055546,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -194,9 +194,8 @@\n   width: 100%;\r\n   height: 100%;\r\n   object-fit: contain;\r\n   object-position: center;\r\n-  display: block;\r\n }\r\n \r\n .result-layer {\r\n   transition: clip-path 0.1s ease-out;\r\n"
                },
                {
                    "date": 1752434990012,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -194,8 +194,9 @@\n   width: 100%;\r\n   height: 100%;\r\n   object-fit: contain;\r\n   object-position: center;\r\n+  display: block;\r\n }\r\n \r\n .result-layer {\r\n   transition: clip-path 0.1s ease-out;\r\n"
                },
                {
                    "date": 1752435696753,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -6,9 +6,8 @@\n         <img\r\n           :src=\"originalImage\"\r\n           alt=\"原图\"\r\n           class=\"comparison-image\"\r\n-          :style=\"imageStyle\"\r\n           @load=\"handleImageLoad\"\r\n           ref=\"originalImageRef\"\r\n         />\r\n       </div>\r\n"
                },
                {
                    "date": 1752435711416,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -16,9 +16,9 @@\n       <div\r\n         class=\"image-layer result-layer\"\r\n         :style=\"{ clipPath: `inset(0 ${100 - sliderPosition}% 0 0)` }\"\r\n       >\r\n-        <img :src=\"resultImage\" alt=\"处理结果\" class=\"comparison-image\" :style=\"imageStyle\" />\r\n+        <img :src=\"resultImage\" alt=\"处理结果\" class=\"comparison-image\" />\r\n       </div>\r\n \r\n       <!-- 拖拽滑块 -->\r\n       <div\r\n"
                },
                {
                    "date": 1752435726641,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -66,12 +66,10 @@\n const containerStyle = computed(() => {\r\n   return ImageSizeUtils.getContainerStyle('preview', isMobile.value)\r\n })\r\n \r\n-const imageStyle = computed(() => {\r\n-  return ImageSizeUtils.getImageStyle('preview', isMobile.value)\r\n-})\r\n \r\n+\r\n // 处理图片加载\r\n const handleImageLoad = () => {\r\n   if (originalImageRef.value) {\r\n     const img = originalImageRef.value\r\n"
                }
            ],
            "date": 1752412387224,
            "name": "Commit-0",
            "content": "<template>\r\n  <div class=\"result-container\">\r\n    <!-- 使用MobileCard包装，与VantImageComparison保持一致 -->\r\n    <MobileCard title=\"处理结果\" inset>\r\n      <div class=\"comparison-container\" ref=\"comparisonContainer\">\r\n        <div class=\"comparison-wrapper\" :style=\"containerStyle\">\r\n        <!-- 原图层 -->\r\n        <div class=\"image-layer original-layer\">\r\n          <img\r\n            :src=\"originalImage\"\r\n            alt=\"原图\"\r\n            class=\"comparison-image\"\r\n            @load=\"handleImageLoad\"\r\n            ref=\"originalImageRef\"\r\n          />\r\n        </div>\r\n\r\n        <!-- 结果图层 -->\r\n        <div\r\n          class=\"image-layer result-layer\"\r\n          :style=\"{ clipPath: `inset(0 ${100 - sliderPosition}% 0 0)` }\"\r\n        >\r\n          <img :src=\"resultImage\" alt=\"处理结果\" class=\"comparison-image\" />\r\n        </div>\r\n\r\n        <!-- 拖拽滑块 -->\r\n        <div\r\n          class=\"comparison-slider\"\r\n          :style=\"{ left: sliderPosition + '%' }\"\r\n          @mousedown=\"startDragging\"\r\n          @touchstart=\"startDragging\"\r\n        >\r\n          <div class=\"slider-line\"></div>\r\n          <div class=\"slider-handle\">\r\n            <van-icon name=\"arrow-left\" size=\"12\" color=\"white\" class=\"slider-arrow left\" />\r\n            <div class=\"slider-circle\"></div>\r\n            <van-icon name=\"arrow\" size=\"12\" color=\"white\" class=\"slider-arrow right\" />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 操作按钮 -->\r\n    <div class=\"result-actions\">\r\n      <van-button\r\n        @click=\"downloadResult\"\r\n        type=\"primary\"\r\n        size=\"normal\"\r\n        round\r\n        icon=\"down\"\r\n      >\r\n        下载处理结果\r\n      </van-button>\r\n      <van-button\r\n        @click=\"resetProcess\"\r\n        type=\"default\"\r\n        size=\"normal\"\r\n        round\r\n        icon=\"replay\"\r\n      >\r\n        重新选择图片\r\n      </van-button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, computed, watch, onMounted, onUnmounted } from 'vue'\r\nimport { Toast } from 'vant'\r\n\r\nconst props = defineProps({\r\n  originalImage: {\r\n    type: String,\r\n    required: true\r\n  },\r\n  resultImage: {\r\n    type: String,\r\n    required: true\r\n  }\r\n})\r\n\r\nconst emit = defineEmits(['reset'])\r\n\r\nconst sliderPosition = ref(50)\r\nconst isDragging = ref(false)\r\nconst comparisonContainer = ref(null)\r\nconst originalImageRef = ref(null)\r\nconst imageAspectRatio = ref(1) // 默认1:1比例\r\n\r\n// 计算容器样式\r\nconst containerStyle = computed(() => {\r\n  return {\r\n    aspectRatio: imageAspectRatio.value.toString()\r\n  }\r\n})\r\n\r\n// 处理图片加载\r\nconst handleImageLoad = () => {\r\n  if (originalImageRef.value) {\r\n    const img = originalImageRef.value\r\n    imageAspectRatio.value = img.naturalWidth / img.naturalHeight\r\n  }\r\n}\r\n\r\n// 监听图片变化，重新计算比例\r\nwatch(() => props.originalImage, () => {\r\n  // 当图片URL变化时，重置比例为默认值，等待新图片加载\r\n  imageAspectRatio.value = 1\r\n}, { immediate: true })\r\n\r\nconst startDragging = (event) => {\r\n  isDragging.value = true\r\n  document.addEventListener('mousemove', handleDrag)\r\n  document.addEventListener('mouseup', stopDragging)\r\n  document.addEventListener('touchmove', handleDrag)\r\n  document.addEventListener('touchend', stopDragging)\r\n  event.preventDefault()\r\n}\r\n\r\nconst handleDrag = (event) => {\r\n  if (!isDragging.value || !comparisonContainer.value) return\r\n\r\n  const rect = comparisonContainer.value.getBoundingClientRect()\r\n  const clientX = event.clientX || (event.touches && event.touches[0].clientX)\r\n  const x = clientX - rect.left\r\n  const percentage = Math.max(0, Math.min(100, (x / rect.width) * 100))\r\n\r\n  sliderPosition.value = percentage\r\n}\r\n\r\nconst stopDragging = () => {\r\n  isDragging.value = false\r\n  document.removeEventListener('mousemove', handleDrag)\r\n  document.removeEventListener('mouseup', stopDragging)\r\n  document.removeEventListener('touchmove', handleDrag)\r\n  document.removeEventListener('touchend', stopDragging)\r\n}\r\n\r\nconst downloadResult = () => {\r\n  const link = document.createElement('a')\r\n  link.href = props.resultImage\r\n  link.download = `processed-image-${Date.now()}.jpg`\r\n  document.body.appendChild(link)\r\n  link.click()\r\n  document.body.removeChild(link)\r\n  Toast.success('图片下载已开始')\r\n}\r\n\r\nconst resetProcess = () => {\r\n  emit('reset')\r\n}\r\n\r\n// 键盘快捷键支持\r\nconst handleKeyPress = (event) => {\r\n  if (event.key === 'ArrowLeft') {\r\n    sliderPosition.value = Math.max(0, sliderPosition.value - 5)\r\n  } else if (event.key === 'ArrowRight') {\r\n    sliderPosition.value = Math.min(100, sliderPosition.value + 5)\r\n  }\r\n}\r\n\r\nonMounted(() => {\r\n  document.addEventListener('keydown', handleKeyPress)\r\n})\r\n\r\nonUnmounted(() => {\r\n  document.removeEventListener('keydown', handleKeyPress)\r\n  stopDragging()\r\n})\r\n</script>\r\n\r\n<style scoped>\r\n.result-container {\r\n  background: var(--bg-card);\r\n  border: 1px solid var(--border-color);\r\n  border-radius: 20px;\r\n  padding: 24px;\r\n  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.3);\r\n}\r\n\r\n.comparison-container {\r\n  position: relative;\r\n  margin: 16px 0;\r\n  border-radius: 16px;\r\n  overflow: hidden;\r\n  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.3);\r\n  user-select: none;\r\n  background: var(--bg-dark);\r\n  width: 100%;\r\n}\r\n\r\n.comparison-wrapper {\r\n  position: relative;\r\n  width: 100%;\r\n  overflow: hidden;\r\n  cursor: col-resize;\r\n  background: #000000;\r\n}\r\n\r\n.image-layer {\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n\r\n.comparison-image {\r\n  width: 100%;\r\n  height: auto;\r\n  object-fit: contain;\r\n  object-position: center;\r\n  display: block;\r\n}\r\n\r\n.result-layer {\r\n  transition: clip-path 0.1s ease-out;\r\n}\r\n\r\n\r\n\r\n.comparison-slider {\r\n  position: absolute;\r\n  top: 0;\r\n  bottom: 0;\r\n  width: 4px;\r\n  background: white;\r\n  cursor: col-resize;\r\n  z-index: 20;\r\n  transform: translateX(-2px);\r\n}\r\n\r\n.slider-line {\r\n  width: 100%;\r\n  height: 100%;\r\n  background: white;\r\n  box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);\r\n}\r\n\r\n.slider-handle {\r\n  position: absolute;\r\n  top: 50%;\r\n  left: 50%;\r\n  transform: translate(-50%, -50%);\r\n  width: 48px;\r\n  height: 48px;\r\n  background: white;\r\n  border-radius: 50%;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  gap: 4px;\r\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);\r\n  cursor: grab;\r\n}\r\n\r\n.slider-handle:active {\r\n  cursor: grabbing;\r\n}\r\n\r\n.slider-circle {\r\n  width: 8px;\r\n  height: 8px;\r\n  background: var(--primary-color);\r\n  border-radius: 50%;\r\n}\r\n\r\n.slider-arrow {\r\n  opacity: 0.7;\r\n}\r\n\r\n.result-actions {\r\n  display: flex;\r\n  gap: 16px;\r\n  justify-content: center;\r\n  margin-top: 24px;\r\n}\r\n\r\n@media (max-width: 768px) {\r\n  .comparison-container {\r\n    /* height: 60vh; */\r\n    min-height: 400px;\r\n    /* max-height: 600px; */\r\n  }\r\n\r\n  .result-actions {\r\n    flex-direction: column;\r\n    gap: 12px;\r\n  }\r\n\r\n  .slider-handle {\r\n    width: 36px;\r\n    height: 36px;\r\n  }\r\n}\r\n</style>\r\n"
        }
    ]
}