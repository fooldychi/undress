{
    "sourceFile": "client/src/components/common/VantImageComparison.vue",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 3,
            "patches": [
                {
                    "date": 1752384971595,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1752384987723,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -30,15 +30,15 @@\n         </div>\n \n         <!-- 分隔线 -->\n         <div class=\"divider\">\n-          <van-icon name=\"arrow\" size=\"16\" color=\"var(--van-primary-color)\" />\n+          <van-icon name=\"arrow\" size=\"16\" color=\"rgba(255, 255, 255, 0.9)\" />\n         </div>\n \n         <!-- 结果图 -->\n         <div class=\"image-section\">\n           <div class=\"image-header\">\n-            <van-icon name=\"photo\" size=\"16\" color=\"var(--van-success-color)\" />\n+            <van-icon name=\"star\" size=\"16\" color=\"#FFD700\" />\n             <span class=\"image-title\">结果</span>\n           </div>\n           <div class=\"image-wrapper\">\n             <van-image\n"
                },
                {
                    "date": 1752385023585,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -231,41 +231,50 @@\n }\n \n .image-title {\n   font-size: 14px;\n-  font-weight: 500;\n-  color: var(--van-text-color-2, #646566);\n+  font-weight: 600;\n+  color: rgba(255, 255, 255, 0.9);\n+  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);\n }\n \n .image-wrapper {\n   position: relative;\n   width: 100%;\n   aspect-ratio: 1;\n-  border-radius: 8px;\n+  border-radius: 12px;\n   overflow: hidden;\n-  background: var(--van-background-2, #f7f8fa);\n+  background: rgba(255, 255, 255, 0.1);\n+  backdrop-filter: blur(10px);\n+  -webkit-backdrop-filter: blur(10px);\n+  border: 1px solid rgba(255, 255, 255, 0.2);\n+  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);\n }\n \n .comparison-image {\n   width: 100%;\n   height: 100%;\n   cursor: pointer;\n-  transition: transform 0.3s ease;\n+  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n }\n \n .comparison-image:hover {\n-  transform: scale(1.02);\n+  transform: scale(1.05);\n }\n \n .divider {\n   display: flex;\n   align-items: center;\n   justify-content: center;\n-  width: 32px;\n-  height: 32px;\n-  background: var(--van-background-2, #f7f8fa);\n+  width: 40px;\n+  height: 40px;\n+  background: rgba(255, 255, 255, 0.2);\n+  backdrop-filter: blur(10px);\n+  -webkit-backdrop-filter: blur(10px);\n   border-radius: 50%;\n   flex-shrink: 0;\n+  border: 1px solid rgba(255, 255, 255, 0.3);\n+  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\n }\n \n .action-buttons {\n   display: flex;\n"
                },
                {
                    "date": 1752385047151,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -299,10 +299,10 @@\n     font-size: 13px;\n   }\n \n   .divider {\n-    width: 28px;\n-    height: 28px;\n+    width: 36px;\n+    height: 36px;\n   }\n \n   .action-buttons {\n     gap: 6px;\n@@ -315,12 +315,25 @@\n \n /* 深色主题适配 */\n @media (prefers-color-scheme: dark) {\n   .image-wrapper {\n-    background: var(--van-background-2, #1e1e1e);\n+    background: rgba(0, 0, 0, 0.3);\n+    border-color: rgba(255, 255, 255, 0.1);\n   }\n \n   .divider {\n-    background: var(--van-background-2, #1e1e1e);\n+    background: rgba(0, 0, 0, 0.3);\n+    border-color: rgba(255, 255, 255, 0.1);\n   }\n }\n+\n+/* 减少动画在低性能设备上的影响 */\n+@media (prefers-reduced-motion: reduce) {\n+  .comparison-image {\n+    transition: none;\n+  }\n+\n+  .comparison-image:hover {\n+    transform: none;\n+  }\n+}\n </style>\n"
                }
            ],
            "date": 1752384971595,
            "name": "Commit-0",
            "content": "<template>\n  <div class=\"vant-image-comparison\">\n    <!-- 结果标题 -->\n    <MobileCard title=\"处理结果\" inset>\n      <!-- 图片对比区域 -->\n      <div class=\"comparison-container\">\n        <!-- 原图 -->\n        <div class=\"image-section\">\n          <div class=\"image-header\">\n            <van-icon name=\"photo-o\" size=\"16\" color=\"rgba(255, 255, 255, 0.8)\" />\n            <span class=\"image-title\">原图</span>\n          </div>\n          <div class=\"image-wrapper\">\n            <van-image\n              :src=\"originalImage\"\n              fit=\"cover\"\n              :show-loading=\"true\"\n              :show-error=\"true\"\n              class=\"comparison-image\"\n              @click=\"previewImage(originalImage, '原图')\"\n            >\n              <template #loading>\n                <van-loading type=\"spinner\" size=\"20\" />\n              </template>\n              <template #error>\n                <van-icon name=\"photo-fail\" size=\"32\" />\n              </template>\n            </van-image>\n          </div>\n        </div>\n\n        <!-- 分隔线 -->\n        <div class=\"divider\">\n          <van-icon name=\"arrow\" size=\"16\" color=\"var(--van-primary-color)\" />\n        </div>\n\n        <!-- 结果图 -->\n        <div class=\"image-section\">\n          <div class=\"image-header\">\n            <van-icon name=\"photo\" size=\"16\" color=\"var(--van-success-color)\" />\n            <span class=\"image-title\">结果</span>\n          </div>\n          <div class=\"image-wrapper\">\n            <van-image\n              :src=\"resultImage\"\n              fit=\"cover\"\n              :show-loading=\"true\"\n              :show-error=\"true\"\n              class=\"comparison-image\"\n              @click=\"previewImage(resultImage, '处理结果')\"\n            >\n              <template #loading>\n                <van-loading type=\"spinner\" size=\"20\" />\n              </template>\n              <template #error>\n                <van-icon name=\"photo-fail\" size=\"32\" />\n              </template>\n            </van-image>\n          </div>\n        </div>\n      </div>\n\n      <!-- 操作按钮 -->\n      <div class=\"action-buttons\">\n        <van-button\n          type=\"primary\"\n          size=\"small\"\n          icon=\"down\"\n          @click=\"downloadImage\"\n          class=\"action-btn\"\n        >\n          下载图片\n        </van-button>\n\n        <van-button\n          type=\"default\"\n          size=\"small\"\n          icon=\"photo-o\"\n          @click=\"previewBoth\"\n          class=\"action-btn\"\n        >\n          预览对比\n        </van-button>\n\n        <van-button\n          type=\"warning\"\n          size=\"small\"\n          icon=\"replay\"\n          @click=\"$emit('reset')\"\n          class=\"action-btn\"\n        >\n          重新处理\n        </van-button>\n      </div>\n    </MobileCard>\n\n    <!-- 处理信息 -->\n    <MobileCard v-if=\"showProcessInfo && processInfo\" title=\"处理信息\" inset>\n      <van-cell-group inset>\n        <van-cell\n          v-if=\"processInfo.processingTime\"\n          title=\"处理时间\"\n          :value=\"`${Math.floor(processInfo.processingTime / 1000)}秒`\"\n          icon=\"clock-o\"\n        />\n        <van-cell\n          v-if=\"processInfo.promptId\"\n          title=\"任务ID\"\n          :value=\"processInfo.promptId\"\n          icon=\"orders-o\"\n        />\n        <van-cell\n          v-if=\"processInfo.model\"\n          title=\"使用模型\"\n          :value=\"processInfo.model\"\n          icon=\"setting-o\"\n        />\n        <van-cell\n          v-if=\"processInfo.timestamp\"\n          title=\"完成时间\"\n          :value=\"formatTime(processInfo.timestamp)\"\n          icon=\"calendar-o\"\n        />\n      </van-cell-group>\n    </MobileCard>\n  </div>\n</template>\n\n<script setup>\nimport { ImagePreview, Toast } from 'vant'\nimport { MobileCard } from '../mobile'\n\n// Props\nconst props = defineProps({\n  originalImage: {\n    type: String,\n    required: true\n  },\n  resultImage: {\n    type: String,\n    required: true\n  },\n  showProcessInfo: {\n    type: Boolean,\n    default: true\n  },\n  processInfo: {\n    type: Object,\n    default: () => ({})\n  }\n})\n\n// Events\nconst emit = defineEmits(['reset', 'download'])\n\n// Methods\nconst previewImage = (imageUrl, title) => {\n  ImagePreview({\n    images: [imageUrl],\n    showIndex: false,\n    closeable: true\n  })\n}\n\nconst previewBoth = () => {\n  ImagePreview({\n    images: [props.originalImage, props.resultImage],\n    startPosition: 0,\n    showIndex: true,\n    closeable: true\n  })\n}\n\nconst downloadImage = async () => {\n  try {\n    // 创建下载链接\n    const link = document.createElement('a')\n    link.href = props.resultImage\n    link.download = `ai-result-${Date.now()}.jpg`\n    document.body.appendChild(link)\n    link.click()\n    document.body.removeChild(link)\n\n    Toast.success('开始下载图片')\n    emit('download', props.resultImage)\n  } catch (error) {\n    console.error('下载失败:', error)\n    Toast.fail('下载失败，请重试')\n  }\n}\n\nconst formatTime = (timestamp) => {\n  if (!timestamp) return ''\n  const date = new Date(timestamp)\n  return date.toLocaleString('zh-CN', {\n    year: 'numeric',\n    month: '2-digit',\n    day: '2-digit',\n    hour: '2-digit',\n    minute: '2-digit'\n  })\n}\n</script>\n\n<style scoped>\n.vant-image-comparison {\n  display: flex;\n  flex-direction: column;\n  gap: 16px;\n}\n\n.comparison-container {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  padding: 16px 0;\n}\n\n.image-section {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n}\n\n.image-header {\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  justify-content: center;\n}\n\n.image-title {\n  font-size: 14px;\n  font-weight: 500;\n  color: var(--van-text-color-2, #646566);\n}\n\n.image-wrapper {\n  position: relative;\n  width: 100%;\n  aspect-ratio: 1;\n  border-radius: 8px;\n  overflow: hidden;\n  background: var(--van-background-2, #f7f8fa);\n}\n\n.comparison-image {\n  width: 100%;\n  height: 100%;\n  cursor: pointer;\n  transition: transform 0.3s ease;\n}\n\n.comparison-image:hover {\n  transform: scale(1.02);\n}\n\n.divider {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 32px;\n  height: 32px;\n  background: var(--van-background-2, #f7f8fa);\n  border-radius: 50%;\n  flex-shrink: 0;\n}\n\n.action-buttons {\n  display: flex;\n  gap: 8px;\n  margin-top: 16px;\n  flex-wrap: wrap;\n}\n\n.action-btn {\n  flex: 1;\n  min-width: 0;\n}\n\n/* 移动端优化 */\n@media (max-width: 768px) {\n  .comparison-container {\n    gap: 8px;\n    padding: 12px 0;\n  }\n\n  .image-title {\n    font-size: 13px;\n  }\n\n  .divider {\n    width: 28px;\n    height: 28px;\n  }\n\n  .action-buttons {\n    gap: 6px;\n  }\n\n  .action-btn {\n    font-size: 13px;\n  }\n}\n\n/* 深色主题适配 */\n@media (prefers-color-scheme: dark) {\n  .image-wrapper {\n    background: var(--van-background-2, #1e1e1e);\n  }\n\n  .divider {\n    background: var(--van-background-2, #1e1e1e);\n  }\n}\n</style>\n"
        }
    ]
}