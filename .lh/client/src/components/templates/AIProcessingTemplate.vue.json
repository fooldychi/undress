{
    "sourceFile": "client/src/components/templates/AIProcessingTemplate.vue",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 12,
            "patches": [
                {
                    "date": 1752384788723,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1752387123181,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -175,15 +175,16 @@\n /* 页面头部样式 */\n .ai-page-header {\n   text-align: center;\n   padding: 16px 0;\n-  background: rgba(255, 255, 255, 0.1);\n-  backdrop-filter: blur(10px);\n-  -webkit-backdrop-filter: blur(10px);\n+  /* Removing frosted glass effect */\n+  background: transparent;\n+  /* backdrop-filter: blur(10px); - Removed */\n+  /* -webkit-backdrop-filter: blur(10px); - Removed */\n   border-radius: 16px;\n   margin-bottom: 20px;\n-  border: 1px solid rgba(255, 255, 255, 0.2);\n-  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);\n+  border: 1px solid rgba(255, 255, 255, 0.1); /* Reduced opacity from 0.2 */\n+  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.05); /* Reduced opacity from 0.1 */\n }\n \n .page-title {\n   display: flex;\n@@ -280,10 +281,10 @@\n \n /* 深色主题适配 */\n @media (prefers-color-scheme: dark) {\n   .ai-page-header {\n-    background: rgba(0, 0, 0, 0.3);\n-    border: 1px solid rgba(255, 255, 255, 0.1);\n+    background: transparent; /* Changed from rgba(0, 0, 0, 0.3) */\n+    border: 1px solid rgba(255, 255, 255, 0.05); /* Reduced opacity from 0.1 */\n   }\n \n   .upload-tips {\n     background: rgba(0, 0, 0, 0.2);\n@@ -295,4 +296,5 @@\n     border: 1px solid rgba(255, 255, 255, 0.05);\n   }\n }\n </style>\n+\n"
                },
                {
                    "date": 1752387151564,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -181,10 +181,8 @@\n   /* backdrop-filter: blur(10px); - Removed */\n   /* -webkit-backdrop-filter: blur(10px); - Removed */\n   border-radius: 16px;\n   margin-bottom: 20px;\n-  border: 1px solid rgba(255, 255, 255, 0.1); /* Reduced opacity from 0.2 */\n-  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.05); /* Reduced opacity from 0.1 */\n }\n \n .page-title {\n   display: flex;\n"
                },
                {
                    "date": 1752395933129,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -295,4 +295,5 @@\n   }\n }\n </style>\n \n+\n"
                },
                {
                    "date": 1752421280821,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -81,8 +81,30 @@\n \n     <!-- 结果展示 -->\n     <div v-if=\"resultData\" class=\"result-section\">\n       <slot name=\"result\" :result=\"resultData\" />\n+\n+      <!-- 结果操作按钮 -->\n+      <div class=\"result-actions\">\n+        <van-button\n+          type=\"primary\"\n+          size=\"large\"\n+          @click=\"$emit('download')\"\n+          :loading=\"downloadLoading\"\n+          class=\"result-action-btn\"\n+        >\n+          下载图片\n+        </van-button>\n+\n+        <van-button\n+          type=\"default\"\n+          size=\"large\"\n+          @click=\"$emit('reprocess')\"\n+          class=\"result-action-btn\"\n+        >\n+          重新处理\n+        </van-button>\n+      </div>\n     </div>\n   </MobilePageContainer>\n </template>\n \n"
                },
                {
                    "date": 1752421309403,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -185,13 +185,19 @@\n   // 结果数据\n   resultData: {\n     type: [Object, String],\n     default: null\n+  },\n+\n+  // 下载状态\n+  downloadLoading: {\n+    type: Boolean,\n+    default: false\n   }\n })\n \n // Events\n-defineEmits(['login', 'logout', 'process'])\n+defineEmits(['login', 'logout', 'process', 'download', 'reprocess'])\n </script>\n \n <style scoped>\n /* 页面头部样式 */\n"
                },
                {
                    "date": 1752421334246,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -278,8 +278,25 @@\n .result-section {\n   margin-top: 24px;\n }\n \n+/* 结果操作按钮样式 */\n+.result-actions {\n+  display: flex;\n+  gap: 12px;\n+  justify-content: center;\n+  margin-top: 20px;\n+  padding: 0 16px;\n+}\n+\n+.result-action-btn {\n+  flex: 1;\n+  max-width: 150px;\n+  font-size: 14px;\n+  font-weight: 500;\n+  border-radius: 8px;\n+}\n+\n /* 移动端优化 */\n @media (max-width: 768px) {\n   .ai-page-header {\n     padding: 12px 0;\n@@ -302,8 +319,18 @@\n   .upload-tips {\n     padding: 16px;\n     margin-top: 16px;\n   }\n+\n+  .result-actions {\n+    gap: 8px;\n+    margin-top: 16px;\n+    padding: 0 12px;\n+  }\n+\n+  .result-action-btn {\n+    font-size: 13px;\n+  }\n }\n \n /* 深色主题适配 */\n @media (prefers-color-scheme: dark) {\n"
                },
                {
                    "date": 1752421486742,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -87,9 +87,9 @@\n       <div class=\"result-actions\">\n         <van-button\n           type=\"primary\"\n           size=\"large\"\n-          @click=\"$emit('download')\"\n+          @click=\"$emit('download', resultData)\"\n           :loading=\"downloadLoading\"\n           class=\"result-action-btn\"\n         >\n           下载图片\n"
                },
                {
                    "date": 1752424008694,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -25,14 +25,14 @@\n       </div>\n     </template>\n \n     <!-- 主要内容 -->\n-    <div v-if=\"!resultData\" class=\"input-section\">\n-      <!-- 输入区域插槽 -->\n+    <div class=\"input-section\">\n+      <!-- 输入区域插槽 - 始终显示，让子组件决定显示什么 -->\n       <slot name=\"inputs\" />\n \n-      <!-- 处理按钮 -->\n-      <div v-if=\"canProcess && !isProcessing\" class=\"action-section\">\n+      <!-- 处理按钮 - 只在没有结果且不在处理时显示 -->\n+      <div v-if=\"!resultData && canProcess && !isProcessing\" class=\"action-section\">\n         <MobileActionButton\n           @click=\"$emit('process')\"\n           type=\"primary\"\n           block\n@@ -49,10 +49,10 @@\n           {{ processButtonText }}\n         </MobileActionButton>\n       </div>\n \n-      <!-- 上传提示 -->\n-      <div v-else-if=\"showUploadTips\" class=\"upload-tips\">\n+      <!-- 上传提示 - 只在没有结果且显示提示时显示 -->\n+      <div v-else-if=\"!resultData && showUploadTips\" class=\"upload-tips\">\n         <slot name=\"upload-tips\" />\n       </div>\n     </div>\n \n"
                },
                {
                    "date": 1752424026779,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -78,10 +78,11 @@\n         </div>\n       </template>\n     </MobileStatusCard>\n \n-    <!-- 结果展示 -->\n+    <!-- 结果展示 - 只在需要显示额外结果信息时使用 -->\n     <div v-if=\"resultData\" class=\"result-section\">\n+      <!-- 只显示不在输入区域的结果内容 -->\n       <slot name=\"result\" :result=\"resultData\" />\n \n       <!-- 结果操作按钮 -->\n       <div class=\"result-actions\">\n"
                },
                {
                    "date": 1752424930157,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -25,14 +25,14 @@\n       </div>\n     </template>\n \n     <!-- 主要内容 -->\n-    <div class=\"input-section\">\n-      <!-- 输入区域插槽 - 始终显示，让子组件决定显示什么 -->\n+    <div v-if=\"!resultData\" class=\"input-section\">\n+      <!-- 输入区域插槽 -->\n       <slot name=\"inputs\" />\n \n-      <!-- 处理按钮 - 只在没有结果且不在处理时显示 -->\n-      <div v-if=\"!resultData && canProcess && !isProcessing\" class=\"action-section\">\n+      <!-- 处理按钮 -->\n+      <div v-if=\"canProcess && !isProcessing\" class=\"action-section\">\n         <MobileActionButton\n           @click=\"$emit('process')\"\n           type=\"primary\"\n           block\n@@ -49,10 +49,10 @@\n           {{ processButtonText }}\n         </MobileActionButton>\n       </div>\n \n-      <!-- 上传提示 - 只在没有结果且显示提示时显示 -->\n-      <div v-else-if=\"!resultData && showUploadTips\" class=\"upload-tips\">\n+      <!-- 上传提示 -->\n+      <div v-else-if=\"showUploadTips\" class=\"upload-tips\">\n         <slot name=\"upload-tips\" />\n       </div>\n     </div>\n \n@@ -78,11 +78,10 @@\n         </div>\n       </template>\n     </MobileStatusCard>\n \n-    <!-- 结果展示 - 只在需要显示额外结果信息时使用 -->\n+    <!-- 结果展示 -->\n     <div v-if=\"resultData\" class=\"result-section\">\n-      <!-- 只显示不在输入区域的结果内容 -->\n       <slot name=\"result\" :result=\"resultData\" />\n \n       <!-- 结果操作按钮 -->\n       <div class=\"result-actions\">\n"
                },
                {
                    "date": 1752427398783,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -25,14 +25,14 @@\n       </div>\n     </template>\n \n     <!-- 主要内容 -->\n-    <div v-if=\"!resultData\" class=\"input-section\">\n-      <!-- 输入区域插槽 -->\n+    <div class=\"input-section\">\n+      <!-- 输入区域插槽 - 始终显示，包含对比组件 -->\n       <slot name=\"inputs\" />\n \n-      <!-- 处理按钮 -->\n-      <div v-if=\"canProcess && !isProcessing\" class=\"action-section\">\n+      <!-- 处理按钮 - 只在没有结果且可以处理时显示 -->\n+      <div v-if=\"!resultData && canProcess && !isProcessing\" class=\"action-section\">\n         <MobileActionButton\n           @click=\"$emit('process')\"\n           type=\"primary\"\n           block\n@@ -49,10 +49,10 @@\n           {{ processButtonText }}\n         </MobileActionButton>\n       </div>\n \n-      <!-- 上传提示 -->\n-      <div v-else-if=\"showUploadTips\" class=\"upload-tips\">\n+      <!-- 上传提示 - 只在没有结果时显示 -->\n+      <div v-else-if=\"!resultData && showUploadTips\" class=\"upload-tips\">\n         <slot name=\"upload-tips\" />\n       </div>\n     </div>\n \n"
                },
                {
                    "date": 1752427418905,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -78,33 +78,34 @@\n         </div>\n       </template>\n     </MobileStatusCard>\n \n-    <!-- 结果展示 -->\n+    <!-- 结果展示 - 只显示额外的结果信息，操作按钮始终在底部 -->\n     <div v-if=\"resultData\" class=\"result-section\">\n+      <!-- 额外的结果信息插槽 -->\n       <slot name=\"result\" :result=\"resultData\" />\n+    </div>\n \n-      <!-- 结果操作按钮 -->\n-      <div class=\"result-actions\">\n-        <van-button\n-          type=\"primary\"\n-          size=\"large\"\n-          @click=\"$emit('download', resultData)\"\n-          :loading=\"downloadLoading\"\n-          class=\"result-action-btn\"\n-        >\n-          下载图片\n-        </van-button>\n+    <!-- 结果操作按钮 - 有结果时显示 -->\n+    <div v-if=\"resultData\" class=\"result-actions\">\n+      <van-button\n+        type=\"primary\"\n+        size=\"large\"\n+        @click=\"$emit('download', resultData)\"\n+        :loading=\"downloadLoading\"\n+        class=\"result-action-btn\"\n+      >\n+        下载图片\n+      </van-button>\n \n-        <van-button\n-          type=\"default\"\n-          size=\"large\"\n-          @click=\"$emit('reprocess')\"\n-          class=\"result-action-btn\"\n-        >\n-          重新处理\n-        </van-button>\n-      </div>\n+      <van-button\n+        type=\"default\"\n+        size=\"large\"\n+        @click=\"$emit('reprocess')\"\n+        class=\"result-action-btn\"\n+      >\n+        重新处理\n+      </van-button>\n     </div>\n   </MobilePageContainer>\n </template>\n \n"
                }
            ],
            "date": 1752384788723,
            "name": "Commit-0",
            "content": "<template>\n  <MobilePageContainer\n    :title=\"title\"\n    @login=\"$emit('login', $event)\"\n    @logout=\"$emit('logout', $event)\"\n  >\n    <!-- 页面头部描述 -->\n    <template #header>\n      <div class=\"ai-page-header\">\n        <div class=\"page-title\">\n          <component\n            :is=\"titleIcon\"\n            v-if=\"titleIcon\"\n            :size=\"24\"\n            :color=\"titleIconColor\"\n          />\n          <van-icon\n            v-else-if=\"titleIconName\"\n            :name=\"titleIconName\"\n            :size=\"24\"\n            :color=\"titleIconColor\"\n          />\n          <span>{{ description }}</span>\n        </div>\n      </div>\n    </template>\n\n    <!-- 主要内容 -->\n    <div v-if=\"!resultData\" class=\"input-section\">\n      <!-- 输入区域插槽 -->\n      <slot name=\"inputs\" />\n\n      <!-- 处理按钮 -->\n      <div v-if=\"canProcess && !isProcessing\" class=\"action-section\">\n        <MobileActionButton\n          @click=\"$emit('process')\"\n          type=\"primary\"\n          block\n          variant=\"floating\"\n          :icon=\"processButtonIcon\"\n        >\n          <template v-if=\"processButtonIcon\" #icon>\n            <component\n              :is=\"processButtonIcon\"\n              :size=\"18\"\n              color=\"white\"\n            />\n          </template>\n          {{ processButtonText }}\n        </MobileActionButton>\n      </div>\n\n      <!-- 上传提示 -->\n      <div v-else-if=\"showUploadTips\" class=\"upload-tips\">\n        <slot name=\"upload-tips\" />\n      </div>\n    </div>\n\n    <!-- 处理状态 -->\n    <MobileStatusCard\n      v-if=\"isProcessing\"\n      status=\"loading\"\n      :title=\"processingTitle\"\n      :description=\"processingDescription\"\n      :progress=\"progress\"\n      :show-progress=\"showProgress\"\n    >\n      <template #extra>\n        <div v-if=\"processingInfo\" class=\"processing-info\">\n          <div v-if=\"processingInfo.promptId\" class=\"info-item\">\n            <span class=\"info-label\">任务ID:</span>\n            <span class=\"info-value\">{{ processingInfo.promptId }}</span>\n          </div>\n          <div v-if=\"processingInfo.processingTime > 0\" class=\"info-item\">\n            <span class=\"info-label\">处理时间:</span>\n            <span class=\"info-value\">{{ Math.floor(processingInfo.processingTime / 1000) }}秒</span>\n          </div>\n        </div>\n      </template>\n    </MobileStatusCard>\n\n    <!-- 结果展示 -->\n    <div v-if=\"resultData\" class=\"result-section\">\n      <slot name=\"result\" :result=\"resultData\" />\n    </div>\n  </MobilePageContainer>\n</template>\n\n<script setup>\nimport { computed } from 'vue'\nimport { MobilePageContainer, MobileActionButton, MobileStatusCard } from '../mobile'\n\n// Props\nconst props = defineProps({\n  // 页面基本信息\n  title: {\n    type: String,\n    required: true\n  },\n  description: {\n    type: String,\n    required: true\n  },\n  titleIcon: {\n    type: [String, Object],\n    default: null\n  },\n  titleIconName: {\n    type: String,\n    default: ''\n  },\n  titleIconColor: {\n    type: String,\n    default: 'var(--van-primary-color)'\n  },\n\n  // 处理状态\n  isProcessing: {\n    type: Boolean,\n    default: false\n  },\n  canProcess: {\n    type: Boolean,\n    default: false\n  },\n  showUploadTips: {\n    type: Boolean,\n    default: true\n  },\n\n  // 处理按钮\n  processButtonText: {\n    type: String,\n    default: '开始处理'\n  },\n  processButtonIcon: {\n    type: [String, Object],\n    default: null\n  },\n\n  // 处理进度\n  progress: {\n    type: Number,\n    default: 0\n  },\n  showProgress: {\n    type: Boolean,\n    default: true\n  },\n  processingTitle: {\n    type: String,\n    default: '正在处理...'\n  },\n  processingDescription: {\n    type: String,\n    default: '请耐心等待，处理时间可能需要几分钟'\n  },\n  processingInfo: {\n    type: Object,\n    default: () => ({})\n  },\n\n  // 结果数据\n  resultData: {\n    type: [Object, String],\n    default: null\n  }\n})\n\n// Events\ndefineEmits(['login', 'logout', 'process'])\n</script>\n\n<style scoped>\n/* 页面头部样式 */\n.ai-page-header {\n  text-align: center;\n  padding: 16px 0;\n  background: rgba(255, 255, 255, 0.1);\n  backdrop-filter: blur(10px);\n  -webkit-backdrop-filter: blur(10px);\n  border-radius: 16px;\n  margin-bottom: 20px;\n  border: 1px solid rgba(255, 255, 255, 0.2);\n  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);\n}\n\n.page-title {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 12px;\n  font-size: 18px;\n  font-weight: 700;\n  color: rgba(255, 255, 255, 0.95);\n  text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\n}\n\n/* 输入区域样式 */\n.input-section {\n  display: flex;\n  flex-direction: column;\n  gap: 20px;\n}\n\n.action-section {\n  padding: 0 16px;\n  margin-top: 24px;\n}\n\n/* 上传提示样式 */\n.upload-tips {\n  padding: 20px;\n  background: rgba(255, 255, 255, 0.1);\n  backdrop-filter: blur(10px);\n  -webkit-backdrop-filter: blur(10px);\n  border-radius: 12px;\n  margin-top: 20px;\n  border: 1px solid rgba(255, 255, 255, 0.2);\n  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.05);\n}\n\n/* 处理信息样式 */\n.processing-info {\n  margin-top: 16px;\n  padding: 16px;\n  background: rgba(255, 255, 255, 0.05);\n  border-radius: 8px;\n  border: 1px solid rgba(255, 255, 255, 0.1);\n}\n\n.info-item {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 6px 0;\n  font-size: 14px;\n}\n\n.info-label {\n  color: rgba(255, 255, 255, 0.7);\n}\n\n.info-value {\n  color: rgba(255, 255, 255, 0.9);\n  font-weight: 600;\n  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);\n}\n\n/* 结果区域样式 */\n.result-section {\n  margin-top: 24px;\n}\n\n/* 移动端优化 */\n@media (max-width: 768px) {\n  .ai-page-header {\n    padding: 12px 0;\n    margin-bottom: 16px;\n  }\n\n  .page-title {\n    font-size: 16px;\n    gap: 8px;\n  }\n\n  .input-section {\n    gap: 16px;\n  }\n\n  .action-section {\n    margin-top: 20px;\n  }\n\n  .upload-tips {\n    padding: 16px;\n    margin-top: 16px;\n  }\n}\n\n/* 深色主题适配 */\n@media (prefers-color-scheme: dark) {\n  .ai-page-header {\n    background: rgba(0, 0, 0, 0.3);\n    border: 1px solid rgba(255, 255, 255, 0.1);\n  }\n\n  .upload-tips {\n    background: rgba(0, 0, 0, 0.2);\n    border: 1px solid rgba(255, 255, 255, 0.1);\n  }\n\n  .processing-info {\n    background: rgba(0, 0, 0, 0.2);\n    border: 1px solid rgba(255, 255, 255, 0.05);\n  }\n}\n</style>\n"
        }
    ]
}