{
    "sourceFile": "client/src/components/MobileLayout.vue",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 5,
            "patches": [
                {
                    "date": 1752371122228,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1752371153305,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -106,15 +106,13 @@\n \n // 返回处理\n const handleBack = () => {\n   emit('back')\n-  // 如果没有监听back事件，则执行默认返回行为\n-  if (!emit('back')) {\n-    if (window.history.length > 1) {\n-      router.go(-1)\n-    } else {\n-      router.push('/')\n-    }\n+  // 默认返回行为\n+  if (window.history.length > 1) {\n+    router.go(-1)\n+  } else {\n+    router.push('/')\n   }\n }\n </script>\n \n"
                },
                {
                    "date": 1752371206233,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -36,10 +36,9 @@\n       <main class=\"mobile-content\" :class=\"{ 'no-header': !showHeader }\">\n         <slot />\n       </main>\n \n-      <!-- 底部导航 -->\n-      <MobileTabbar v-if=\"showTabbar\" />\n+      <!-- 底部导航 - 由各页面自己控制 -->\n     </div>\n \n     <!-- 浮动操作按钮 -->\n     <button\n"
                },
                {
                    "date": 1752371221566,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -54,9 +54,8 @@\n <script setup>\n import { computed } from 'vue'\n import { useRouter } from 'vue-router'\n import TopNavigation from './TopNavigation.vue'\n-import MobileTabbar from './MobileTabbar.vue'\n \n // Props\n const props = defineProps({\n   title: {\n"
                },
                {
                    "date": 1752372242637,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -19,10 +19,10 @@\n           <slot name=\"header-actions\">\n             <!-- 默认头部操作 -->\n             <TopNavigation\n               v-if=\"showTopNav\"\n-              @login=\"$emit('login')\"\n-              @logout=\"$emit('logout')\"\n+              @login=\"emit('login')\"\n+              @logout=\"emit('logout')\"\n             />\n           </slot>\n         </div>\n       </header>\n"
                },
                {
                    "date": 1752372259319,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -43,9 +43,9 @@\n     <!-- 浮动操作按钮 -->\n     <button\n       v-if=\"showFab\"\n       class=\"mobile-fab\"\n-      @click=\"$emit('fab-click')\"\n+      @click=\"emit('fab-click')\"\n     >\n       <van-icon :name=\"fabIcon\" size=\"24\" />\n     </button>\n   </div>\n"
                }
            ],
            "date": 1752371122228,
            "name": "Commit-0",
            "content": "<template>\n  <div class=\"mobile-layout\">\n    <!-- 移动端安全区域 -->\n    <div class=\"mobile-safe-area\">\n      <!-- 头部 -->\n      <header v-if=\"showHeader\" class=\"mobile-header\">\n        <div class=\"mobile-header-left\">\n          <van-icon\n            v-if=\"showBack\"\n            name=\"arrow-left\"\n            size=\"20\"\n            @click=\"handleBack\"\n            class=\"mobile-header-back\"\n          />\n          <h1 class=\"mobile-header-title\">{{ title }}</h1>\n        </div>\n\n        <div class=\"mobile-header-right\">\n          <slot name=\"header-actions\">\n            <!-- 默认头部操作 -->\n            <TopNavigation\n              v-if=\"showTopNav\"\n              @login=\"$emit('login')\"\n              @logout=\"$emit('logout')\"\n            />\n          </slot>\n        </div>\n      </header>\n\n      <!-- 状态栏 -->\n      <div v-if=\"statusMessage\" class=\"mobile-status-bar\" :class=\"statusType\">\n        {{ statusMessage }}\n      </div>\n\n      <!-- 主要内容区域 -->\n      <main class=\"mobile-content\" :class=\"{ 'no-header': !showHeader }\">\n        <slot />\n      </main>\n\n      <!-- 底部导航 -->\n      <MobileTabbar v-if=\"showTabbar\" />\n    </div>\n\n    <!-- 浮动操作按钮 -->\n    <button\n      v-if=\"showFab\"\n      class=\"mobile-fab\"\n      @click=\"$emit('fab-click')\"\n    >\n      <van-icon :name=\"fabIcon\" size=\"24\" />\n    </button>\n  </div>\n</template>\n\n<script setup>\nimport { computed } from 'vue'\nimport { useRouter } from 'vue-router'\nimport TopNavigation from './TopNavigation.vue'\nimport MobileTabbar from './MobileTabbar.vue'\n\n// Props\nconst props = defineProps({\n  title: {\n    type: String,\n    default: 'AI Magic'\n  },\n  showHeader: {\n    type: Boolean,\n    default: true\n  },\n  showBack: {\n    type: Boolean,\n    default: false\n  },\n  showTopNav: {\n    type: Boolean,\n    default: true\n  },\n  showTabbar: {\n    type: Boolean,\n    default: true\n  },\n  showFab: {\n    type: Boolean,\n    default: false\n  },\n  fabIcon: {\n    type: String,\n    default: 'plus'\n  },\n  statusMessage: {\n    type: String,\n    default: ''\n  },\n  statusType: {\n    type: String,\n    default: 'info', // info, success, warning, error\n    validator: (value) => ['info', 'success', 'warning', 'error'].includes(value)\n  }\n})\n\n// Emits\nconst emit = defineEmits(['login', 'logout', 'fab-click', 'back'])\n\nconst router = useRouter()\n\n// 返回处理\nconst handleBack = () => {\n  emit('back')\n  // 如果没有监听back事件，则执行默认返回行为\n  if (!emit('back')) {\n    if (window.history.length > 1) {\n      router.go(-1)\n    } else {\n      router.push('/')\n    }\n  }\n}\n</script>\n\n<style scoped>\n.mobile-layout {\n  min-height: 100vh;\n  background: var(--van-background-color);\n  position: relative;\n}\n\n.mobile-safe-area {\n  padding-top: env(safe-area-inset-top);\n  padding-bottom: env(safe-area-inset-bottom);\n  padding-left: env(safe-area-inset-left);\n  padding-right: env(safe-area-inset-right);\n  min-height: 100vh;\n}\n\n.mobile-header {\n  position: sticky;\n  top: 0;\n  z-index: 100;\n  background: rgba(255, 255, 255, 0.95);\n  backdrop-filter: blur(20px);\n  border-bottom: 1px solid var(--van-border-color);\n  padding: 12px 16px;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  min-height: 56px;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);\n}\n\n.mobile-header-left {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  flex: 1;\n}\n\n.mobile-header-back {\n  color: var(--van-primary-color);\n  cursor: pointer;\n  padding: 4px;\n  border-radius: 6px;\n  transition: background-color 0.2s;\n}\n\n.mobile-header-back:active {\n  background: rgba(25, 137, 250, 0.1);\n}\n\n.mobile-header-title {\n  font-size: 18px;\n  font-weight: 600;\n  color: var(--van-text-color);\n  margin: 0;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.mobile-header-right {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  flex-shrink: 0;\n}\n\n.mobile-status-bar {\n  background: var(--van-primary-color);\n  color: white;\n  padding: 8px 16px;\n  font-size: 14px;\n  text-align: center;\n  position: relative;\n  animation: slideDown 0.3s ease-out;\n}\n\n.mobile-status-bar.success {\n  background: var(--van-success-color);\n}\n\n.mobile-status-bar.warning {\n  background: var(--van-warning-color);\n}\n\n.mobile-status-bar.error {\n  background: var(--van-danger-color);\n}\n\n.mobile-content {\n  padding: 16px;\n  padding-bottom: 80px; /* 为底部导航留空间 */\n  min-height: calc(100vh - 56px);\n}\n\n.mobile-content.no-header {\n  min-height: 100vh;\n  padding-top: 20px;\n}\n\n.mobile-fab {\n  position: fixed;\n  bottom: 90px;\n  right: 16px;\n  width: 56px;\n  height: 56px;\n  border-radius: 50%;\n  background: var(--van-primary-color);\n  color: white;\n  border: none;\n  box-shadow: 0 4px 16px rgba(25, 137, 250, 0.3);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  z-index: 999;\n}\n\n.mobile-fab:hover {\n  transform: scale(1.1);\n  box-shadow: 0 6px 20px rgba(25, 137, 250, 0.4);\n}\n\n.mobile-fab:active {\n  transform: scale(0.95);\n}\n\n@keyframes slideDown {\n  from {\n    transform: translateY(-100%);\n    opacity: 0;\n  }\n  to {\n    transform: translateY(0);\n    opacity: 1;\n  }\n}\n\n/* 暗黑主题适配 */\n@media (prefers-color-scheme: dark) {\n  .mobile-header {\n    background: rgba(26, 26, 26, 0.95);\n    border-bottom-color: var(--van-border-color);\n  }\n}\n\n/* 小屏幕适配 */\n@media (max-width: 480px) {\n  .mobile-content {\n    padding: 12px;\n    padding-bottom: 80px;\n  }\n\n  .mobile-header {\n    padding: 8px 12px;\n  }\n\n  .mobile-header-title {\n    font-size: 16px;\n  }\n\n  .mobile-fab {\n    width: 48px;\n    height: 48px;\n    bottom: 85px;\n    right: 12px;\n  }\n}\n</style>\n"
        }
    ]
}