{
    "sourceFile": "client/src/utils/loadBalancerTest.js",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 2,
            "patches": [
                {
                    "date": 1752518873242,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1752518892851,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -33,22 +33,19 @@\n   }\n }\n \n /**\n- * æ¨¡æ‹ŸæœåŠ¡å™¨å¤±è´¥\n+ * æµ‹è¯•ç›´æ¥è¿æ¥\n  */\n-export async function simulateServerFailure(serverUrl) {\n-  console.log(`ğŸ”¥ æ¨¡æ‹ŸæœåŠ¡å™¨å¤±è´¥: ${serverUrl}`)\n+export async function testDirectConnection(serverUrl) {\n+  console.log(`ğŸ”— æµ‹è¯•ç›´æ¥è¿æ¥: ${serverUrl}`)\n \n   try {\n-    await loadBalancer.recordFailure(serverUrl)\n-    console.log('âœ… æœåŠ¡å™¨å¤±è´¥è®°å½•å®Œæˆ')\n+    const result = await loadBalancer.testDirectConnection(serverUrl)\n+    console.log('âœ… è¿æ¥æµ‹è¯•ç»“æœ:', result)\n \n-    // æ˜¾ç¤ºæ›´æ–°åçš„çŠ¶æ€\n-    loadBalancer.logServerStatus()\n-\n   } catch (error) {\n-    console.error('âŒ æ¨¡æ‹ŸæœåŠ¡å™¨å¤±è´¥æ—¶å‡ºé”™:', error)\n+    console.error('âŒ è¿æ¥æµ‹è¯•å¤±è´¥:', error)\n   }\n }\n \n /**\n"
                },
                {
                    "date": 1752518916123,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -53,13 +53,13 @@\n  */\n export function exposeTestFunctions() {\n   if (typeof window !== 'undefined') {\n     window.testLoadBalancer = testLoadBalancer\n-    window.simulateServerFailure = simulateServerFailure\n+    window.testDirectConnection = testDirectConnection\n     window.loadBalancer = loadBalancer\n \n     console.log('ğŸ”§ è´Ÿè½½å‡è¡¡å™¨æµ‹è¯•å‡½æ•°å·²æš´éœ²åˆ°å…¨å±€:')\n     console.log('   - testLoadBalancer(): æµ‹è¯•è´Ÿè½½å‡è¡¡å™¨')\n-    console.log('   - simulateServerFailure(url): æ¨¡æ‹ŸæœåŠ¡å™¨å¤±è´¥')\n+    console.log('   - testDirectConnection(url): æµ‹è¯•ç›´æ¥è¿æ¥')\n     console.log('   - loadBalancer: è´Ÿè½½å‡è¡¡å™¨å®ä¾‹')\n   }\n }\n"
                }
            ],
            "date": 1752518873242,
            "name": "Commit-0",
            "content": "// è´Ÿè½½å‡è¡¡å™¨æµ‹è¯•å·¥å…·\nimport loadBalancer from '../services/loadBalancer.js'\n\n/**\n * æµ‹è¯•è´Ÿè½½å‡è¡¡å™¨åŠŸèƒ½\n */\nexport async function testLoadBalancer() {\n  console.log('ğŸ§ª å¼€å§‹æµ‹è¯•è´Ÿè½½å‡è¡¡å™¨...')\n\n  try {\n    // 1. åˆå§‹åŒ–è´Ÿè½½å‡è¡¡å™¨\n    console.log('\\nğŸ”§ åˆå§‹åŒ–è´Ÿè½½å‡è¡¡å™¨:')\n    await loadBalancer.initialize()\n\n    // 2. æµ‹è¯•æœåŠ¡å™¨è¿æ¥\n    console.log('\\nğŸ” æµ‹è¯•æœåŠ¡å™¨è¿æ¥:')\n    await loadBalancer.initializeServerConnection()\n\n    // 3. æµ‹è¯•æœåŠ¡å™¨é€‰æ‹©\n    console.log('\\nğŸ¯ æµ‹è¯•æœåŠ¡å™¨é€‰æ‹©:')\n    for (let i = 0; i < 3; i++) {\n      const server = await loadBalancer.getOptimalServer()\n      console.log(`   ç¬¬${i + 1}æ¬¡é€‰æ‹©: ${server}`)\n\n      // ç­‰å¾…ä¸€ç§’\n      await new Promise(resolve => setTimeout(resolve, 1000))\n    }\n\n    console.log('\\nâœ… è´Ÿè½½å‡è¡¡å™¨æµ‹è¯•å®Œæˆ')\n\n  } catch (error) {\n    console.error('âŒ è´Ÿè½½å‡è¡¡å™¨æµ‹è¯•å¤±è´¥:', error)\n  }\n}\n\n/**\n * æ¨¡æ‹ŸæœåŠ¡å™¨å¤±è´¥\n */\nexport async function simulateServerFailure(serverUrl) {\n  console.log(`ğŸ”¥ æ¨¡æ‹ŸæœåŠ¡å™¨å¤±è´¥: ${serverUrl}`)\n\n  try {\n    await loadBalancer.recordFailure(serverUrl)\n    console.log('âœ… æœåŠ¡å™¨å¤±è´¥è®°å½•å®Œæˆ')\n\n    // æ˜¾ç¤ºæ›´æ–°åçš„çŠ¶æ€\n    loadBalancer.logServerStatus()\n\n  } catch (error) {\n    console.error('âŒ æ¨¡æ‹ŸæœåŠ¡å™¨å¤±è´¥æ—¶å‡ºé”™:', error)\n  }\n}\n\n/**\n * åœ¨æµè§ˆå™¨æ§åˆ¶å°ä¸­æš´éœ²æµ‹è¯•å‡½æ•°\n */\nexport function exposeTestFunctions() {\n  if (typeof window !== 'undefined') {\n    window.testLoadBalancer = testLoadBalancer\n    window.simulateServerFailure = simulateServerFailure\n    window.loadBalancer = loadBalancer\n\n    console.log('ğŸ”§ è´Ÿè½½å‡è¡¡å™¨æµ‹è¯•å‡½æ•°å·²æš´éœ²åˆ°å…¨å±€:')\n    console.log('   - testLoadBalancer(): æµ‹è¯•è´Ÿè½½å‡è¡¡å™¨')\n    console.log('   - simulateServerFailure(url): æ¨¡æ‹ŸæœåŠ¡å™¨å¤±è´¥')\n    console.log('   - loadBalancer: è´Ÿè½½å‡è¡¡å™¨å®ä¾‹')\n  }\n}\n"
        }
    ]
}