{
    "sourceFile": "client/vite.config.js",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 9,
            "patches": [
                {
                    "date": 1752284292222,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1752319383518,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -11,9 +11,9 @@\n       port: 3001,\r\n       open: true,\r\n       proxy: {\r\n         '/api': {\r\n-          target: 'http://localhost:3006',\r\n+          target: 'http://localhost:3007',\r\n           changeOrigin: true,\r\n           secure: false,\r\n           configure: (proxy, options) => {\r\n             proxy.on('error', (err, req, res) => {\r\n"
                },
                {
                    "date": 1752340705793,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,9 +1,11 @@\n-import { defineConfig } from 'vite'\r\n+import { defineConfig, loadEnv } from 'vite'\r\n import vue from '@vitejs/plugin-vue'\r\n \r\n // https://vitejs.dev/config/\r\n export default defineConfig(({ command, mode }) => {\r\n+  const env = loadEnv(mode, process.cwd(), '')\r\n+\r\n   return {\r\n     plugins: [vue()],\r\n \r\n     // å¼€å‘æœåŠ¡å™¨é…ç½®\r\n"
                },
                {
                    "date": 1752340904756,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -2,20 +2,25 @@\n import vue from '@vitejs/plugin-vue'\r\n \r\n // https://vitejs.dev/config/\r\n export default defineConfig(({ command, mode }) => {\r\n+  // åŠ è½½ç¯å¢ƒå˜é‡\r\n   const env = loadEnv(mode, process.cwd(), '')\r\n \r\n+  // ä»ç¯å¢ƒå˜é‡è·å–ç«¯å£ï¼Œå¦‚æœæ²¡æœ‰åˆ™ä½¿ç”¨é»˜è®¤å€¼\r\n+  const clientPort = parseInt(env.CLIENT_PORT) || 3001\r\n+  const serverPort = parseInt(env.SERVER_PORT) || 3007\r\n+\r\n   return {\r\n     plugins: [vue()],\r\n \r\n     // å¼€å‘æœåŠ¡å™¨é…ç½®\r\n     server: {\r\n-      port: 3001,\r\n+      port: clientPort,\r\n       open: true,\r\n       proxy: {\r\n         '/api': {\r\n-          target: 'http://localhost:3007',\r\n+          target: `http://localhost:${serverPort}`,\r\n           changeOrigin: true,\r\n           secure: false,\r\n           configure: (proxy, options) => {\r\n             proxy.on('error', (err, req, res) => {\r\n"
                },
                {
                    "date": 1752352002618,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -15,8 +15,9 @@\n \r\n     // å¼€å‘æœåŠ¡å™¨é…ç½®\r\n     server: {\r\n       port: clientPort,\r\n+      host: '0.0.0.0',\r\n       open: true,\r\n       proxy: {\r\n         '/api': {\r\n           target: `http://localhost:${serverPort}`,\r\n"
                },
                {
                    "date": 1752354037917,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -15,9 +15,8 @@\n \r\n     // å¼€å‘æœåŠ¡å™¨é…ç½®\r\n     server: {\r\n       port: clientPort,\r\n-      host: '0.0.0.0',\r\n       open: true,\r\n       proxy: {\r\n         '/api': {\r\n           target: `http://localhost:${serverPort}`,\r\n"
                },
                {
                    "date": 1753714218364,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -43,10 +43,10 @@\n       sourcemap: false,\r\n       assetsDir: 'assets'\r\n     },\r\n \r\n-    // åŸºç¡€è·¯å¾„é…ç½® - è‡ªå®šä¹‰åŸŸåä½¿ç”¨æ ¹è·¯å¾„\r\n-    base: '/',\r\n+    // åŸºç¡€è·¯å¾„é…ç½® - GitHub Pageså­ç›®å½•éƒ¨ç½²\r\n+    base: process.env.NODE_ENV === 'production' ? '/undress/' : '/',\r\n \r\n     // ç¯å¢ƒå˜é‡é…ç½®\r\n     define: {\r\n       __VUE_PROD_DEVTOOLS__: false,\r\n"
                },
                {
                    "date": 1753714473531,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -43,10 +43,12 @@\n       sourcemap: false,\r\n       assetsDir: 'assets'\r\n     },\r\n \r\n-    // åŸºç¡€è·¯å¾„é…ç½® - GitHub Pageså­ç›®å½•éƒ¨ç½²\r\n-    base: process.env.NODE_ENV === 'production' ? '/undress/' : '/',\r\n+    // åŸºç¡€è·¯å¾„é…ç½® - æ ¹æ®éƒ¨ç½²ç›®æ ‡åŠ¨æ€è®¾ç½®\r\n+    // å¦‚æœè®¾ç½®äº†GITHUB_PAGES_SUBDIRECTORYç¯å¢ƒå˜é‡ï¼Œä½¿ç”¨å­ç›®å½•è·¯å¾„\r\n+    // å¦åˆ™ä½¿ç”¨æ ¹è·¯å¾„ï¼ˆé€‚ç”¨äºè‡ªå®šä¹‰åŸŸåï¼‰\r\n+    base: process.env.GITHUB_PAGES_SUBDIRECTORY === 'true' ? '/undress/' : '/',\r\n \r\n     // ç¯å¢ƒå˜é‡é…ç½®\r\n     define: {\r\n       __VUE_PROD_DEVTOOLS__: false,\r\n"
                },
                {
                    "date": 1753716149231,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -43,12 +43,10 @@\n       sourcemap: false,\r\n       assetsDir: 'assets'\r\n     },\r\n \r\n-    // åŸºç¡€è·¯å¾„é…ç½® - æ ¹æ®éƒ¨ç½²ç›®æ ‡åŠ¨æ€è®¾ç½®\r\n-    // å¦‚æœè®¾ç½®äº†GITHUB_PAGES_SUBDIRECTORYç¯å¢ƒå˜é‡ï¼Œä½¿ç”¨å­ç›®å½•è·¯å¾„\r\n-    // å¦åˆ™ä½¿ç”¨æ ¹è·¯å¾„ï¼ˆé€‚ç”¨äºè‡ªå®šä¹‰åŸŸåï¼‰\r\n-    base: process.env.GITHUB_PAGES_SUBDIRECTORY === 'true' ? '/undress/' : '/',\r\n+    // åŸºç¡€è·¯å¾„é…ç½® - GitHub Pageså­ç›®å½•éƒ¨ç½²\r\n+    base: '/undress/',\r\n \r\n     // ç¯å¢ƒå˜é‡é…ç½®\r\n     define: {\r\n       __VUE_PROD_DEVTOOLS__: false,\r\n"
                },
                {
                    "date": 1753718073559,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,7 +1,21 @@\n import { defineConfig, loadEnv } from 'vite'\r\n import vue from '@vitejs/plugin-vue'\r\n \r\n+// éƒ¨ç½²é…ç½®\r\n+const deploymentConfig = {\r\n+  // è‡ªå®šä¹‰åŸŸåéƒ¨ç½² (undress.icomfy.co)\r\n+  custom: {\r\n+    base: '/',\r\n+    publicPath: '/'\r\n+  },\r\n+  // GitHub Pages å­ç›®å½•éƒ¨ç½² (fooldychi.github.io/undress/)\r\n+  github: {\r\n+    base: '/undress/',\r\n+    publicPath: '/undress/'\r\n+  }\r\n+}\r\n+\r\n // https://vitejs.dev/config/\r\n export default defineConfig(({ command, mode }) => {\r\n   // åŠ è½½ç¯å¢ƒå˜é‡\r\n   const env = loadEnv(mode, process.cwd(), '')\r\n@@ -9,8 +23,16 @@\n   // ä»ç¯å¢ƒå˜é‡è·å–ç«¯å£ï¼Œå¦‚æœæ²¡æœ‰åˆ™ä½¿ç”¨é»˜è®¤å€¼\r\n   const clientPort = parseInt(env.CLIENT_PORT) || 3001\r\n   const serverPort = parseInt(env.SERVER_PORT) || 3007\r\n \r\n+  // ç¡®å®šéƒ¨ç½²ç±»å‹\r\n+  const deployType = env.VITE_DEPLOY_TYPE || 'custom'\r\n+  const config = deploymentConfig[deployType] || deploymentConfig.custom\r\n+\r\n+  console.log(`ğŸš€ æ„å»ºæ¨¡å¼: ${mode}`)\r\n+  console.log(`ğŸ“¦ éƒ¨ç½²ç±»å‹: ${deployType}`)\r\n+  console.log(`ğŸŒ åŸºç¡€è·¯å¾„: ${config.base}`)\r\n+\r\n   return {\r\n     plugins: [vue()],\r\n \r\n     // å¼€å‘æœåŠ¡å™¨é…ç½®\r\n@@ -43,15 +65,17 @@\n       sourcemap: false,\r\n       assetsDir: 'assets'\r\n     },\r\n \r\n-    // åŸºç¡€è·¯å¾„é…ç½® - GitHub Pageså­ç›®å½•éƒ¨ç½²\r\n-    base: '/undress/',\r\n+    // åŠ¨æ€åŸºç¡€è·¯å¾„é…ç½®\r\n+    base: config.base,\r\n \r\n     // ç¯å¢ƒå˜é‡é…ç½®\r\n     define: {\r\n       __VUE_PROD_DEVTOOLS__: false,\r\n-      __VUE_OPTIONS_API__: true\r\n+      __VUE_OPTIONS_API__: true,\r\n+      __DEPLOY_TYPE__: JSON.stringify(deployType),\r\n+      __PUBLIC_PATH__: JSON.stringify(config.publicPath)\r\n     }\r\n   }\r\n })\r\n \r\n"
                }
            ],
            "date": 1752284292222,
            "name": "Commit-0",
            "content": "import { defineConfig } from 'vite'\r\nimport vue from '@vitejs/plugin-vue'\r\n\r\n// https://vitejs.dev/config/\r\nexport default defineConfig(({ command, mode }) => {\r\n  return {\r\n    plugins: [vue()],\r\n\r\n    // å¼€å‘æœåŠ¡å™¨é…ç½®\r\n    server: {\r\n      port: 3001,\r\n      open: true,\r\n      proxy: {\r\n        '/api': {\r\n          target: 'http://localhost:3006',\r\n          changeOrigin: true,\r\n          secure: false,\r\n          configure: (proxy, options) => {\r\n            proxy.on('error', (err, req, res) => {\r\n              console.log('proxy error', err);\r\n            });\r\n            proxy.on('proxyReq', (proxyReq, req, res) => {\r\n              console.log('Sending Request to the Target:', req.method, req.url);\r\n            });\r\n            proxy.on('proxyRes', (proxyRes, req, res) => {\r\n              console.log('Received Response from the Target:', proxyRes.statusCode, req.url);\r\n            });\r\n          }\r\n        }\r\n      }\r\n    },\r\n\r\n    // æ„å»ºé…ç½®\r\n    build: {\r\n      outDir: 'dist',\r\n      sourcemap: false,\r\n      assetsDir: 'assets'\r\n    },\r\n\r\n    // åŸºç¡€è·¯å¾„é…ç½® - è‡ªå®šä¹‰åŸŸåä½¿ç”¨æ ¹è·¯å¾„\r\n    base: '/',\r\n\r\n    // ç¯å¢ƒå˜é‡é…ç½®\r\n    define: {\r\n      __VUE_PROD_DEVTOOLS__: false,\r\n      __VUE_OPTIONS_API__: true\r\n    }\r\n  }\r\n})\r\n\r\n\r\n"
        }
    ]
}