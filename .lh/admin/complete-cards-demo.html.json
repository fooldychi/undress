{
    "sourceFile": "admin/complete-cards-demo.html",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 5,
            "patches": [
                {
                    "date": 1752324476375,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1752324504912,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -89,11 +89,10 @@\n                     </el-button>\n                 </div>\n \n                 <el-table :data=\"cardList\" v-loading=\"loading\" border style=\"width: 100%\">\n-                    <el-table-column prop=\"card_number\" label=\"Âç°Âè∑\" width=\"150\" />\n-                    <el-table-column prop=\"card_password\" label=\"Âç°ÂØÜ\" width=\"120\" />\n-                    <el-table-column label=\"Á±ªÂûã\" width=\"100\">\n+                    <el-table-column prop=\"card_number\" label=\"Âç°Âè∑\" width=\"180\" />\n+                    <el-table-column label=\"Á±ªÂûã\" width=\"120\">\n                         <template #default=\"{ row }\">\n                             <span>{{ row.icon }} {{ row.type_name }}</span>\n                         </template>\n                     </el-table-column>\n@@ -123,19 +122,26 @@\n                         <template #default=\"{ row }\">\n                             {{ formatDate(row.created_at) }}\n                         </template>\n                     </el-table-column>\n-                    <el-table-column label=\"Êìç‰Ωú\" width=\"120\" fixed=\"right\">\n+                    <el-table-column label=\"Êìç‰Ωú\" width=\"150\" fixed=\"right\">\n                         <template #default=\"{ row }\">\n                             <el-button\n+                                type=\"text\"\n+                                size=\"small\"\n+                                @click=\"copyCardInfo(row)\"\n+                            >\n+                                <el-icon><DocumentCopy /></el-icon>\n+                                Â§çÂà∂Âç°ÂØÜ\n+                            </el-button>\n+                            <el-button\n                                 v-if=\"row.bound_user_id\"\n                                 type=\"text\"\n                                 size=\"small\"\n                                 @click=\"handleUnbind(row)\"\n                             >\n                                 Ëß£Áªë\n                             </el-button>\n-                            <span v-else class=\"no-action\">Êó†Êìç‰Ωú</span>\n                         </template>\n                     </el-table-column>\n                 </el-table>\n             </div>\n"
                },
                {
                    "date": 1752324518683,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -145,24 +145,10 @@\n                     </el-table-column>\n                 </el-table>\n             </div>\n \n-            <!-- ÁîüÊàê‰ΩìÈ™åÂç°ÂºπÁ™ó -->\n-            <el-dialog v-model=\"generateDialogVisible\" title=\"ÁîüÊàê‰ΩìÈ™åÂç°\" width=\"400px\">\n-                <el-form :model=\"generateForm\" label-width=\"80px\">\n-                    <el-form-item label=\"Êï∞Èáè\">\n-                        <el-input-number v-model=\"generateForm.count\" :min=\"1\" :max=\"100\" />\n-                    </el-form-item>\n-                    <el-form-item label=\"ÁßØÂàÜ\">\n-                        <el-input-number v-model=\"generateForm.points\" :min=\"1\" :max=\"1000\" />\n-                    </el-form-item>\n-                </el-form>\n-                <template #footer>\n-                    <el-button @click=\"generateDialogVisible = false\">ÂèñÊ∂à</el-button>\n-                    <el-button type=\"primary\" @click=\"handleGenerate\">ÁîüÊàê</el-button>\n-                </template>\n-            </el-dialog>\n \n+\n             <!-- ÊâπÈáèÁîüÊàêÁ≠âÁ∫ßÂç°ÂºπÁ™ó -->\n             <el-dialog\n                 v-model=\"batchGenerateDialogVisible\"\n                 title=\"ÊâπÈáèÁîüÊàêÁ≠âÁ∫ßÂç°\"\n"
                },
                {
                    "date": 1752324545827,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -246,9 +246,8 @@\n             setup() {\n                 // ÂìçÂ∫îÂºèÊï∞ÊçÆ\n                 const loading = ref(false);\n                 const cardList = ref([]);\n-                const generateDialogVisible = ref(false);\n                 const batchGenerateDialogVisible = ref(false);\n                 const cardTypes = ref([]);\n                 const cardTypesLoading = ref(false);\n                 const batchGenerating = ref(false);\n@@ -256,13 +255,8 @@\n                 const resultDialogTitle = ref('');\n                 const generatedCards = ref([]);\n                 const selectedCardTypeName = ref('');\n \n-                const generateForm = reactive({\n-                    count: 10,\n-                    points: 100\n-                });\n-\n                 const batchGenerateForm = reactive({\n                     cardTypeId: null,\n                     count: 5\n                 });\n"
                },
                {
                    "date": 1752324579359,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -334,10 +334,35 @@\n                         loading.value = false;\n                     }\n                 };\n \n-                const showGenerateDialog = () => {\n-                    generateDialogVisible.value = true;\n+                // Â§çÂà∂Âç°Âè∑Âç°ÂØÜ\n+                const copyCardInfo = async (row) => {\n+                    try {\n+                        const copyText = `Âç°Âè∑: ${row.card_number}\\nÂç°ÂØÜ: ${row.card_password}\\nÁ±ªÂûã: ${row.type_name}\\nÁßØÂàÜ: ${row.remaining_points}/${row.total_points}\\n‰ª∑Ê†º: ¬•${row.price}`;\n+\n+                        // ‰ΩøÁî®Áé∞‰ª£ÊµèËßàÂô®ÁöÑ Clipboard API\n+                        if (navigator.clipboard && window.isSecureContext) {\n+                            await navigator.clipboard.writeText(copyText);\n+                        } else {\n+                            // ÈôçÁ∫ßÊñπÊ°àÔºö‰ΩøÁî®‰º†ÁªüÁöÑ document.execCommand\n+                            const textArea = document.createElement('textarea');\n+                            textArea.value = copyText;\n+                            textArea.style.position = 'fixed';\n+                            textArea.style.left = '-999999px';\n+                            textArea.style.top = '-999999px';\n+                            document.body.appendChild(textArea);\n+                            textArea.focus();\n+                            textArea.select();\n+                            document.execCommand('copy');\n+                            document.body.removeChild(textArea);\n+                        }\n+\n+                        ElMessage.success('Âç°Âè∑Âç°ÂØÜÂ∑≤Â§çÂà∂Âà∞Ââ™Ë¥¥Êùø');\n+                    } catch (error) {\n+                        console.error('Â§çÂà∂Â§±Ë¥•:', error);\n+                        ElMessage.error('Â§çÂà∂Â§±Ë¥•ÔºåËØ∑ÊâãÂä®Â§çÂà∂');\n+                    }\n                 };\n \n                 const showBatchGenerateDialog = async () => {\n                     await loadCardTypes();\n@@ -357,21 +382,8 @@\n                         cardTypesLoading.value = false;\n                     }\n                 };\n \n-                const handleGenerate = async () => {\n-                    try {\n-                        // Ê®°ÊãüÁîüÊàê‰ΩìÈ™åÂç°\n-                        await new Promise(resolve => setTimeout(resolve, 800));\n-                        ElMessage.success(`Â∑≤ÁîüÊàê ${generateForm.count} Âº†‰ΩìÈ™åÂç°`);\n-                        generateDialogVisible.value = false;\n-                        loadCards();\n-                    } catch (error) {\n-                        console.error('ÁîüÊàê‰ΩìÈ™åÂç°Â§±Ë¥•:', error);\n-                        ElMessage.error('ÁîüÊàê‰ΩìÈ™åÂç°Â§±Ë¥•');\n-                    }\n-                };\n-\n                 const handleBatchGenerate = async () => {\n                     if (!batchGenerateForm.cardTypeId) {\n                         ElMessage.warning('ËØ∑ÈÄâÊã©Á≠âÁ∫ßÂç°Á±ªÂûã');\n                         return;\n"
                },
                {
                    "date": 1752324608232,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -491,24 +491,21 @@\n \n                 return {\n                     loading,\n                     cardList,\n-                    generateDialogVisible,\n                     batchGenerateDialogVisible,\n                     cardTypes,\n                     cardTypesLoading,\n                     batchGenerating,\n                     resultDialogVisible,\n                     resultDialogTitle,\n                     generatedCards,\n                     selectedCardTypeName,\n-                    generateForm,\n                     batchGenerateForm,\n                     formatDate,\n                     loadCards,\n-                    showGenerateDialog,\n+                    copyCardInfo,\n                     showBatchGenerateDialog,\n-                    handleGenerate,\n                     handleBatchGenerate,\n                     copyAllCards,\n                     handleUnbind\n                 };\n"
                }
            ],
            "date": 1752324476375,
            "name": "Commit-0",
            "content": "<!DOCTYPE html>\n<html lang=\"zh-CN\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Á≠âÁ∫ßÂç°ÁÆ°ÁêÜÁ≥ªÁªü - ÂÆåÊï¥ÊºîÁ§∫</title>\n    <link rel=\"stylesheet\" href=\"https://unpkg.com/element-plus/dist/index.css\">\n    <script src=\"https://unpkg.com/vue@3/dist/vue.global.js\"></script>\n    <script src=\"https://unpkg.com/element-plus/dist/index.full.js\"></script>\n    <style>\n        body {\n            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n            margin: 0;\n            padding: 20px;\n            background-color: #f5f7fa;\n        }\n        .cards-page {\n            max-width: 1400px;\n            margin: 0 auto;\n        }\n        .page-header {\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            margin-bottom: 20px;\n            padding: 20px;\n            background: white;\n            border-radius: 8px;\n            box-shadow: 0 2px 12px rgba(0,0,0,0.1);\n        }\n        .header-actions {\n            display: flex;\n            gap: 12px;\n        }\n        .page-title {\n            font-size: 24px;\n            font-weight: 600;\n            color: #303133;\n            margin: 0;\n        }\n        .cards-table-container {\n            background: white;\n            padding: 20px;\n            border-radius: 8px;\n            box-shadow: 0 2px 12px rgba(0,0,0,0.1);\n        }\n        .no-action {\n            color: #c0c4cc;\n            font-size: 12px;\n        }\n        .cards-table {\n            max-height: 400px;\n            overflow-y: auto;\n        }\n        .result-summary {\n            margin-bottom: 16px;\n        }\n        .dialog-footer {\n            display: flex;\n            justify-content: flex-end;\n            gap: 12px;\n        }\n        .status-tag {\n            font-size: 12px;\n        }\n    </style>\n</head>\n<body>\n    <div id=\"app\">\n        <div class=\"cards-page\">\n            <!-- È°µÈù¢Â§¥ÈÉ® -->\n            <div class=\"page-header\">\n                <h1 class=\"page-title\">üé´ Á≠âÁ∫ßÂç°ÁÆ°ÁêÜ</h1>\n                <div class=\"header-actions\">\n                    <el-button type=\"primary\" @click=\"showBatchGenerateDialog\">\n                        <el-icon><Plus /></el-icon>\n                        ÊâπÈáèÁîüÊàêÁ≠âÁ∫ßÂç°\n                    </el-button>\n                </div>\n            </div>\n\n            <!-- Á≠âÁ∫ßÂç°ÂàóË°® -->\n            <div class=\"cards-table-container\">\n                <div style=\"margin-bottom: 16px; display: flex; justify-content: space-between; align-items: center;\">\n                    <h3 style=\"margin: 0;\">Á≠âÁ∫ßÂç°ÂàóË°®</h3>\n                    <el-button @click=\"loadCards\" :loading=\"loading\">\n                        <el-icon><Refresh /></el-icon>\n                        Âà∑Êñ∞\n                    </el-button>\n                </div>\n\n                <el-table :data=\"cardList\" v-loading=\"loading\" border style=\"width: 100%\">\n                    <el-table-column prop=\"card_number\" label=\"Âç°Âè∑\" width=\"150\" />\n                    <el-table-column prop=\"card_password\" label=\"Âç°ÂØÜ\" width=\"120\" />\n                    <el-table-column label=\"Á±ªÂûã\" width=\"100\">\n                        <template #default=\"{ row }\">\n                            <span>{{ row.icon }} {{ row.type_name }}</span>\n                        </template>\n                    </el-table-column>\n                    <el-table-column prop=\"total_points\" label=\"ÊÄªÁßØÂàÜ\" width=\"100\" />\n                    <el-table-column prop=\"remaining_points\" label=\"Ââ©‰ΩôÁßØÂàÜ\" width=\"100\" />\n                    <el-table-column prop=\"price\" label=\"‰ª∑Ê†º\" width=\"100\">\n                        <template #default=\"{ row }\">\n                            ¬•{{ row.price }}\n                        </template>\n                    </el-table-column>\n                    <el-table-column label=\"Áä∂ÊÄÅ\" width=\"100\">\n                        <template #default=\"{ row }\">\n                            <el-tag\n                                :type=\"row.bound_user_id ? 'success' : 'info'\"\n                                class=\"status-tag\"\n                            >\n                                {{ row.bound_user_id ? 'Â∑≤ÁªëÂÆö' : 'Êú™ÁªëÂÆö' }}\n                            </el-tag>\n                        </template>\n                    </el-table-column>\n                    <el-table-column prop=\"bound_username\" label=\"ÁªëÂÆöÁî®Êà∑\" width=\"120\">\n                        <template #default=\"{ row }\">\n                            {{ row.bound_username || '-' }}\n                        </template>\n                    </el-table-column>\n                    <el-table-column prop=\"created_at\" label=\"ÂàõÂª∫Êó∂Èó¥\" width=\"180\">\n                        <template #default=\"{ row }\">\n                            {{ formatDate(row.created_at) }}\n                        </template>\n                    </el-table-column>\n                    <el-table-column label=\"Êìç‰Ωú\" width=\"120\" fixed=\"right\">\n                        <template #default=\"{ row }\">\n                            <el-button\n                                v-if=\"row.bound_user_id\"\n                                type=\"text\"\n                                size=\"small\"\n                                @click=\"handleUnbind(row)\"\n                            >\n                                Ëß£Áªë\n                            </el-button>\n                            <span v-else class=\"no-action\">Êó†Êìç‰Ωú</span>\n                        </template>\n                    </el-table-column>\n                </el-table>\n            </div>\n\n            <!-- ÁîüÊàê‰ΩìÈ™åÂç°ÂºπÁ™ó -->\n            <el-dialog v-model=\"generateDialogVisible\" title=\"ÁîüÊàê‰ΩìÈ™åÂç°\" width=\"400px\">\n                <el-form :model=\"generateForm\" label-width=\"80px\">\n                    <el-form-item label=\"Êï∞Èáè\">\n                        <el-input-number v-model=\"generateForm.count\" :min=\"1\" :max=\"100\" />\n                    </el-form-item>\n                    <el-form-item label=\"ÁßØÂàÜ\">\n                        <el-input-number v-model=\"generateForm.points\" :min=\"1\" :max=\"1000\" />\n                    </el-form-item>\n                </el-form>\n                <template #footer>\n                    <el-button @click=\"generateDialogVisible = false\">ÂèñÊ∂à</el-button>\n                    <el-button type=\"primary\" @click=\"handleGenerate\">ÁîüÊàê</el-button>\n                </template>\n            </el-dialog>\n\n            <!-- ÊâπÈáèÁîüÊàêÁ≠âÁ∫ßÂç°ÂºπÁ™ó -->\n            <el-dialog\n                v-model=\"batchGenerateDialogVisible\"\n                title=\"ÊâπÈáèÁîüÊàêÁ≠âÁ∫ßÂç°\"\n                width=\"500px\"\n                :close-on-click-modal=\"false\"\n            >\n                <el-form :model=\"batchGenerateForm\" label-width=\"100px\">\n                    <el-form-item label=\"Á≠âÁ∫ßÂç°Á±ªÂûã\" required>\n                        <el-select\n                            v-model=\"batchGenerateForm.cardTypeId\"\n                            placeholder=\"ËØ∑ÈÄâÊã©Á≠âÁ∫ßÂç°Á±ªÂûã\"\n                            style=\"width: 100%\"\n                            :loading=\"cardTypesLoading\"\n                        >\n                            <el-option\n                                v-for=\"cardType in cardTypes\"\n                                :key=\"cardType.id\"\n                                :label=\"`${cardType.icon} ${cardType.name} (${cardType.points}ÁßØÂàÜ - ¬•${cardType.price})`\"\n                                :value=\"cardType.id\"\n                            />\n                        </el-select>\n                    </el-form-item>\n                    <el-form-item label=\"ÁîüÊàêÊï∞Èáè\" required>\n                        <el-input-number\n                            v-model=\"batchGenerateForm.count\"\n                            :min=\"1\"\n                            :max=\"100\"\n                            style=\"width: 100%\"\n                        />\n                    </el-form-item>\n                </el-form>\n                <template #footer>\n                    <el-button @click=\"batchGenerateDialogVisible = false\">ÂèñÊ∂à</el-button>\n                    <el-button\n                        type=\"primary\"\n                        @click=\"handleBatchGenerate\"\n                        :loading=\"batchGenerating\"\n                    >\n                        ÁîüÊàê\n                    </el-button>\n                </template>\n            </el-dialog>\n\n            <!-- ÁîüÊàêÁªìÊûúÂºπÁ™ó -->\n            <el-dialog\n                v-model=\"resultDialogVisible\"\n                :title=\"resultDialogTitle\"\n                width=\"80%\"\n                :close-on-click-modal=\"false\"\n                class=\"result-dialog\"\n            >\n                <div class=\"result-content\">\n                    <div class=\"result-summary\">\n                        <el-alert\n                            :title=\"`ÊàêÂäüÁîüÊàê ${generatedCards.length} Âº†${selectedCardTypeName}ÔºÅ`\"\n                            type=\"success\"\n                            :closable=\"false\"\n                            show-icon\n                        />\n                    </div>\n\n                    <div class=\"cards-table\">\n                        <el-table :data=\"generatedCards\" border style=\"width: 100%\">\n                            <el-table-column prop=\"cardNumber\" label=\"Âç°Âè∑\" width=\"200\" />\n                            <el-table-column prop=\"cardPassword\" label=\"Âç°ÂØÜ\" width=\"200\" />\n                            <el-table-column prop=\"typeName\" label=\"Á±ªÂûã\" width=\"120\" />\n                            <el-table-column prop=\"points\" label=\"ÁßØÂàÜ\" width=\"100\" />\n                            <el-table-column prop=\"price\" label=\"‰ª∑Ê†º\" width=\"100\">\n                                <template #default=\"{ row }\">\n                                    ¬•{{ row.price }}\n                                </template>\n                            </el-table-column>\n                        </el-table>\n                    </div>\n                </div>\n\n                <template #footer>\n                    <div class=\"dialog-footer\">\n                        <el-button @click=\"resultDialogVisible = false\">ÂÖ≥Èó≠</el-button>\n                        <el-button type=\"primary\" @click=\"copyAllCards\">\n                            <el-icon><DocumentCopy /></el-icon>\n                            ‰∏ÄÈîÆÂ§çÂà∂ÊâÄÊúâÂç°Âè∑Âç°ÂØÜ\n                        </el-button>\n                    </div>\n                </template>\n            </el-dialog>\n        </div>\n    </div>\n\n    <script>\n        const { createApp, ref, reactive, onMounted } = Vue;\n        const { ElMessage, ElMessageBox } = ElementPlus;\n\n        createApp({\n            setup() {\n                // ÂìçÂ∫îÂºèÊï∞ÊçÆ\n                const loading = ref(false);\n                const cardList = ref([]);\n                const generateDialogVisible = ref(false);\n                const batchGenerateDialogVisible = ref(false);\n                const cardTypes = ref([]);\n                const cardTypesLoading = ref(false);\n                const batchGenerating = ref(false);\n                const resultDialogVisible = ref(false);\n                const resultDialogTitle = ref('');\n                const generatedCards = ref([]);\n                const selectedCardTypeName = ref('');\n\n                const generateForm = reactive({\n                    count: 10,\n                    points: 100\n                });\n\n                const batchGenerateForm = reactive({\n                    cardTypeId: null,\n                    count: 5\n                });\n\n                // Ê®°ÊãüÊï∞ÊçÆ\n                const mockCardList = [\n                    {\n                        id: 1,\n                        card_number: 'DEMO001',\n                        card_password: 'ABC123',\n                        type_name: '‰ΩìÈ™åÂç°',\n                        icon: 'üéÅ',\n                        total_points: 20,\n                        remaining_points: 20,\n                        price: 0.00,\n                        bound_username: null,\n                        bound_user_id: null,\n                        bound_at: null,\n                        created_at: new Date().toISOString()\n                    },\n                    {\n                        id: 2,\n                        card_number: 'DEMO002',\n                        card_password: 'DEF456',\n                        type_name: 'Âü∫Á°ÄÂç°',\n                        icon: 'ü•â',\n                        total_points: 300,\n                        remaining_points: 300,\n                        price: 9.90,\n                        bound_username: null,\n                        bound_user_id: null,\n                        bound_at: null,\n                        created_at: new Date().toISOString()\n                    },\n                    {\n                        id: 3,\n                        card_number: 'DEMO003',\n                        card_password: 'GHI789',\n                        type_name: 'È´òÁ∫ßÂç°',\n                        icon: 'ü•à',\n                        total_points: 1000,\n                        remaining_points: 800,\n                        price: 30.00,\n                        bound_username: 'testuser',\n                        bound_user_id: 1,\n                        bound_at: new Date().toISOString(),\n                        created_at: new Date().toISOString()\n                    }\n                ];\n\n                const mockCardTypes = [\n                    { id: 1, name: '‰ΩìÈ™åÂç°', icon: 'üéÅ', points: 20, price: 0.00, description: 'ÂÖçË¥π‰ΩìÈ™åÂç°ÔºåÊØèÂº†20ÁßØÂàÜ' },\n                    { id: 2, name: 'Âü∫Á°ÄÂç°', icon: 'ü•â', points: 300, price: 9.90, description: 'ÈÄÇÂêàËΩªÂ∫¶‰ΩøÁî®ÁöÑÁî®Êà∑' },\n                    { id: 3, name: 'È´òÁ∫ßÂç°', icon: 'ü•à', points: 1000, price: 30.00, description: 'ÈÄÇÂêà‰∏≠Â∫¶‰ΩøÁî®ÁöÑÁî®Êà∑' },\n                    { id: 4, name: 'Ëá≥Â∞äÂç°', icon: 'ü•á', points: 2000, price: 50.00, description: 'ÈÄÇÂêàÈáçÂ∫¶‰ΩøÁî®ÁöÑÁî®Êà∑' }\n                ];\n\n                // ÊñπÊ≥ï\n                const formatDate = (date) => {\n                    if (!date) return '';\n                    return new Date(date).toLocaleString();\n                };\n\n                const loadCards = async () => {\n                    loading.value = true;\n                    try {\n                        // Ê®°ÊãüAPIË∞ÉÁî®\n                        await new Promise(resolve => setTimeout(resolve, 500));\n                        cardList.value = mockCardList;\n                        ElMessage.success('Á≠âÁ∫ßÂç°ÂàóË°®Âä†ËΩΩÊàêÂäü');\n                    } catch (error) {\n                        console.error('Âä†ËΩΩÁ≠âÁ∫ßÂç°ÂàóË°®Â§±Ë¥•:', error);\n                        ElMessage.error('Âä†ËΩΩÁ≠âÁ∫ßÂç°ÂàóË°®Â§±Ë¥•');\n                    } finally {\n                        loading.value = false;\n                    }\n                };\n\n                const showGenerateDialog = () => {\n                    generateDialogVisible.value = true;\n                };\n\n                const showBatchGenerateDialog = async () => {\n                    await loadCardTypes();\n                    batchGenerateDialogVisible.value = true;\n                };\n\n                const loadCardTypes = async () => {\n                    cardTypesLoading.value = true;\n                    try {\n                        // Ê®°ÊãüAPIË∞ÉÁî®\n                        await new Promise(resolve => setTimeout(resolve, 300));\n                        cardTypes.value = mockCardTypes;\n                    } catch (error) {\n                        console.error('Âä†ËΩΩÁ≠âÁ∫ßÂç°Á±ªÂûãÂ§±Ë¥•:', error);\n                        ElMessage.error('Âä†ËΩΩÁ≠âÁ∫ßÂç°Á±ªÂûãÂ§±Ë¥•');\n                    } finally {\n                        cardTypesLoading.value = false;\n                    }\n                };\n\n                const handleGenerate = async () => {\n                    try {\n                        // Ê®°ÊãüÁîüÊàê‰ΩìÈ™åÂç°\n                        await new Promise(resolve => setTimeout(resolve, 800));\n                        ElMessage.success(`Â∑≤ÁîüÊàê ${generateForm.count} Âº†‰ΩìÈ™åÂç°`);\n                        generateDialogVisible.value = false;\n                        loadCards();\n                    } catch (error) {\n                        console.error('ÁîüÊàê‰ΩìÈ™åÂç°Â§±Ë¥•:', error);\n                        ElMessage.error('ÁîüÊàê‰ΩìÈ™åÂç°Â§±Ë¥•');\n                    }\n                };\n\n                const handleBatchGenerate = async () => {\n                    if (!batchGenerateForm.cardTypeId) {\n                        ElMessage.warning('ËØ∑ÈÄâÊã©Á≠âÁ∫ßÂç°Á±ªÂûã');\n                        return;\n                    }\n\n                    if (!batchGenerateForm.count || batchGenerateForm.count <= 0) {\n                        ElMessage.warning('ËØ∑ËæìÂÖ•ÊúâÊïàÁöÑÁîüÊàêÊï∞Èáè');\n                        return;\n                    }\n\n                    batchGenerating.value = true;\n                    try {\n                        // Ê®°ÊãüÁîüÊàêÁ≠âÁ∫ßÂç°\n                        await new Promise(resolve => setTimeout(resolve, 1000));\n\n                        const selectedCardType = cardTypes.value.find(type => type.id === batchGenerateForm.cardTypeId);\n                        selectedCardTypeName.value = selectedCardType?.name || 'Á≠âÁ∫ßÂç°';\n\n                        // ÁîüÊàêÊ®°ÊãüÂç°ÁâáÊï∞ÊçÆ\n                        const cards = [];\n                        for (let i = 1; i <= batchGenerateForm.count; i++) {\n                            const cardNumber = `DEMO${Date.now().toString().slice(-6)}${i.toString().padStart(3, '0')}`;\n                            const cardPassword = Math.random().toString(36).substring(2, 10).toUpperCase();\n\n                            cards.push({\n                                cardNumber,\n                                cardPassword,\n                                typeName: selectedCardType.name,\n                                points: selectedCardType.points,\n                                price: selectedCardType.price\n                            });\n                        }\n\n                        generatedCards.value = cards;\n                        resultDialogTitle.value = `ÁîüÊàêÁªìÊûú - ${selectedCardTypeName.value}`;\n\n                        batchGenerateDialogVisible.value = false;\n                        resultDialogVisible.value = true;\n\n                        ElMessage.success(`ÊàêÂäüÁîüÊàê${batchGenerateForm.count}Âº†${selectedCardTypeName.value}ÔºÅ`);\n\n                        // Âà∑Êñ∞ÂàóË°®\n                        loadCards();\n                    } catch (error) {\n                        console.error('ÊâπÈáèÁîüÊàêÁ≠âÁ∫ßÂç°Â§±Ë¥•:', error);\n                        ElMessage.error('ÊâπÈáèÁîüÊàêÁ≠âÁ∫ßÂç°Â§±Ë¥•');\n                    } finally {\n                        batchGenerating.value = false;\n                    }\n                };\n\n                const copyAllCards = async () => {\n                    if (generatedCards.value.length === 0) {\n                        ElMessage.warning('Ê≤°ÊúâÂèØÂ§çÂà∂ÁöÑÂç°Áâá‰ø°ÊÅØ');\n                        return;\n                    }\n\n                    try {\n                        let copyText = `${selectedCardTypeName.value} - ÂÖ±${generatedCards.value.length}Âº†\\n\\n`;\n                        copyText += 'Âç°Âè∑\\tÂç°ÂØÜ\\tÁ±ªÂûã\\tÁßØÂàÜ\\t‰ª∑Ê†º\\n';\n                        copyText += '----------------------------------------\\n';\n\n                        generatedCards.value.forEach(card => {\n                            copyText += `${card.cardNumber}\\t${card.cardPassword}\\t${card.typeName}\\t${card.points}\\t¬•${card.price}\\n`;\n                        });\n\n                        copyText += '\\nÁîüÊàêÊó∂Èó¥: ' + new Date().toLocaleString();\n\n                        await navigator.clipboard.writeText(copyText);\n                        ElMessage.success('Âç°Âè∑Âç°ÂØÜ‰ø°ÊÅØÂ∑≤Â§çÂà∂Âà∞Ââ™Ë¥¥Êùø');\n                    } catch (error) {\n                        console.error('Â§çÂà∂Â§±Ë¥•:', error);\n                        ElMessage.error('Â§çÂà∂Â§±Ë¥•ÔºåËØ∑ÊâãÂä®Â§çÂà∂');\n                    }\n                };\n\n                const handleUnbind = async (row) => {\n                    try {\n                        await ElMessageBox.confirm(\n                            `Á°ÆÂÆöË¶ÅËß£ÁªëÁ≠âÁ∫ßÂç° \"${row.card_number}\" ÂêóÔºü`,\n                            'Á°ÆËÆ§Êìç‰Ωú',\n                            {\n                                confirmButtonText: 'Á°ÆÂÆö',\n                                cancelButtonText: 'ÂèñÊ∂à',\n                                type: 'warning'\n                            }\n                        );\n\n                        // Ê®°ÊãüËß£ÁªëÊìç‰Ωú\n                        await new Promise(resolve => setTimeout(resolve, 500));\n                        ElMessage.success('Á≠âÁ∫ßÂç°Ëß£ÁªëÊàêÂäü');\n                        loadCards();\n                    } catch (error) {\n                        if (error !== 'cancel') {\n                            console.error('Ëß£ÁªëÁ≠âÁ∫ßÂç°Â§±Ë¥•:', error);\n                            ElMessage.error('Ëß£ÁªëÁ≠âÁ∫ßÂç°Â§±Ë¥•');\n                        }\n                    }\n                };\n\n                // È°µÈù¢Âä†ËΩΩÊó∂Ëé∑ÂèñÊï∞ÊçÆ\n                onMounted(() => {\n                    loadCards();\n                });\n\n                return {\n                    loading,\n                    cardList,\n                    generateDialogVisible,\n                    batchGenerateDialogVisible,\n                    cardTypes,\n                    cardTypesLoading,\n                    batchGenerating,\n                    resultDialogVisible,\n                    resultDialogTitle,\n                    generatedCards,\n                    selectedCardTypeName,\n                    generateForm,\n                    batchGenerateForm,\n                    formatDate,\n                    loadCards,\n                    showGenerateDialog,\n                    showBatchGenerateDialog,\n                    handleGenerate,\n                    handleBatchGenerate,\n                    copyAllCards,\n                    handleUnbind\n                };\n            }\n        }).use(ElementPlus).mount('#app');\n    </script>\n</body>\n</html>\n"
        }
    ]
}