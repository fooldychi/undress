{
    "sourceFile": "admin/src/views/Layout.vue",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 2,
            "patches": [
                {
                    "date": 1752312653295,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1752312679524,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -97,8 +97,9 @@\n <script setup>\n import { ref, computed, onMounted } from 'vue'\n import { useRoute, useRouter } from 'vue-router'\n import { ElMessageBox, ElMessage } from 'element-plus'\n+import { Setting } from '@element-plus/icons-vue'\n import { getUser, clearAuth } from '@/utils/auth'\n import { logout } from '@/api/auth'\n \n const route = useRoute()\n"
                },
                {
                    "date": 1752312711492,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -185,16 +185,16 @@\n   font-weight: bold;\n   gap: 8px;\n }\n \n-.logo-img {\n-  width: 32px;\n-  height: 32px;\n+.logo-icon {\n+  font-size: 32px;\n+  color: #409eff;\n }\n \n-.logo-img-mini {\n-  width: 24px;\n-  height: 24px;\n+.logo-icon-mini {\n+  font-size: 24px;\n+  color: #409eff;\n }\n \n .logo-text {\n   font-size: 16px;\n"
                }
            ],
            "date": 1752312653295,
            "name": "Commit-0",
            "content": "<template>\n  <div class=\"layout-container\">\n    <el-container>\n      <!-- 侧边栏 -->\n      <el-aside :width=\"isCollapse ? '64px' : '200px'\" class=\"sidebar\">\n        <div class=\"logo\">\n          <el-icon v-if=\"!isCollapse\" class=\"logo-icon\"><Setting /></el-icon>\n          <span v-if=\"!isCollapse\" class=\"logo-text\">iComfy Admin</span>\n          <el-icon v-else class=\"logo-icon-mini\"><Setting /></el-icon>\n        </div>\n\n        <el-menu\n          :default-active=\"activeMenu\"\n          :collapse=\"isCollapse\"\n          :unique-opened=\"true\"\n          background-color=\"#304156\"\n          text-color=\"#bfcbd9\"\n          active-text-color=\"#409eff\"\n          router\n        >\n          <el-menu-item index=\"/dashboard\">\n            <el-icon><DataBoard /></el-icon>\n            <template #title>仪表盘</template>\n          </el-menu-item>\n\n          <el-menu-item index=\"/users\">\n            <el-icon><User /></el-icon>\n            <template #title>用户管理</template>\n          </el-menu-item>\n\n          <el-menu-item index=\"/cards\">\n            <el-icon><CreditCard /></el-icon>\n            <template #title>等级卡管理</template>\n          </el-menu-item>\n\n          <el-menu-item index=\"/points\">\n            <el-icon><Coin /></el-icon>\n            <template #title>积分记录</template>\n          </el-menu-item>\n\n          <el-menu-item index=\"/config\">\n            <el-icon><Setting /></el-icon>\n            <template #title>系统配置</template>\n          </el-menu-item>\n        </el-menu>\n      </el-aside>\n\n      <!-- 主内容区 -->\n      <el-container>\n        <!-- 顶部导航 -->\n        <el-header class=\"header\">\n          <div class=\"header-left\">\n            <el-button\n              type=\"text\"\n              @click=\"toggleSidebar\"\n              class=\"collapse-btn\"\n            >\n              <el-icon><Expand v-if=\"isCollapse\" /><Fold v-else /></el-icon>\n            </el-button>\n\n            <el-breadcrumb separator=\"/\">\n              <el-breadcrumb-item :to=\"{ path: '/dashboard' }\">首页</el-breadcrumb-item>\n              <el-breadcrumb-item v-if=\"breadcrumbTitle\">{{ breadcrumbTitle }}</el-breadcrumb-item>\n            </el-breadcrumb>\n          </div>\n\n          <div class=\"header-right\">\n            <el-dropdown @command=\"handleCommand\">\n              <span class=\"user-info\">\n                <el-avatar :size=\"32\" :src=\"userInfo?.avatar\">\n                  <el-icon><User /></el-icon>\n                </el-avatar>\n                <span class=\"username\">{{ userInfo?.username || 'Admin' }}</span>\n                <el-icon><ArrowDown /></el-icon>\n              </span>\n              <template #dropdown>\n                <el-dropdown-menu>\n                  <el-dropdown-item command=\"logout\">\n                    <el-icon><SwitchButton /></el-icon>\n                    退出登录\n                  </el-dropdown-item>\n                </el-dropdown-menu>\n              </template>\n            </el-dropdown>\n          </div>\n        </el-header>\n\n        <!-- 主要内容 -->\n        <el-main class=\"main-content\">\n          <router-view />\n        </el-main>\n      </el-container>\n    </el-container>\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed, onMounted } from 'vue'\nimport { useRoute, useRouter } from 'vue-router'\nimport { ElMessageBox, ElMessage } from 'element-plus'\nimport { getUser, clearAuth } from '@/utils/auth'\nimport { logout } from '@/api/auth'\n\nconst route = useRoute()\nconst router = useRouter()\n\nconst isCollapse = ref(false)\nconst userInfo = ref(null)\n\n// 当前激活的菜单\nconst activeMenu = computed(() => {\n  return route.path\n})\n\n// 面包屑标题\nconst breadcrumbTitle = computed(() => {\n  const meta = route.meta\n  if (meta && meta.title) {\n    return meta.title.replace(' - iComfy管理系统', '')\n  }\n  return ''\n})\n\n// 切换侧边栏\nconst toggleSidebar = () => {\n  isCollapse.value = !isCollapse.value\n}\n\n// 处理下拉菜单命令\nconst handleCommand = async (command) => {\n  if (command === 'logout') {\n    try {\n      await ElMessageBox.confirm(\n        '确定要退出登录吗？',\n        '提示',\n        {\n          confirmButtonText: '确定',\n          cancelButtonText: '取消',\n          type: 'warning'\n        }\n      )\n\n      // 调用登出接口\n      try {\n        await logout()\n      } catch (error) {\n        console.warn('登出接口调用失败:', error)\n      }\n\n      // 清除本地认证信息\n      clearAuth()\n\n      ElMessage.success('已退出登录')\n      router.push('/login')\n    } catch (error) {\n      // 用户取消\n    }\n  }\n}\n\nonMounted(() => {\n  // 获取用户信息\n  userInfo.value = getUser()\n})\n</script>\n\n<style scoped>\n.layout-container {\n  height: 100vh;\n}\n\n.sidebar {\n  background-color: #304156;\n  transition: width 0.3s;\n}\n\n.logo {\n  height: 60px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background-color: #2b3a4b;\n  color: white;\n  font-weight: bold;\n  gap: 8px;\n}\n\n.logo-img {\n  width: 32px;\n  height: 32px;\n}\n\n.logo-img-mini {\n  width: 24px;\n  height: 24px;\n}\n\n.logo-text {\n  font-size: 16px;\n}\n\n.header {\n  background: white;\n  border-bottom: 1px solid #e4e7ed;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 0 20px;\n}\n\n.header-left {\n  display: flex;\n  align-items: center;\n  gap: 20px;\n}\n\n.collapse-btn {\n  font-size: 18px;\n  color: #606266;\n}\n\n.header-right {\n  display: flex;\n  align-items: center;\n}\n\n.user-info {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  cursor: pointer;\n  padding: 8px 12px;\n  border-radius: 4px;\n  transition: background-color 0.3s;\n}\n\n.user-info:hover {\n  background-color: #f5f7fa;\n}\n\n.username {\n  font-size: 14px;\n  color: #606266;\n}\n\n.main-content {\n  background-color: #f0f2f5;\n  padding: 20px;\n  overflow-y: auto;\n}\n\n@media (max-width: 768px) {\n  .header {\n    padding: 0 10px;\n  }\n\n  .main-content {\n    padding: 10px;\n  }\n\n  .username {\n    display: none;\n  }\n}\n</style>\n"
        }
    ]
}