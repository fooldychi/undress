{
    "sourceFile": "admin/src/utils/direct-request.js",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1752406459774,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1752406459774,
            "name": "Commit-0",
            "content": "import axios from 'axios'\nimport { ElMessage } from 'element-plus'\nimport { getToken } from './auth'\n\n// åˆ›å»ºç›´æ¥è¿æ¥åˆ°åç«¯çš„axioså®ä¾‹\nconst directService = axios.create({\n  baseURL: 'http://localhost:3009/api', // ç›´æ¥è¿æ¥åˆ°åç«¯\n  timeout: 30000,\n  headers: {\n    'Content-Type': 'application/json'\n  }\n})\n\n// è¯·æ±‚æ‹¦æˆªå™¨\ndirectService.interceptors.request.use(\n  config => {\n    console.log('ğŸš€ ç›´æ¥è¯·æ±‚:', config.method?.toUpperCase(), config.url)\n\n    // æ·»åŠ tokenåˆ°è¯·æ±‚å¤´\n    const token = getToken()\n    if (token) {\n      config.headers.Authorization = `Bearer ${token}`\n    }\n\n    return config\n  },\n  error => {\n    console.error('âŒ è¯·æ±‚æ‹¦æˆªå™¨é”™è¯¯:', error)\n    return Promise.reject(error)\n  }\n)\n\n// å“åº”æ‹¦æˆªå™¨\ndirectService.interceptors.response.use(\n  response => {\n    console.log('âœ… ç›´æ¥å“åº”:', response.status, response.config.url)\n    return response.data\n  },\n  error => {\n    console.error('âŒ ç›´æ¥å“åº”é”™è¯¯:', error)\n\n    if (error.response) {\n      const { status, data } = error.response\n      console.error(`âŒ HTTP ${status}:`, data)\n\n      if (status === 401) {\n        ElMessage.error('è®¤è¯å¤±è´¥ï¼Œè¯·é‡æ–°ç™»å½•')\n      } else if (status === 403) {\n        ElMessage.error('æƒé™ä¸è¶³')\n      } else if (status === 500) {\n        ElMessage.error('æœåŠ¡å™¨å†…éƒ¨é”™è¯¯')\n      } else {\n        ElMessage.error(data?.message || 'è¯·æ±‚å¤±è´¥')\n      }\n    } else if (error.request) {\n      console.error('âŒ ç½‘ç»œé”™è¯¯:', error.request)\n      ElMessage.error('ç½‘ç»œè¿æ¥å¤±è´¥')\n    } else {\n      console.error('âŒ è¯·æ±‚é…ç½®é”™è¯¯:', error.message)\n      ElMessage.error('è¯·æ±‚é…ç½®é”™è¯¯')\n    }\n\n    return Promise.reject(error)\n  }\n)\n\nexport default directService\n"
        }
    ]
}