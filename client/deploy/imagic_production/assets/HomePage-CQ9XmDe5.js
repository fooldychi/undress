import{r as c,c as _,w as M,a as v,b as E,o as f,d as s,e as d,v as g,f as I,g as V,t as U,n as L,h as Y,i as $,u as x}from"./index-gs9uwCed.js";import{resetToDefaultConfig as P,updateComfyUIConfig as w,getCurrentConfig as X}from"./comfyui-G2arkMwc.js";import{_ as O}from"./_plugin-vue_export-helper-DlAUqK2U.js";const D={class:"modal-body"},N={class:"config-section"},h={class:"config-section"},z={class:"config-section"},F={class:"config-section"},A={class:"config-section"},q=["disabled"],B={key:0,class:"loading-spinner"},H={class:"result-icon"},j={class:"result-text"},G={class:"config-section"},W={class:"preset-buttons"},J={class:"modal-footer"},K=["disabled"],Q={__name:"ConfigModal",props:{visible:{type:Boolean,default:!1}},emits:["close","saved"],setup(p,{emit:m}){const u=p,r=m,l=c({COMFYUI_SERVER_URL:"",USE_PROXY:!0,PROXY_SERVER_URL:"http://localhost:3008/api",CLIENT_ID:"",TIMEOUT:3e5}),i=_({get:()=>Math.floor(l.value.TIMEOUT/1e3),set:a=>{l.value.TIMEOUT=a*1e3}}),e=c(!1),o=c(null),R=_(()=>l.value.COMFYUI_SERVER_URL&&l.value.COMFYUI_SERVER_URL.startsWith("http")&&l.value.CLIENT_ID&&l.value.TIMEOUT>0);M(()=>u.visible,a=>{a&&(y(),o.value=null)});const y=()=>{const a=X();l.value={...a}},T=async()=>{if(!R.value){o.value={success:!1,error:"è¯·å¡«å†™æœ‰æ•ˆçš„é…ç½®ä¿¡æ¯"};return}e.value=!0,o.value=null;try{const a=l.value.USE_PROXY?`${l.value.PROXY_SERVER_URL}/system_stats`:`${l.value.COMFYUI_SERVER_URL}/system_stats`;console.log("æµ‹è¯•è¿žæŽ¥:",a,"ä½¿ç”¨ä»£ç†:",l.value.USE_PROXY);const t=await fetch(a,{method:"GET",signal:AbortSignal.timeout(1e4)});if(t.ok){const n=await t.json();o.value={success:!0,data:n}}else throw new Error(`HTTP ${t.status}: ${t.statusText}`)}catch(a){o.value={success:!1,error:a.message||"è¿žæŽ¥å¤±è´¥"}}finally{e.value=!1}},b=a=>{switch(a){case"default":l.value={COMFYUI_SERVER_URL:"https://dzqgp58z0s-8188.cnb.run",USE_PROXY:!0,PROXY_SERVER_URL:"http://localhost:3008/api",CLIENT_ID:"abc1373d4ad648a3a81d0587fbe5534b",TIMEOUT:3e5};break;case"local":l.value={COMFYUI_SERVER_URL:"http://localhost:8188",USE_PROXY:!1,PROXY_SERVER_URL:"http://localhost:3008/api",CLIENT_ID:"local_client_id",TIMEOUT:3e5};break;case"current":l.value={COMFYUI_SERVER_URL:"https://dzqgp58z0s-8188.cnb.run",USE_PROXY:!0,PROXY_SERVER_URL:"http://localhost:3008/api",CLIENT_ID:"abc1373d4ad648a3a81d0587fbe5534b",TIMEOUT:3e5};break}o.value=null},S=()=>{R.value&&(w(l.value),r("saved",l.value),C())},k=()=>{const a=P();l.value={...a},o.value=null},C=()=>{r("close")};return(a,t)=>p.visible?(f(),v("div",{key:0,class:"modal-overlay",onClick:C},[s("div",{class:"modal-content",onClick:t[7]||(t[7]=Y(()=>{},["stop"]))},[s("div",{class:"modal-header"},[t[8]||(t[8]=s("h2",null,"ComfyUI æœåŠ¡å™¨é…ç½®",-1)),s("button",{class:"close-btn",onClick:C},"Ã—")]),s("div",D,[t[19]||(t[19]=s("p",{style:{"margin-bottom":"20px",color:"#666","font-size":"14px"}}," é…ç½®åŽŸå§‹ComfyUIæœåŠ¡å™¨åœ°å€ï¼ˆå¦‚: https://dzqgp58z0s-8188.cnb.runï¼‰ ",-1)),s("div",N,[t[9]||(t[9]=s("label",{for:"comfyui-url"},"ComfyUIæœåŠ¡å™¨åœ°å€:",-1)),d(s("input",{id:"comfyui-url","onUpdate:modelValue":t[0]||(t[0]=n=>l.value.COMFYUI_SERVER_URL=n),type:"url",placeholder:"https://dzqgp58z0s-8188.cnb.run",class:"config-input"},null,512),[[g,l.value.COMFYUI_SERVER_URL]]),t[10]||(t[10]=s("small",{class:"help-text"},"åŽŸå§‹ComfyUIæœåŠ¡å™¨çš„å®Œæ•´URLåœ°å€",-1))]),s("div",h,[s("label",null,[d(s("input",{type:"checkbox","onUpdate:modelValue":t[1]||(t[1]=n=>l.value.USE_PROXY=n),style:{"margin-right":"8px"}},null,512),[[V,l.value.USE_PROXY]]),t[11]||(t[11]=I(" ä½¿ç”¨ä»£ç†æœåŠ¡å™¨ï¼ˆæŽ¨èï¼‰ "))]),t[12]||(t[12]=s("small",{class:"help-text"},"å¯ç”¨ä»£ç†æœåŠ¡å™¨å¯ä»¥é¿å…CORSè·¨åŸŸé—®é¢˜ï¼Œæé«˜è¿žæŽ¥ç¨³å®šæ€§",-1))]),s("div",z,[t[13]||(t[13]=s("label",{for:"client-id"},"å®¢æˆ·ç«¯ID:",-1)),d(s("input",{id:"client-id","onUpdate:modelValue":t[2]||(t[2]=n=>l.value.CLIENT_ID=n),type:"text",placeholder:"abc1373d4ad648a3a81d0587fbe5534b",class:"config-input"},null,512),[[g,l.value.CLIENT_ID]]),t[14]||(t[14]=s("small",{class:"help-text"},"ç”¨äºŽæ ‡è¯†å®¢æˆ·ç«¯çš„å”¯ä¸€ID",-1))]),s("div",F,[t[15]||(t[15]=s("label",{for:"timeout"},"è¯·æ±‚è¶…æ—¶ (ç§’):",-1)),d(s("input",{id:"timeout","onUpdate:modelValue":t[3]||(t[3]=n=>i.value=n),type:"number",min:"30",max:"600",class:"config-input"},null,512),[[g,i.value,void 0,{number:!0}]]),t[16]||(t[16]=s("small",{class:"help-text"},"APIè¯·æ±‚çš„è¶…æ—¶æ—¶é—´ï¼Œå»ºè®®300ç§’",-1))]),s("div",A,[t[17]||(t[17]=s("h3",null,"è¿žæŽ¥æµ‹è¯•",-1)),s("button",{onClick:T,disabled:e.value,class:"test-btn"},[e.value?(f(),v("span",B)):E("",!0),I(" "+U(e.value?"æµ‹è¯•ä¸­...":"æµ‹è¯•è¿žæŽ¥"),1)],8,q),o.value?(f(),v("div",{key:0,class:L(["test-result",{success:o.value.success,error:!o.value.success}])},[s("div",H,U(o.value.success?"âœ…":"âŒ"),1),s("div",j,U(o.value.success?"è¿žæŽ¥æˆåŠŸï¼":`è¿žæŽ¥å¤±è´¥: ${o.value.error}`),1)],2)):E("",!0)]),s("div",G,[t[18]||(t[18]=s("h3",null,"é¢„è®¾é…ç½®",-1)),s("div",W,[s("button",{onClick:t[4]||(t[4]=n=>b("default")),class:"preset-btn"},"é»˜è®¤é…ç½®"),s("button",{onClick:t[5]||(t[5]=n=>b("local")),class:"preset-btn"},"æœ¬åœ°å¼€å‘"),s("button",{onClick:t[6]||(t[6]=n=>b("current")),class:"preset-btn"},"å½“å‰åœ°å€")])])]),s("div",J,[s("button",{onClick:k,class:"btn btn-secondary"},"é‡ç½®é»˜è®¤"),s("button",{onClick:S,class:"btn btn-primary",disabled:!R.value},"ä¿å­˜é…ç½®",8,K)])])])):E("",!0)}},Z=O(Q,[["__scopeId","data-v-007319ef"]]),ss={class:"home"},ts={class:"container"},es={class:"main"},ls={class:"features"},os={class:"footer"},as={class:"footer-actions"},ns={__name:"HomePage",setup(p){const m=x(),u=c(!1),r=i=>{try{console.log("å¯¼èˆªåˆ°:",i),m.push(i)}catch(e){console.error("å¯¼èˆªå¤±è´¥:",e),alert(`å¯¼èˆªåˆ° ${i} å¤±è´¥ï¼Œè¯·åˆ·æ–°é¡µé¢é‡è¯•`)}},l=i=>{console.log("é…ç½®å·²ä¿å­˜:",i),u.value=!1,alert("é…ç½®å·²ä¿å­˜")};return(i,e)=>(f(),v("div",ss,[s("div",ts,[e[9]||(e[9]=s("header",{class:"header"},[s("h1",{class:"title"},[s("span",{class:"logo"},"ðŸŽ¨"),I(" Imagic - æµ‹è¯•ç‰ˆ ")]),s("p",{class:"subtitle"},"AIé©±åŠ¨çš„å›¾åƒå¤„ç†åº”ç”¨ (Vueæ­£å¸¸å·¥ä½œ!)")],-1)),s("main",es,[s("div",ls,[s("div",{class:"feature-card",onClick:e[0]||(e[0]=o=>r("/clothes-swap"))},e[5]||(e[5]=[s("div",{class:"feature-icon"},"ðŸ‘”",-1),s("h2",{class:"feature-title"},"ä¸€é”®æ¢è¡£",-1),s("p",{class:"feature-description"},"æ™ºèƒ½è¯†åˆ«äººç‰©è½®å»“ï¼Œå¿«é€Ÿæ›´æ¢ç…§ç‰‡ä¸­çš„æœè£…æ¬¾å¼",-1),s("div",{class:"feature-arrow"},"â†’",-1)])),s("div",{class:"feature-card",onClick:e[1]||(e[1]=o=>r("/text-to-image"))},e[6]||(e[6]=[s("div",{class:"feature-icon"},"ðŸ–¼ï¸",-1),s("h2",{class:"feature-title"},"æ–‡ç”Ÿå›¾",-1),s("p",{class:"feature-description"},"é€šè¿‡è‡ªç„¶è¯­è¨€æè¿°ï¼ŒAIç”Ÿæˆé«˜è´¨é‡çš„åˆ›æ„å›¾åƒ",-1),s("div",{class:"feature-arrow"},"â†’",-1)])),s("div",{class:"feature-card",onClick:e[2]||(e[2]=o=>r("/face-swap"))},e[7]||(e[7]=[s("div",{class:"feature-icon"},"ðŸ˜€",-1),s("h2",{class:"feature-title"},"æžé€Ÿæ¢è„¸",-1),s("p",{class:"feature-description"},"ç²¾å‡†é¢éƒ¨è¯†åˆ«æŠ€æœ¯ï¼Œå®žçŽ°è‡ªç„¶çš„äººè„¸æ›¿æ¢æ•ˆæžœ",-1),s("div",{class:"feature-arrow"},"â†’",-1)]))])]),s("footer",os,[e[8]||(e[8]=s("p",null,"Â© 2024 Imagic. åŸºäºŽComfyUIå·¥ä½œæµçš„AIå›¾åƒå¤„ç†å¹³å°",-1)),s("div",as,[s("button",{onClick:e[3]||(e[3]=o=>u.value=!u.value),class:"config-btn"},"âš™ï¸ é…ç½®")])]),$(Z,{visible:u.value,onClose:e[4]||(e[4]=o=>u.value=!1),onSaved:l},null,8,["visible"])])]))}},ds=O(ns,[["__scopeId","data-v-788f641e"]]);export{ds as default};
