import{r as c,a as t,o,d as s,i as k,l as C,m as x,f as p,b as v,e as g,g as f,t as I}from"./index-gs9uwCed.js";import{_ as B}from"./_plugin-vue_export-helper-DlAUqK2U.js";const V={class:"feature-page"},F={class:"container"},D={class:"page-header"},E={class:"page-content"},N={class:"upload-section"},R={class:"upload-grid"},S={class:"upload-card"},U={for:"source-upload",class:"upload-area"},A={key:0,class:"upload-placeholder"},L={key:1,class:"image-preview"},M=["src"],T={class:"upload-card"},z={for:"target-upload",class:"upload-area"},P={key:0,class:"upload-placeholder"},j={key:1,class:"image-preview"},Q=["src"],q={key:0,class:"action-section"},G={class:"swap-options"},H={class:"option-group"},J=["disabled"],K={class:"option-group"},O=["disabled"],W=["disabled"],X={key:0,class:"loading"},Y={key:0,class:"result-section"},Z={class:"result-card"},$={class:"result-comparison"},ss={class:"comparison-item"},es=["src"],as={class:"comparison-item"},ls=["src"],ts={class:"result-actions"},os=["href"],ns={__name:"FaceSwap",setup(is){const u=c(null),l=c(null),n=c(null),i=c(!1),_=c(!0),m=c(!1),b=a=>{const e=a.target.files[0];if(e){if(e.size>10*1024*1024){alert("文件大小不能超过10MB");return}const d=new FileReader;d.onload=r=>{u.value=r.target.result,n.value=null},d.readAsDataURL(e)}},h=a=>{const e=a.target.files[0];if(e){if(e.size>10*1024*1024){alert("文件大小不能超过10MB");return}const d=new FileReader;d.onload=r=>{l.value=r.target.result,n.value=null},d.readAsDataURL(e)}},y=async()=>{if(!(!u.value||!l.value)){i.value=!0;try{await new Promise(a=>setTimeout(a,3e3)),n.value=l.value}catch(a){console.error("换脸失败:",a),alert("换脸失败，请重试")}finally{i.value=!1}}},w=()=>{u.value=null,l.value=null,n.value=null;const a=document.getElementById("source-upload"),e=document.getElementById("target-upload");a&&(a.value=""),e&&(e.value="")};return(a,e)=>{const d=x("router-link");return o(),t("div",V,[s("div",F,[s("header",D,[k(d,{to:"/",class:"back-btn"},{default:C(()=>e[2]||(e[2]=[s("span",{class:"back-icon"},"←",-1),p(" 返回首页 ")])),_:1,__:[2]}),e[3]||(e[3]=s("h1",{class:"page-title"},[s("span",{class:"page-icon"},"😀"),p(" 极速换脸 ")],-1)),e[4]||(e[4]=s("p",{class:"page-description"},"上传两张照片，AI将实现自然的人脸替换",-1))]),s("main",E,[s("div",N,[s("div",R,[s("div",S,[e[7]||(e[7]=s("h3",{class:"upload-title"},"源脸部图片",-1)),s("input",{type:"file",accept:"image/*",onChange:b,id:"source-upload",class:"hidden"},null,32),s("label",U,[u.value?(o(),t("div",L,[s("img",{src:u.value,alt:"源脸部预览",class:"preview-image"},null,8,M),e[6]||(e[6]=s("div",{class:"image-overlay"},[s("span",null,"点击更换")],-1))])):(o(),t("div",A,e[5]||(e[5]=[s("div",{class:"upload-icon"},"👤",-1),s("p",null,"选择源脸部图片",-1),s("span",{class:"upload-hint"},"要替换的脸部",-1)])))])]),e[11]||(e[11]=s("div",{class:"swap-arrow"},[s("span",{class:"arrow-icon"},"⇄")],-1)),s("div",T,[e[10]||(e[10]=s("h3",{class:"upload-title"},"目标图片",-1)),s("input",{type:"file",accept:"image/*",onChange:h,id:"target-upload",class:"hidden"},null,32),s("label",z,[l.value?(o(),t("div",j,[s("img",{src:l.value,alt:"目标图片预览",class:"preview-image"},null,8,Q),e[9]||(e[9]=s("div",{class:"image-overlay"},[s("span",null,"点击更换")],-1))])):(o(),t("div",P,e[8]||(e[8]=[s("div",{class:"upload-icon"},"🖼️",-1),s("p",null,"选择目标图片",-1),s("span",{class:"upload-hint"},"要被替换脸部的图片",-1)])))])])]),u.value&&l.value?(o(),t("div",q,[s("div",G,[s("div",H,[s("label",null,[g(s("input",{type:"checkbox","onUpdate:modelValue":e[0]||(e[0]=r=>_.value=r),disabled:i.value},null,8,J),[[f,_.value]]),e[12]||(e[12]=p(" 保持原表情 "))])]),s("div",K,[s("label",null,[g(s("input",{type:"checkbox","onUpdate:modelValue":e[1]||(e[1]=r=>m.value=r),disabled:i.value},null,8,O),[[f,m.value]]),e[13]||(e[13]=p(" 增强画质 "))])])]),s("button",{onClick:y,disabled:i.value,class:"btn btn-primary swap-btn"},[i.value?(o(),t("span",X)):v("",!0),p(" "+I(i.value?"处理中...":"开始换脸"),1)],8,W)])):v("",!0)]),n.value?(o(),t("div",Y,[s("div",Z,[e[17]||(e[17]=s("h3",{class:"result-title"},"换脸结果",-1)),s("div",$,[s("div",ss,[e[14]||(e[14]=s("h4",null,"原图",-1)),s("img",{src:l.value,alt:"原图",class:"comparison-image"},null,8,es)]),e[16]||(e[16]=s("div",{class:"comparison-arrow"},"→",-1)),s("div",as,[e[15]||(e[15]=s("h4",null,"结果",-1)),s("img",{src:n.value,alt:"换脸结果",class:"comparison-image"},null,8,ls)])]),s("div",ts,[s("a",{href:n.value,download:"face-swap-result.jpg",class:"btn btn-primary download-btn"}," 下载图片 ",8,os),s("button",{onClick:w,class:"btn btn-secondary"}," 重新处理 ")])])])):v("",!0)])])])}}},us=B(ns,[["__scopeId","data-v-baa1a642"]]);export{us as default};
