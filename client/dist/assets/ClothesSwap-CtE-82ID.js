import{_ as L,c as k,o as x,a as s,b as h,p as _,q as I,s as w,T as a}from"./index-C86wnvRP.js";import"./UnifiedImageProcessingTemplate.vue_vue_type_style_index_0_scoped_1007aace_lang-DFlU2A78.js";import{U as E}from"./UnifiedImageProcessingTemplate-4EyDP7sV.js";import"./MobileActionButton-LKZSR4NQ.js";import"./SvgIcon-BzDbydhb.js";const M={__name:"ClothesSwap",setup(C,{expose:f}){f(),console.log("ClothesSwapç»„ä»¶å·²åŠ è½½ï¼ŒComfyUIæœåŠ¡å·²å¯¼å…¥");const c=s(null),o=s(null),i=s(null),l=s(null),r=s(!1),t=s(""),g=s(""),m=s(""),d=s(0),p=s(null),U=(e,n)=>{console.log("ä¸Šä¼ å˜åŒ–:",e,n),e==="main-image"&&(o.value=n,l.value=null)},y=async()=>{if(!o.value){a.fail("è¯·å…ˆä¸Šä¼ äººç‰©ç…§ç‰‡");return}r.value=!0,t.value="æ­£åœ¨åˆå§‹åŒ–...",p.value=Date.now();try{console.log("ðŸš€ å¼€å§‹ä¸€é”®è¤ªè¡£å¤„ç†");const e=await w(o.value,(n,u)=>{t.value=n,d.value=u||0,console.log(`ðŸ“Š å¤„ç†çŠ¶æ€: ${n}, è¿›åº¦: ${u}%`)});if(e.success&&e.resultImage){console.log("âœ… å¤„ç†æˆåŠŸï¼Œæ˜¾ç¤ºç»“æžœ"),l.value=e.resultImage,i.value=e.originalImage||o.value,g.value=e.promptId||"";const n=Date.now(),u=Math.round((n-p.value)/1e3);m.value=`${u}ç§’`;const D=e.pointsConsumed?`ï¼ˆæ¶ˆè€—${e.pointsConsumed}ç‚¹ï¼‰`:"";a.success(`ðŸŽ‰ å¤„ç†å®Œæˆï¼${D}`),console.log("âœ… è¤ªè¡£å¤„ç†å®Œæˆ")}else throw console.error("âŒ å¤„ç†å¤±è´¥ï¼Œç»“æžœæ— æ•ˆ"),new Error(e.error||"è¤ªè¡£å¤„ç†å¤±è´¥")}catch(e){console.error("âŒ è¤ªè¡£å¤„ç†å¤±è´¥:",e),I(e,"è¤ªè¡£å¤„ç†")||a.fail(`å¤„ç†å¤±è´¥: ${e.message}`)}finally{r.value=!1,t.value="",d.value=0}},T=()=>{if(o.value=null,i.value=null,l.value=null,t.value="",g.value="",m.value="",c.value){const{uploadData:e}=c.value;e["main-image"]&&(e["main-image"]=null)}a.success("å·²é‡ç½®ï¼Œå¯ä»¥é‡æ–°é€‰æ‹©å›¾ç‰‡")},P=e=>{if(!e)return;const n=document.createElement("a");n.href=e,n.download=`clothes_swap_result_${Date.now()}.png`,document.body.appendChild(n),n.click(),document.body.removeChild(n),a.success("å›¾ç‰‡ä¸‹è½½å·²å¼€å§‹")},S=e=>{console.log("ç”¨æˆ·ç™»å½•æˆåŠŸ:",e)},b=()=>{console.log("ç”¨æˆ·å·²ç™»å‡º")};h(()=>{console.log("ClothesSwapç»„ä»¶å·²æŒ‚è½½ï¼ŒComfyUIæœåŠ¡å·²å‡†å¤‡å°±ç»ª")}),_(()=>{r.value&&(r.value=!1)});const v={templateRef:c,selectedImage:o,originalImageForComparison:i,resultImage:l,isLoading:r,processingStatus:t,promptId:g,processingTime:m,progressPercent:d,startTime:p,handleUploadChange:U,processImage:y,resetProcess:T,handleDownload:P,handleUserLogin:S,handleUserLogout:b,ref:s,onMounted:h,onUnmounted:_,get Toast(){return a},get UnifiedImageProcessingTemplate(){return E},get processUndressImage(){return w},get handleError(){return I}};return Object.defineProperty(v,"__isScriptSetup",{enumerable:!1,value:!0}),v}};function R(C,f,c,o,i,l){return x(),k(o.UnifiedImageProcessingTemplate,{"function-id":"clothes-swap","title-icon-name":"undress-woman","title-icon-color":"var(--van-primary-color)","process-button-icon-name":"undress-woman","is-processing":o.isLoading,progress:o.progressPercent,"processing-description":o.processingStatus,"processing-info":{promptId:o.promptId,processingTime:o.processingTime},"result-data":o.resultImage,"original-image-for-comparison":o.originalImageForComparison,onLogin:o.handleUserLogin,onLogout:o.handleUserLogout,onProcess:o.processImage,onReset:o.resetProcess,onDownload:o.handleDownload,onUploadChange:o.handleUploadChange,ref:"templateRef"},null,8,["is-processing","progress","processing-description","processing-info","result-data","original-image-for-comparison"])}const q=L(M,[["render",R],["__scopeId","data-v-66df3ef7"],["__file","D:/workspace/AIMagic/client/src/views/ClothesSwap.vue"]]);export{q as default};
