import{_ as j,r as w,c as f,o as l,w as u,u as k,a as C,b as $,l as d,T as y,d as R,e as S,f as i,g as z,F as A,h as F,t as P,i as _,n as D,j as B,k as N,m as L}from"./index-C86wnvRP.js";import{M as O,a as H}from"./UnifiedImageProcessingTemplate.vue_vue_type_style_index_0_scoped_1007aace_lang-DFlU2A78.js";import{S as V}from"./SvgIcon-BzDbydhb.js";const q=[{id:"clothes-swap",title:"一键褪衣",description:"智能识别人物轮廓，快速移除照片中的服装，体验前沿AI技术",route:"/clothes-swap",icon:{type:"svg",name:"undress-woman",size:28,color:"#667eea"},iconClass:"undress-icon",tags:[{text:"AI识别",type:"primary"},{text:"快速处理",type:"success"}],requireLogin:!0,enabled:!0,order:1,category:"image-processing",pointsCost:20,description_admin:"一键褪衣功能管理"},{id:"face-swap",title:"极速换脸",description:"精准面部识别技术，实现自然的人脸替换效果，创造有趣内容",route:"/face-swap",icon:{type:"svg",name:"face-swap",size:28,color:"#f093fb"},iconClass:"faceswap-icon",tags:[{text:"面部识别",type:"warning"},{text:"自然效果",type:"primary"}],requireLogin:!0,enabled:!0,order:2,category:"image-processing",pointsCost:20,description_admin:"极速换脸功能管理"}];function W(){return q.filter(e=>e.enabled).sort((e,t)=>e.order-t.order)}async function M(){try{console.log("🔄 从API获取功能配置...");const r=await fetch("http://114.132.50.71:3007/api/workflow-config/features");if(!r.ok)throw new Error(`HTTP ${r.status}: ${r.statusText}`);const o=await r.json();if(!o.success)throw new Error(o.message||"获取功能配置失败");const a=o.data.map(g=>{const n={...g};return n.icon&&n.icon.type==="custom"&&(n.icon.component==="UndressWomanIcon"?n.icon={type:"svg",name:"undress-woman",size:n.icon.size||28,color:n.icon.color||"#667eea"}:n.icon.component==="FaceSwapIcon"&&(n.icon={type:"svg",name:"face-swap",size:n.icon.size||28,color:n.icon.color||"#f093fb"})),n});return console.log(`✅ 获取到 ${a.length} 个启用的功能`),a}catch(e){return console.warn("⚠️ 从API获取功能配置失败，使用默认配置:",e.message),W()}}function T(e,t=!1){const{color:r,opacity:o=.2}=e,a=t?o+.1:o,g=t?o+.2:o+.1,n=G(r);return n?{background:`linear-gradient(135deg, rgba(${n.r}, ${n.g}, ${n.b}, ${a}), rgba(${n.r}, ${n.g}, ${n.b}, ${a-.1}))`,backdropFilter:"blur(10px)",WebkitBackdropFilter:"blur(10px)",border:`1px solid rgba(${n.r}, ${n.g}, ${n.b}, ${g})`}:(console.warn("Invalid color format:",r),{})}function G(e){if(e=e.replace("#",""),e.length===3&&(e=e.split("").map(a=>a+a).join("")),e.length!==6)return null;const t=parseInt(e.substring(0,2),16),r=parseInt(e.substring(2,4),16),o=parseInt(e.substring(4,6),16);return{r:t,g:r,b:o}}function E(){return typeof window>"u"?!1:window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?!0:document.documentElement.getAttribute("data-theme")==="dark"}function x(e,t){const r=Object.keys(t).map(o=>`  ${o.replace(/([A-Z])/g,"-$1").toLowerCase()}: ${t[o]};`);return`${e} {
${r.join(`
`)}
}`}function U(e,t="dynamic-styles"){if(typeof document>"u")return;let r=document.getElementById(t);r||(r=document.createElement("style"),r.id=t,document.head.appendChild(r)),r.textContent=e}const Z={__name:"HomePage",setup(e,{expose:t}){t();const r=k(),o=C(null),a=C([]),g=()=>{const c=E();let p=[];a.value.forEach(m=>{if(m.iconClass&&m.icon.color){const b=T({color:m.icon.color,opacity:.2},c),v=x(`.${m.iconClass}`,b);p.push(v)}}),p.length>0&&U(p.join(`

`),"feature-icon-styles")};$(async()=>{try{a.value=await M(),g()}catch(c){d.error("获取功能配置失败:",c),y.fail("加载功能列表失败")}});const s={router:r,mobilePageContainerRef:o,featureConfigs:a,generateDynamicStyles:g,navigateTo:c=>{const{route:p,requireLogin:m,title:b}=c;if(d.user(`点击功能: ${b}`),m&&!S.isLoggedIn()){d.debug("未登录，显示登录提示"),y.fail("请先登录后再使用此功能"),o.value&&o.value.showLoginModal();return}try{r.push(p),d.debug(`导航到: ${p}`)}catch(v){d.error("导航失败:",v),y.fail(`导航到 ${b} 失败，请刷新页面重试`)}},handleUserLogin:c=>{d.user("用户登录成功")},handleUserLogout:()=>{d.user("用户已登出")},ref:C,onMounted:$,computed:R,get useRouter(){return k},get Toast(){return y},get MobilePageContainer(){return H},get MobileCard(){return O},get SvgIcon(){return V},get authApi(){return S},get fetchFeaturesFromAPI(){return M},get generateIconStyle(){return T},get isDarkTheme(){return E},get injectCSS(){return U},get createCSSRule(){return x},get logger(){return d}};return Object.defineProperty(s,"__isScriptSetup",{enumerable:!1,value:!0}),s}},J={class:"home-header"},K={class:"welcome-section"},Q={class:"app-title"},X={class:"features-section"},Y={class:"feature-content"},ee={class:"feature-description"},te={class:"feature-tags"};function oe(e,t,r,o,a,g){const n=w("van-notice-bar"),h=w("van-icon"),I=w("van-tag");return l(),f(o.MobilePageContainer,{ref:"mobilePageContainerRef",title:"AI Magic",onLogin:o.handleUserLogin,onLogout:o.handleUserLogout},{notice:u(()=>[L(n,{scrollable:!0,speed:"50",class:"beta-notice"},{default:u(()=>t[0]||(t[0]=[_(" ⚠️ 建议在 "),i("b",null,"22:00-24:00",-1),_(" 时间段使用，保证服务器空闲。 AI应用仅供个人娱乐，请勿在互联网传播 ❕︎ ")])),_:1,__:[0]})]),header:u(()=>[i("div",J,[i("div",K,[i("h1",Q,[L(h,{name:"magic",size:"32",color:"#FFD700"}),t[1]||(t[1]=_(" AI Magic "))]),t[2]||(t[2]=i("p",{class:"app-subtitle"},"智能图像处理，释放创意无限可能",-1))])])]),footer:u(()=>t[3]||(t[3]=[i("div",{class:"home-footer"},[i("div",{class:"footer-content"},[i("p",{class:"copyright"},"© 2025 AI Magic 智能图像处理应用"),i("p",{class:"disclaimer"},"(仅供个人娱乐，请勿在互联网传播，否则后果自负)")])],-1)])),default:u(()=>[i("div",X,[(l(!0),z(A,null,F(o.featureConfigs,s=>(l(),f(o.MobileCard,{key:s.id,title:s.title,clickable:!0,"show-arrow":!0,inset:"",onClick:c=>o.navigateTo(s),class:"feature-card"},{icon:u(()=>[i("div",{class:D(["feature-icon",s.iconClass])},[s.icon.type==="svg"?(l(),f(o.SvgIcon,{key:0,name:s.icon.name,size:s.icon.size,color:s.icon.color},null,8,["name","size","color"])):s.icon.type==="custom"?(l(),f(N(s.icon.component),{key:1,size:s.icon.size,color:s.icon.color},null,8,["size","color"])):s.icon.type==="vant"?(l(),f(h,{key:2,name:s.icon.name,size:s.icon.size,color:s.icon.color},null,8,["name","size","color"])):B("",!0)],2)]),default:u(()=>[i("div",Y,[i("div",ee,P(s.description),1),i("div",te,[(l(!0),z(A,null,F(s.tags,c=>(l(),f(I,{key:c.text,type:c.type,size:"small"},{default:u(()=>[_(P(c.text),1)]),_:2},1032,["type"]))),128))])])]),_:2},1032,["title","onClick"]))),128))])]),_:1},512)}const ae=j(Z,[["render",oe],["__scopeId","data-v-9b48b94e"],["__file","D:/workspace/AIMagic/client/src/views/HomePage.vue"]]);export{ae as default};
