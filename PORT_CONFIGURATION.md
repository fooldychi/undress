# AIMagic é¡¹ç›®ç«¯å£é…ç½®ç»Ÿä¸€ç®¡ç†

## ğŸ”§ ç»Ÿä¸€ç«¯å£é…ç½®

ä¸ºäº†é¿å…ç«¯å£å†²çªå’Œé…ç½®æ··ä¹±ï¼Œé¡¹ç›®é‡‡ç”¨ä»¥ä¸‹ç»Ÿä¸€çš„ç«¯å£é…ç½®ï¼š

### ğŸ“Š ç«¯å£åˆ†é…è¡¨

| æœåŠ¡ | ç«¯å£ | ç”¨é€” | è®¿é—®åœ°å€ |
|------|------|------|----------|
| **å®¢æˆ·ç«¯** | `3001` | ç”¨æˆ·å‰ç«¯ç•Œé¢ | http://localhost:3001 |
| **åå°ç®¡ç†ç³»ç»Ÿ** | `3003` | ç®¡ç†å‘˜ç•Œé¢ | http://localhost:3003 |
| **åç«¯APIæœåŠ¡** | `3007` | æœåŠ¡å™¨API | http://localhost:3007 |

### ğŸ¯ ç«¯å£é…ç½®åŸåˆ™

1. **å®¢æˆ·ç«¯ (3001)**: é¢å‘ç”¨æˆ·çš„å‰ç«¯åº”ç”¨
2. **åå°ç®¡ç† (3003)**: é¢å‘ç®¡ç†å‘˜çš„åå°ç•Œé¢  
3. **åç«¯æœåŠ¡ (3007)**: æä¾›APIæœåŠ¡çš„åç«¯

## ğŸ“ é…ç½®æ–‡ä»¶ä½ç½®

### å®¢æˆ·ç«¯ (Client)
```
client/vite.config.js - ç«¯å£: 3001
client/package.json - å¯åŠ¨è„šæœ¬
```

### åå°ç®¡ç†ç³»ç»Ÿ (Admin)
```
admin/vite.config.js - ç«¯å£: 3003
admin/package.json - å¯åŠ¨è„šæœ¬
admin/start.bat - Windowså¯åŠ¨è„šæœ¬
admin/start.sh - Linux/Macå¯åŠ¨è„šæœ¬
```

### åç«¯æœåŠ¡ (Server)
```
server/src/app.js - ç«¯å£: 3007
server/start.bat - Windowså¯åŠ¨è„šæœ¬
server/start.sh - Linux/Macå¯åŠ¨è„šæœ¬
```

## ğŸš€ å¯åŠ¨é¡ºåº

### 1. å¯åŠ¨åç«¯æœåŠ¡
```bash
cd server
npm start
# æˆ–ä½¿ç”¨å¯åŠ¨è„šæœ¬
start.bat  # Windows
./start.sh # Linux/Mac
```
**è®¿é—®**: http://localhost:3007

### 2. å¯åŠ¨å®¢æˆ·ç«¯
```bash
cd client
npm run dev
```
**è®¿é—®**: http://localhost:3001

### 3. å¯åŠ¨åå°ç®¡ç†ç³»ç»Ÿ
```bash
cd admin
npm run dev
# æˆ–ä½¿ç”¨å¯åŠ¨è„šæœ¬
start.bat  # Windows
./start.sh # Linux/Mac
```
**è®¿é—®**: http://localhost:3003

## âš™ï¸ ä»£ç†é…ç½®

### å®¢æˆ·ç«¯ä»£ç†é…ç½® (client/vite.config.js)
```javascript
server: {
  port: 3001,
  proxy: {
    '/api': {
      target: 'http://localhost:3007',
      changeOrigin: true
    }
  }
}
```

### åå°ç®¡ç†ç³»ç»Ÿä»£ç†é…ç½® (admin/vite.config.js)
```javascript
server: {
  port: 3003,
  proxy: {
    '/api': {
      target: 'http://localhost:3007',
      changeOrigin: true
    }
  }
}
```

## ğŸ”’ CORSé…ç½®

åç«¯æœåŠ¡å™¨éœ€è¦å…è®¸ä»¥ä¸‹ç«¯å£çš„è·¨åŸŸè®¿é—®ï¼š
```javascript
// server/src/app.js
const corsOptions = {
  origin: [
    'http://localhost:3001', // å®¢æˆ·ç«¯
    'http://localhost:3003'  // åå°ç®¡ç†ç³»ç»Ÿ
  ],
  credentials: true
};
```

## ğŸ› ï¸ æ•…éšœæ’é™¤

### ç«¯å£è¢«å ç”¨
å¦‚æœé‡åˆ°ç«¯å£è¢«å ç”¨çš„é—®é¢˜ï¼š

1. **æŸ¥çœ‹ç«¯å£å ç”¨**:
   ```bash
   # Windows
   netstat -ano | findstr :3001
   netstat -ano | findstr :3003
   netstat -ano | findstr :3007
   
   # Linux/Mac
   lsof -i :3001
   lsof -i :3003
   lsof -i :3007
   ```

2. **ç»ˆæ­¢å ç”¨è¿›ç¨‹**:
   ```bash
   # Windows
   taskkill /PID <è¿›ç¨‹ID> /F
   
   # Linux/Mac
   kill -9 <è¿›ç¨‹ID>
   ```

### è®¿é—®å¤±è´¥
å¦‚æœæ— æ³•è®¿é—®æœåŠ¡ï¼š

1. **æ£€æŸ¥æœåŠ¡çŠ¶æ€**: ç¡®è®¤å¯¹åº”æœåŠ¡å·²å¯åŠ¨
2. **æ£€æŸ¥é˜²ç«å¢™**: ç¡®è®¤ç«¯å£æœªè¢«é˜²ç«å¢™é˜»æ­¢
3. **æ£€æŸ¥ä»£ç†é…ç½®**: ç¡®è®¤å‰ç«¯ä»£ç†æŒ‡å‘æ­£ç¡®çš„åç«¯ç«¯å£
4. **æ£€æŸ¥CORSé…ç½®**: ç¡®è®¤åç«¯å…è®¸å‰ç«¯åŸŸåè®¿é—®

## ğŸ“ é…ç½®ä¿®æ”¹æŒ‡å—

### å¦‚éœ€ä¿®æ”¹ç«¯å£ï¼Œè¯·åŒæ—¶æ›´æ–°ä»¥ä¸‹æ–‡ä»¶ï¼š

#### ä¿®æ”¹å®¢æˆ·ç«¯ç«¯å£ (å½“å‰: 3001)
1. `client/vite.config.js` - server.port
2. `server/src/app.js` - CORSé…ç½®ä¸­çš„origin

#### ä¿®æ”¹åå°ç®¡ç†ç³»ç»Ÿç«¯å£ (å½“å‰: 3003)
1. `admin/vite.config.js` - server.port
2. `admin/start.bat` - æ˜¾ç¤ºçš„è®¿é—®åœ°å€
3. `admin/start.sh` - æ˜¾ç¤ºçš„è®¿é—®åœ°å€
4. `server/src/app.js` - CORSé…ç½®ä¸­çš„origin

#### ä¿®æ”¹åç«¯æœåŠ¡ç«¯å£ (å½“å‰: 3007)
1. `server/src/app.js` - app.listen()
2. `server/start.bat` - æ˜¾ç¤ºçš„è®¿é—®åœ°å€
3. `server/start.sh` - æ˜¾ç¤ºçš„è®¿é—®åœ°å€
4. `client/vite.config.js` - proxy.target
5. `admin/vite.config.js` - proxy.target

## âš ï¸ é‡è¦æé†’

1. **é¿å…ç¡¬ç¼–ç ç«¯å£**: æ‰€æœ‰ç«¯å£é…ç½®åº”é›†ä¸­ç®¡ç†ï¼Œé¿å…åœ¨ä»£ç ä¸­ç¡¬ç¼–ç 
2. **ä¿æŒé…ç½®åŒæ­¥**: ä¿®æ”¹ç«¯å£æ—¶å¿…é¡»åŒæ—¶æ›´æ–°æ‰€æœ‰ç›¸å…³é…ç½®æ–‡ä»¶
3. **æµ‹è¯•å®Œæ•´æµç¨‹**: ç«¯å£ä¿®æ”¹åéœ€è¦æµ‹è¯•å‰åç«¯é€šä¿¡æ˜¯å¦æ­£å¸¸
4. **æ–‡æ¡£åŠæ—¶æ›´æ–°**: ç«¯å£å˜æ›´ååŠæ—¶æ›´æ–°ç›¸å…³æ–‡æ¡£

## ğŸ”„ å¿«é€Ÿé‡ç½®

å¦‚æœé‡åˆ°ç«¯å£é…ç½®æ··ä¹±ï¼Œå¯ä»¥æŒ‰ç…§æœ¬æ–‡æ¡£é‡æ–°é…ç½®æ‰€æœ‰ç«¯å£è®¾ç½®ï¼Œç¡®ä¿ç³»ç»Ÿæ­£å¸¸è¿è¡Œã€‚

---

**ç»Ÿä¸€ç«¯å£ç®¡ç†ï¼Œé¿å…é…ç½®å†²çªï¼** ğŸ¯
