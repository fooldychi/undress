# ä¸€é”®å¯åŠ¨è„šæœ¬æ¸…ç†æ€»ç»“

## ğŸ¯ æ¸…ç†ç›®æ ‡

æ¸…ç†é¡¹ç›®ä¸­ä¸é€‚ç”¨äºå‰åç«¯åˆ†ç¦»éƒ¨ç½²æ¶æ„çš„ä¸€é”®å¯åŠ¨è„šæœ¬æ–‡ä»¶ï¼Œç¡®ä¿é¡¹ç›®ç»“æ„ç¬¦åˆç°ä»£åŒ–çš„å¾®æœåŠ¡éƒ¨ç½²æ¨¡å¼ã€‚

## ğŸ—‘ï¸ å·²åˆ é™¤çš„æ–‡ä»¶

### 1. æ ¹ç›®å½•ä¸€é”®å¯åŠ¨è„šæœ¬ (5ä¸ªæ–‡ä»¶)

#### `start-all.sh`
- **åŠŸèƒ½**: Linux/Macä¸‹åŒæ—¶å¯åŠ¨å‰åç«¯æ‰€æœ‰æœåŠ¡
- **åˆ é™¤åŸå› **: ä¸é€‚ç”¨äºå‰åç«¯åˆ†ç¦»éƒ¨ç½²æ¶æ„
- **å†…å®¹**: ä¾æ¬¡å¯åŠ¨serverã€clientã€adminä¸‰ä¸ªæœåŠ¡

#### `start-managed.bat`
- **åŠŸèƒ½**: Windowsæ‰¹å¤„ç†å¯åŠ¨è„šæœ¬
- **åˆ é™¤åŸå› **: è°ƒç”¨å·²åˆ é™¤çš„start-managed.js
- **å†…å®¹**: Windowsç¯å¢ƒä¸‹çš„é¡¹ç›®å¯åŠ¨å™¨

#### `start-managed.js`
- **åŠŸèƒ½**: Node.jsç®¡ç†å¯åŠ¨è„šæœ¬
- **åˆ é™¤åŸå› **: åŒæ—¶å¯åŠ¨å¤šä¸ªæœåŠ¡ï¼Œä¸ç¬¦åˆåˆ†ç¦»éƒ¨ç½²åŸåˆ™
- **å†…å®¹**: è°ƒç”¨ç«¯å£ç®¡ç†å·¥å…·å¯åŠ¨æ‰€æœ‰æœåŠ¡

#### `start-managed.sh`
- **åŠŸèƒ½**: Linux/Macç®¡ç†å¯åŠ¨è„šæœ¬
- **åˆ é™¤åŸå› **: è°ƒç”¨å·²åˆ é™¤çš„start-managed.js
- **å†…å®¹**: Unixç¯å¢ƒä¸‹çš„é¡¹ç›®å¯åŠ¨å™¨

#### `start-stable-server.sh`
- **åŠŸèƒ½**: ç¨³å®šæœåŠ¡å™¨å¯åŠ¨å™¨
- **åˆ é™¤åŸå› **: åªå¯åŠ¨serveræœåŠ¡ï¼Œä½†åŒ…å«å…¨æ ˆå¯åŠ¨æ¦‚å¿µ
- **å†…å®¹**: ä½¿ç”¨è¿›ç¨‹ç®¡ç†å™¨å¯åŠ¨åç«¯æœåŠ¡

### 2. Scriptsç›®å½•å¯åŠ¨è„šæœ¬ (1ä¸ªæ–‡ä»¶)

#### `scripts/start-with-port-management.js`
- **åŠŸèƒ½**: ç«¯å£ç®¡ç†å¯åŠ¨è„šæœ¬
- **åˆ é™¤åŸå› **: åŒæ—¶å¯åŠ¨å‰åç«¯æ‰€æœ‰æœåŠ¡
- **å†…å®¹**: 
  - éªŒè¯ç«¯å£é…ç½®
  - æŒ‰é¡ºåºå¯åŠ¨serverã€clientã€admin
  - ç«¯å£å†²çªå¤„ç†
  - è¿›ç¨‹ç®¡ç†

## ğŸ“ ä¿ç•™çš„æ–‡ä»¶

### 1. å„æ¨¡å—ç‹¬ç«‹å¯åŠ¨è„šæœ¬
- `client/package.json` - å‰ç«¯å¯åŠ¨è„šæœ¬ (`npm run dev`)
- `server/package.json` - åç«¯å¯åŠ¨è„šæœ¬ (`npm start`)
- `admin/package.json` - ç®¡ç†åå°å¯åŠ¨è„šæœ¬ (`npm run dev`)

### 2. éƒ¨ç½²ç›¸å…³è„šæœ¬
- `client/scripts/deploy.js` - å‰ç«¯éƒ¨ç½²è„šæœ¬
- `client/deploy/imagic_production/start.bat` - ç”Ÿäº§ç¯å¢ƒå¯åŠ¨è„šæœ¬

### 3. è¿›ç¨‹ç®¡ç†å’Œä¼˜åŒ–è„šæœ¬
- `server/scripts/process-manager.js` - æœåŠ¡å™¨è¿›ç¨‹ç®¡ç†
- `server/scripts/optimize-database.js` - æ•°æ®åº“ä¼˜åŒ–
- `server/start-with-manager.js` - æœåŠ¡å™¨ç‹¬ç«‹å¯åŠ¨è„šæœ¬

### 4. å·¥å…·è„šæœ¬
- `scripts/port-manager.js` - ç«¯å£ç®¡ç†å·¥å…·
- `scripts/protect-port-config.js` - ç«¯å£é…ç½®ä¿æŠ¤
- `scripts/sync-port-config.js` - ç«¯å£é…ç½®åŒæ­¥
- `scripts/verify-unified-config.js` - é…ç½®éªŒè¯
- `scripts/install-git-hooks.js` - Gité’©å­å®‰è£…

## ğŸ“ æ–‡æ¡£æ›´æ–°

### 1. README.md æ›´æ–°
- **åˆ é™¤**: ç«¯å£ç®¡ç†å·¥å…·å¯åŠ¨æ–¹å¼çš„ä»‹ç»
- **ä¿®æ”¹**: å¯åŠ¨æ–¹å¼æ”¹ä¸ºå‰åç«¯åˆ†ç¦»å¯åŠ¨
- **æ–°å¢**: ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²è¯´æ˜

**ä¿®æ”¹å‰**:
```bash
# æ¨èæ–¹å¼ï¼šä½¿ç”¨ç«¯å£ç®¡ç†å·¥å…·
start-managed.bat  # Windows
./start-managed.sh # Linux/Mac
node start-managed.js
```

**ä¿®æ”¹å**:
```bash
# å‰åç«¯åˆ†ç¦»å¯åŠ¨
cd server && npm start    # åç«¯æœåŠ¡
cd client && npm run dev  # å‰ç«¯æœåŠ¡  
cd admin && npm run dev   # ç®¡ç†åå°
```

### 2. STARTUP_GUIDE.md æ›´æ–°
- **åˆ é™¤**: "åŒæ—¶å¯åŠ¨æ‰€æœ‰æœåŠ¡"ç« èŠ‚
- **åˆ é™¤**: å…¨æ ˆå¯åŠ¨è„šæœ¬ç¤ºä¾‹ä»£ç 
- **ä¿®æ”¹**: æ”¹ä¸ºå‰åç«¯åˆ†ç¦»éƒ¨ç½²è¯´æ˜

**åˆ é™¤çš„å†…å®¹**:
- Windowsæ‰¹å¤„ç†å¯åŠ¨è„šæœ¬ç¤ºä¾‹
- Linux/Macå¯åŠ¨è„šæœ¬ç¤ºä¾‹
- ä¸€é”®å¯åŠ¨çš„æ¨èæ–¹å¼

**æ–°å¢çš„å†…å®¹**:
- å‰åç«¯åˆ†ç¦»æ¶æ„è¯´æ˜
- ç‹¬ç«‹å¯åŠ¨å„æœåŠ¡çš„æ–¹æ³•
- ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²å»ºè®®

## ğŸ—ï¸ æ¶æ„å˜åŒ–

### ä¿®æ”¹å‰ (å…¨æ ˆå¯åŠ¨æ¨¡å¼)
```
é¡¹ç›®æ ¹ç›®å½•/
â”œâ”€â”€ start-all.sh           # ä¸€é”®å¯åŠ¨æ‰€æœ‰æœåŠ¡
â”œâ”€â”€ start-managed.bat      # Windowså¯åŠ¨å™¨
â”œâ”€â”€ start-managed.js       # Node.jså¯åŠ¨å™¨
â”œâ”€â”€ start-managed.sh       # Unixå¯åŠ¨å™¨
â”œâ”€â”€ start-stable-server.sh # ç¨³å®šæœåŠ¡å™¨å¯åŠ¨
â””â”€â”€ scripts/
    â””â”€â”€ start-with-port-management.js # ç«¯å£ç®¡ç†å¯åŠ¨
```

### ä¿®æ”¹å (åˆ†ç¦»éƒ¨ç½²æ¨¡å¼)
```
é¡¹ç›®æ ¹ç›®å½•/
â”œâ”€â”€ client/
â”‚   â”œâ”€â”€ package.json       # ç‹¬ç«‹å‰ç«¯å¯åŠ¨
â”‚   â””â”€â”€ scripts/deploy.js  # å‰ç«¯éƒ¨ç½²è„šæœ¬
â”œâ”€â”€ server/
â”‚   â”œâ”€â”€ package.json       # ç‹¬ç«‹åç«¯å¯åŠ¨
â”‚   â””â”€â”€ start-with-manager.js # æœåŠ¡å™¨è¿›ç¨‹ç®¡ç†
â”œâ”€â”€ admin/
â”‚   â””â”€â”€ package.json       # ç‹¬ç«‹ç®¡ç†åå°å¯åŠ¨
â””â”€â”€ scripts/
    â”œâ”€â”€ port-manager.js    # ç«¯å£ç®¡ç†å·¥å…·
    â””â”€â”€ å…¶ä»–å·¥å…·è„šæœ¬...
```

## âœ… æ¸…ç†æ•ˆæœ

### 1. æ¶æ„ä¼˜åŠ¿
- **å¾®æœåŠ¡åŒ–**: å„æœåŠ¡ç‹¬ç«‹å¯åŠ¨å’Œéƒ¨ç½²
- **å®¹å™¨åŒ–å‹å¥½**: æ¯ä¸ªæœåŠ¡å¯ç‹¬ç«‹æ‰“åŒ…ä¸ºå®¹å™¨
- **æ‰©å±•æ€§**: å¯ä»¥ç‹¬ç«‹æ‰©å±•å„ä¸ªæœåŠ¡
- **ç»´æŠ¤æ€§**: æœåŠ¡é—´è§£è€¦ï¼Œä¾¿äºç»´æŠ¤

### 2. éƒ¨ç½²ä¼˜åŠ¿
- **çµæ´»éƒ¨ç½²**: å¯ä»¥å°†æœåŠ¡éƒ¨ç½²åˆ°ä¸åŒçš„æœåŠ¡å™¨
- **è´Ÿè½½å‡è¡¡**: å¯ä»¥ä¸ºä¸åŒæœåŠ¡é…ç½®ä¸åŒçš„è´Ÿè½½ç­–ç•¥
- **èµ„æºä¼˜åŒ–**: æ ¹æ®æœåŠ¡ç‰¹ç‚¹åˆ†é…åˆé€‚çš„èµ„æº
- **æ•…éšœéš”ç¦»**: å•ä¸ªæœåŠ¡æ•…éšœä¸å½±å“å…¶ä»–æœåŠ¡

### 3. å¼€å‘ä¼˜åŠ¿
- **å›¢é˜Ÿåä½œ**: ä¸åŒå›¢é˜Ÿå¯ä»¥ç‹¬ç«‹å¼€å‘å„è‡ªçš„æœåŠ¡
- **æŠ€æœ¯æ ˆ**: å„æœåŠ¡å¯ä»¥ä½¿ç”¨ä¸åŒçš„æŠ€æœ¯æ ˆ
- **ç‰ˆæœ¬ç®¡ç†**: å„æœåŠ¡å¯ä»¥ç‹¬ç«‹ç‰ˆæœ¬æ§åˆ¶å’Œå‘å¸ƒ
- **æµ‹è¯•éš”ç¦»**: å¯ä»¥ç‹¬ç«‹æµ‹è¯•å„ä¸ªæœåŠ¡

## ğŸ”„ è¿ç§»æŒ‡å—

### å¼€å‘ç¯å¢ƒå¯åŠ¨
```bash
# åŸæ¥çš„æ–¹å¼ (å·²åˆ é™¤)
./start-all.sh

# ç°åœ¨çš„æ–¹å¼
# ç»ˆç«¯1
cd server && npm start

# ç»ˆç«¯2  
cd client && npm run dev

# ç»ˆç«¯3
cd admin && npm run dev
```

### ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²
```bash
# åç«¯APIæœåŠ¡
cd server
npm install --production
npm start

# å‰ç«¯é™æ€æ–‡ä»¶
cd client
npm install
npm run build
# å°†distç›®å½•éƒ¨ç½²åˆ°CDNæˆ–é™æ€æœåŠ¡å™¨

# ç®¡ç†åå°
cd admin  
npm install
npm run build
# å°†distç›®å½•éƒ¨ç½²åˆ°å†…ç½‘æœåŠ¡å™¨
```

## ğŸ“Š æ¸…ç†ç»Ÿè®¡

- **åˆ é™¤æ–‡ä»¶æ•°**: 6ä¸ª
- **æ›´æ–°æ–‡æ¡£æ•°**: 2ä¸ª
- **ä¿ç•™å·¥å…·è„šæœ¬**: 8ä¸ª
- **ä¿ç•™éƒ¨ç½²è„šæœ¬**: 2ä¸ª

## ğŸ¯ åç»­å»ºè®®

1. **å®¹å™¨åŒ–**: ä¸ºæ¯ä¸ªæœåŠ¡åˆ›å»ºç‹¬ç«‹çš„Dockerfile
2. **CI/CD**: å»ºç«‹ç‹¬ç«‹çš„æ„å»ºå’Œéƒ¨ç½²æµæ°´çº¿
3. **ç›‘æ§**: ä¸ºå„æœåŠ¡é…ç½®ç‹¬ç«‹çš„ç›‘æ§å’Œæ—¥å¿—
4. **é…ç½®ç®¡ç†**: ä½¿ç”¨ç¯å¢ƒå˜é‡æˆ–é…ç½®ä¸­å¿ƒç®¡ç†å„æœåŠ¡é…ç½®
5. **APIç½‘å…³**: è€ƒè™‘ä½¿ç”¨APIç½‘å…³ç»Ÿä¸€ç®¡ç†æœåŠ¡å…¥å£

é€šè¿‡è¿™æ¬¡æ¸…ç†ï¼Œé¡¹ç›®æ¶æ„æ›´åŠ ç¬¦åˆç°ä»£åŒ–çš„å¾®æœåŠ¡éƒ¨ç½²æ¨¡å¼ï¼Œä¸ºåç»­çš„å®¹å™¨åŒ–å’Œäº‘åŸç”Ÿéƒ¨ç½²å¥ å®šäº†åŸºç¡€ã€‚
